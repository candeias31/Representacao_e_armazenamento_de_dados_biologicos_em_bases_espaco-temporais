define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.user_management.current_user","pgadmin.browser.messages","pgadmin.server.supported_servers"],function(__WEBPACK_EXTERNAL_MODULE__41__,__WEBPACK_EXTERNAL_MODULE__42__,__WEBPACK_EXTERNAL_MODULE__48__,__WEBPACK_EXTERNAL_MODULE__60__,__WEBPACK_EXTERNAL_MODULE__99__,__WEBPACK_EXTERNAL_MODULE__109__){return function(l){function e(e){var t=e[0];var i=e[1];var n=e[2];var r,o,a=0,s=[];for(;a<t.length;a++){o=t[a];if(Object.prototype.hasOwnProperty.call(c,o)&&c[o]){s.push(c[o][0])}c[o]=0}for(r in i){if(Object.prototype.hasOwnProperty.call(i,r)){l[r]=i[r]}}if(f)f(e);while(s.length){s.shift()()}u.push.apply(u,n||[]);return d()}function d(){var e;for(var t=0;t<u.length;t++){var i=u[t];var n=true;for(var r=1;r<i.length;r++){var o=i[r];if(c[o]!==0)n=false}if(n){u.splice(t--,1);e=a(a.s=i[0])}}return e}var i={};var c={7:0,3:0};var u=[];function a(e){if(i[e]){return i[e].exports}var t=i[e]={i:e,l:false,exports:{}};l[e].call(t.exports,t,t.exports,a);t.l=true;return t.exports}a.m=l;a.c=i;a.d=function(e,t,i){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:i})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(t,e){if(e&1)t=a(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var i=Object.create(null);a.r(i);Object.defineProperty(i,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i};a.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};a.d(e,"a",e);return e};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";var t=window["webpackJsonp"]=window["webpackJsonp"]||[];var n=t.push.bind(t);t.push=e;t=t.slice();for(var r=0;r<t.length;r++)e(t[r]);var f=n;u.push([326,1,0]);return d()}([,,function(e,t,i){"use strict";var n,r;!(n=[i(41)],r=function(s){return function e(t,r){var i=s[t]?s[t]:t;var n=/([^%]*)%\(([^\)]+)\)s(.*)/;var o;var a=i;do{o=false;a=a.replace(n,function(e,t,i,n){o=true;return t+r[i]+n})}while(o);return a}}.apply(t,n),r!==undefined&&(e.exports=r))},function(n,r,e){"use strict";(function(e){var t,i;function y(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){y=function e(t){return typeof t}}else{y=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return y(e)}!(t=[],i=function(){var e=window.pgAdmin=window.pgAdmin||{};(function(e,t,c){"use strict";function u(e,t,i,n){i=i||"width";var r,o,a,s=(t.match(g)||[])[2],l="px"===s?1:v[s+"toPx"],d=/r?em/i;if(l||d.test(s)&&!n)e=l?e:"rem"===s?p:"fontSize"===i?e.parentNode||e:e,l=l||parseFloat(f(e,"fontSize")),a=parseFloat(t)*l;else{r=e.style,o=r[i];try{r[i]=t}catch(e){return 0}a=r[i]?parseFloat(f(e,i)):0,r[i]=o!==c?o:null}return a}function f(e,t){var i,n,r,o,a,s=/^top|bottom/,l=["paddingTop","paddingBottom","borderTop","borderBottom"],d=4;n=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)];i=m?m(e)[t]:n?n+"px":"fontSize"===t?u(e,"1em","left",1)+"px":e.currentStyle[t];r=(i.match(g)||[])[2];if("%"===r&&h){if(s.test(t)){for(o=(a=e.parentNode||e).offsetHeight;d--;){o-=parseFloat(f(a,l[d]))}i=parseFloat(i)/100*o+"px"}else i=u(e,i)}else("auto"===i||r&&"px"!==r)&&m?i=0:r&&"px"!==r&&!m&&(i=u(e,i)+"px");return i}var h,i=t.createElement("test"),p=t.documentElement,n=t.defaultView,m=n&&n.getComputedStyle,g=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,v={},r=[1/25.4,1/2.54,1/72,1/6],o=["mm","cm","pt","pc","in","mozmm"],a=6;for(p.appendChild(i),m&&(i.style.marginTop="1%",h="1%"===m(i).marginTop);a--;){v[o[a]+"toPx"]=r[a]?r[a]*v.inToPx:u(i,"1"+o[a])}p.removeChild(i),i=c,e.toPx=u})(e,window.document);e.natural_sort=function(e,t,i){i=i||{};var n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,s=/^0/,l=function e(t){return i.insensitive&&(""+t).toLowerCase()||""+t},d=l(e).replace(r,"")||"",c=l(t).replace(r,"")||"",u=d.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(d.match(a))||u.length!==1&&d.match(o)&&Date.parse(d),p=parseInt(c.match(a))||h&&c.match(o)&&Date.parse(c)||null,m,g,v=i.desc?-1:1;if(p)if(h<p)return-1*v;else if(h>p)return 1*v;for(var _=0,b=Math.max(u.length,f.length);_<b;_++){m=!(u[_]||"").match(s)&&parseFloat(u[_])||u[_]||0;g=!(f[_]||"").match(s)&&parseFloat(f[_])||f[_]||0;if(isNaN(m)!==isNaN(g)){return(isNaN(m)?1:-1)*v}else if(y(m)!==y(g)){m+="";g+=""}if(m<g)return-1*v;if(m>g)return 1*v}return 0};return e}.apply(r,t),i!==undefined&&(n.exports=i))}).call(this,e(3))},function(e,t,i){"use strict";var n,r;!(n=[i(42)],r=function(a){return function e(t,r){var i=a[t];var n=/([<])([^:^>]*:)?([^>]+)([>])/g,o=i;if(!i)return i;o=o.replace(n,function(e,t,i,n){if(n in r){return r[n]}return e});return o}}.apply(t,n),r!==undefined&&(e.exports=r))},,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.childCreateMenuEnabled=o;t.isTreeItemOfChildOfSchema=a;t.isTreeNodeOfSchemaChild=s;var r=n(i(5));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function o(e,t,i){if(i&&i.check===false){return true}var n=r.treeMenu.findNodeByDomElement(t);if(n)return n.anyFamilyMember(function(e){return e.getData()._type==="schema"});return false}function a(e,t){var i=r.treeMenu.findNodeByDomElement(t);if(i)return s(i);return false}function s(e){return e.anyParent(function(e){return e.getData()._type==="schema"})}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SchemaChildNode=void 0;var n=o(i(27));var r=o(i(11));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}var a=n.extend({parent_type:["schema","catalog"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,canCreate:r.childCreateMenuEnabled},false);t.SchemaChildNode=a},,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseShortcutValue=a;t.findAndSetFocus=s;t.getEpoch=u;t.getGCD=f;t.getMod=h;t.parseFuncParams=p;t.quote_ident=m;t.fully_qualify=g;t.getRandomInt=v;t.isString=t.isFunction=t.isValidData=void 0;var n=r(i(1));var o=i(20);function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t="";if(e.alt){t+="alt+"}if(e.shift){t+="shift+"}if(e.control){t+="ctrl+"}t+=e.key.char.toLowerCase();return t}function s(t){if(t.length==0){return}setTimeout(function(){var e=t.find("button.fa-plus:first");if(e.length==0){e=t.find("\n          .pgadmin-controls:first input:enabled,\n          .pgadmin-controls:first .btn:not(.toggle),\n          .CodeMirror-scroll").find('*[tabindex]:not([tabindex="-1"])')}if(e.length>0){e[0].focus()}else{t[0].focus()}},200)}var l=function e(t){return!n.default.isUndefined(t)&&!n.default.isNull(t)};t.isValidData=l;var d=function e(t){return n.default.isFunction(t)};t.isFunction=d;var c=function e(t){return n.default.isString(t)};t.isString=c;function u(e){var t=e?e:new Date;return parseInt(t.getTime()/1e3)}function f(e){var t=function e(t,i){return t==0?i:e(i%t,t)};var i=e.length;if(i<=2){return t(e[0],e[1])}var n=e[0];for(var r=1;r<i;r++){n=t(e[r],n)}return n}function h(e,t){return(e%t+t)%t}function p(e){var t=[],i="",n="";if(e.endsWith("()")){i=e.substring(0,e.length-2)}else if(!e.endsWith(")")){i=e}else if(!e.endsWith("()")&&e.endsWith(")")){var r=0,o=e.length;r=e.length-2;while(r>=0){if(e[r]=="("){o=r;break}else if(e[r]=='"'){r--;while(e[r]!='"'){r--}}r--}i=e.substring(0,o);n=e.substring(o+1,e.length-1);var a=0,s="",l=["IN","OUT","INOUT","VARIADIC"];a=r=0;while(r<n.length){if(n[r]=='"'){r++;while(n[r]!='"'){r++}}else if(n[r]==" "){if(s==""||l.indexOf(s)>-1){s=n.substring(a,r);a=r+1}}else if(n[r]==","){t.push([s,n.substring(a,r)]);s="";a=r+1}r++}t.push([s,n.substring(a)])}return{func_name:i,param_string:n,params:t}}function m(e){var t=false;if(!isNaN(parseInt(e))){t=true}if(e.search(/[^a-z0-9_]/g)>-1){e=e.replace(/"/g,'""');t=true}if(t){return'"'.concat(e,'"')}else{return e}}function g(e,t,i){var n=o.getTreeNodeHierarchyFromIdentifier.call(e,i);var r="";if(n.schema!==undefined){r=m(n.schema._label)}else if(n.view!==undefined){r=m(n.view._label)}else if(n.catalog!==undefined){r=m(n.catalog._label)}if(n.package!==undefined&&t._type!="package"){if(r==""){r=m(n.package._label)}else{r+="."+m(n.package._label)}}if(r!=""){return r+"."+m(t._label)}else{return m(t._label)}}function v(e,t){e=Math.ceil(e);t=Math.floor(t);return Math.floor(Math.random()*(t-e+1))+e}},,,function(e,i,t){"use strict";(function(a){Object.defineProperty(i,"__esModule",{value:true});i.getTreeNodeHierarchyFromElement=e;i.getTreeNodeHierarchyFromIdentifier=t;i.getTreeNodeHierarchy=n;function e(e,t){return n.call(e,t)}function t(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e);var i=this.treeMenu.findNode(t);return n.call(this,i)}function n(e){var t=0;var i=0;var n={};do{var r=e.getData();if(r._type in this.Nodes&&this.Nodes[r._type].hasId){var o=s(r._type,i);if(n[o]===undefined){n[o]=a.extend({},r,{priority:t});t-=1}}i+=1;e=e.hasParent()?e.parent():null}while(e);return n}function s(e,t){return e==="partition"&&t>0?"table":e}}).call(this,t(1))},,function(t,i,o){var a,s;
/*
  Backform
  http://github.com/amiliaapp/backform

  Copyright (c) 2014 Amilia Inc.
  Written by Martin Drapeau
  Licensed under the MIT @license
 */
/*
  Backform
  http://github.com/amiliaapp/backform

  Copyright (c) 2014 Amilia Inc.
  Written by Martin Drapeau
  Licensed under the MIT @license
 */
(function(n,r){if(true){!(a=[o(1),o(0),o(9)],s=function(e,t,i){return r(n,e,t,i)}.apply(i,a),s!==undefined&&(t.exports=s))}else{var e}})(this,function(e,d,c,u){Backform=e.Backform={formClassName:"backform form-inline",groupClassName:"form-group row",controlLabelClassName:"col-sm-2 col-form-label",controlContainerClassName:"col-sm-10",controlsClassName:"col-sm-8",controlClassName:"form-control",controlFormInlineClassName:"form-inline",helpClassName:"form-text",errorClassName:"has-error",helpMessageClassName:"form-text text-muted",hiddenClassName:"d-none",requiredInputClassName:undefined,resolveNameToClass:function(e,t){if(d.isString(e)){var i=d.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+t;var n=Backform[i];if(d.isUndefined(n)){throw new ReferenceError("Class '"+i+"' not found")}return n}return e}};var t=Backform.Form=u.View.extend({fields:undefined,errorModel:undefined,tagName:"form",className:function(){return Backform.formClassName},initialize:function(e){if(!(e.fields instanceof u.Collection))e.fields=new o(e.fields||this.fields);this.fields=e.fields;this.model.errorModel=e.errorModel||this.model.errorModel||new u.Model;this.controls=[]},cleanup:function(){d.each(this.controls,function(e){e.remove()});this.controls.length=0},remove:function(){this.cleanup();u.View.prototype.remove.apply(this,arguments)},render:function(){this.cleanup();this.$el.empty();var e=this,i=this.$el,n=this.model,r=this.controls;this.fields.each(function(e){var t=new(e.get("control"))({field:e,model:n});i.append(t.render().$el);r.push(t)});return this}});var i=Backform.ControlFormatter=function(){};d.extend(i.prototype,{fromRaw:function(e,t){return e},toRaw:function(e,t){return e}});var n=Backform.JSONFormatter=function(){};d.extend(n.prototype,{fromRaw:function(e,t){return JSON.stringify(e)},toRaw:function(e,t){return JSON.parse(e)}});var r=Backform.Field=u.Model.extend({defaults:{name:"",placeholder:"",disabled:false,visible:true,required:false,value:undefined,control:undefined,formatter:undefined},initialize:function(e,t){var i=Backform.resolveNameToClass(this.get("control"),"Control");this.set({control:i},{silent:true})}});var o=Backform.Fields=u.Collection.extend({model:r});var a=Backform.Control=u.View.extend({defaults:{},className:function(){return Backform.groupClassName},events:{"keydown :input":"processTab"},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <span readonly class="<%=Backform.controlClassName%>" value="<%=value%>">',"</div>"].join("\n")),initialize:function(e){this.field=e.field;var t=Backform.resolveNameToClass(this.field.get("formatter")||this.formatter,"Formatter");if(!d.isFunction(t.fromRaw)&&!d.isFunction(t.toRaw)){t=new t}this.formatter=t;var i=this.field.get("name").split(".");var n=i.shift();this.listenTo(this.model,"change:"+n,this.render);if(this.model.errorModel instanceof u.Model)this.listenTo(this.model.errorModel,"change:"+n,this.updateInvalid)},formatter:i,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find(".uneditable-input").text(),this.model)},onChange:function(e){var t=this.model,i=c(e.target),n=this.field.get("name").split("."),r=n.shift(),o=n.join("."),a=this.getValueFromDOM(),s={};if(this.model.errorModel instanceof u.Model){if(d.isEmpty(o)){this.model.errorModel.unset(r)}else{var l=this.model.errorModel.get(r);if(l){this.keyPathSetter(l,o,null);this.model.errorModel.set(r,l)}}}s[r]=d.isEmpty(o)?a:d.clone(t.get(r))||{};if(!d.isEmpty(o))this.keyPathSetter(s[r],o,a);this.stopListening(this.model,"change:"+r,this.render);t.set(s);this.listenTo(this.model,"change:"+r,this.render)},render:function(){var e=d.defaults(this.field.toJSON(),this.defaults),t=this.model.toJSON(),i=e.name.split("."),n=i.shift(),r=i.join("."),o=this.keyPathAccessor(t[n],r),a=d.extend(e,{rawValue:o,value:this.formatter.fromRaw(o,this.model),attributes:t,formatter:this.formatter}),s=function(e,t){return d.isFunction(e)?!!e(t):!!e};d.extend(a,{disabled:s(a.disabled,this.model),visible:s(a.visible,this.model),required:s(a.required,this.model)});this.$el.removeClass(Backform.hiddenClassName);if(!a.visible)this.$el.addClass(Backform.hiddenClassName);if(Backform.requiredInputClassName){this.$el.removeClass(Backform.requiredInputClassName)}if(a.required){this.$el.addClass(Backform.requiredInputClassName)}this.$el.html(this.template(a)).addClass(e.name);this.updateInvalid();return this},clearInvalid:function(){this.$el.removeClass(Backform.errorClassName).find("."+Backform.helpClassName+".error").remove();return this},updateInvalid:function(){var a=this;var s=this.model.errorModel;if(!(s instanceof u.Model))return this;this.clearInvalid();this.$el.find(":input").not("button").each(function(e,t){var i=c(t).attr("name").split("."),n=i.shift(),r=i.join("."),o=a.keyPathAccessor(s.toJSON(),c(t).attr("name"));if(d.isEmpty(o))return;a.$el.addClass(Backform.errorClassName);if(e===0){a.$el.find("."+Backform.controlsClassName).append('<span class="'+Backform.helpClassName+' error">'+(d.isArray(o)?o.join(", "):o)+"</span>")}});return this},keyPathAccessor:function(e,t){var i=e;t=t.split(".");for(var n=0;n<t.length;n++){if(d.isNull(i))return null;if(d.isEmpty(t[n]))continue;if(!d.isUndefined(i[t[n]]))i=i[t[n]]}return d.isObject(i)&&!d.isArray(i)?null:i},keyPathSetter:function(e,t,i){t=t.split(".");while(t.length>1){if(!e[t[0]])e[t[0]]={};e=e[t.shift()]}return e[t.shift()]=i},processTab:function(t){if(t.which==9){var i=c(t.currentTarget);setTimeout(function(){var e;if(t.shiftKey){e=!!i.prevAll(":input:visible").length?i.prevAll(":input:visible").first():i.closest(".control-group:visible").prev(".control-group:visible").find(":input:visible")}else{e=!!i.nextAll(":input:visible").length?i.nextAll(":input:visible").first():i.closest(".control-group:visible").next(".control-group:visible").find(":input:visible")}if(e.length)e.first().focus()},0)}}});var s=Backform.UneditableInputControl=a;var l=Backform.HelpControl=a.extend({template:d.template(['<label class="<%=Backform.controlLabelClassName%>">&nbsp;</label>','<div class="<%=Backform.controlsClassName%>">','  <span class="<%=Backform.helpMessageClassName%> help-block"><%=label%></span>',"</div>"].join("\n"))});var f=Backform.SpacerControl=a.extend({template:d.template(['<div class="<%=Backform.controlsClassName%>"></div>'].join("\n"))});var h=Backform.TextareaControl=a.extend({defaults:{label:"",maxlength:4e3,extraClasses:[],helpMessage:null},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <textarea class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%>><%-value%></textarea>',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:d.extend({},a.prototype.events,{"change textarea":"onChange","focus textarea":"clearInvalid"}),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("textarea").val(),this.model)}});var p=Backform.SelectControl=a.extend({defaults:{label:"",options:[],extraClasses:[]},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <select class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> >',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-formatter.fromRaw(option.value)%>" <%=option.value === rawValue ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:d.extend({},a.prototype.events,{"change select":"onChange","focus select":"clearInvalid"}),formatter:n,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("select").val(),this.model)}});var m=Backform.MultiSelectControl=p.extend({defaults:{label:"",options:[],extraClasses:[],height:"78px"},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlsClassName%>">','  <select multiple="multiple" class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-JSON.stringify(value)%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> style="height:<%=height%>">',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-option.value%>" <%=value != null && _.indexOf(value, option.value) != -1 ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:d.extend({},a.prototype.events,{"change select":"onChange","dblclick select":"onDoubleClick","focus select":"clearInvalid"}),formatter:{fromRaw:function(e,t){return e},toRaw:function(e,t){return typeof e=="object"?e:JSON.parse(e)}},onDoubleClick:function(e){this.model.trigger("doubleclick",e)}});var g=Backform.InputControl=a.extend({defaults:{type:"text",label:"",maxlength:255,extraClasses:[],helpMessage:null},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <input type="<%=type%>" class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" value="<%-value%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:d.extend({},a.prototype.events,{"change input":"onChange","focus input":"clearInvalid"}),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").val(),this.model)}});var v=Backform.BooleanControl=g.extend({defaults:{type:"checkbox",label:"",controlLabel:"&nbsp;",extraClasses:[],id:d.uniqueId("bf_")},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=controlLabel%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <div class="form-check">','    <input type="<%=type%>" class="form-check-input <%=extraClasses.join(\' \')%>" id="<%=id%>" name="<%=name%>" <%=value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />','    <label class="form-check-label" for="<%=id%>"><%=label%></label>',"  </div>","</div>"].join("\n")),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").is(":checked"),this.model)}});var _=Backform.CheckboxControl=v;var b=Backform.RadioControl=g.extend({defaults:{type:"radio",label:"",options:[],extraClasses:[],helpMessage:null},template:d.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%> d-flex">',"  <% for (var i=0; i < options.length; i++) { %>","    <% var option = options[i]; %>",'    <% var id = _.uniqueId("bf_"); %>','  <div class="form-check">','    <input type="<%=type%>" class="<%=extraClasses.join(\' \')%>" id="<%=id%>" name="<%=name%>" value="<%-formatter.fromRaw(option.value)%>" <%=rawValue == option.value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />','    <label class="form-check-label" for="<%=id%>"><%-option.label%></label>',"  </div>","  <% } %>","  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),formatter:n,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input:checked").val(),this.model)},bootstrap2:function(){Backform.radioControlsClassName="controls";Backform.radioLabelClassName="radio inline"}});d.extend(Backform,{radioControlsClassName:"checkbox",radioLabelClassName:"checkbox-inline"});var y=Backform.DatepickerControl=g.extend({defaults:{type:"text",label:"",options:{},extraClasses:[],maxlength:255,helpMessage:null},events:d.extend({},a.prototype.events,{"blur input":"onChange","change input":"onChange","changeDate input":"onChange","focus input":"clearInvalid"}),render:function(){g.prototype.render.apply(this,arguments);this.$el.find("input").datepicker(this.field.get("options"));return this}});var w=Backform.ButtonControl=a.extend({defaults:{type:"submit",label:"Submit",status:undefined,message:undefined,extraClasses:[]},template:d.template(['<label class="<%=Backform.controlLabelClassName%>">&nbsp;</label>','<div class="<%=Backform.controlsClassName%>">','  <button type="<%=type%>" name="<%=name%>" class="btn <%=extraClasses.join(\' \')%>" <%=disabled ? "disabled" : ""%> ><%=label%></button>','  <% var cls = ""; if (status == "error") cls = Backform.buttonStatusErrorClassName; if (status == "success") cls = Backform.buttonStatusSuccessClassname; %>','  <span class="status <%=cls%>"><%=message%></span>',"</div>"].join("\n")),initialize:function(){a.prototype.initialize.apply(this,arguments);this.listenTo(this.field,"change:status",this.render);this.listenTo(this.field,"change:message",this.render)},bootstrap2:function(){Backform.buttonStatusErrorClassName="text-error";Backform.buttonStatusSuccessClassname="text-success"}});d.extend(Backform,{buttonStatusErrorClassName:"text-danger",buttonStatusSuccessClassname:"text-success"});return Backform})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(i(15));i(52);i(69);i(70);i(53);i(71);i(72);i(73);i(74);i(46);i(75);i(54);i(76);i(77);i(78);i(79);i(34);i(43);function r(e){return e&&e.__esModule?e:{default:e}}var o=n.default;t.default=o},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(1),i(2),i(4)],r=function(n,o,s,l){var d={epicRandomString:function e(t){var i=[];var n="0123456789abcdef";for(var r=0;r<36;r++){i[r]=n.substr(Math.floor(Math.random()*16),1)}i[14]="4";i[19]=n.substr(i[19]&3|8,1);i[8]=i[13]=i[18]=i[23]="-";var o=i.join("");return o.replace(/-/g,"").substr(0,t)},getHash:function e(t){var i=0,n=t.length;for(var r=0;r<n;r++){i=(i<<5)-i+t.charCodeAt(r);i|=0}return i},calculateColumnWidth:function e(t){n("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var i=n("#pg_text").width()+23;n("#pg_text").remove();return i},capitalizeFirstLetter:function e(t){return t.charAt(0).toUpperCase()+t.slice(1)},previousStatus:null,fetchConnectionStatus:function e(t,r,o){var i=l("sqleditor.connection_status",{trans_id:t.transId});if(document.visibilityState!=="visible"||r.data("panel-visible")!=="visible"){return}if(o.hasClass("obtaining-conn")){return}var a=t;n.ajax({url:i,method:"GET"}).done(function(e){if(e&&e.data){var t=e.data.status,i=e.data.message,n=false;a.update_notifications(e.data.notifies);switch(t){case 1:if(t==d.previousStatus&&!o.hasClass("fa-hourglass-half")){o.removeClass().addClass("fa fa-hourglass-half");n=true}break;case 2:if(d.previousStatus!=t&&!o.hasClass("fa-clock-o")){o.removeClass().addClass("fa fa-clock-o");n=true}break;case 3:if(d.previousStatus!=t&&!o.hasClass("fa-exclamation-circle")){o.removeClass().addClass("fa fa-exclamation-circle");n=true}break;case 4:if(d.previousStatus!=t&&!o.hasClass("fa-exclamation-triangle")){o.removeClass().addClass("fa fa-exclamation-triangle");n=true}break;default:if(d.previousStatus!=t&&!o.hasClass("fa-query_tool_connected")){o.removeClass().addClass("fa-custom fa-query-tool-connected");n=true}}d.previousStatus=t;if(n){r.popover("hide");r.attr("data-content",i)}}else{d.previousStatus=-99;i=s("An unexpected error occurred - "+"ensure you are logged into the application.");r.attr("data-content",i);if(!o.hasClass("fa-query-tool-disconnected")){r.popover("hide");o.removeClass().addClass("fa-custom fa-query-tool-disconnected")}}}).fail(function(e){d.previousStatus=-1;var t=s("Transaction status check failed.");if(e.readyState==0){t=s("Not connected to the server or the connection to "+"the server has been closed.")}else if(e.responseJSON&&e.responseJSON.errormsg){t=e.responseJSON.errormsg}r.attr("data-content",t);if(!o.hasClass("fa-query-tool-disconnected")){r.popover("hide");o.removeClass().addClass("fa-custom fa-query-tool-disconnected")}})},updateConnectionStatusFlag:function e(t){var i=n(".connection_status");if(i.data("panel-visible")!=t){i.data("panel-visible",t)}},calcFontSize:function e(t){if(t){var i=Number(Math.round(t+"e+2")+"e-2");if(i>0){return i+"em"}}return"1em"},addEditableIcon:function e(t,i){var n=null;if(i){n='<i class="fa fa-pencil"></i>'}else{n='<i class="fa fa-lock"></i>'}var r={cssClass:"editable-column-header-icon",content:n};if(!o.isUndefined(t.header)&&!o.isUndefined(t.header.buttons)){t.header.buttons.push(r)}else{t.header={buttons:[r]}}}};return d}.apply(t,n),r!==undefined&&(e.exports=r))},,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.processEventDebugger=b;t.processEventQueryTool=P;t.focusDockerPanel=D;t.validateShortcutKeys=_;t._stopEventPropagation=v;t.isMac=o;t.isKeyCtrlAlt=a;t.isKeyAltShift=s;t.isKeyCtrlShift=d;t.isKeyCtrlAltShift=c;t.isAltShiftBoth=u;t.isCtrlShiftBoth=f;t.isCtrlAltBoth=h;t.shortcut_key=p;t.shortcut_title=m;t.shortcut_accesskey_title=g;var y=r(i(0));var n=r(i(2));var l=i(17);function r(e){return e&&e.__esModule?e:{default:e}}var w=190,x=191,C=27,k=37,S=38,T=39,N=40;function o(){return window.navigator.platform.search("Mac")!=-1}function a(e){return e.ctrlKey||e.altKey}function s(e){return e.altKey||e.shiftKey}function d(e){return e.ctrlKey||e.shiftKey}function c(e){return e.ctrlKey||e.altKey||e.shiftKey}function u(e){return e.altKey&&e.shiftKey&&!e.ctrlKey}function f(e){return e.ctrlKey&&e.shiftKey&&!e.altKey}function h(e){return e.ctrlKey&&e.altKey&&!e.shiftKey}function p(e){var t="";if(e["key"]&&e["key"]["char"]){t=e["key"]["char"].toUpperCase()}return t}function m(e,t){var i="";if(typeof t==="undefined"||t===null){return i}if(t["alt"]){i=(0,n.default)("Alt")+"+"}if(t["shift"]){i+=(0,n.default)("Shift")+"+"}if(t["control"]){i+=(0,n.default)("Ctrl")+"+"}i+=p(t);return(0,n.default)("%(title)s (%(text_representation)s)",{title:e,text_representation:i})}function g(e,t){return(0,n.default)("%(title)s (accesskey + %(key)s)",{title:e,key:p(t)})}function v(e){e.cancelBubble=true;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}function _(e,t){if(!e){return false}var i=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==i}function D(e,t){if(!e){return}if(!e._focusFrame){if(e._frameList.length==0&&e._frameList[0]._panelList.length==0){return}e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var i=e._focusFrame,n=0,r=false;if(t=="switch"){var o=0,a=e._frameList.length;for(o=0;o<a;o++){if(i===e._frameList[o])break}i=e._frameList[(0,l.getMod)(o+1,a)];n=i._curTab;r=true}else if(t=="left"){n=(0,l.getMod)(i._curTab-1,i._panelList.length);r=false}else if(t=="right"){n=(0,l.getMod)(i._curTab+1,i._panelList.length);r=false}var s=i._panelList[n];s.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus");s.focus(r);return s._type}function b(e,t,i,n){var r="",o,a;if(this.validateShortcutKeys(i.edit_grid_values,t)){this._stopEventPropagation(t);o=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")');if(o.length){a=(0,y.default)(o).find("td.editable:first");if(a.length)a.trigger("click")}}else if(this.validateShortcutKeys(i.move_next,t)){this._stopEventPropagation(t);r=D(n,"right")}else if(this.validateShortcutKeys(i.move_previous,t)){this._stopEventPropagation(t);r=D(n,"left")}else if(this.validateShortcutKeys(i.switch_panel,t)){this._stopEventPropagation(t);r=D(n,"switch")}return r}function P(e,t,i,n){if(e.isQueryRunning()){return}var r=i.which||i.keyCode,o="";var a=e.preferences.execute_query;var s=e.preferences.explain_query;var l=e.preferences.explain_analyze_query;var d=e.preferences.download_csv;var c=e.preferences.move_next;var u=e.preferences.move_previous;var f=e.preferences.switch_panel;var h=e.preferences.toggle_case;var p=e.preferences.commit_transaction;var m=e.preferences.rollback_transaction;var g=e.preferences.save_data;if(this.validateShortcutKeys(a,i)){this._stopEventPropagation(i);t.executeQuery(e)}else if(this.validateShortcutKeys(s,i)){this._stopEventPropagation(i);t.explain(e)}else if(this.validateShortcutKeys(l,i)){this._stopEventPropagation(i);t.explainAnalyze(e)}else if(this.validateShortcutKeys(d,i)){this._stopEventPropagation(i);t.download(e)}else if(this.validateShortcutKeys(h,i)){this._stopEventPropagation(i);t.toggleCaseOfSelectedText(e)}else if(this.validateShortcutKeys(p,i)){if(!e.is_transaction_buttons_disabled){this._stopEventPropagation(i);t.executeCommit(e)}}else if(this.validateShortcutKeys(m,i)){if(!e.is_transaction_buttons_disabled){this._stopEventPropagation(i);t.executeRollback(e)}}else if(this.validateShortcutKeys(g,i)){this._stopEventPropagation(i);t.saveDataChanges(e)}else if((this.isMac()&&i.metaKey||!this.isMac()&&i.ctrlKey)&&!i.altKey&&i.shiftKey&&r===x){this._stopEventPropagation(i);t.commentBlockCode(e)}else if((this.isMac()&&!this.isKeyCtrlAltShift(i)&&i.metaKey||!this.isMac()&&!this.isKeyAltShift(i)&&i.ctrlKey)&&r===x){this._stopEventPropagation(i);t.commentLineCode(e)}else if((this.isMac()&&!this.isKeyCtrlAltShift(i)&&i.metaKey||!this.isMac()&&!this.isKeyAltShift(i)&&i.ctrlKey)&&r===w){this._stopEventPropagation(i);t.uncommentLineCode(e)}else if(r==C){t.focusOut(e);if((0,y.default)(i.target).hasClass("dropdown-item")&&(0,y.default)(i.target).closest(".dropdown-submenu").length>0){(0,y.default)(i.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show")}}else if(this.validateShortcutKeys(c,i)){this._stopEventPropagation(i);o=D(n,"right")}else if(this.validateShortcutKeys(u,i)){this._stopEventPropagation(i);o=D(n,"left")}else if(this.validateShortcutKeys(f,i)){this._stopEventPropagation(i);o=D(n,"switch")}else if(r===S||r===N){if((0,y.default)(i.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(i);var v=(0,y.default)(i.target).closest("li");(0,y.default)(i.target).closest(".dropdown-menu").find(".show").removeClass("show");if(r===S){v=v.prev()}else if(r===N){v=v.next()}while(v.hasClass("dropdown-divider")||v.hasClass("d-none")||v.find(".dropdown-item").first().hasClass("disabled")){if(r===S){v=v.prev()}else if(r===N){v=v.next()}}v.find(".dropdown-item").trigger("focus")}}else if(r===k||r===T){if((0,y.default)(i.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(i);var _=(0,y.default)(i.target).closest("li");if(r===T){if(_.hasClass("dropdown-submenu")){_.find(".dropdown-menu").addClass("show");_=_.find(".dropdown-menu .dropdown-item").first().trigger("focus")}}else if(r===k){var b=_.closest(".dropdown-menu");if(b.closest(".dropdown-submenu").length>0){b.removeClass("show");_=b.closest(".dropdown-submenu");_.find(".dropdown-item").trigger("focus")}}}}return o}},,function(i,n,r){"use strict";(function(S){var e,t;!(e=[r(65)],t=function(){var r=window.Slick;var o=function e(t,i){return t.fromCell==i.fromCell&&t.toCell==i.toCell&&t.fromRow==i.fromRow&&t.toRow==i.toRow};var e=function e(t,i){return S.any(t,function(e){return o(e,i)})};var t=function e(t,i){return S.any(t,function(e){return e.fromCell<=i&&e.toCell>=i})};var i=function e(t,i){return S.any(t,function(e){return e.fromRow<=i&&e.toRow>=i})};var n=function e(t,i){return S.any(t,function(e){return e.fromCell<=i.fromCell&&e.toCell>=i.toCell&&e.fromRow<=i.fromRow&&e.toRow>=i.toRow})};var a=function e(t,i){return S.filter(t,function(e){return!o(e,i)})};var s=function e(t,i){t.push(i);return t};var l=function e(t,i){return S.every(t,function(e){return e.fromRow==e.toRow&&y(i,e)})};var d=function e(t,i){return S.every(t,_.bind(this,i))};var c=function e(t,i){var n=t.getColumns();if(p(n)){return new r.Range(i,0,i,t.getColumns().length-1)}return new r.Range(i,1,i,t.getColumns().length-1)};var u=function e(t,i){return new r.Range(0,i,t.getDataLength()-1,i)};var f=function e(t){return new r.Range(0,1,t.getDataLength()-1,t.getColumns().length-1)};var h=function e(t){var i=t.getSelectionModel();var n=i.getSelectedRanges();return n.length==1&&o(n[0],f(t))};var p=function e(t){return!S.isUndefined(t[0].pos)};var m=function e(t,i){return S.every(i,function(e){return b(t,e)})};var g=function e(t,i){return S.every(i,function(e){return y(t,e)})};var v=function e(t,i){var n=[];i.forEach(function(e){if(y(t,e))n=n.concat(S.range(e.fromRow,e.toRow+1))});return n};var _=function e(t,i){return i.fromCell==i.toCell&&i.fromRow==0&&i.toRow==t.getDataLength()-1};var b=function e(t,i){return i.fromRow===0&&i.toRow===t.getDataLength()-1};var y=function e(t,i){return i.fromCell===w(t)&&i.toCell===x(t)};function w(e){return S.findIndex(e.getColumns(),function(e){var t=e.pos;return!S.isUndefined(t)&&C(e)})}function x(e){return S.findLastIndex(e.getColumns(),C)}function C(e){return S.isUndefined(e.selectable)||e.selectable===true}function k(e){var t=f(e);var i=e.getSelectionModel();i.setSelectedRanges([t])}return{addRange:s,removeRange:a,isRangeSelected:e,areAllRangesSingleRows:l,areAllRangesSingleColumns:d,areAllRangesCompleteRows:g,areAllRangesCompleteColumns:m,rangeForRow:c,rangeForColumn:u,isEntireGridSelected:h,getRangeOfWholeGrid:f,isFirstColumnData:p,getIndexesOfCompleteRows:v,selectAll:k,isRangeAColumn:_,rangeHasCompleteColumns:b,rangeHasCompleteRows:y,isAnyCellOfColumnSelected:t,isRangeEntirelyWithinSelectedRanges:n,isAnyCellOfRowSelected:i}}.apply(n,e),t!==undefined&&(i.exports=t))}).call(this,r(1))},function(e,t){e.exports={wkt:{Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION"},wkb:{Point:1,LineString:2,Polygon:3,MultiPoint:4,MultiLineString:5,MultiPolygon:6,GeometryCollection:7},geoJSON:{Point:"Point",LineString:"LineString",Polygon:"Polygon",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",GeometryCollection:"GeometryCollection"}}},,,function(e,a,s){"use strict";(function(t){var i,n,r;function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}(function(e){if((false?undefined:o(a))=="object"&&(false?undefined:o(t))=="object")e(s(15));else if(true)!(n=[s(15)],i=e,r=typeof i==="function"?i.apply(a,n):i,r!==undefined&&(t.exports=r));else{}})(function(k){"use strict";var n=function e(t,i,n){var r=i.line,o=t.getLine(r);var a=o.length,s,l;var d=0;var c=n[d].start,u=n[d].end;for(;a>0;){var f=o.lastIndexOf(c,a);var h=c;var p=u;if(f<i.ch){d++;if(d>=n.length){return undefined}c=n[d].start;u=n[d].end;a=o.length;continue}l=t.getTokenAt(k.Pos(r,f+1)).type;if(!/^(comment|string)/.test(l)){s=f;break}a=f-1}if(s==null||o.lastIndexOf(h)>s)return;var m=1,g=t.lineCount(),v,_;e:for(var b=r+1;b<g;++b){var y=t.getLine(b),w=0;for(;;){var x=y.indexOf(h,w),C=y.indexOf(p,w);if(x<0)x=y.length;if(C<0)C=y.length;w=Math.min(x,C);if(w==y.length)break;if(t.getTokenAt(k.Pos(b,w+1)).type==l){if(w==x)++m;else if(!--m){v=b;_=w;break e}}++w}}if(v==null||v==r+1)return;return{from:k.Pos(r,s+c.length),to:k.Pos(v,_)}};k.registerHelper("fold","sql",function(e,t){var i=n(e,t,[{start:"BEGIN",end:"END;"},{start:"IF",end:"END IF"},{start:"LOOP",end:"END LOOP"},{start:"CASE",end:"END CASE"}]);return i})})}).call(this,s(33)(e))},,function(e,n,d){"use strict";(function(a){Object.defineProperty(n,"__esModule",{value:true});n.getPanelTitle=t;n.setQueryToolDockerTitle=i;var r=d(20);var s=e(d(2));function e(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.database?e.database.label:e.server.db}function l(e){return e.server===undefined}function t(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(t==null){t=e.treeMenu.selected()}var i=r.getTreeNodeHierarchyFromIdentifier.call(e,t);if(l(i)){return}var n=o(i);return"".concat(n,"/").concat(i.server.user.name,"@").concat(i.server.label)}function i(e,t,i,n){var r="",o="";if(n||n=="true"){o=(0,s.default)("File - ")+i;r="fa fa-file-text-o"}else if(t=="false"||t==false){o=(0,s.default)("View/Edit Data - ")+i;r="fa fa-table"}else{o=(0,s.default)("Query Tool - ")+i;r="fa fa-bolt"}e.title('<span title="'+a.escape(o)+'">'+a.escape(i)+"</span>");e.icon(r)}}).call(this,d(1))},function(e,t,o){(function(n){e.exports=r;var d=o(31);var c=o(38);var u=o(169);var f=o(170);var h=o(210);var p=o(211);var m=o(212);var g=o(213);var v=o(351);var i=o(39);var s=o(352);var _=o(209);function r(){this.srid=undefined;this.hasZ=false;this.hasM=false}r.parse=function(e,t){var i=typeof e;if(i==="string"||e instanceof s)return r._parseWkt(e);else if(n.isBuffer(e)||e instanceof v)return r._parseWkb(e,t);else throw new Error("first argument must be a string or Buffer")};r._parseWkt=function(e){var t,i;if(e instanceof s)t=e;else t=new s(e);var n=t.matchRegex([/^SRID=(\d+);/]);if(n)i=parseInt(n[1],10);var r=t.matchType();var o=t.matchDimension();var a={srid:i,hasZ:o.hasZ,hasM:o.hasM};switch(r){case d.wkt.Point:return c._parseWkt(t,a);case d.wkt.LineString:return u._parseWkt(t,a);case d.wkt.Polygon:return f._parseWkt(t,a);case d.wkt.MultiPoint:return h._parseWkt(t,a);case d.wkt.MultiLineString:return p._parseWkt(t,a);case d.wkt.MultiPolygon:return m._parseWkt(t,a);case d.wkt.GeometryCollection:return g._parseWkt(t,a)}};r._parseWkb=function(e,t){var i,n,r,o={};if(e instanceof v)i=e;else i=new v(e);i.isBigEndian=!i.readInt8();n=i.readUInt32();o.hasSrid=(n&536870912)===536870912;o.isEwkb=n&536870912||n&1073741824||n&2147483648;if(o.hasSrid)o.srid=i.readUInt32();o.hasZ=false;o.hasM=false;if(!o.isEwkb&&(!t||!t.isEwkb)){if(n>=1e3&&n<2e3){o.hasZ=true;r=n-1e3}else if(n>=2e3&&n<3e3){o.hasM=true;r=n-2e3}else if(n>=3e3&&n<4e3){o.hasZ=true;o.hasM=true;r=n-3e3}else{r=n}}else{if(n&2147483648)o.hasZ=true;if(n&1073741824)o.hasM=true;r=n&15}switch(r){case d.wkb.Point:return c._parseWkb(i,o);case d.wkb.LineString:return u._parseWkb(i,o);case d.wkb.Polygon:return f._parseWkb(i,o);case d.wkb.MultiPoint:return h._parseWkb(i,o);case d.wkb.MultiLineString:return p._parseWkb(i,o);case d.wkb.MultiPolygon:return m._parseWkb(i,o);case d.wkb.GeometryCollection:return g._parseWkb(i,o);default:throw new Error("GeometryType "+r+" not supported")}};r.parseTwkb=function(e){var t,i={};if(e instanceof v)t=e;else t=new v(e);var n=t.readUInt8();var r=t.readUInt8();var o=n&15;i.precision=_.decode(n>>4);i.precisionFactor=Math.pow(10,i.precision);i.hasBoundingBox=r>>0&1;i.hasSizeAttribute=r>>1&1;i.hasIdList=r>>2&1;i.hasExtendedPrecision=r>>3&1;i.isEmpty=r>>4&1;if(i.hasExtendedPrecision){var a=t.readUInt8();i.hasZ=(a&1)===1;i.hasM=(a&2)===2;i.zPrecision=_.decode((a&28)>>2);i.zPrecisionFactor=Math.pow(10,i.zPrecision);i.mPrecision=_.decode((a&224)>>5);i.mPrecisionFactor=Math.pow(10,i.mPrecision)}else{i.hasZ=false;i.hasM=false}if(i.hasSizeAttribute)t.readVarInt();if(i.hasBoundingBox){var s=2;if(i.hasZ)s++;if(i.hasM)s++;for(var l=0;l<s;l++){t.readVarInt();t.readVarInt()}}switch(o){case d.wkb.Point:return c._parseTwkb(t,i);case d.wkb.LineString:return u._parseTwkb(t,i);case d.wkb.Polygon:return f._parseTwkb(t,i);case d.wkb.MultiPoint:return h._parseTwkb(t,i);case d.wkb.MultiLineString:return p._parseTwkb(t,i);case d.wkb.MultiPolygon:return m._parseTwkb(t,i);case d.wkb.GeometryCollection:return g._parseTwkb(t,i);default:throw new Error("GeometryType "+o+" not supported")}};r.parseGeoJSON=function(e){return r._parseGeoJSON(e)};r._parseGeoJSON=function(e,t){var i;switch(e.type){case d.geoJSON.Point:i=c._parseGeoJSON(e);break;case d.geoJSON.LineString:i=u._parseGeoJSON(e);break;case d.geoJSON.Polygon:i=f._parseGeoJSON(e);break;case d.geoJSON.MultiPoint:i=h._parseGeoJSON(e);break;case d.geoJSON.MultiLineString:i=p._parseGeoJSON(e);break;case d.geoJSON.MultiPolygon:i=m._parseGeoJSON(e);break;case d.geoJSON.GeometryCollection:i=g._parseGeoJSON(e);break;default:throw new Error("GeometryType "+e.type+" not supported")}if(e.crs&&e.crs.type&&e.crs.type==="name"&&e.crs.properties&&e.crs.properties.name){var n=e.crs.properties.name;if(n.indexOf("EPSG:")===0)i.srid=parseInt(n.substring(5));else if(n.indexOf("urn:ogc:def:crs:EPSG::")===0)i.srid=parseInt(n.substring(22));else throw new Error("Unsupported crs: "+n)}else if(!t){i.srid=4326}return i};r.prototype.toEwkt=function(){return"SRID="+this.srid+";"+this.toWkt()};r.prototype.toEwkb=function(){var e=new i(this._getWkbSize()+4);var t=this.toWkb();e.writeInt8(1);e.writeUInt32LE((t.slice(1,5).readUInt32LE(0)|536870912)>>>0,true);e.writeUInt32LE(this.srid);e.writeBuffer(t.slice(5));return e.buffer};r.prototype._getWktType=function(e,t){var i=e;if(this.hasZ&&this.hasM)i+=" ZM ";else if(this.hasZ)i+=" Z ";else if(this.hasM)i+=" M ";if(t&&!this.hasZ&&!this.hasM)i+=" ";if(t)i+="EMPTY";return i};r.prototype._getWktCoordinate=function(e){var t=e.x+" "+e.y;if(this.hasZ)t+=" "+e.z;if(this.hasM)t+=" "+e.m;return t};r.prototype._writeWkbType=function(e,t,i){var n=0;if(typeof this.srid==="undefined"&&(!i||typeof i.srid==="undefined")){if(this.hasZ&&this.hasM)n+=3e3;else if(this.hasZ)n+=1e3;else if(this.hasM)n+=2e3}else{if(this.hasZ)n|=2147483648;if(this.hasM)n|=1073741824}e.writeUInt32LE(n+t>>>0,true)};r.getTwkbPrecision=function(e,t,i){return{xy:e,z:t,m:i,xyFactor:Math.pow(10,e),zFactor:Math.pow(10,t),mFactor:Math.pow(10,i)}};r.prototype._writeTwkbHeader=function(e,t,i,n){var r=(_.encode(i.xy)<<4)+t;var o=(this.hasZ||this.hasM)<<3;o+=n<<4;e.writeUInt8(r);e.writeUInt8(o);if(this.hasZ||this.hasM){var a=0;if(this.hasZ)a|=1;if(this.hasM)a|=2;e.writeUInt8(a)}};r.prototype.toGeoJSON=function(e){var t={};if(this.srid){if(e){if(e.shortCrs){t.crs={type:"name",properties:{name:"EPSG:"+this.srid}}}else if(e.longCrs){t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+this.srid}}}}}return t}}).call(this,o(89).Buffer)},function(e,t,i){e.exports=l;var n=i(45);var o=i(37);var r=i(31);var a=i(39);var s=i(209);function l(e,t,i,n,r){o.call(this);this.x=e;this.y=t;this.z=i;this.m=n;this.srid=r;this.hasZ=typeof this.z!=="undefined";this.hasM=typeof this.m!=="undefined"}n.inherits(l,o);l.Z=function(e,t,i,n){var r=new l(e,t,i,undefined,n);r.hasZ=true;return r};l.M=function(e,t,i,n){var r=new l(e,t,undefined,i,n);r.hasM=true;return r};l.ZM=function(e,t,i,n,r){var o=new l(e,t,i,n,r);o.hasZ=true;o.hasM=true;return o};l._parseWkt=function(e,t){var i=new l;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();var n=e.matchCoordinate(t);i.x=n.x;i.y=n.y;i.z=n.z;i.m=n.m;e.expectGroupEnd();return i};l._parseWkb=function(e,t){var i=l._readWkbPoint(e,t);i.srid=t.srid;return i};l._readWkbPoint=function(e,t){return new l(e.readDouble(),e.readDouble(),t.hasZ?e.readDouble():undefined,t.hasM?e.readDouble():undefined)};l._parseTwkb=function(e,t){var i=new l;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;i.x=s.decode(e.readVarInt())/t.precisionFactor;i.y=s.decode(e.readVarInt())/t.precisionFactor;i.z=t.hasZ?s.decode(e.readVarInt())/t.zPrecisionFactor:undefined;i.m=t.hasM?s.decode(e.readVarInt())/t.mPrecisionFactor:undefined;return i};l._readTwkbPoint=function(e,t,i){i.x+=s.decode(e.readVarInt())/t.precisionFactor;i.y+=s.decode(e.readVarInt())/t.precisionFactor;if(t.hasZ)i.z+=s.decode(e.readVarInt())/t.zPrecisionFactor;if(t.hasM)i.m+=s.decode(e.readVarInt())/t.mPrecisionFactor;return new l(i.x,i.y,i.z,i.m)};l._parseGeoJSON=function(e){return l._readGeoJSONPoint(e.coordinates)};l._readGeoJSONPoint=function(e){if(e.length===0)return new l;if(e.length>2)return new l(e[0],e[1],e[2]);return new l(e[0],e[1])};l.prototype.toWkt=function(){if(typeof this.x==="undefined"&&typeof this.y==="undefined"&&typeof this.z==="undefined"&&typeof this.m==="undefined")return this._getWktType(r.wkt.Point,true);return this._getWktType(r.wkt.Point,false)+"("+this._getWktCoordinate(this)+")"};l.prototype.toWkb=function(e){var t=new a(this._getWkbSize());t.writeInt8(1);this._writeWkbType(t,r.wkb.Point,e);if(typeof this.x==="undefined"&&typeof this.y==="undefined"){t.writeDoubleLE(NaN);t.writeDoubleLE(NaN);if(this.hasZ)t.writeDoubleLE(NaN);if(this.hasM)t.writeDoubleLE(NaN)}else{this._writeWkbPoint(t)}return t.buffer};l.prototype._writeWkbPoint=function(e){e.writeDoubleLE(this.x);e.writeDoubleLE(this.y);if(this.hasZ)e.writeDoubleLE(this.z);if(this.hasM)e.writeDoubleLE(this.m)};l.prototype.toTwkb=function(){var e=new a(0,true);var t=o.getTwkbPrecision(5,0,0);var i=typeof this.x==="undefined"&&typeof this.y==="undefined";this._writeTwkbHeader(e,r.wkb.Point,t,i);if(!i)this._writeTwkbPoint(e,t,new l(0,0,0,0));return e.buffer};l.prototype._writeTwkbPoint=function(e,t,i){var n=this.x*t.xyFactor;var r=this.y*t.xyFactor;var o=this.z*t.zFactor;var a=this.m*t.mFactor;e.writeVarInt(s.encode(n-i.x));e.writeVarInt(s.encode(r-i.y));if(this.hasZ)e.writeVarInt(s.encode(o-i.z));if(this.hasM)e.writeVarInt(s.encode(a-i.m));i.x=n;i.y=r;i.z=o;i.m=a};l.prototype._getWkbSize=function(){var e=1+4+8+8;if(this.hasZ)e+=8;if(this.hasM)e+=8;return e};l.prototype.toGeoJSON=function(e){var t=o.prototype.toGeoJSON.call(this,e);t.type=r.geoJSON.Point;if(typeof this.x==="undefined"&&typeof this.y==="undefined")t.coordinates=[];else if(typeof this.z!=="undefined")t.coordinates=[this.x,this.y,this.z];else t.coordinates=[this.x,this.y];return t}},function(n,e,t){(function(i){n.exports=e;function e(e,t){this.buffer=new i(e);this.position=0;this.allowResize=t}function t(i,n){return function(e,t){this.ensureSize(n);i.call(this.buffer,e,this.position,t);this.position+=n}}e.prototype.writeUInt8=t(i.prototype.writeUInt8,1);e.prototype.writeUInt16LE=t(i.prototype.writeUInt16LE,2);e.prototype.writeUInt16BE=t(i.prototype.writeUInt16BE,2);e.prototype.writeUInt32LE=t(i.prototype.writeUInt32LE,4);e.prototype.writeUInt32BE=t(i.prototype.writeUInt32BE,4);e.prototype.writeInt8=t(i.prototype.writeInt8,1);e.prototype.writeInt16LE=t(i.prototype.writeInt16LE,2);e.prototype.writeInt16BE=t(i.prototype.writeInt16BE,2);e.prototype.writeInt32LE=t(i.prototype.writeInt32LE,4);e.prototype.writeInt32BE=t(i.prototype.writeInt32BE,4);e.prototype.writeFloatLE=t(i.prototype.writeFloatLE,4);e.prototype.writeFloatBE=t(i.prototype.writeFloatBE,4);e.prototype.writeDoubleLE=t(i.prototype.writeDoubleLE,8);e.prototype.writeDoubleBE=t(i.prototype.writeDoubleBE,8);e.prototype.writeBuffer=function(e){this.ensureSize(e.length);e.copy(this.buffer,this.position,0,e.length);this.position+=e.length};e.prototype.writeVarInt=function(e){var t=1;while((e&4294967168)!==0){this.writeUInt8(e&127|128);e>>>=7;t++}this.writeUInt8(e&127);return t};e.prototype.ensureSize=function(e){if(this.buffer.length<this.position+e){if(this.allowResize){var t=new i(this.position+e);this.buffer.copy(t,0,0,this.buffer.length);this.buffer=t}else{throw new RangeError("index out of range")}}}}).call(this,t(89).Buffer)},,function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__41__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__42__},function(e,t,i){"use strict";var n=r(i(15));function r(e){return e&&e.__esModule?e:{default:e}}n.default.defineExtension("centerOnLine",function(e){var t=this.getScrollInfo().clientHeight;var i=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(i.top+i.bottom-t)/2)})},function(e,t,i){"use strict";var n=o(i(0));var r=o(i(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(){if(!r.default.isUndefined(window.opener)&&!r.default.isNull(window.opener)){return window.opener.pgAdmin.Browser}else{return window.parent.pgAdmin.Browser}}function s(e,t){var i=e.get_preference("browser","enable_acitree_animation").value;if(r.default.isUndefined(t)){t=e.tree}if(i){t.options({animateRoot:true,unanimated:false,show:r.default.extend(t.options().show,{duration:75}),hide:r.default.extend(t.options().hide,{duration:75}),view:r.default.extend(t.options().view,{duration:75})})}else{t.options({animateRoot:false,unanimated:true,show:r.default.extend(t.options().show,{duration:0}),hide:r.default.extend(t.options().hide,{duration:0}),view:r.default.extend(t.options().view,{duration:0})})}}function l(e){if(r.default.isUndefined(e)||r.default.isNull(e)){e=a()}var t=e.get_preference("browser","enable_alertify_animation").value;if(t){(0,n.default)(document).find("link#alertify-no-animation").attr("disabled","disabled");r.default.each(document.getElementsByTagName("iframe"),function(e){(0,n.default)(e.contentDocument).find("link#alertify-no-animation").attr("disabled","disabled")})}else{(0,n.default)(document).find("link#alertify-no-animation").removeAttr("disabled","disabled");r.default.each(document.getElementsByTagName("iframe"),function(e){(0,n.default)(e.contentDocument).find("link#alertify-no-animation").removeAttr("disabled","disabled")})}}e.exports={modifyAcitreeAnimation:s,modifyAlertifyAnimation:l}},function(e,z,j){(function(a){var i=Object.getOwnPropertyDescriptors||function e(t){var i=Object.keys(t);var n={};for(var r=0;r<i.length;r++){n[i[r]]=Object.getOwnPropertyDescriptor(t,i[r])}return n};var s=/%[sdj%]/g;z.format=function(e){if(!w(e)){var t=[];for(var i=0;i<arguments.length;i++){t.push(l(arguments[i]))}return t.join(" ")}var i=1;var n=arguments;var r=n.length;var o=String(e).replace(s,function(e){if(e==="%%")return"%";if(i>=r)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}});for(var a=n[i];i<r;a=n[++i]){if(c(a)||!k(a)){o+=" "+a}else{o+=" "+l(a)}}return o};z.deprecate=function(e,t){if(typeof a!=="undefined"&&a.noDeprecation===true){return e}if(typeof a==="undefined"){return function(){return z.deprecate(e,t).apply(this,arguments)}}var i=false;function n(){if(!i){if(a.throwDeprecation){throw new Error(t)}else if(a.traceDeprecation){console.trace(t)}else{console.error(t)}i=true}return e.apply(this,arguments)}return n};var e={};var n;z.debuglog=function(t){if(x(n))n=a.env.NODE_DEBUG||"";t=t.toUpperCase();if(!e[t]){if(new RegExp("\\b"+t+"\\b","i").test(n)){var i=a.pid;e[t]=function(){var e=z.format.apply(z,arguments);console.error("%s %d: %s",t,i,e)}}else{e[t]=function(){}}}return e[t]};function l(e,t){var i={seen:[],stylize:o};if(arguments.length>=3)i.depth=arguments[2];if(arguments.length>=4)i.colors=arguments[3];if(d(t)){i.showHidden=t}else if(t){z._extend(i,t)}if(x(i.showHidden))i.showHidden=false;if(x(i.depth))i.depth=2;if(x(i.colors))i.colors=false;if(x(i.customInspect))i.customInspect=true;if(i.colors)i.stylize=r;return p(i,e,i.depth)}z.inspect=l;l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function r(e,t){var i=l.styles[t];if(i){return"["+l.colors[i][0]+"m"+e+"["+l.colors[i][1]+"m"}else{return e}}function o(e,t){return e}function h(e){var i={};e.forEach(function(e,t){i[e]=true});return i}function p(t,i,n){if(t.customInspect&&i&&N(i.inspect)&&i.inspect!==z.inspect&&!(i.constructor&&i.constructor.prototype===i)){var e=i.inspect(n,t);if(!w(e)){e=p(t,e,n)}return e}var r=m(t,i);if(r){return r}var o=Object.keys(i);var a=h(o);if(t.showHidden){o=Object.getOwnPropertyNames(i)}if(T(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return g(i)}if(o.length===0){if(N(i)){var s=i.name?": "+i.name:"";return t.stylize("[Function"+s+"]","special")}if(C(i)){return t.stylize(RegExp.prototype.toString.call(i),"regexp")}if(S(i)){return t.stylize(Date.prototype.toString.call(i),"date")}if(T(i)){return g(i)}}var l="",d=false,c=["{","}"];if(y(i)){d=true;c=["[","]"]}if(N(i)){var u=i.name?": "+i.name:"";l=" [Function"+u+"]"}if(C(i)){l=" "+RegExp.prototype.toString.call(i)}if(S(i)){l=" "+Date.prototype.toUTCString.call(i)}if(T(i)){l=" "+g(i)}if(o.length===0&&(!d||i.length==0)){return c[0]+l+c[1]}if(n<0){if(C(i)){return t.stylize(RegExp.prototype.toString.call(i),"regexp")}else{return t.stylize("[Object]","special")}}t.seen.push(i);var f;if(d){f=v(t,i,n,a,o)}else{f=o.map(function(e){return _(t,i,n,a,e,d)})}t.seen.pop();return b(f,l,c)}function m(e,t){if(x(t))return e.stylize("undefined","undefined");if(w(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(u(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(c(t))return e.stylize("null","null")}function g(e){return"["+Error.prototype.toString.call(e)+"]"}function v(t,i,n,r,e){var o=[];for(var a=0,s=i.length;a<s;++a){if(O(i,String(a))){o.push(_(t,i,n,r,String(a),true))}else{o.push("")}}e.forEach(function(e){if(!e.match(/^\d+$/)){o.push(_(t,i,n,r,e,true))}});return o}function _(e,t,i,n,r,o){var a,s,l;l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!O(n,r)){a="["+r+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(c(i)){s=p(e,l.value,null)}else{s=p(e,l.value,i-1)}if(s.indexOf("\n")>-1){if(o){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(x(a)){if(o&&r.match(/^\d+$/)){return s}a=JSON.stringify(""+r);if(a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=e.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=e.stylize(a,"string")}}return a+": "+s}function b(e,t,i){var n=0;var r=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(r>60){return i[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]}return i[0]+t+" "+e.join(", ")+" "+i[1]}function y(e){return Array.isArray(e)}z.isArray=y;function d(e){return typeof e==="boolean"}z.isBoolean=d;function c(e){return e===null}z.isNull=c;function t(e){return e==null}z.isNullOrUndefined=t;function u(e){return typeof e==="number"}z.isNumber=u;function w(e){return typeof e==="string"}z.isString=w;function f(e){return typeof e==="symbol"}z.isSymbol=f;function x(e){return e===void 0}z.isUndefined=x;function C(e){return k(e)&&P(e)==="[object RegExp]"}z.isRegExp=C;function k(e){return typeof e==="object"&&e!==null}z.isObject=k;function S(e){return k(e)&&P(e)==="[object Date]"}z.isDate=S;function T(e){return k(e)&&(P(e)==="[object Error]"||e instanceof Error)}z.isError=T;function N(e){return typeof e==="function"}z.isFunction=N;function D(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}z.isPrimitive=D;z.isBuffer=j(349);function P(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date;var t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}z.log=function(){console.log("%s - %s",I(),z.format.apply(z,arguments))};z.inherits=j(350);z._extend=function(e,t){if(!t||!k(t))return e;var i=Object.keys(t);var n=i.length;while(n--){e[i[n]]=t[i[n]]}return e};function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var A=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;z.promisify=function e(o){if(typeof o!=="function")throw new TypeError('The "original" argument must be of type Function');if(A&&o[A]){var t=o[A];if(typeof t!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(t,A,{value:t,enumerable:false,writable:false,configurable:true});return t}function t(){var i,n;var e=new Promise(function(e,t){i=e;n=t});var t=[];for(var r=0;r<arguments.length;r++){t.push(arguments[r])}t.push(function(e,t){if(e){n(e)}else{i(t)}});try{o.apply(this,t)}catch(e){n(e)}return e}Object.setPrototypeOf(t,Object.getPrototypeOf(o));if(A)Object.defineProperty(t,A,{value:t,enumerable:false,writable:false,configurable:true});return Object.defineProperties(t,i(o))};z.promisify.custom=A;function R(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e;e=i}return t(e)}function L(o){if(typeof o!=="function"){throw new TypeError('The "original" argument must be of type Function')}function e(){var e=[];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}var i=e.pop();if(typeof i!=="function"){throw new TypeError("The last argument must be of type Function")}var n=this;var r=function(){return i.apply(n,arguments)};o.apply(this,e).then(function(e){a.nextTick(r,null,e)},function(e){a.nextTick(R,e,r)})}Object.setPrototypeOf(e,Object.getPrototypeOf(o));Object.defineProperties(e,i(o));return e}z.callbackify=L}).call(this,j(187))},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setPGCSRFToken=r;var s=n(i(0));var l=n(i(9));var d=n(i(25));function n(e){return e&&e.__esModule?e:{default:e}}function r(n,r){if(!r){throw"csrf-token meta tag has not been set"}var o=l.default.sync;l.default.sync=function(e,t,i){i.beforeSend=function(e){e.setRequestHeader(n,r)};return o(e,t,i)};var a=l.default.get;l.default.get=function(e,t,i){i.beforeSend=function(e){e.setRequestHeader(n,r)};return a(e,t,i)};s.default.ajaxSetup({beforeSend:function e(t){t.setRequestHeader(n,r)}});d.default.interceptors.request.use(function(e){e.headers[n]=r;return e},function(e){return Promise.reject(e)})}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__48__},,,function(e,m,g){"use strict";(function(a){Object.defineProperty(m,"__esModule",{value:true});m.isValidTreeNodeData=m.Tree=m.TreeNode=void 0;var e=g(17);var s=t(g(0));function t(e){return e&&e.__esModule?e:{default:e}}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){n(i,true).forEach(function(e){r(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{n(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function r(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function i(e,t,i){if(t)c(e.prototype,t);if(i)c(e,i);return e}var u=function(){function r(e,t,i,n){d(this,r);this.id=e;this.data=t;this.setParent(n);this.children=[];this.domNode=i}i(r,[{key:"hasParent",value:function e(){return this.parentNode!==null&&this.parentNode!==undefined}},{key:"parent",value:function e(){return this.parentNode}},{key:"setParent",value:function e(t){this.parentNode=t;this.path=this.id;if(t!==null&&t!==undefined&&t.path!==undefined){this.path=t.path+"."+this.id}}},{key:"getData",value:function e(){if(this.data===undefined){return undefined}else if(this.data===null){return null}return Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function e(){return this.domNode}},{key:"reload",value:function e(t){var i=this;this.unload(t);t.aciTreeApi.setInode(this.domNode);t.aciTreeApi.deselect(this.domNode);setTimeout(function(){t.selectNode(i.domNode)},0)}},{key:"unload",value:function e(t){this.children=[];t.aciTreeApi.unload(this.domNode)}},{key:"ancestorNode",value:function e(t){var i=this;while(i.hasParent()){i=i.parent();if(t(i)){return i}}return null}},{key:"anyFamilyMember",value:function e(t){if(t(this)){return true}return this.ancestorNode(t)!==null}},{key:"anyParent",value:function e(t){return this.ancestorNode(t)!==null}}]);return r}();m.TreeNode=u;var f=function(){function e(){d(this,e);this.rootNode=new u(undefined,{});this.aciTreeApi=undefined;this.draggableTypes={}}i(e,[{key:"registerDraggableType",value:function e(t){var i=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(o(t)=="object"){Object.keys(t).forEach(function(e){i.registerDraggableType(e,t[e])})}else{if(n!=null){t.replace(/ +/," ").split(" ").forEach(function(e){i.draggableTypes[e]=n})}}}},{key:"getDraggable",value:function e(t){if(this.draggableTypes[t]){return this.draggableTypes[t]}else{return null}}},{key:"prepareDraggable",value:function e(n,r){var o=this.getDraggable(n._type);if(o!=null){r.find(".aciTreeItem").attr("draggable",true)[0].addEventListener("dragstart",function(e){var t=o(n,r);if(typeof t=="string"){t={text:t,cur:{from:t.length,to:t.length}}}else{if(!t.cur){t=l({},t,{cur:{from:t.text.length,to:t.text.length}})}}e.dataTransfer.setData("text",JSON.stringify(t));if(e.dataTransfer.dropEffect){e.dataTransfer.dropEffect="move"}if(e.dataTransfer.setDragImage){var i=(0,s.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(a.escape(t.text),"</span>\n              </div>"));(0,s.default)("body .drag-tree-node").remove();(0,s.default)("body").append(i);e.dataTransfer.setDragImage(i[0],0,0)}})}}},{key:"addNewNode",value:function e(t,i,n,r){var o=this.findNode(r);return this.createOrUpdateNode(t,i,o,n)}},{key:"findNode",value:function e(t){if(t===null||t===undefined||t.length===0){return this.rootNode}return h(this.rootNode,t.join("."))}},{key:"findNodeByDomElement",value:function e(t){var i=this.translateTreeNodeIdFromACITree(t);if(!i||!i[0]){return undefined}return this.findNode(i)}},{key:"selected",value:function e(){return this.aciTreeApi.selected()}},{key:"selectNode",value:function e(t){this.aciTreeApi.select(t)}},{key:"createOrUpdateNode",value:function e(t,i,n,r){var o=[t];if(n!==null&&n!==undefined){o=[n.path,t]}var a=this.findNode(o);if(a!==null){a.data=i;return a}var s=new u(t,i,r,n);if(n===this.rootNode){s.parentNode=null}n.children.push(s);return s}},{key:"register",value:function e(t){t.on("acitree",function(e,t,i,n){if(t.isItem(i)){if(n==="added"||n==="idset"){var r=t.getId(i);var o=t.itemData(i);if(n==="added"){this.prepareDraggable(o,i)}var a=this.translateTreeNodeIdFromACITree(t.parent(i));this.addNewNode(r,o,i,a)}}}.bind(this));this.aciTreeApi=t.aciTree("api")}},{key:"translateTreeNodeIdFromACITree",value:function e(t){var i=t;var n=[];while(i!==null&&i!==undefined&&i.length>0){n.unshift(this.aciTreeApi.getId(i));if(this.aciTreeApi.hasParent(i)){i=this.aciTreeApi.parent(i)}else{break}}return n}}]);return e}();m.Tree=f;function h(e,o){if(o===null){return e}return function e(t){if(t.path!==undefined&&o!==undefined&&!o.startsWith(t.path)){return null}for(var i=0,n=t.children.length;i<n;i++){var r=e(t.children[i]);if(r!==null){return r}}if(t.path===o){return t}else{return null}}(e)}var p=e.isValidData;m.isValidTreeNodeData=p}).call(this,g(1))},,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeToolbar=f;t.enable=h;var n=a(i(2));var r=a(i(1));var o=a(i(3));function a(e){return e&&e.__esModule?e:{default:e}}var s={};var l=null;var d=[{label:(0,n.default)("Filtered Rows"),btnClass:"fa fa-filter",text:"",toggled:false,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:false},{label:(0,n.default)("View Data"),btnClass:"fa fa-table",text:"",toggled:false,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:false},{label:(0,n.default)("Query Tool"),btnClass:"fa fa-bolt",text:"",toggled:false,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:false}];var c=[];function u(e){if(!(e.label in s)||r.default.findIndex(l._buttonList,{name:e.label})<0){l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled);s[e.label]=e}}function f(e,t){l=e;r.default.each(d,function(e){u(e)});r.default.each(c,function(e){u(e)});e.on(t.EVENT.BUTTON,function(e){if("name"in e&&e.name===(0,n.default)("Query Tool"))o.default.DataGrid.show_query_tool("",o.default.Browser.tree.selected());else if("name"in e&&e.name===(0,n.default)("View Data"))o.default.DataGrid.show_data_grid({mnuid:3},o.default.Browser.tree.selected());else if("name"in e&&e.name===(0,n.default)("Filtered Rows"))o.default.DataGrid.show_filtered_row({mnuid:4},o.default.Browser.tree.selected())})}function h(e,t){if(e in s){l.buttonEnable(e,t)}else{console.warn("Developer warning: No tool button found with label: "+e)}}},function(e,t,i){"use strict";var l=n(i(0));var r=n(i(49));var d=i(17);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,i){if(t)a(e.prototype,t);if(i)a(e,i);return e}var c=function(){function n(e,t,i){o(this,n);this.dialogContainer=e;this.tabSwitching=false;this.tabs=this.dialogContainer.find(".nav-tabs");if(this.tabs.length>0){this.tabs=this.tabs[0]}this.dialogTabBackward=(0,d.parseShortcutValue)(t);this.dialogTabForward=(0,d.parseShortcutValue)(i);(0,r.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this));(0,r.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}s(n,[{key:"onKeyboardEvent",value:function e(t,i){var n=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first"),r=this.isActivePaneHasChildTabs(n);if(this.tabSwitching){return}this.tabSwitching=true;if(r){var o=this.navigate(i,r.childTab,r.childTabPane,t);if(!o){this.navigate(i,this.tabs,n,t)}}else{this.navigate(i,this.tabs,n,t)}}},{key:"isActivePaneHasChildTabs",value:function e(t){var i=t.find(".nav-tabs:first"),n;if(i.length>0){n=t.find(".tab-content:first > .tab-pane.active:first");return{childTab:i,childTabPane:n}}return null}},{key:"navigate",value:function e(t,i,n,r){if(t==this.dialogTabBackward){return this.navigateBackward(i,n,r)}else if(t==this.dialogTabForward){return this.navigateForward(i,n,r)}return false}},{key:"navigateBackward",value:function e(t,i,n){var r=this,o,a,s=(0,l.default)(t).find("li").has("a.active").prev("li");if(s.length>0){s.find("a").tab("show");o=i.prev();a=o.find(".tab-content:first > .tab-pane.active:first");if(a.length>0){(0,d.findAndSetFocus)(a)}else{(0,d.findAndSetFocus)(o)}setTimeout(function(){r.tabSwitching=false},200);n.stopPropagation();return true}this.tabSwitching=false;return false}},{key:"navigateForward",value:function e(t,i,n){var r=this,o,a,s=(0,l.default)(t).find("li").has("a.active").next("li");if(s.length>0){s.find("a").tab("show");o=i.next();a=o.find(".tab-content:first > .tab-pane.active:first");if(a.length>0){(0,d.findAndSetFocus)(a)}else{(0,d.findAndSetFocus)(o)}setTimeout(function(){r.tabSwitching=false},200);n.stopPropagation();return true}this.tabSwitching=false;return false}},{key:"detach",value:function e(){(0,r.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward);(0,r.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}]);return n}();e.exports={dialogTabNavigator:c}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getTransId=a;t.removeTransId=s;t.set_last_traversed_dir=l;var n=o(i(4));var r=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return r.default.ajax({data:e,type:"POST",async:false,url:(0,n.default)("file_manager.get_trans_id"),dataType:"json",contentType:"application/json; charset=utf-8"})}function s(e){return r.default.ajax({type:"GET",async:false,url:(0,n.default)("file_manager.delete_trans_id",{trans_id:e}),dataType:"json",contentType:"application/json; charset=utf-8"})}function l(e,t){return r.default.ajax({url:(0,n.default)("file_manager.save_last_dir",{trans_id:t}),type:"POST",data:JSON.stringify(e),contentType:"application/json"})}},,function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(8),i(3),i(5),i(109),i(60),i(10),i(6),i(86),i(16)],r=function(m,e,g,v,f,s,r,_,t,i,b,h,n){if(!_.Nodes["server"]){var o=["prefer","require","verify-ca","verify-full"];_.SecLabelModel=_.Node.Model.extend({defaults:{provider:undefined,label:undefined},schema:[{id:"provider",label:m("Provider"),type:"text",editable:true,cellHeaderClasses:"width_percent_50"},{id:"label",label:m("Security label"),type:"text",editable:true,cellHeaderClasses:"override_label_class_font_size"}],validate:function e(){this.errorModel.clear();if(v.isUndefined(this.get("label"))||v.isNull(this.get("label"))||String(this.get("label")).replace(/^\s+|\s+$/g,"")==""){var t=m("Label must be specified.");this.errorModel.set("label",t);return t}return null}});r.Browser.Nodes["server"]=r.Browser.Node.extend({parent_type:"server_group",type:"server",dialogHelp:e("help.static",{filename:"server_dialog.html"}),label:m("Server"),canDrop:true,hasStatistics:true,hasCollectiveStatistics:true,can_expand:function e(t){return t&&t.connected},Init:function e(){if(this.initialized)return;this.initialized=true;_.add_menus([{name:"create_server_on_sg",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:m("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server"},{name:"create_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:3,label:m("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server"},{name:"connect_server",node:"server",module:this,applies:["object","context"],callback:"connect_server",category:"connect",priority:4,label:m("Connect Server"),icon:"fa fa-link",enable:"is_not_connected"},{name:"disconnect_server",node:"server",module:this,applies:["object","context"],callback:"disconnect_server",category:"drop",priority:5,label:m("Disconnect Server"),icon:"fa fa-chain-broken",enable:"is_connected"},{name:"reload_configuration",node:"server",module:this,applies:["tools","context"],callback:"reload_configuration",category:"reload",priority:6,label:m("Reload Configuration"),icon:"fa fa-repeat",enable:"enable_reload_config"},{name:"restore_point",node:"server",module:this,applies:["tools","context"],callback:"restore_point",category:"restore",priority:9,label:m("Add Named Restore Point..."),icon:"fa fa-anchor",enable:"is_applicable"},{name:"change_password",node:"server",module:this,applies:["object"],callback:"change_password",label:m("Change Password..."),priority:10,icon:"fa fa-lock",enable:"is_connected"},{name:"wal_replay_pause",node:"server",module:this,applies:["tools","context"],callback:"pause_wal_replay",category:"wal_replay_pause",priority:7,label:m("Pause Replay of WAL"),icon:"fa fa-pause-circle",enable:"wal_pause_enabled"},{name:"wal_replay_resume",node:"server",module:this,applies:["tools","context"],callback:"resume_wal_replay",category:"wal_replay_resume",priority:8,label:m("Resume Replay of WAL"),icon:"fa fa-play-circle",enable:"wal_resume_enabled"},{name:"clear_saved_password",node:"server",module:this,applies:["object","context"],callback:"clear_saved_password",label:m("Clear Saved Password"),icon:"fa fa-eraser",priority:11,enable:function e(t){if(t&&t._type==="server"&&t.is_password_saved){return true}return false}},{name:"clear_sshtunnel_password",node:"server",module:this,applies:["object","context"],callback:"clear_sshtunnel_password",label:m("Clear SSH Tunnel Password"),icon:"fa fa-eraser",priority:12,enable:function e(t){if(t&&t._type==="server"&&t.is_tunnel_password_saved){return true}return false}}]);v.bindAll(this,"connection_lost");_.Events.on("pgadmin:server:connection:lost",this.connection_lost)},is_not_connected:function e(t){return t&&t.connected!=true},is_connected:function e(t){return t&&t.connected==true},enable_reload_config:function e(t){if(t&&t._type=="server"&&t.connected&&t.user.is_superuser){return true}return false},is_applicable:function e(t){if(t&&t._type=="server"&&t.connected&&t.user.is_superuser&&t.in_recovery==false){return true}return false},wal_pause_enabled:function e(t){if(t&&t._type=="server"&&t.connected&&t.user.is_superuser&&t.in_recovery==true&&t.wal_pause==false){return true}return false},wal_resume_enabled:function e(t){if(t&&t._type=="server"&&t.connected&&t.user.is_superuser&&t.in_recovery==true&&t.wal_pause==true){return true}return false},callbacks:{connect_server:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;l(n,a,r,o,false);return false},disconnect_server:function e(t,i){var n=t||{},r=this,o=_.tree,a="item"in n?n.item:o.selected(),s=a&&a.length==1?o.itemData(a):undefined;if(!s)return false;i=i||v.isUndefined(i)||v.isNull(i);var l=function e(){g.ajax({url:r.generate_url(a,"connect",s,true),type:"DELETE"}).done(function(e){if(e.success==1){b.success(e.info);s=o.itemData(a);o.removeIcon(a);s.connected=false;s.icon="icon-server-not-connected";o.addIcon(a,{icon:s.icon});r.callbacks.refresh.apply(r,[null,a]);if(_.serverInfo&&s._id in _.serverInfo){delete _.serverInfo[s._id]}_.enable_disable_menus(a);_.Events.trigger("pgadmin:server:disconnect",{item:a,data:s},false)}else{try{b.error(e.errormsg)}catch(e){console.warn(e.stack||e)}o.unload(a)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i);o.unload(a)})};if(i){b.confirm(m("Disconnect server"),m("Are you sure you want to disconnect the server %(server)s?",{server:s.label}),function(){l()},function(){return true})}else{l()}return false},beforeopen:function e(t,i){if(!i||i._type!="server"){return false}_.tree.addIcon(t,{icon:i.icon});if(!i.connected){l(this,i,_.tree,t,false);return false}return true},added:function e(t,i){_.serverInfo=_.serverInfo||{};_.serverInfo[i._id]=v.extend({},i);r.Browser.Node.callbacks.added.apply(this,arguments);return true},reload_configuration:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;b.confirm(m("Reload server configuration"),s(m("Are you sure you want to reload the server configuration on %s?")).sprintf(a.label).value(),function(){g.ajax({url:n.generate_url(o,"reload",a,true),method:"GET"}).done(function(e){if(e.data.status){b.success(e.data.result)}else{b.error(e.data.result)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i);r.unload(o)})},function(){return true});return false},restore_point:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;b.prompt(m("Enter the name of the restore point to add"),"",function(e,t){if(!v.isUndefined(t)&&!v.isNull(t)&&t!==""&&String(t).replace(/^\s+|\s+$/g,"")!==""){g.ajax({url:n.generate_url(o,"restore_point",a,true),method:"POST",data:{value:JSON.stringify(t)}}).done(function(e){b.success(e.data.result,10)}).fail(function(e,t,i){b.pgRespErrorNotify(e,i);r.unload(o)})}else{e.cancel=true;b.error(m("Please enter a valid name."),10)}},function(e){e.cancel=false}).set({title:m("Restore point name")})},change_password:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined,s=n.generate_url(o,"change_password",a,true),l=false,d=n.generate_url(o,"check_pgpass",a,true);if(!a)return false;if(!b.changeServerPassword){var c=f.Model.extend({defaults:{user_name:undefined,password:undefined,newPassword:undefined,confirmPassword:undefined},validate:function e(){return null}}),u=[{name:"user_name",label:m("User"),type:"text",disabled:true,control:"input"},{name:"password",label:m("Current Password"),type:"password",disabled:function e(){return l},control:"input",required:true},{name:"newPassword",label:m("New Password"),type:"password",disabled:false,control:"input",required:true},{name:"confirmPassword",label:m("Confirm Password"),type:"password",disabled:false,control:"input",required:true}];b.dialog("changeServerPassword",function e(){return{main:function e(t){var i=m("Change Password ");this.set("title",i);this.user_name=t.user.name},setup:function e(){return{buttons:[{text:m("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button",attrs:{name:"cancel"}},{text:m("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button",attrs:{name:"submit"}}],options:{padding:!1,overflow:!1,modal:false,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false}}},hooks:{onclose:function e(){if(this.view){this.view.remove({data:true,internal:true,silent:true})}}},prepare:function e(){var r=this;this.__internal.buttons[1].element.disabled=true;var t=g("<div class='change_password'></div>"),i=new c({user_name:r.user_name}),n=this.view=new h.Form({el:t,model:i,fields:u});n.render();this.elements.content.appendChild(t.get(0));this.view.model.on("change",function(){var e=this,t=this.get("password"),i=this.get("newPassword"),n=this.get("confirmPassword");if(!l&&(v.isUndefined(t)||v.isNull(t)||t=="")||v.isUndefined(i)||v.isNull(i)||i==""||v.isUndefined(n)||v.isNull(n)||n==""){r.__internal.buttons[1].element.disabled=true}else if(i!=n){r.__internal.buttons[1].element.disabled=true;this.errorTimeout&&clearTimeout(this.errorTimeout);this.errorTimeout=setTimeout(function(){e.errorModel.set("confirmPassword",m("Passwords do not match."))},400)}else{e.errorModel.clear();r.__internal.buttons[1].element.disabled=false}})},callback:function e(t){if(t.button.element.name=="submit"){var i=this,n=this.view.model.toJSON();t.cancel=true;g.ajax({url:s,method:"POST",data:{data:JSON.stringify(n)}}).done(function(e){if(e.success){if(l){b.alert(m("Change Password"),m("Please make sure to disconnect the server"+" and update the new password in the pgpass file"+" before performing any other operation"))}b.success(e.info);i.close()}else{b.error(e.errormsg)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i)})}}}})}g.ajax({url:d,method:"GET"}).done(function(e){if(e.success&&e.data.is_pgpass){l=true}b.changeServerPassword(a).resizeTo("40%","52%")}).fail(function(e,t,i){b.pgRespErrorNotify(e,i)});return false},pause_wal_replay:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;g.ajax({url:n.generate_url(o,"wal_replay",a,true),type:"DELETE",dataType:"json"}).done(function(e){if(e.success==1){b.success(e.info);r.itemData(o).wal_pause=e.data.wal_pause;r.unload(o);r.setInode(o);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i);r.unload(o)})},resume_wal_replay:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;g.ajax({url:n.generate_url(o,"wal_replay",a,true),type:"PUT",dataType:"json"}).done(function(e){if(e.success==1){b.success(e.info);r.itemData(o).wal_pause=e.data.wal_pause;r.unload(o);r.setInode(o);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i);r.unload(o)})},clear_saved_password:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;b.confirm(m("Clear saved password"),s(m("Are you sure you want to clear the saved password for server %s?")).sprintf(a.label).value(),function(){g.ajax({url:n.generate_url(o,"clear_saved_password",a,true),method:"PUT"}).done(function(e){if(e.success==1){b.success(e.info);r.itemData(o).is_password_saved=e.data.is_password_saved}else{b.error(e.info)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i)})},function(){return true});return false},clear_sshtunnel_password:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;b.confirm(m("Clear SSH Tunnel password"),s(m("Are you sure you want to clear the saved password of SSH Tunnel for server %s?")).sprintf(a.label).value(),function(){g.ajax({url:n.generate_url(o,"clear_sshtunnel_password",a,true),method:"PUT"}).done(function(e){if(e.success==1){b.success(e.info);r.itemData(o).is_tunnel_password_saved=e.data.is_tunnel_password_saved}else{b.error(e.info)}}).fail(function(e,t,i){b.pgRespErrorNotify(e,i)})},function(){return true});return false}},model:r.Browser.Node.Model.extend({defaults:{gid:undefined,id:undefined,name:"",sslmode:"prefer",host:"",hostaddr:"",port:5432,db:"postgres",username:i.name,role:null,connect_now:true,password:undefined,save_password:false,db_res:"",passfile:undefined,sslcompression:false,sslcert:undefined,sslkey:undefined,sslrootcert:undefined,sslcrl:undefined,service:undefined,use_ssh_tunnel:0,tunnel_host:undefined,tunnel_port:22,tunnel_username:undefined,tunnel_identity_file:undefined,tunnel_password:undefined,tunnel_authentication:0,save_tunnel_password:false,connect_timeout:0},initialize:function e(t,i){var n=v.size(t)===0;if(n){this.set({gid:i.node_info["server_group"]._id})}r.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"id",label:m("ID"),type:"int",mode:["properties"]},{id:"name",label:m("Name"),type:"text",mode:["properties","edit","create"]},{id:"gid",label:m("Server group"),type:"int",control:"node-list-by-id",node:"server_group",mode:["create","edit"],select2:{allowClear:false}},{id:"server_type",label:m("Server type"),type:"options",mode:["properties"],visible:"isConnected",options:t},{id:"connected",label:m("Connected?"),type:"switch",mode:["properties"],group:m("Connection"),options:{onText:m("True"),offText:m("False"),size:"mini"}},{id:"version",label:m("Version"),type:"text",group:null,mode:["properties"],visible:"isConnected"},{id:"bgcolor",label:m("Background"),type:"color",group:null,mode:["edit","create"],disabled:"isfgColorSet",deps:["fgcolor"]},{id:"fgcolor",label:m("Foreground"),type:"color",group:null,mode:["edit","create"],disabled:"isConnected"},{id:"connect_now",controlLabel:m("Connect now?"),type:"checkbox",group:null,mode:["create"]},{id:"comment",label:m("Comments"),type:"multiline",group:null,mode:["properties","edit","create"]},{id:"host",label:m("Host name/address"),type:"text",group:m("Connection"),mode:["properties","edit","create"],disabled:"isConnected"},{id:"port",label:m("Port"),type:"int",group:m("Connection"),mode:["properties","edit","create"],disabled:"isConnected",min:1,max:65535},{id:"db",label:m("Maintenance database"),type:"text",group:m("Connection"),mode:["properties","edit","create"],disabled:"isConnected"},{id:"username",label:m("Username"),type:"text",group:m("Connection"),mode:["properties","edit","create"],disabled:"isConnected"},{id:"password",label:m("Password"),type:"password",group:m("Connection"),control:"input",mode:["create"],deps:["connect_now"],visible:function e(t){return t.get("connect_now")&&t.isNew()}},{id:"save_password",controlLabel:m("Save password?"),type:"checkbox",group:m("Connection"),mode:["create"],deps:["connect_now"],visible:function e(t){return t.get("connect_now")&&t.isNew()},disabled:function e(){if(!i.allow_save_password)return true;return false}},{id:"role",label:m("Role"),type:"text",group:m("Connection"),mode:["properties","edit","create"],disabled:"isConnected"},{id:"sslmode",label:m("SSL mode"),type:"options",group:m("SSL"),mode:["properties","edit","create"],disabled:"isConnected",options:[{label:m("Allow"),value:"allow"},{label:m("Prefer"),value:"prefer"},{label:m("Require"),value:"require"},{label:m("Disable"),value:"disable"},{label:m("Verify-CA"),value:"verify-ca"},{label:m("Verify-Full"),value:"verify-full"}]},{id:"sslcert",label:m("Client certificate"),type:"text",group:m("SSL"),mode:["edit","create"],disabled:"isSSL",control:h.FileControl,dialog_type:"select_file",supp_types:["*"],deps:["sslmode"]},{id:"sslkey",label:m("Client certificate key"),type:"text",group:m("SSL"),mode:["edit","create"],disabled:"isSSL",control:h.FileControl,dialog_type:"select_file",supp_types:["*"],deps:["sslmode"]},{id:"sslrootcert",label:m("Root certificate"),type:"text",group:m("SSL"),mode:["edit","create"],disabled:"isSSL",control:h.FileControl,dialog_type:"select_file",supp_types:["*"],deps:["sslmode"]},{id:"sslcrl",label:m("Certificate revocation list"),type:"text",group:m("SSL"),mode:["edit","create"],disabled:"isSSL",control:h.FileControl,dialog_type:"select_file",supp_types:["*"],deps:["sslmode"]},{id:"sslcompression",label:m("SSL compression?"),type:"switch",mode:["edit","create"],group:m("SSL"),options:{size:"mini"},deps:["sslmode"],disabled:"isSSL"},{id:"sslcert",label:m("Client certificate"),type:"text",group:m("SSL"),mode:["properties"],deps:["sslmode"],visible:function e(t){var i=t.get("sslcert");return!v.isUndefined(i)&&!v.isNull(i)}},{id:"sslkey",label:m("Client certificate key"),type:"text",group:m("SSL"),mode:["properties"],deps:["sslmode"],visible:function e(t){var i=t.get("sslkey");return!v.isUndefined(i)&&!v.isNull(i)}},{id:"sslrootcert",label:m("Root certificate"),type:"text",group:m("SSL"),mode:["properties"],deps:["sslmode"],visible:function e(t){var i=t.get("sslrootcert");return!v.isUndefined(i)&&!v.isNull(i)}},{id:"sslcrl",label:m("Certificate revocation list"),type:"text",group:m("SSL"),mode:["properties"],deps:["sslmode"],visible:function e(t){var i=t.get("sslcrl");return!v.isUndefined(i)&&!v.isNull(i)}},{id:"sslcompression",label:m("SSL compression?"),type:"switch",mode:["properties"],group:m("SSL"),options:{size:"mini"},deps:["sslmode"],visible:function e(t){var i=t.get("sslmode");return v.indexOf(o,i)!=-1}},{id:"use_ssh_tunnel",label:m("Use SSH tunneling"),type:"switch",mode:["properties","edit","create"],group:m("SSH Tunnel"),options:{size:"mini"},disabled:function e(t){if(!r.Browser.utils.support_ssh_tunnel){setTimeout(function(){t.set("use_ssh_tunnel",0)},10);return true}return t.get("connected")}},{id:"tunnel_host",label:m("Tunnel host"),type:"text",group:m("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],disabled:function e(t){return!t.get("use_ssh_tunnel")||t.get("connected")}},{id:"tunnel_port",label:m("Tunnel port"),type:"int",group:m("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],max:65535,disabled:function e(t){return!t.get("use_ssh_tunnel")||t.get("connected")}},{id:"tunnel_username",label:m("Username"),type:"text",group:m("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],disabled:function e(t){return!t.get("use_ssh_tunnel")||t.get("connected")}},{id:"tunnel_authentication",label:m("Authentication"),type:"switch",mode:["properties","edit","create"],group:m("SSH Tunnel"),options:{onText:m("Identity file"),offText:m("Password"),size:"mini",width:"90"},deps:["use_ssh_tunnel"],disabled:function e(t){return!t.get("use_ssh_tunnel")||t.get("connected")}},{id:"tunnel_identity_file",label:m("Identity file"),type:"text",group:m("SSH Tunnel"),mode:["edit","create"],control:h.FileControl,dialog_type:"select_file",supp_types:["*"],deps:["tunnel_authentication","use_ssh_tunnel"],disabled:function e(t){var i=t.get("tunnel_identity_file");if(!t.get("tunnel_authentication")&&i){setTimeout(function(){t.set("tunnel_identity_file",null)},10)}return!t.get("tunnel_authentication")||!t.get("use_ssh_tunnel")}},{id:"tunnel_identity_file",label:m("Identity file"),type:"text",group:m("SSH Tunnel"),mode:["properties"]},{id:"tunnel_password",label:m("Password"),type:"password",group:m("SSH Tunnel"),control:"input",mode:["create"],deps:["use_ssh_tunnel"],disabled:function e(t){return!t.get("use_ssh_tunnel")||t.get("connected")}},{id:"save_tunnel_password",controlLabel:m("Save password?"),type:"checkbox",group:m("SSH Tunnel"),mode:["create"],deps:["connect_now","use_ssh_tunnel"],visible:function e(t){return t.get("connect_now")&&t.isNew()},disabled:function e(t){if(!i.allow_save_tunnel_password||!t.get("use_ssh_tunnel"))return true;return false}},{id:"hostaddr",label:m("Host address"),type:"text",group:m("Advanced"),mode:["properties","edit","create"],disabled:"isConnected"},{id:"db_res",label:m("DB restriction"),type:"select2",group:m("Advanced"),mode:["properties","edit","create"],disabled:"isConnected",select2:{multiple:true,allowClear:false,tags:true,tokenSeparators:[","],first_empty:false,selectOnClose:true,emptyOptions:true}},{id:"passfile",label:m("Password file"),type:"text",group:m("Advanced"),mode:["edit","create"],disabled:"isConnectedWithValidLib",control:h.FileControl,dialog_type:"select_file",supp_types:["*"]},{id:"passfile",label:m("Password file"),type:"text",group:m("Advanced"),mode:["properties"],visible:function e(t){var i=t.get("passfile");return!v.isUndefined(i)&&!v.isNull(i)}},{id:"service",label:m("Service"),type:"text",mode:["properties","edit","create"],disabled:"isConnected",group:m("Connection")},{id:"connect_timeout",label:m("Connection timeout (seconds)"),type:"int",group:m("Advanced"),mode:["properties","edit","create"],disabled:"isConnected",min:0}],validate:function e(){var t=new n.ModelValidation(this);return t.validate()},isConnected:function e(t){return t.get("connected")},isfgColorSet:function e(t){var i=t.get("bgcolor"),n=t.get("fgcolor");if(t.get("connected")){return true}if(v.isUndefined(i)||v.isNull(i)||!i){if(n){t.set("bgcolor","#ffffff")}}return false},isSSL:function e(t){var i=t.get("sslmode");if(t.get("connected")){return true}return v.indexOf(o,i)==-1},isConnectedWithValidLib:function e(t){if(t.get("connected")){return true}return _.utils.pg_libpq_version<1e5}}),connection_lost:function e(i,n){if(_.tree){var t=_.tree,r=i&&t.itemData(i),o=this;while(r&&r._type!="server"){i=t.parent(i);r=i&&t.itemData(i)}if(i&&r&&r._type=="server"){if(v.isUndefined(r.is_connecting)||!r.is_connecting){r.is_connecting=true;var a=function e(t){if(r._id==t){r.is_connecting=false;_.Events.off("pgadmin:server:connect:cancelled",e);_.Events.trigger("pgadmin:database:connect:cancelled",t,n.data.database||r.db);_.Events.trigger("pgadmin:server:disconnect",{item:i,data:r},false)}};_.Events.on("pgadmin:server:connect:cancelled",a);b.confirm(m("Connection lost"),m("Would you like to reconnect to the database?"),function(){l(o,r,t,i,true)},function(){r.is_connecting=false;t.unload(i);t.setInode(i);t.addIcon(i,{icon:"icon-database-not-connected"});_.Events.trigger("pgadmin:server:connect:cancelled",i,r,o);t.select(i)})}}}}});var l=function d(l,c,u,n,e){var r=e||c.connected,f=function e(t,i,n,r,o,a,s,l){c.connected=false;if(!l){u.setInode(s);u.addIcon(s,{icon:"icon-server-not-connected"})}b.pgNotifier("error",t,n,function(e){setTimeout(function(){if(e=="CRYPTKEY_SET"){d(r,o,a,s,l)}else{b.dlgServerPass(m("Connect to Server"),e,r,o,a,s,l).resizeTo()}},100)})},h=function e(t,i,n,r,o,a){if(t&&t.data){if(typeof t.data.icon=="string"){r.removeIcon(o);n.icon=t.data.icon;r.addIcon(o,{icon:n.icon})}v.extend(n,t.data);n.is_connecting=false;var s=_.serverInfo=_.serverInfo||{};s[n._id]=v.extend({},n);b.success(t.info);l.trigger("connected",l,o,n);_.Events.trigger("pgadmin:server:connected",n._id,o,n);_.Events.trigger("pgadmin:database:connected",n._id,n.db,o,n);if(!a){r.setInode(o);r.deselect(o);setTimeout(function(){r.select(o);r.open(o)},10)}else{setTimeout(function(){i.callbacks.refresh.apply(i,[true])},10)}}};if(!b.dlgServerPass){b.dialog("dlgServerPass",function e(){return{main:function e(t,i,n,r,o,a,s,l,d,c){this.set("title",t);this.message=i;this.tree=o;this.nodeData=r;this.nodeItem=a;this.node=n;this.connected=s;this.onSuccess=l||h;this.onFailure=d||f;this.onCancel=c||p},setup:function e(){return{buttons:[{text:m("Cancel"),className:"btn btn-secondary fa fa-times pg-alertify-button",key:27},{text:m("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button"}],focus:{element:"#password",select:true},options:{modal:0,resizable:false,maximizable:false,pinnable:false}}},build:function e(){},prepare:function e(){this.setContent(this.message)},callback:function e(t){var n=this.tree,r=this.nodeItem,o=this.node,a=this.nodeData,s=this.connected,i=this.onSuccess,l=this.onFailure,d=this.onCancel;if(t.button.text==m("OK")){var c=o.generate_url(r,"connect",a,true);if(!s){n.setLeaf(r);n.removeIcon(r);n.addIcon(r,{icon:"icon-server-connecting"})}g.ajax({type:"POST",timeout:3e4,url:c,data:g("#frmPassword").serialize()}).done(function(e){return i(e,o,a,n,r,s)}).fail(function(e,t,i){return l(e,t,i,o,a,n,r,s)})}else{d&&typeof d=="function"&&d(n,r,a,s)}}}})}var p=function e(t,i,n,r){n.is_connecting=false;t.unload(i);t.setInode(i);t.removeIcon(i);t.addIcon(i,{icon:"icon-server-not-connected"});l.trigger("connect:cancelled",c._id,c.db,l,i,n);_.Events.trigger("pgadmin:server:connect:cancelled",c._id,i,n,l);_.Events.trigger("pgadmin:database:connect:cancelled",c._id,c.db,i,n,l);if(r){t.select(i)}};c.is_connecting=true;var t=l.generate_url(n,"connect",c,true);g.post(t).done(function(e){if(e.success==1){return h(e,l,c,u,n,r)}}).fail(function(e,t,i){return f(e,t,i,l,c,u,n,r)})}}return _.Nodes["server"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__60__},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(6),i(13),i(11),i(7),i(16)],r=function(a,e,t,s,i,n,l,r,o,d){if(!l.Nodes["coll-function"]){l.Nodes["coll-function"]=l.Collection.extend({node:"function",label:a("Functions"),type:"coll-function",columns:["name","funcowner","description"],hasStatistics:true,canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})}var c=l.Node.Model.extend({idAttribute:"argid",defaults:{argid:undefined,argtype:undefined,argmode:undefined,argname:undefined,argdefval:undefined},schema:[{id:"argid",visible:false,type:"text",mode:["properties","edit","create"]},{id:"argtype",label:a("Data type"),cell:"node-ajax-options",cellHeaderClasses:"width_percent_30",control:"node-ajax-options",type:"text",url:"get_types",editable:function e(t){var i=this.get("node_info");if(i&&"catalog"in i){return false}return s.isUndefined(t.isNew)?true:t.isNew()},first_empty:true},{id:"argmode",label:a("Mode"),type:"options",control:"node-ajax-options",cellHeaderClasses:"width_percent_20",options:[{label:"IN",value:"IN"},{label:"OUT",value:"OUT"},{label:"INOUT",value:"INOUT"},{label:"VARIADIC",value:"VARIADIC"}],editable:function e(t){var i=this.get("node_info");if(i&&"catalog"in i){return false}return s.isUndefined(t.isNew)?true:t.isNew()}},{id:"argname",label:a("Argument name"),type:"text",cell:"string",editable:"isInCatalog",cellHeaderClasses:"width_percent_30"},{id:"argdefval",label:a("Default"),type:"text",cell:"string",editable:"isInCatalog",cellHeaderClasses:"width_percent_20"}],toJSON:i.Model.prototype.toJSON,isInCatalog:function e(t){var i=this.get("node_info");if(i&&"catalog"in i){return false}if(!s.isUndefined(t.get("argmode"))&&!s.isUndefined(this.get("name"))&&this.get("name")=="argdefval"&&(t.get("argmode")=="INOUT"||t.get("argmode")=="OUT")){return false}return true},validate:function e(){}});if(!l.Nodes["function"]){l.Nodes["function"]=o.SchemaChildNode.extend({type:"function",sqlAlterHelp:"sql-alterfunction.html",sqlCreateHelp:"sql-createfunction.html",dialogHelp:e("help.static",{filename:"function_dialog.html"}),label:a("Function"),collection_type:"coll-function",hasSQL:true,hasDepends:true,width:l.stdW.md+"px",hasStatistics:function e(t){return t.server.server_type!=="gpdb"},hasScriptTypes:["create","select"],Init:function e(){if(this.initialized)return;this.initialized=true;l.add_menus([{name:"create_function_on_coll",node:"coll-function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:a("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:true},enable:"canCreate"},{name:"create_function",node:"function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:a("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:true},enable:"canCreate"},{name:"create_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:a("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:false},enable:"canCreate"}])},model:l.Node.Model.extend({idAttribute:"oid",initialize:function e(t,i){var n=s.size(t)===0;if(n){var r=i.node_info.schema._id;this.set({pronamespace:r},{silent:true});var o=l.serverInfo[i.node_info.server._id].user;this.set({funcowner:o.name},{silent:true})}l.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{name:undefined,oid:undefined,xmin:undefined,funcowner:undefined,pronamespace:undefined,description:undefined,pronargs:undefined,proargs:undefined,proargtypenames:undefined,prorettypename:undefined,lanname:"sql",provolatile:undefined,proretset:undefined,proisstrict:undefined,prosecdef:undefined,proiswindow:undefined,proparallel:undefined,procost:undefined,prorows:undefined,proleakproof:undefined,prosupportfunc:undefined,arguments:[],prosrc:undefined,prosrc_c:undefined,probin:"$libdir/",options:[],variables:[],proacl:undefined,seclabels:[],acl:[],sysfunc:undefined,sysproc:undefined},schema:[{id:"name",label:a("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"isDisabled"},{id:"oid",label:a("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:a("Owner"),cell:"string",control:r.NodeListByNameControl,node:"role",type:"text",disabled:"isDisabled"},{id:"pronamespace",label:a("Schema"),cell:"string",control:"node-list-by-id",type:"text",cache_level:"database",node:"schema",disabled:"isDisabled",mode:["create","edit"]},{id:"sysfunc",label:a("System function?"),cell:"boolean",type:"switch",mode:["properties"],visible:"isVisible"},{id:"sysproc",label:a("System procedure?"),cell:"boolean",type:"switch",mode:["properties"],visible:"isVisible"},{id:"description",label:a("Comment"),cell:"string",type:"multiline",disabled:"isDisabled"},{id:"pronargs",label:a("Argument count"),cell:"string",type:"text",group:a("Definition"),mode:["properties"]},{id:"proargs",label:a("Arguments"),cell:"string",type:"text",group:a("Definition"),mode:["properties"],disabled:"isDisabled"},{id:"proargtypenames",label:a("Signature arguments"),cell:"string",type:"text",group:a("Definition"),mode:["properties"],disabled:"isDisabled"},{id:"prorettypename",label:a("Return type"),cell:"string",control:"node-ajax-options",type:"text",group:a("Definition"),url:"get_types",disabled:"isDisabled",first_empty:true,mode:["create"],visible:"isVisible"},{id:"prorettypename",label:a("Return type"),cell:"string",type:"text",group:a("Definition"),mode:["properties","edit"],disabled:"isDisabled",visible:"isVisible"},{id:"lanname",label:a("Language"),cell:"string",control:"node-ajax-options",type:"text",group:a("Definition"),url:"get_languages",disabled:"isDisabled"},{id:"prosrc",label:a("Code"),cell:"string",type:"text",mode:["properties","create","edit"],group:a("Code"),deps:["lanname"],tabPanelCodeClass:"sql-code-control",control:r.SqlCodeControl,extraClasses:["custom_height_css_class"],visible:function e(t){if(t.get("lanname")=="c"){return false}return true},disabled:"isDisabled"},{id:"probin",label:a("Object file"),cell:"string",type:"text",group:a("Definition"),deps:["lanname"],visible:function e(t){if(t.get("lanname")=="c"){return true}return false},disabled:"isDisabled"},{id:"prosrc_c",label:a("Link symbol"),cell:"string",type:"text",group:a("Definition"),deps:["lanname"],visible:function e(t){if(t.get("lanname")=="c"){return true}return false},disabled:"isDisabled"},{id:"provolatile",label:a("Volatility"),cell:"string",control:"node-ajax-options",type:"text",group:a("Options"),deps:["lanname"],options:[{label:"VOLATILE",value:"v"},{label:"STABLE",value:"s"},{label:"IMMUTABLE",value:"i"}],disabled:"isDisabled",select2:{allowClear:false}},{id:"proretset",label:a("Returns a set?"),type:"switch",disabled:"isDisabled",group:a("Options"),visible:"isVisible"},{id:"proisstrict",label:a("Strict?"),type:"switch",group:a("Options"),disabled:"isDisabled",deps:["lanname"]},{id:"prosecdef",label:a("Security of definer?"),group:a("Options"),type:"switch",disabled:"isDisabled"},{id:"proiswindow",label:a("Window?"),group:a("Options"),cell:"boolean",type:"switch",disabled:"isDisabled",visible:"isVisible"},{id:"proparallel",label:a("Parallel"),cell:"string",control:"node-ajax-options",type:"text",group:a("Options"),deps:["lanname"],options:[{label:"UNSAFE",value:"u"},{label:"RESTRICTED",value:"r"},{label:"SAFE",value:"s"}],disabled:"isDisabled",min_version:90600,select2:{allowClear:false}},{id:"procost",label:a("Estimated cost"),group:a("Options"),cell:"string",type:"text",disabled:"isDisabled",deps:["lanname"]},{id:"prorows",label:a("Estimated rows"),type:"text",deps:["proretset"],visible:"isVisible",disabled:"isDisabled",group:a("Options")},{id:"proleakproof",label:a("Leak proof?"),group:a("Options"),cell:"boolean",type:"switch",min_version:90200,disabled:"isDisabled",deps:["lanname"]},{id:"prosupportfunc",label:a("Support function"),type:"text",disabled:"isDisabled",group:a("Options"),visible:"isVisible",control:"node-ajax-options",url:"get_support_functions",cache_node:"function",min_version:12e4},{id:"proacl",label:a("Privileges"),type:"text",mode:["properties"],group:a("Security")},{id:"arguments",label:a("Arguments"),cell:"string",group:a("Definition"),type:"collection",canAdd:function e(t){return t.isNew()},canDelete:true,model:c,mode:["create","edit"],columns:["argtype","argmode","argname","argdefval"],disabled:"isDisabled",canDeleteRow:function e(t){return t.isNew()}},{id:"variables",label:"",type:"collection",group:a("Parameters"),control:"variable-collection",model:l.Node.VariableModel,mode:["edit","create"],canAdd:"canVarAdd",canEdit:false,canDelete:true,disabled:"isDisabled"},l.SecurityGroupSchema,{id:"acl",label:a("Privileges"),editable:false,model:l.Node.PrivilegeRoleModel.extend({privileges:["X"]}),uniqueCol:["grantee","grantor"],type:"collection",group:"security",mode:["edit","create"],canAdd:true,canDelete:true,control:"unique-col-collection",disabled:"isDisabled"},{id:"seclabels",label:a("Security labels"),canAdd:true,model:l.SecLabelModel,type:"collection",min_version:90100,group:"security",mode:["edit","create"],canEdit:false,canDelete:true,uniqueCol:["provider"],disabled:"isDisabled",control:"unique-col-collection",visible:function e(){return this.node&&this.node.type!="procedure"}}],validate:function e(){var t={},i,n=this.get("seclabels");if(s.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t["name"]=a("Name cannot be empty.");i=i||t["name"]}if(s.isUndefined(this.get("funcowner"))||String(this.get("funcowner")).replace(/^\s+|\s+$/g,"")==""){t["funcowner"]=a("Owner cannot be empty.");i=i||t["funcowner"]}if(s.isUndefined(this.get("pronamespace"))||String(this.get("pronamespace")).replace(/^\s+|\s+$/g,"")==""){t["pronamespace"]=a("Schema cannot be empty.");i=i||t["pronamespace"]}if(s.isUndefined(this.get("prorettypename"))||String(this.get("prorettypename")).replace(/^\s+|\s+$/g,"")==""){t["prorettypename"]=a("Return type cannot be empty.");i=i||t["prorettypename"]}if(s.isUndefined(this.get("lanname"))||String(this.get("lanname")).replace(/^\s+|\s+$/g,"")==""){t["lanname"]=a("Language cannot be empty.");i=i||t["lanname"]}if(String(this.get("lanname"))=="c"){if(s.isUndefined(this.get("probin"))||String(this.get("probin")).replace(/^\s+|\s+$/g,"")==""){t["probin"]=a("Object File cannot be empty.");i=i||t["probin"]}if(s.isUndefined(this.get("prosrc_c"))||String(this.get("prosrc_c")).replace(/^\s+|\s+$/g,"")==""){t["prosrc_c"]=a("Link Symbol cannot be empty.");i=i||t["prosrc_c"]}}else{if(s.isUndefined(this.get("prosrc"))||String(this.get("prosrc")).replace(/^\s+|\s+$/g,"")==""){t["prosrc"]=a("Code cannot be empty.");i=i||t["prosrc"]}}if(n){var r;for(var o=0;o<n.models.length&&!r;o++){r=n.models[o].validate.apply(n.models[o]);if(r){t["seclabels"]=r;i=i||r}}}this.errorModel.clear().set(t);if(s.size(t)){this.trigger("on-status",{msg:i});return i}return null},isVisible:function e(){if(this.name=="sysproc"){return false}return true},isDisabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}switch(this.name){case"proargs":case"proargtypenames":case"prorettypename":case"proretset":case"proiswindow":return!t.isNew();case"prorows":if(t.get("proretset")==true){return false}return true;case"prosupportfunc":var i=n.Browser.tree.selected();if(n.Browser.Nodes["function"].getTreeNodeHierarchy(i).server.user.is_superuser)return false;return true;default:return false}},canVarAdd:function e(){if(this.node_info&&"catalog"in this.node_info){return false}return true}})})}return l.Nodes["function"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(7),i(16)],r=function(e,t,i,n,r,o,a){if(!o.Nodes["coll-edbfunc"]){o.Nodes["coll-edbfunc"]=o.Collection.extend({node:"edbfunc",label:e("Functions"),type:"coll-edbfunc",columns:["name","funcowner","description"],canDrop:false,canDropCascade:false})}if(!o.Nodes["edbfunc"]){o.Nodes["edbfunc"]=o.Node.extend({type:"edbfunc",dialogHelp:t("help.static",{filename:"edbfunc_dialog.html"}),label:e("Function"),collection_type:"coll-edbfunc",hasDepends:true,canEdit:false,hasSQL:true,hasScriptTypes:[],parent_type:["package"],Init:function e(){if(this.initialized)return;this.initialized=true},canDrop:false,canDropCascade:false,model:o.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,funcowner:undefined,pronargs:undefined,proargs:undefined,proargtypenames:undefined,prorettypename:undefined,lanname:"sql",prosrc:undefined,proacl:undefined,visibility:"Unknown"},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties"],disabled:true},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:e("Owner"),cell:"string",type:"text",disabled:true},{id:"pronargs",label:e("Argument count"),cell:"string",type:"text",group:e("Definition"),mode:["properties"]},{id:"proargs",label:e("Arguments"),cell:"string",type:"text",group:e("Definition"),mode:["properties"],disabled:true},{id:"proargtypenames",label:e("Signature arguments"),cell:"string",type:"text",group:e("Definition"),mode:["properties"],disabled:true},{id:"prorettypename",label:e("Return type"),cell:"string",type:"text",group:e("Definition"),disabled:true,mode:["properties"],visible:"isVisible"},{id:"visibility",label:e("Visibility"),cell:"string",type:"text",mode:["properties"],disabled:true},{id:"lanname",label:e("Language"),cell:"string",type:"text",group:e("Definition"),disabled:true},{id:"prosrc",label:e("Code"),cell:"string",type:"text",mode:["properties"],group:e("Code"),tabPanelCodeClass:"sql-code-control",control:a.SqlCodeControl,visible:function e(t){if(t.get("lanname")=="c"){return false}return true},disabled:true}],validate:function e(){return null},isVisible:function e(){if(this.name=="sysproc"){return false}return true}})})}return o.Nodes["edbfunc"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(11)],r=function(r,e,t,f,i,h,n,o){if(!h.Nodes["coll-rule"]){i.Browser.Nodes["coll-rule"]=i.Browser.Collection.extend({node:"rule",label:r("Rules"),type:"coll-rule",columns:["name","owner","comment"],canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:o.isTreeItemOfChildOfSchema})}if(!h.Nodes["rule"]){i.Browser.Nodes["rule"]=h.Node.extend({parent_type:["table","view","partition"],type:"rule",sqlAlterHelp:"sql-alterrule.html",sqlCreateHelp:"sql-createrule.html",dialogHelp:e("help.static",{filename:"rule_dialog.html"}),label:r("rule"),collection_type:"coll-table",hasSQL:true,hasDepends:true,canDrop:function e(t,i){o.isTreeItemOfChildOfSchema.apply(this,[t,i]);if(f.has(t,"label")&&t.label==="_RETURN")return false;else{return true}},canDropCascade:function e(t,i){o.isTreeItemOfChildOfSchema.apply(this,[t,i]);if(f.has(t,"label")&&t.label==="_RETURN")return false;else{return true}},Init:function e(){if(this.initialized)return;this.initialized=true;h.add_menus([{name:"create_rule_on_coll",node:"coll-rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:r("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:true},enable:"canCreate"},{name:"create_rule_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:r("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:true},enable:"canCreate"},{name:"create_rule",node:"rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:r("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:true},enable:"canCreate"},{name:"create_rule",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:true},enable:"canCreate"},{name:"create_rule",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:true},enable:"canCreate"}])},model:i.Browser.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:r("Name"),type:"text",disabled:function e(t){if(t&&t.get("name")=="_RETURN"){return true}if(t.isNew()){return false}else if(t.node_info.server.version>=90400){return false}return true}},{id:"oid",label:r("OID"),type:"text",disabled:true,mode:["properties"]},{id:"schema",label:"",type:"text",visible:false,disabled:function e(t){t.set("schema",t.node_info.schema.label)}},{id:"view",label:"",type:"text",visible:false,disabled:function e(t){t.set("view",this.node_data.label)}},{id:"event",label:r("Event"),control:"select2",group:r("Definition"),type:"text",select2:{width:"100%",allowClear:false},options:[{label:"Select",value:"Select"},{label:"Insert",value:"Insert"},{label:"Update",value:"Update"},{label:"Delete",value:"Delete"}]},{id:"do_instead",label:r("Do instead?"),group:r("Definition"),type:"switch"},{id:"condition",label:r("Condition"),type:"text",group:r("Condition"),tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl},{id:"statements",label:r("Commands"),type:"text",group:r("Commands"),tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl},{id:"system_rule",label:r("System rule?"),type:"switch",mode:["properties"]},{id:"enabled",label:r("Enabled?"),type:"switch",mode:["properties"]},{id:"comment",label:r("Comment"),cell:"string",type:"multiline"}],validate:function e(){var t={},i,n=this.get("name");if(f.isUndefined(n)||f.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")===""){t["name"]=r("Please specify name.");i=i||t["name"];this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}return null}}),canCreate:function e(t,i,n){if(n&&n.check===false)return true;var r=h.tree,o=i,a=t;while(o){if(f.indexOf(["schema"],a._type)>-1)return true;if("coll-rule"==a._type){var s=r.hasParent(o)?r.parent(o):null,l=r.hasParent(s)?r.parent(s):null,d=l?r.itemData(l):null,c=r.hasParent(l)?r.parent(l):null,u=c?r.itemData(c):null;if(u._type=="catalog"){return false}else{return true}}else if("view"==a._type||"table"==a._type){s=r.hasParent(o)?r.parent(o):null;l=r.hasParent(s)?r.parent(s):null;d=l?r.itemData(l):null;if(d._type=="schema"){return true}else{return false}}o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}return true}})}return h.Nodes["coll-rule"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(0),i(1),i(9),i(5),i(6),i(12),i(7)],r=function(d,t,c,i,e,n,r){r.PartitionRow=r.Row.extend({modelDuplicateClass:"bg-model-duplicate",initialize:function e(){r.Row.prototype.initialize.apply(this,arguments);var o=this;o.model.on("change:is_attach",function(){setTimeout(function(){o.columns.each(function(e){if(e.get("name")=="partition_name"){var t=o.columns.indexOf(e),i=e.get("cellFunction"),n=new(i.apply(e,[o.model]))({column:e,model:o.model}),r=o.cells[t];r.remove();o.cells[t]=n;o.render()}})},10)});o.listenTo(o.model,"pgadmin-session:model:duplicate",o.modelDuplicate);o.listenTo(o.model,"pgadmin-session:model:unique",o.modelUnique)},modelDuplicate:function e(){t(this.el).removeClass("new");t(this.el).addClass(this.modelDuplicateClass)},modelUnique:function e(){t(this.el).removeClass(this.modelDuplicateClass)}});var o=function e(t){var i=t.get("is_attach");if(i){var n=[];t.set({partition_name:undefined},{silent:true});c.each(t.top.table_options,function(e){n.push([e.label,e.value])});return r.Extension.Select2Cell.extend({optionValues:n})}else{return r.StringCell}};n.PartitionKeyModel=e.Node.Model.extend({defaults:{key_type:"column",pt_column:undefined,expression:undefined},keys:["pt_column"],schema:[{id:"key_type",label:d("Key type"),type:"select2",editable:true,cell:"select2",cellHeaderClasses:"width_percent_25",select2:{allowClear:false},options:[{label:d("Column"),value:"column"},{label:d("Expression"),value:"expression"}]},{id:"pt_column",label:d("Column"),type:"text",cell:r.Extension.Select2DepCell.extend({keyPathAccessor:function e(t,i){var n=t;if(c.isArray(n)){return c.map(n,function(e){return e["pt_column"]})}i=i.split(".");for(var r=0;r<i.length;r++){if(c.isNull(n))return null;if(c.isEmpty(i[r]))continue;if(!c.isUndefined(n[i[r]]))n=n[i[r]]}return c.isObject(n)&&!c.isArray(n)?null:n},initialize:function e(){var t=this;if(this.model.handler){r.Extension.Select2DepCell.prototype.initialize.apply(this,arguments);if(c.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.resetColOptions);t.listenTo(i,"change:name",t.resetColOptions)}t.custom_options()}},resetColOptions:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},custom_options:function e(){var t=this.model.top.get("columns"),i=this.model.top.get("typname"),n=this.model.top.of_types_tables,r=[];if(t.length>0){c.each(t.models,function(e){var t=e.get("name");if(!c.isUndefined(t)&&!c.isNull(t)){r.push({label:t,value:t,image:"icon-column"})}})}else if(!c.isUndefined(i)&&!c.isNull(i)&&!c.isUndefined(n)&&n.length>0){c.each(n,function(e){if(e.label==i){c.each(e.oftype_columns,function(e){r.push({label:e.name,value:e.name,image:"icon-column"})})}})}this.column.set("options",r)},remove:function e(){if(this.model.handler){var t=this,i=t.model.top.get("columns");t.stopListening(i,"remove",t.resetColOptions);t.stopListening(i,"change:name",t.resetColOptions);r.Extension.Select2DepCell.prototype.remove.apply(this,arguments)}}}),deps:["key_type"],cellHeaderClasses:"width_percent_30",transform:function e(t){var i=[];if(t&&c.isArray(t)){c.each(t,function(e){i.push({label:e.label,value:e.label,image:"icon-column"})})}return i},select2:{allowClear:false},editable:function e(t){if(t.get("key_type")=="expression"){setTimeout(function(){t.set("pt_column",undefined)},10);return false}return true}},{id:"expression",label:d("Expression"),type:"text",cell:r.Extension.StringDepCell,cellHeaderClasses:"width_percent_45",deps:["key_type"],editable:function e(t){if(t.get("key_type")=="column"){setTimeout(function(){t.set("expression",undefined)},10);return false}return true}}],validate:function e(){var t=this.get("key_type"),i=this.get("pt_column"),n=this.get("expression"),r;this.errorModel.clear();if(c.isUndefined(t)||c.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){r=d("Partition key type cannot be empty.");this.errorModel.set("key_type",r);return r}else if(t=="column"&&c.isUndefined(i)||c.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){r=d("Partition key column cannot be empty.");this.errorModel.set("pt_column",r);return r}else if(t=="expression"&&c.isUndefined(n)||c.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){r=d("Partition key expression cannot be empty.");this.errorModel.set("expression",r);return r}return null}});n.PartitionsModel=e.Node.Model.extend({idAttribute:"oid",defaults:{oid:undefined,is_attach:false,partition_name:undefined,is_default:undefined,values_from:undefined,values_to:undefined,values_in:undefined,values_modulus:undefined,values_remainder:undefined},keys:["partition_name"],schema:[{id:"oid",label:d("OID"),type:"text"},{id:"is_attach",label:d("Operation"),cell:"switch",type:"switch",options:{onText:d("Attach"),offText:d("Create"),width:65},cellHeaderClasses:"width_percent_5",editable:function e(t){if(t instanceof i.Model&&t.isNew()&&!t.top.isNew())return true;return false}},{id:"partition_name",label:d("Name"),type:"text",cell:"string",cellHeaderClasses:"width_percent_15",editable:function e(t){if(t instanceof i.Model&&t.isNew())return true;return false},cellFunction:o},{id:"is_default",label:d("Default"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_5",min_version:11e4,options:{onText:d("Yes"),offText:d("No")},editable:function e(t){if(t.handler&&t.handler.top&&t.handler.top.attributes&&(t.handler.top.attributes.partition_type==="range"||t.handler.top.attributes.partition_type==="list")&&t instanceof i.Model&&t.isNew()&&t.handler.top.node_info.server.version>=11e4)return true;return false}},{id:"values_from",label:d("From"),type:"text",cell:r.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function e(t){if(t.handler&&t.handler.top&&t.handler.top.attributes&&t.handler.top.attributes.partition_type==="range"&&t instanceof i.Model&&t.isNew()&&t.get("is_default")!==true)return true;return false}},{id:"values_to",label:d("To"),type:"text",cell:r.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function e(t){if(t.handler&&t.handler.top&&t.handler.top.attributes&&t.handler.top.attributes.partition_type==="range"&&t instanceof i.Model&&t.isNew()&&t.get("is_default")!==true)return true;return false}},{id:"values_in",label:d("In"),type:"text",cell:r.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function e(t){if(t.handler&&t.handler.top&&t.handler.top.attributes&&t.handler.top.attributes.partition_type==="list"&&t instanceof i.Model&&t.isNew()&&t.get("is_default")!==true)return true;return false}},{id:"values_modulus",label:d("Modulus"),type:"int",cell:r.Extension.StringDepCell,cellHeaderClasses:"width_percent_15",editable:function e(t){if(t.handler&&t.handler.top&&t.handler.top.attributes&&t.handler.top.attributes.partition_type==="hash"&&t instanceof i.Model&&t.isNew())return true;return false}},{id:"values_remainder",label:d("Remainder"),type:"int",cell:r.Extension.StringDepCell,cellHeaderClasses:"width_percent_15 width_percent_20",editable:function e(t){if(t.handler&&t.handler.top&&t.handler.top.attributes&&t.handler.top.attributes.partition_type==="hash"&&t instanceof i.Model&&t.isNew())return true;return false}}],validate:function e(){var t=this.get("partition_name"),i=this.get("is_default"),n=this.get("values_from"),r=this.get("values_to"),o=this.get("values_in"),a=this.get("values_modulus"),s=this.get("values_remainder"),l;this.errorModel.clear();if(c.isUndefined(t)||c.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")===""){l=d("Partition name cannot be empty.");this.errorModel.set("partition_name",l);return l}if(this.top.get("partition_type")==="range"){if(i!==true&&(c.isUndefined(n)||c.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==="")){l=d("For range partition From field cannot be empty.");this.errorModel.set("values_from",l);return l}else if(i!==true&&(c.isUndefined(r)||c.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==="")){l=d("For range partition To field cannot be empty.");this.errorModel.set("values_to",l);return l}}else if(this.top.get("partition_type")==="list"){if(i!==true&&(c.isUndefined(o)||c.isNull(o)||String(o).replace(/^\s+|\s+$/g,"")==="")){l=d("For list partition In field cannot be empty.");this.errorModel.set("values_in",l);return l}}else if(this.top.get("partition_type")==="hash"){if(c.isUndefined(a)||c.isNull(a)||String(a).replace(/^\s+|\s+$/g,"")===""){l=d("For hash partition Modulus field cannot be empty.");this.errorModel.set("values_modulus",l);return l}else if(c.isUndefined(s)||c.isNull(s)||String(s).replace(/^\s+|\s+$/g,"")===""){l=d("For hash partition Remainder field cannot be empty.");this.errorModel.set("values_remainder",l);return l}}return null}})}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){(function(e){(function(e){e.extend(true,window,{Slick:{Event:t,EventData:a,EventHandler:i,Range:n,NonDataRow:r,Group:o,GroupTotals:s,EditorLock:l,GlobalEditorLock:new l,keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick"}});function a(){var e=false;var t=false;this.stopPropagation=function(){e=true};this.isPropagationStopped=function(){return e};this.stopImmediatePropagation=function(){t=true};this.isImmediatePropagationStopped=function(){return t}}function t(){var o=[];this.subscribe=function(e){o.push(e)};this.unsubscribe=function(e){for(var t=o.length-1;t>=0;t--){if(o[t]===e){o.splice(t,1)}}};this.notify=function(e,t,i){t=t||new a;i=i||this;var n;for(var r=0;r<o.length&&!(t.isPropagationStopped()||t.isImmediatePropagationStopped());r++){n=o[r].call(i,t,e)}return n}}function i(){var n=[];this.subscribe=function(e,t){n.push({event:e,handler:t});e.subscribe(t);return this};this.unsubscribe=function(e,t){var i=n.length;while(i--){if(n[i].event===e&&n[i].handler===t){n.splice(i,1);e.unsubscribe(t);return}}return this};this.unsubscribeAll=function(){var e=n.length;while(e--){n[e].event.unsubscribe(n[e].handler)}n=[];return this}}function n(e,t,i,n){if(i===undefined&&n===undefined){i=e;n=t}this.fromRow=Math.min(e,i);this.fromCell=Math.min(t,n);this.toRow=Math.max(e,i);this.toCell=Math.max(t,n);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}function r(){this.__nonDataRow=true}function o(){this.__group=true;this.level=0;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.selectChecked=false;this.totals=null;this.rows=[];this.groups=null;this.groupingKey=null}o.prototype=new r;o.prototype.equals=function(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title};function s(){this.__groupTotals=true;this.group=null;this.initialized=false}s.prototype=new r;function l(){var t=null;this.isActive=function(e){return e?t===e:t!==null};this.activate=function(e){if(e===t){return}if(t!==null){throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController")}if(!e.commitCurrentEdit){throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()")}if(!e.cancelCurrentEdit){throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()")}t=e};this.deactivate=function(e){if(t!==e){throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one")}t=null};this.commitCurrentEdit=function(){return t?t.commitCurrentEdit():true};this.cancelCurrentEdit=function e(){return t?t.cancelCurrentEdit():true}}})(e)}).call(this,i(0))},,,,,,,,,,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getHelpUrl=n;function n(e,t,i){var n=Math.floor(i/1e4),r=Math.floor(i/100)-n*100,o="";if(n>=10){o=e.replace("$VERSION$",n)}else{o=e.replace("$VERSION$",n+"."+r)}if(o.substr(-1)!="/"){o=o+"/"}return o+t}},function(e,t,i){"use strict";var s=n(i(1));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,n,r,o){var a="";s.default.each(s.default.sortBy(s.default.pick(t,r),function(e){return e.priority}),function(e){a="".concat(a,"/").concat(encodeURI(e._id))});a=o?"".concat(a,"/").concat(o):"".concat(a,"/");return"".concat(e).concat(n,"/").concat(i).concat(a)}e.exports={generate_url:r}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.browserTreeState=t.pgBrowser=void 0;var h=s(i(1));var n=s(i(0));var r=s(i(4));var o=s(i(2));var a=s(i(3));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return u(e)||d(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++){i[t]=e[t]}return i}}var p=a.default.Browser=a.default.Browser||{};t.pgBrowser=p;var f=p.browserTreeState=p.browserTreeState||{};t.browserTreeState=f;h.default.extend(p.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function e(){var t=p.get_preference("browser","browser_tree_state_save_interval");if(!h.default.isUndefined(t)&&t.value!==-1){setInterval(this.save_state,t.value*1e3);this.fetch_state.apply(this);p.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this);p.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this);p.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this)}else if(!h.default.isUndefined(t)){n.default.ajax({url:(0,r.default)("settings.reset_tree_state"),type:"DELETE"}).fail(function(e){var t=e.responseText;if(e.status==417||e.status==410||e.status==500){try{var i=JSON.parse(e.responseText);t=i.errormsg}catch(e){console.warn(e.stack||e)}}console.warn((0,o.default)('Error resetting the tree saved state."'),t)})}},save_state:function e(){var t=p.browserTreeState;if(t.last_state==JSON.stringify(t.current_state))return;n.default.ajax({url:(0,r.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(t.current_state)}).done(function(){t.last_state=JSON.stringify(t.current_state)}).fail(function(e){var t=e.responseText;if(e.status==417||e.status==410||e.status==500){try{var i=JSON.parse(e.responseText);t=i.errormsg}catch(e){console.warn(e.stack||e)}}console.warn((0,o.default)('Error saving the tree state."'),t)})},fetch_state:function e(){var t=this;n.default.ajax({url:(0,r.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done(function(e){t.stored_state=e}).fail(function(e){var t=e.responseText;if(e.status==417||e.status==410||e.status==500){try{var i=JSON.parse(e.responseText);t=i.errormsg}catch(e){console.warn(e.stack||e)}}console.warn((0,o.default)("Error fetching the tree state."),t)})},update_cache:function e(t){var i=t&&p.tree.itemData(t),n=i&&p.Nodes[i._type],r=n.getTreeNodeHierarchy(t),o=undefined,a=p.tree.pathId(t),s=a.join(),l=[],d=-1;if(!p.tree.hasParent(t)||!(this.parent in r))return;o=r[this.parent]["_id"];if(p.tree.isOpen(t)){a.push(i.id);l=a.join();if(!(o in this.current_state)){this.current_state[o]={paths:[],selected:{},conn_status:{},is_opened:{}}}var c=h.default.find(this.current_state[o]["paths"],function(e){return e.search(l)!==-1});if(h.default.isUndefined(c)){if(!h.default.isUndefined(this.current_state[o]["paths"])){d=this.current_state[o]["paths"].indexOf(s)}else{this.current_state[o]["paths"]=[]}if(d!==-1){this.current_state[o]["paths"][d]=l}else{this.current_state[o]["paths"].push(l)}}}this.update_database_status(t);this.update_current_selected_item(r)},remove_from_cache:function e(t){var n=this,i=n.stored_state||{},r=t&&p.tree.itemData(t),o=r&&p.Nodes[r._type],a=o&&o.getTreeNodeHierarchy(t);if(!p.tree.hasParent(t)||!(n.parent in a))return;var s=a&&a[n.parent]["_id"],l=a&&a[n.orig_parent]["id"];this.update_database_status(t);if(r._type==n.parent||r._type=="database"){if(s in i&&"paths"in i[s]){i[s]["paths"]=n.current_state[s]["paths"];n.save_state()}return}if(p.tree.isClosed(t)){var d=n.current_state[s]["paths"],c=undefined;if("database"in a)c=a["database"]["id"];if(!h.default.isUndefined(d)&&!h.default.isUndefined(d.length)){var u=0,f=undefined;h.default.each(d,function(e){if(h.default.isUndefined(e))return;var t=e.split(",");if(t.indexOf(r.id)!==-1){if(c===undefined||c!==undefined&&t.indexOf(c)!==-1){var i=t.indexOf(r.id);t.splice(i);f=t.join();if(f==l)n.current_state[s]["paths"].splice(e,1);else n.current_state[s]["paths"][u]=f}}u++})}}},expand_from_previous_state:function e(r){var o=this,a=o.stored_state||{},s=r&&p.tree.itemData(r),t=s&&p.Nodes[s._type],l=t&&t.getTreeNodeHierarchy(r);if(!p.tree.hasParent(r)||!(o.parent in l))return;if(s["_type"]==o.parent&&p.tree.isOpen(r)===false)return;var i=a[l[o.parent]["_id"]];if(s["_type"]=="database"&&i&&"conn_status"in i&&"is_opened"in i&&(i["conn_status"][s["id"]]===0||i["is_opened"][s["id"]]===0||!(s["id"]in i["is_opened"])))return;if(!h.default.isUndefined(i)&&"paths"in i&&!h.default.isUndefined(i["paths"].length)){var n=c(i["paths"]),d=undefined;if("database"in l)d=l["database"]["id"];h.default.each(n,function(e){if(h.default.isUndefined(e))return;var t=e.split(",");if(t.indexOf(s.id)!==-1){if(d===undefined||d!==undefined&&t.indexOf(d)!==-1){var i=t.indexOf(s.id);p.tree.toggle(r);if(i==t.length-1){var n=a[l[o.parent]["_id"]]["paths"].indexOf(e);a[l[o.parent]["_id"]]["paths"].splice(n,1)}}}})}this.select_tree_item(r)},update_database_status:function e(t){var i=t&&p.tree.itemData(t),n=i&&p.Nodes[i._type],r=n.getTreeNodeHierarchy(t);if("database"in r){var o=r["database"]["id"],a=r&&r[this.parent]["_id"];if(a in this.current_state&&"selected"in this.current_state[a]){if(r["database"].connected){this.current_state[a]["conn_status"][o]=1}else{this.current_state[a]["conn_status"][o]=0}if(i._type=="database"){if(p.tree.isOpen(t)){this.current_state[a]["is_opened"][o]=1}else{this.current_state[a]["is_opened"][o]=0}}}}},update_current_selected_item:function e(t){if(!(this.parent in t))return;var i=t&&t[this.parent]["_id"],n=p.tree.itemData(p.tree.selected()),r=undefined;n=n?n.id:undefined;if("database"in t){r=t["database"]["id"]}if(i in this.current_state&&"selected"in this.current_state[i]&&!h.default.isUndefined(n)){this.current_state[i]["selected"][t[this.parent]["id"]]=n;if(!h.default.isUndefined(r))this.current_state[i]["selected"][r]=n}},select_tree_item:function e(t){var i=this.stored_state||{},n=t&&p.tree.itemData(t),r=n&&p.Nodes[n._type],o=r&&r.getTreeNodeHierarchy(t),a=i[o[this.parent]["_id"]];if("database"in o){var s=o["database"]["id"];if(a&&"selected"in a&&s in a["selected"]){if(a["selected"][s]==n.id){p.tree.select(t)}}}}})},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ModelValidation=void 0;var n=r(i(2));var o=r(i(1));var a=i(199);function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,i){if(t)l(e.prototype,t);if(i)l(e,i);return e}var c=function(){function r(e){s(this,r);this.err={};this.errmsg="";this.model=e}d(r,[{key:"validate",value:function e(){var t=this.model.get("service");if(!this.model.isNew()&&"id"in this.model.sessAttrs){this.err["id"]=(0,n.default)("The ID cannot be changed.");this.errmsg=this.err["id"]}else{this.model.errorModel.unset("id")}this.checkForEmpty("name",(0,n.default)("Name must be specified."));if(r.isEmptyString(t)){this.setNullValueForEmptyString("service");this.checkHostAndHostAddress();this.checkForEmpty("db",(0,n.default)("Maintenance database must be specified."));this.checkForEmpty("username",(0,n.default)("Username must be specified."));this.checkForEmpty("port",(0,n.default)("Port must be specified."))}else{this.checkForEmpty("db",(0,n.default)("Maintenance database must be specified."));this.clearHostAddressAndDbErrors()}if(this.model.get("use_ssh_tunnel")){this.checkForEmpty("tunnel_host",(0,n.default)("SSH Tunnel host must be specified."));this.checkForEmpty("tunnel_port",(0,n.default)("SSH Tunnel port must be specified."));this.checkForEmpty("tunnel_username",(0,n.default)("SSH Tunnel username must be specified."));if(this.model.get("tunnel_authentication")){this.checkForEmpty("tunnel_identity_file",(0,n.default)("SSH Tunnel identity file must be specified."))}}this.model.errorModel.set(this.err);if(o.default.size(this.err)){return this.errmsg}return null}},{key:"setNullValueForEmptyString",value:function e(t){var i=this.model.get(t);if(o.default.isUndefined(i)||o.default.isNull(i))return;if(String(i).trim()===""){this.model.set(t,null)}}},{key:"clearHostAddressAndDbErrors",value:function e(){var t=this;o.default.each(["host","hostaddr","db","username","port"],function(e){t.setNullValueForEmptyString(e);t.model.errorModel.unset(e)})}},{key:"checkHostAndHostAddress",value:function e(){var t=(0,n.default)("Either Host name, Address or Service must "+"be specified.");if(this.checkForEmpty("host",t)&&this.checkForEmpty("hostaddr",t)){this.errmsg=this.errmsg||t}else{this.errmsg=undefined;delete this.err["host"];delete this.err["hostaddr"]}this.checkForValidIp(this.model.get("hostaddr"),(0,n.default)("Host address must be valid IPv4 or IPv6 address."))}},{key:"checkForValidIp",value:function e(t,i){if(t){var n=new a.Address6(t).isValid();var r=new a.Address4(t).isValid();if(!r&&!n){this.err["hostaddr"]=i;this.errmsg=i}}else{this.model.errorModel.unset("hostaddr")}}},{key:"checkForEmpty",value:function e(t,i){var n=this.model.get(t);if(r.isEmptyString(n)){this.err[t]=i;this.errmsg=this.errmsg||i;return true}else{this.model.errorModel.unset(t);return false}}}],[{key:"isEmptyString",value:function e(t){return o.default.isUndefined(t)||o.default.isNull(t)||String(t).trim()===""}}]);return r}();t.ModelValidation=c},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(10),i(5),i(9),i(19),i(22),i(27),i(60),i(82),i(67)],r=function(p,n,m,g,v,_,r,b,y,i,e,o){if(r.UserManagement){return r.UserManagement}var w=n("user_management.users"),x=n("user_management.roles"),C=function e(t){return new y.Extension.ClientSideFilter({collection:t,placeholder:g("Filter by email"),wait:150})};r.UserManagement={init:function e(){if(this.initialized)return;this.initialized=true;return this},change_password:function e(t){var i=p("Change Password");if(!_.ChangePassword){_.dialog("ChangePassword",function e(){return{main:function e(t,i){this.set({title:t,url:i})},build:function e(){_.pgDialogBuild.apply(this)},settings:{url:undefined},setup:function e(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:p("Change Password"),url:n("help.static",{filename:"change_user_password.html"})}},{text:p("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:false,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false,closable:false}}},hooks:{onclose:function e(){return setTimeout(function(){return _.ChangePassword().destroy()},500)}},prepare:function e(){var t=document.createElement("iframe");t.frameBorder="no";t.width="100%";t.height="100%";t.src=this.setting("url");this.elements.content.appendChild(t)},callback:function e(t){if(t.button.element.name=="dialog_help"){t.cancel=true;r.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);return}}}})}_.ChangePassword(i,t).resizeTo(r.stdW.lg,r.stdH.md)},isPgaLoginRequired:function e(t){if(t.responseJSON===undefined&&t.data!==undefined){return t.status===401&&t.data&&t.data.info&&t.data.info==="PGADMIN_LOGIN_REQUIRED"}return t.status===401&&t.responseJSON&&t.responseJSON.info&&t.responseJSON.info==="PGADMIN_LOGIN_REQUIRED"},pgaLogin:function e(t){var i=p("pgAdmin 4 login");t=t||n("security.login");if(!_.PgaLogin){_.dialog("PgaLogin",function e(){return{main:function e(t,i){this.set({title:t,url:i})},build:function e(){_.pgDialogBuild.apply(this)},settings:{url:undefined},setup:function e(){return{buttons:[{text:p("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:true,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false,closable:false}}},hooks:{onclose:function e(){return setTimeout(function(){return _.PgaLogin().destroy()})}},prepare:function e(){var t=this,i=document.createElement("iframe"),n=this.setting("url");i.onload=function(){var e=this.contentDocument||this.contentWindow.document;if(e.location.href.indexOf(n)==-1){this.contentWindow.stop();this.onload=null;t.close();r.Events.trigger("pgadmin:user:logged-in")}};i.frameBorder="no";i.width="100%";i.height="100%";i.src=n;t.elements.content.appendChild(i)}}})}_.PgaLogin(i,t).resizeTo(r.stdW.md,r.stdH.md)},show_users:function e(){if(!o["is_admin"])return;var u=[];var f=r.Node.Model.extend({idAttribute:"id",urlRoot:w,defaults:{id:undefined,email:undefined,active:true,role:undefined,newPassword:undefined,confirmPassword:undefined},schema:[{id:"email",label:p("Email"),type:"text",cell:y.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["id"],editable:function e(t){if(t instanceof b.Collection){return false}if(t.isNew()){return true}return false}},{id:"role",label:p("Role"),type:"text",control:"Select2",cellHeaderClasses:"width_percent_20",cell:"select2",select2:{allowClear:false,openOnEnter:false},options:function t(e){var t=[];if(e instanceof i.Control){g.each(u,function(e){t.push({label:e.name,value:e.id.toString()})})}else{g.each(u,function(e){t.push([e.name,e.id.toString()])})}return t},editable:function e(t){if(t instanceof b.Collection){return true}if(t.get("id")==o["id"]){return false}else{return true}}},{id:"active",label:p("Active"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_10",editable:function e(t){if(t instanceof b.Collection){return true}if(t.get("id")==o["id"]){return false}else{return true}}},{id:"newPassword",label:p("New password"),type:"password",disabled:false,control:"input",cell:"password",cellHeaderClasses:"width_percent_20"},{id:"confirmPassword",label:p("Confirm password"),type:"password",disabled:false,control:"input",cell:"password",cellHeaderClasses:"width_percent_20"}],validate:function e(){var t=null,i=this.changed||{},n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(("email"in i||!this.isNew())&&(g.isUndefined(this.get("email"))||g.isNull(this.get("email"))||String(this.get("email")).replace(/^\s+|\s+$/g,"")=="")){t=p("Email address cannot be empty.");this.errorModel.set("email",t);return t}else if(!!this.get("email")&&!n.test(this.get("email"))){t=v(p("Invalid email address: %s.")).sprintf(this.get("email")).value();this.errorModel.set("email",t);return t}else if(!!this.get("email")&&this.collection.where({email:this.get("email")}).length>1){t=v(p("The email address %s already exists.")).sprintf(this.get("email")).value();this.errorModel.set("email",t);return t}else{this.errorModel.unset("email")}if("role"in i&&(g.isUndefined(this.get("role"))||g.isNull(this.get("role"))||String(this.get("role")).replace(/^\s+|\s+$/g,"")=="")){t=v(p("Role cannot be empty for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("role",t);return t}else{this.errorModel.unset("role")}if(this.isNew()){if("newPassword"in i&&(g.isUndefined(this.get("newPassword"))||g.isNull(this.get("newPassword"))||this.get("newPassword")=="")){t=v(p("Password cannot be empty for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("newPassword",t);return t}else if(!g.isUndefined(this.get("newPassword"))&&!g.isNull(this.get("newPassword"))&&this.get("newPassword").length<6){t=v(p("Password must be at least 6 characters for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("newPassword",t);return t}else{this.errorModel.unset("newPassword")}if("confirmPassword"in i&&(g.isUndefined(this.get("confirmPassword"))||g.isNull(this.get("confirmPassword"))||this.get("confirmPassword")=="")){t=v(p("Confirm Password cannot be empty for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("confirmPassword",t);return t}else{this.errorModel.unset("confirmPassword")}if(!!this.get("newPassword")&&!!this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword")){t=v(p("Passwords do not match for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("confirmPassword",t);return t}else{this.errorModel.unset("confirmPassword")}}else{if((g.isUndefined(this.get("newPassword"))||g.isNull(this.get("newPassword"))||this.get("newPassword")=="")&&(g.isUndefined(this.get("confirmPassword"))||g.isNull(this.get("confirmPassword"))||this.get("confirmPassword")=="")){this.errorModel.unset("newPassword");if(this.get("newPassword")==""){this.set({newPassword:undefined})}this.errorModel.unset("confirmPassword");if(this.get("confirmPassword")==""){this.set({confirmPassword:undefined})}}else if(!g.isUndefined(this.get("newPassword"))&&!g.isNull(this.get("newPassword"))&&!this.get("newPassword")==""&&this.get("newPassword").length<6){t=v(p("Password must be at least 6 characters for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("newPassword",t);return t}else if(g.isUndefined(this.get("confirmPassword"))||g.isNull(this.get("confirmPassword"))||this.get("confirmPassword")==""){t=v(p("Confirm Password cannot be empty for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("confirmPassword",t);return t}else if(!!this.get("newPassword")&&!!this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword")){t=v(p("Passwords do not match for user %s.")).sprintf(this.get("email")||"").value();this.errorModel.set("confirmPassword",t);return t}else{this.errorModel.unset("newPassword");this.errorModel.unset("confirmPassword")}}return null}}),h=i.generateGridColumnsFromModel(null,f,"edit"),t=y.Extension.DeleteCell.extend({deleteRow:function e(t){var i=this;t.preventDefault();if(i.model.get("id")==o["id"]){_.alert(p("Cannot delete user."),p("Cannot delete currently logged in user."),function(){return true});return true}var n=!g.isUndefined(this.column.get("canDeleteRow"))&&g.isFunction(this.column.get("canDeleteRow"))?y.callByNeed(this.column.get("canDeleteRow"),this.column,this.model):true;if(n){if(i.model.isNew()){i.model.destroy()}else{_.confirm(p("Delete user?"),p("Are you sure you wish to delete this user?"),function(){i.model.destroy({wait:true,success:function e(){_.success(p("User deleted."))},error:function e(){_.error(p("Error during deleting user."))}})},function(){return true})}}else{_.alert(p("Error"),p("This user cannot be deleted."),function(){return true})}}});h.columns.unshift({name:"pg-backform-delete",label:"",cell:t,editable:false,cell_priority:-1,canDeleteRow:true});if(!_.UserManagement){_.dialog("UserManagement",function e(){return{main:function e(t){this.set("title",t)},build:function e(){_.pgDialogBuild.apply(this)},setup:function e(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:p("Users"),url:n("help.static",{filename:"pgadmin_user.html"})}},{text:p("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button user_management_pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{title:p("User Management"),padding:!1,overflow:!1,modal:false,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false,closable:false}}},hooks:{onclose:function e(){if(this.view){this.view.remove({data:true,internal:true,silent:true});this.$content.remove()}}},prepare:function e(){var t=g.template(['<div class="pg-prop-footer" style="visibility:hidden;">',' <div class="pg-prop-status-bar">','    <div class="error-in-footer"> ','      <div class="d-flex px-2 py-1"> ','        <div class="pr-2"> ','          <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i> ',"        </div> ",'        <div class="alert-text"></div> ','        <div class="ml-auto close-error-bar"> ','          <a class="close-error fa fa-times text-danger"></a> ',"        </div> ","      </div> ","    </div> "," </div>","</div>"].join("\n")),r=m(t()),i=y.Row.extend({userInvalidClass:"bg-user-invalid",initialize:function e(){y.Row.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"pgadmin:user:invalid",this.userInvalid);this.listenTo(this.model,"pgadmin:user:valid",this.userValid)},userInvalid:function e(){m(this.el).removeClass("new");m(this.el).addClass(this.userInvalidClass)},userValid:function e(){m(this.el).removeClass(this.userInvalidClass)}}),n=b.Collection.extend({model:f,url:w,initialize:function e(){b.Collection.prototype.initialize.apply(this,arguments);var i=this;i.changedUser=null;i.invalidUsers={};i.on("add",i.onModelAdd);i.on("remove",i.onModelRemove);i.on("pgadmin-session:model:invalid",function(e,t){i.invalidUsers[t.cid]=e;t.trigger("pgadmin:user:invalid",t);r.find(".alert-text").html(e);r.css("visibility","visible")});i.on("pgadmin-session:model:valid",function(e){delete i.invalidUsers[e.cid];e.trigger("pgadmin:user:valid",e);this.updateErrorMsg();this.saveUser(e)})},onModelAdd:function e(t){t.startNewSession()},onModelRemove:function e(t){delete this.invalidUsers[t.cid];this.updateErrorMsg()},updateErrorMsg:function e(){var t=this,i=null;for(var n in t.invalidUsers){i=t.invalidUsers[n];if(i){break}}if(i){r.find(".alert-text").html(i);r.css("visibility","visible")}else{r.find(".alert-text").empty();r.css("visibility","hidden")}},saveUser:function e(n){var t=n.toJSON(true);if(n.isNew()&&(!n.get("email")||!n.get("role")||!n.get("newPassword")||!n.get("confirmPassword")||n.get("newPassword")!=n.get("confirmPassword"))){return false}else if(!n.isNew()&&n.get("newPassword")!=n.get("confirmPassword")){return false}if(n.sessChanged()&&t&&!g.isEmpty(t)){n.stopSession();n.save({},{attrs:t,wait:true,success:function e(){n.set({newPassword:undefined,confirmPassword:undefined});n.startNewSession();_.success(v(p("User '%s' saved.")).sprintf(n.get("email")).value())},error:function e(t,i){n.startNewSession();_.error(v(p("Error saving user: '%s'")).sprintf(i.responseJSON.errormsg).value())}})}}}),l=this.userCollection=new n,o='<div class="navtab-inline-controls">\n                    <div class="input-group">\n                      <div class="input-group-prepend">\n                        <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                        </div>\n                          <input type="search" class="form-control" id="txtGridSearch" placeholder="Search" aria-label="Search" aria-describedby="labelSearch" />\n                        </div>\n                        <button id="btn_refresh" type="button" class="btn btn-secondary btn-navtab-inline add" title="Add">\n                          <span class="fa fa-plus "></span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>',a=g.template(o),s={canAdd:true,add_title:p("Add new user")},d=m("<div></div>",{class:"user_container"});m.ajax({url:x,method:"GET",async:false}).done(function(e){u=e}).fail(function(){setTimeout(function(){_.alert(p("Error"),p("Cannot load user roles."))},100)});var c=this.view=new y.Grid({row:i,columns:h.columns,collection:l,className:"backgrid table table-bordered table-noouter-border table-hover"});d.append(c.render().$el[0]);this.$content=m("<div class='user_management object subnode subnode-noouter-border'></div>").append(a(s)).append(d).append(r);this.elements.content.appendChild(this.$content[0]);C(l).setCustomSearchBox(m("#txtGridSearch"));l.fetch();this.$content.find("a.close-error").on("click",function(){r.find(".alert-text").empty();r.css("visibility","hidden")});this.$content.find("button.add").first().on("click",function(e){e.preventDefault();var t=true;if(t){var i=false,n=null;l.each(function(e){if(!i){i=e.isNew();n=e}});var r;if(i){r=l.indexOf(n);var o=c.body.rows[r].$el;o.addClass("new");m(o).pgMakeVisible("backform-tab");return false}m(c.body.$el.find(m("tr.new"))).removeClass("new");var a=new f(null,{handler:l,top:l,collection:l});l.add(a);r=l.indexOf(a);var s=c.body.rows[r].$el;s.addClass("new");m(s).pgMakeVisible("backform-tab");return false}})},callback:function e(t){if(t.button.element.name=="dialog_help"){t.cancel=true;r.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);return}if(t.button.element.name=="close"){var i=this;if(!g.all(this.userCollection.pluck("id"))||!g.isEmpty(this.userCollection.invalidUsers)){t.cancel=true;_.confirm(p("Discard unsaved changes?"),p("Are you sure you want to close the dialog? Any unsaved changes will be lost."),function(){i.close();return true},function(){return true})}}}}})}_.UserManagement(true).resizeTo(r.stdW.md,r.stdH.md)}};return r.UserManagement}.apply(t,n),r!==undefined&&(e.exports=r))},,function(e,ee,te){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=te(346);var o=te(347);var s=te(348);ee.Buffer=f;ee.SlowBuffer=v;ee.INSPECT_MAX_BYTES=50;f.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT!==undefined?e.TYPED_ARRAY_SUPPORT:t();ee.kMaxLength=i();function t(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42&&typeof e.subarray==="function"&&e.subarray(1,1).byteLength===0}catch(e){return false}}function i(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t){throw new RangeError("Invalid typed array length")}if(f.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=f.prototype}else{if(e===null){e=new f(t)}e.length=t}return e}function f(e,t,i){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f)){return new f(e,t,i)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return c(this,e)}return r(this,e,t,i)}f.poolSize=8192;f._augment=function(e){e.__proto__=f.prototype;return e};function r(e,t,i,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return p(e,t,i,n)}if(typeof t==="string"){return u(e,t,i)}return m(e,t)}f.from=function(e,t,i){return r(null,e,t,i)};if(f.TYPED_ARRAY_SUPPORT){f.prototype.__proto__=Uint8Array.prototype;f.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&f[Symbol.species]===f){Object.defineProperty(f,Symbol.species,{value:null,configurable:true})}}function l(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function d(e,t,i,n){l(t);if(t<=0){return a(e,t)}if(i!==undefined){return typeof n==="string"?a(e,t).fill(i,n):a(e,t).fill(i)}return a(e,t)}f.alloc=function(e,t,i){return d(null,e,t,i)};function c(e,t){l(t);e=a(e,t<0?0:g(t)|0);if(!f.TYPED_ARRAY_SUPPORT){for(var i=0;i<t;++i){e[i]=0}}return e}f.allocUnsafe=function(e){return c(null,e)};f.allocUnsafeSlow=function(e){return c(null,e)};function u(e,t,i){if(typeof i!=="string"||i===""){i="utf8"}if(!f.isEncoding(i)){throw new TypeError('"encoding" must be a valid string encoding')}var n=_(t,i)|0;e=a(e,n);var r=e.write(t,i);if(r!==n){e=e.slice(0,r)}return e}function h(e,t){var i=t.length<0?0:g(t.length)|0;e=a(e,i);for(var n=0;n<i;n+=1){e[n]=t[n]&255}return e}function p(e,t,i,n){t.byteLength;if(i<0||t.byteLength<i){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<i+(n||0)){throw new RangeError("'length' is out of bounds")}if(i===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,i)}else{t=new Uint8Array(t,i,n)}if(f.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=f.prototype}else{e=h(e,t)}return e}function m(e,t){if(f.isBuffer(t)){var i=g(t.length)|0;e=a(e,i);if(e.length===0){return e}t.copy(e,0,0,i);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||X(t.length)){return a(e,0)}return h(e,t)}if(t.type==="Buffer"&&s(t.data)){return h(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+i().toString(16)+" bytes")}return e|0}function v(e){if(+e!=e){e=0}return f.alloc(+e)}f.isBuffer=function e(t){return!!(t!=null&&t._isBuffer)};f.compare=function e(t,i){if(!f.isBuffer(t)||!f.isBuffer(i)){throw new TypeError("Arguments must be Buffers")}if(t===i)return 0;var n=t.length;var r=i.length;for(var o=0,a=Math.min(n,r);o<a;++o){if(t[o]!==i[o]){n=t[o];r=i[o];break}}if(n<r)return-1;if(r<n)return 1;return 0};f.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};f.concat=function e(t,i){if(!s(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return f.alloc(0)}var n;if(i===undefined){i=0;for(n=0;n<t.length;++n){i+=t[n].length}}var r=f.allocUnsafe(i);var o=0;for(n=0;n<t.length;++n){var a=t[n];if(!f.isBuffer(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(r,o);o+=a.length}return r};function _(e,t){if(f.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var i=e.length;if(i===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case undefined:return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return J(e).length;default:if(n)return Z(e).length;t=(""+t).toLowerCase();n=true}}}f.byteLength=_;function b(e,t,i){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(i===undefined||i>this.length){i=this.length}if(i<=0){return""}i>>>=0;t>>>=0;if(i<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return R(this,t,i);case"utf8":case"utf-8":return E(this,t,i);case"ascii":return O(this,t,i);case"latin1":case"binary":return A(this,t,i);case"base64":return P(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}f.prototype._isBuffer=true;function y(e,t,i){var n=e[t];e[t]=e[i];e[i]=n}f.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<t;i+=2){y(this,i,i+1)}return this};f.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<t;i+=4){y(this,i,i+3);y(this,i+1,i+2)}return this};f.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<t;i+=8){y(this,i,i+7);y(this,i+1,i+6);y(this,i+2,i+5);y(this,i+3,i+4)}return this};f.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return E(this,0,t);return b.apply(this,arguments)};f.prototype.equals=function e(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return f.compare(this,t)===0};f.prototype.inspect=function e(){var t="";var i=ee.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,i).match(/.{2}/g).join(" ");if(this.length>i)t+=" ... "}return"<Buffer "+t+">"};f.prototype.compare=function e(t,i,n,r,o){if(!f.isBuffer(t)){throw new TypeError("Argument must be a Buffer")}if(i===undefined){i=0}if(n===undefined){n=t?t.length:0}if(r===undefined){r=0}if(o===undefined){o=this.length}if(i<0||n>t.length||r<0||o>this.length){throw new RangeError("out of range index")}if(r>=o&&i>=n){return 0}if(r>=o){return-1}if(i>=n){return 1}i>>>=0;n>>>=0;r>>>=0;o>>>=0;if(this===t)return 0;var a=o-r;var s=n-i;var l=Math.min(a,s);var d=this.slice(r,o);var c=t.slice(i,n);for(var u=0;u<l;++u){if(d[u]!==c[u]){a=d[u];s=c[u];break}}if(a<s)return-1;if(s<a)return 1;return 0};function w(e,t,i,n,r){if(e.length===0)return-1;if(typeof i==="string"){n=i;i=0}else if(i>2147483647){i=2147483647}else if(i<-2147483648){i=-2147483648}i=+i;if(isNaN(i)){i=r?0:e.length-1}if(i<0)i=e.length+i;if(i>=e.length){if(r)return-1;else i=e.length-1}else if(i<0){if(r)i=0;else return-1}if(typeof t==="string"){t=f.from(t,n)}if(f.isBuffer(t)){if(t.length===0){return-1}return x(e,t,i,n,r)}else if(typeof t==="number"){t=t&255;if(f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(r){return Uint8Array.prototype.indexOf.call(e,t,i)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,i)}}return x(e,[t],i,n,r)}throw new TypeError("val must be string, number or Buffer")}function x(e,t,i,n,r){var o=1;var a=e.length;var s=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}o=2;a/=2;s/=2;i/=2}}function l(e,t){if(o===1){return e[t]}else{return e.readUInt16BE(t*o)}}var d;if(r){var c=-1;for(d=i;d<a;d++){if(l(e,d)===l(t,c===-1?0:d-c)){if(c===-1)c=d;if(d-c+1===s)return c*o}else{if(c!==-1)d-=d-c;c=-1}}}else{if(i+s>a)i=a-s;for(d=i;d>=0;d--){var u=true;for(var f=0;f<s;f++){if(l(e,d+f)!==l(t,f)){u=false;break}}if(u)return d}}return-1}f.prototype.includes=function e(t,i,n){return this.indexOf(t,i,n)!==-1};f.prototype.indexOf=function e(t,i,n){return w(this,t,i,n,true)};f.prototype.lastIndexOf=function e(t,i,n){return w(this,t,i,n,false)};function C(e,t,i,n){i=Number(i)||0;var r=e.length-i;if(!n){n=r}else{n=Number(n);if(n>r){n=r}}var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");if(n>o/2){n=o/2}for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;e[i+a]=s}return a}function k(e,t,i,n){return Q(Z(t,e.length-i),e,i,n)}function S(e,t,i,n){return Q(K(t),e,i,n)}function T(e,t,i,n){return S(e,t,i,n)}function N(e,t,i,n){return Q(J(t),e,i,n)}function D(e,t,i,n){return Q(Y(t,e.length-i),e,i,n)}f.prototype.write=function e(t,i,n,r){if(i===undefined){r="utf8";n=this.length;i=0}else if(n===undefined&&typeof i==="string"){r=i;n=this.length;i=0}else if(isFinite(i)){i=i|0;if(isFinite(n)){n=n|0;if(r===undefined)r="utf8"}else{r=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-i;if(n===undefined||n>o)n=o;if(t.length>0&&(n<0||i<0)||i>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!r)r="utf8";var a=false;for(;;){switch(r){case"hex":return C(this,t,i,n);case"utf8":case"utf-8":return k(this,t,i,n);case"ascii":return S(this,t,i,n);case"latin1":case"binary":return T(this,t,i,n);case"base64":return N(this,t,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,i,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase();a=true}}};f.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(e,t,i){if(t===0&&i===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,i))}}function E(e,t,i){i=Math.min(e.length,i);var n=[];var r=t;while(r<i){var o=e[r];var a=null;var s=o>239?4:o>223?3:o>191?2:1;if(r+s<=i){var l,d,c,u;switch(s){case 1:if(o<128){a=o}break;case 2:l=e[r+1];if((l&192)===128){u=(o&31)<<6|l&63;if(u>127){a=u}}break;case 3:l=e[r+1];d=e[r+2];if((l&192)===128&&(d&192)===128){u=(o&15)<<12|(l&63)<<6|d&63;if(u>2047&&(u<55296||u>57343)){a=u}}break;case 4:l=e[r+1];d=e[r+2];c=e[r+3];if((l&192)===128&&(d&192)===128&&(c&192)===128){u=(o&15)<<18|(l&63)<<12|(d&63)<<6|c&63;if(u>65535&&u<1114112){a=u}}}}if(a===null){a=65533;s=1}else if(a>65535){a-=65536;n.push(a>>>10&1023|55296);a=56320|a&1023}n.push(a);r+=s}return I(n)}var M=4096;function I(e){var t=e.length;if(t<=M){return String.fromCharCode.apply(String,e)}var i="";var n=0;while(n<t){i+=String.fromCharCode.apply(String,e.slice(n,n+=M))}return i}function O(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r){n+=String.fromCharCode(e[r]&127)}return n}function A(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r){n+=String.fromCharCode(e[r])}return n}function R(e,t,i){var n=e.length;if(!t||t<0)t=0;if(!i||i<0||i>n)i=n;var r="";for(var o=t;o<i;++o){r+=G(e[o])}return r}function L(e,t,i){var n=e.slice(t,i);var r="";for(var o=0;o<n.length;o+=2){r+=String.fromCharCode(n[o]+n[o+1]*256)}return r}f.prototype.slice=function e(t,i){var n=this.length;t=~~t;i=i===undefined?n:~~i;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(i<0){i+=n;if(i<0)i=0}else if(i>n){i=n}if(i<t)i=t;var r;if(f.TYPED_ARRAY_SUPPORT){r=this.subarray(t,i);r.__proto__=f.prototype}else{var o=i-t;r=new f(o,undefined);for(var a=0;a<o;++a){r[a]=this[a+t]}}return r};function z(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function e(t,i,n){t=t|0;i=i|0;if(!n)z(t,i,this.length);var r=this[t];var o=1;var a=0;while(++a<i&&(o*=256)){r+=this[t+a]*o}return r};f.prototype.readUIntBE=function e(t,i,n){t=t|0;i=i|0;if(!n){z(t,i,this.length)}var r=this[t+--i];var o=1;while(i>0&&(o*=256)){r+=this[t+--i]*o}return r};f.prototype.readUInt8=function e(t,i){if(!i)z(t,1,this.length);return this[t]};f.prototype.readUInt16LE=function e(t,i){if(!i)z(t,2,this.length);return this[t]|this[t+1]<<8};f.prototype.readUInt16BE=function e(t,i){if(!i)z(t,2,this.length);return this[t]<<8|this[t+1]};f.prototype.readUInt32LE=function e(t,i){if(!i)z(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};f.prototype.readUInt32BE=function e(t,i){if(!i)z(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};f.prototype.readIntLE=function e(t,i,n){t=t|0;i=i|0;if(!n)z(t,i,this.length);var r=this[t];var o=1;var a=0;while(++a<i&&(o*=256)){r+=this[t+a]*o}o*=128;if(r>=o)r-=Math.pow(2,8*i);return r};f.prototype.readIntBE=function e(t,i,n){t=t|0;i=i|0;if(!n)z(t,i,this.length);var r=i;var o=1;var a=this[t+--r];while(r>0&&(o*=256)){a+=this[t+--r]*o}o*=128;if(a>=o)a-=Math.pow(2,8*i);return a};f.prototype.readInt8=function e(t,i){if(!i)z(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};f.prototype.readInt16LE=function e(t,i){if(!i)z(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function e(t,i){if(!i)z(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function e(t,i){if(!i)z(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};f.prototype.readInt32BE=function e(t,i){if(!i)z(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};f.prototype.readFloatLE=function e(t,i){if(!i)z(t,4,this.length);return o.read(this,t,true,23,4)};f.prototype.readFloatBE=function e(t,i){if(!i)z(t,4,this.length);return o.read(this,t,false,23,4)};f.prototype.readDoubleLE=function e(t,i){if(!i)z(t,8,this.length);return o.read(this,t,true,52,8)};f.prototype.readDoubleBE=function e(t,i){if(!i)z(t,8,this.length);return o.read(this,t,false,52,8)};function j(e,t,i,n,r,o){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function e(t,i,n,r){t=+t;i=i|0;n=n|0;if(!r){var o=Math.pow(2,8*n)-1;j(this,t,i,n,o,0)}var a=1;var s=0;this[i]=t&255;while(++s<n&&(a*=256)){this[i+s]=t/a&255}return i+n};f.prototype.writeUIntBE=function e(t,i,n,r){t=+t;i=i|0;n=n|0;if(!r){var o=Math.pow(2,8*n)-1;j(this,t,i,n,o,0)}var a=n-1;var s=1;this[i+a]=t&255;while(--a>=0&&(s*=256)){this[i+a]=t/s&255}return i+n};f.prototype.writeUInt8=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,1,255,0);if(!f.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[i]=t&255;return i+1};function B(e,t,i,n){if(t<0)t=65535+t+1;for(var r=0,o=Math.min(e.length-i,2);r<o;++r){e[i+r]=(t&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}}f.prototype.writeUInt16LE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,2,65535,0);if(f.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8}else{B(this,t,i,true)}return i+2};f.prototype.writeUInt16BE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,2,65535,0);if(f.TYPED_ARRAY_SUPPORT){this[i]=t>>>8;this[i+1]=t&255}else{B(this,t,i,false)}return i+2};function q(e,t,i,n){if(t<0)t=4294967295+t+1;for(var r=0,o=Math.min(e.length-i,4);r<o;++r){e[i+r]=t>>>(n?r:3-r)*8&255}}f.prototype.writeUInt32LE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,4,4294967295,0);if(f.TYPED_ARRAY_SUPPORT){this[i+3]=t>>>24;this[i+2]=t>>>16;this[i+1]=t>>>8;this[i]=t&255}else{q(this,t,i,true)}return i+4};f.prototype.writeUInt32BE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,4,4294967295,0);if(f.TYPED_ARRAY_SUPPORT){this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255}else{q(this,t,i,false)}return i+4};f.prototype.writeIntLE=function e(t,i,n,r){t=+t;i=i|0;if(!r){var o=Math.pow(2,8*n-1);j(this,t,i,n,o-1,-o)}var a=0;var s=1;var l=0;this[i]=t&255;while(++a<n&&(s*=256)){if(t<0&&l===0&&this[i+a-1]!==0){l=1}this[i+a]=(t/s>>0)-l&255}return i+n};f.prototype.writeIntBE=function e(t,i,n,r){t=+t;i=i|0;if(!r){var o=Math.pow(2,8*n-1);j(this,t,i,n,o-1,-o)}var a=n-1;var s=1;var l=0;this[i+a]=t&255;while(--a>=0&&(s*=256)){if(t<0&&l===0&&this[i+a+1]!==0){l=1}this[i+a]=(t/s>>0)-l&255}return i+n};f.prototype.writeInt8=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,1,127,-128);if(!f.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[i]=t&255;return i+1};f.prototype.writeInt16LE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,2,32767,-32768);if(f.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8}else{B(this,t,i,true)}return i+2};f.prototype.writeInt16BE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,2,32767,-32768);if(f.TYPED_ARRAY_SUPPORT){this[i]=t>>>8;this[i+1]=t&255}else{B(this,t,i,false)}return i+2};f.prototype.writeInt32LE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,4,2147483647,-2147483648);if(f.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8;this[i+2]=t>>>16;this[i+3]=t>>>24}else{q(this,t,i,true)}return i+4};f.prototype.writeInt32BE=function e(t,i,n){t=+t;i=i|0;if(!n)j(this,t,i,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(f.TYPED_ARRAY_SUPPORT){this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255}else{q(this,t,i,false)}return i+4};function F(e,t,i,n,r,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(e,t,i,n,r){if(!r){F(e,t,i,4,34028234663852886e22,-34028234663852886e22)}o.write(e,t,i,n,23,4);return i+4}f.prototype.writeFloatLE=function e(t,i,n){return U(this,t,i,true,n)};f.prototype.writeFloatBE=function e(t,i,n){return U(this,t,i,false,n)};function H(e,t,i,n,r){if(!r){F(e,t,i,8,17976931348623157e292,-17976931348623157e292)}o.write(e,t,i,n,52,8);return i+8}f.prototype.writeDoubleLE=function e(t,i,n){return H(this,t,i,true,n)};f.prototype.writeDoubleBE=function e(t,i,n){return H(this,t,i,false,n)};f.prototype.copy=function e(t,i,n,r){if(!n)n=0;if(!r&&r!==0)r=this.length;if(i>=t.length)i=t.length;if(!i)i=0;if(r>0&&r<n)r=n;if(r===n)return 0;if(t.length===0||this.length===0)return 0;if(i<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");if(r>this.length)r=this.length;if(t.length-i<r-n){r=t.length-i+n}var o=r-n;var a;if(this===t&&n<i&&i<r){for(a=o-1;a>=0;--a){t[a+i]=this[a+n]}}else if(o<1e3||!f.TYPED_ARRAY_SUPPORT){for(a=0;a<o;++a){t[a+i]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+o),i)}return o};f.prototype.fill=function e(t,i,n,r){if(typeof t==="string"){if(typeof i==="string"){r=i;i=0;n=this.length}else if(typeof n==="string"){r=n;n=this.length}if(t.length===1){var o=t.charCodeAt(0);if(o<256){t=o}}if(r!==undefined&&typeof r!=="string"){throw new TypeError("encoding must be a string")}if(typeof r==="string"&&!f.isEncoding(r)){throw new TypeError("Unknown encoding: "+r)}}else if(typeof t==="number"){t=t&255}if(i<0||this.length<i||this.length<n){throw new RangeError("Out of range index")}if(n<=i){return this}i=i>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=i;a<n;++a){this[a]=t}}else{var s=f.isBuffer(t)?t:Z(new f(t,r).toString());var l=s.length;for(a=0;a<n-i;++a){this[a+i]=s[a%l]}}return this};var W=/[^+\/0-9A-Za-z-_]/g;function $(e){e=V(e).replace(W,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function V(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function G(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function Z(e,t){t=t||Infinity;var i;var n=e.length;var r=null;var o=[];for(var a=0;a<n;++a){i=e.charCodeAt(a);if(i>55295&&i<57344){if(!r){if(i>56319){if((t-=3)>-1)o.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)o.push(239,191,189);continue}r=i;continue}if(i<56320){if((t-=3)>-1)o.push(239,191,189);r=i;continue}i=(r-55296<<10|i-56320)+65536}else if(r){if((t-=3)>-1)o.push(239,191,189)}r=null;if(i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else{throw new Error("Invalid code point")}}return o}function K(e){var t=[];for(var i=0;i<e.length;++i){t.push(e.charCodeAt(i)&255)}return t}function Y(e,t){var i,n,r;var o=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;i=e.charCodeAt(a);n=i>>8;r=i%256;o.push(r);o.push(n)}return o}function J(e){return n.toByteArray($(e))}function Q(e,t,i,n){for(var r=0;r<n;++r){if(r+i>=t.length||r>=e.length)break;t[r+i]=e[r]}return r}function X(e){return e!==e}}).call(this,te(40))},,,,,,,function(e,t,i){"use strict";var n,r;!(n=[i(0),i(1),i(8)],r=function(e,o,a){var t=function e(t,i){if(o.isUndefined(i)||o.isNull(i)){return true}if(a.startsWith(i,"coll-")){i=i.replace("coll-","")}var n=["server_group","server","catalog_object_column"];if(o.indexOf(n,i)>=0){return true}var r=t.get_preference("browser","show_node_"+i);if(r){return r.value}else{return true}};return t}.apply(t,n),r!==undefined&&(e.exports=r))},,function(e,i,n){"use strict";(function(a){Object.defineProperty(i,"__esModule",{value:true});i.pgBrowser=void 0;var r=t(n(3));var o=t(n(4));var s=t(n(0));var l=e(n(10));var d=e(n(24));function e(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function t(e){return e&&e.__esModule?e:{default:e}}var c=n(44);var u=r.default.Browser=r.default.Browser||{};i.pgBrowser=u;a.extend(u,{preferences_cache:[],prefcache_version:0,generate_preference_version:function e(){return(new Date).getTime()},preference_version:function e(t){if(t){this.prefcache_version=t}else{return this.prefcache_version}},get_preference:function e(t,i){var n=this;if(a.size(n.preferences_cache)==0){var r=function e(){if(n.preferences_cache.length>0){clearInterval(o);return a.findWhere(n.preferences_cache,{module:t,name:i})}},o=setInterval(r,1e3)}else{return a.findWhere(n.preferences_cache,{module:t,name:i})}},get_preferences_for_module:function e(t){var i=this;var n={};a.each(a.where(i.preferences_cache,{module:t}),function(e){n[e.name]=e.value});if(Object.keys(n).length>0){return n}},get_preference_for_id:function e(t){var i=this;return a.findWhere(i.preferences_cache,{id:t})},cache_preferences:function e(t){var i=this,n={};n[r.default.csrf_token_header]=r.default.csrf_token;setTimeout(function(){s.default.ajax({url:(0,o.default)("preferences.get_all"),headers:n}).done(function(e){i.preferences_cache=e;i.preference_version(i.generate_preference_version());u.keyboardNavigation.init();if(u.tree){c.modifyAcitreeAnimation(i);c.modifyAlertifyAnimation(i)}u.browserTreeState.init();if(t){if(typeof t==="string"){s.default.event.trigger("prefchange:"+t)}else{a.each(t,function(e,t){s.default.event.trigger("prefchange:"+t)})}}}).fail(function(e,t,i){l.pgRespErrorNotify(e,i)})},500)},reflectPreferences:function e(t){var i=this;if(t==="sqleditor"||t===null||typeof t==="undefined"){var n=i.get_preferences_for_module("sqleditor");(0,s.default)(i.editor.getWrapperElement()).css("font-size",d.calcFontSize(n.sql_font_size));i.editor.setOption("tabSize",n.tab_size);i.editor.setOption("lineWrapping",n.wrap_code);i.editor.setOption("autoCloseBrackets",n.insert_pair_brackets);i.editor.setOption("matchBrackets",n.brace_matching);i.editor.refresh()}},onPreferencesChange:function e(t,i){window.parent.$(parent.document).on("prefchange:"+t,function(e){if(window.top===null){window.$(document).off(e)}else{i(e)}})}})}).call(this,n(1))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__99__},function(e,c,u){"use strict";(function(r){Object.defineProperty(c,"__esModule",{value:true});c.pgBrowser=void 0;var e=i(u(3));var o=i(u(4));var a=i(u(0));var n=t(u(10));var s=i(u(2));u(21);function t(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function i(e){return e&&e.__esModule?e:{default:e}}var l=e.default.Browser=e.default.Browser||{};c.pgBrowser=l;var d=window.wcDocker;r.extend(l,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function e(t){var i=t.addPanel("browser",d.DOCK.LEFT);var n=t.addPanel("dashboard",d.DOCK.RIGHT,i);t.addPanel("properties",d.DOCK.STACKED,n,{tabOrientation:d.TAB.TOP});t.addPanel("sql",d.DOCK.STACKED,n);t.addPanel("statistics",d.DOCK.STACKED,n);t.addPanel("dependencies",d.DOCK.STACKED,n);t.addPanel("dependents",d.DOCK.STACKED,n)},save_current_layout:function e(t,i){if(i){var n=i.save(),r={setting:t,value:n};a.default.ajax({type:"POST",url:(0,o.default)("settings.store_bulk"),data:r})}},restore_layout:function e(t,i,n){if(i!=""){try{t.restore(i)}catch(e){t.clear();if(n){n(t)}}}else{if(n){n(t)}}var r=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;var o=setInterval(function(){var e=r.get_preferences_for_module("browser");if(e){clearInterval(o);r.reflectLocklayoutChange(t);r.onPreferencesChange("browser",function(){r.reflectLocklayoutChange(t)})}},500)},reflectLocklayoutChange:function e(t){var i=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;var n=i.get_preferences_for_module("browser");i.lock_layout(t,n.lock_layout)},lock_layout:function e(t,i){var n=this.menus["file"]["mnu_locklayout"]["menu_items"];switch(i){case this.lock_layout_levels.PREVENT_DOCKING:t.lockLayout(d.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:t.lockLayout(d.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:t.lockLayout(d.LOCK_LAYOUT_LEVEL.NONE);break}r.each(n,function(e){if(e.name!="mnu_lock_"+i){e.change_checked(false)}else{e.change_checked(true)}})},save_lock_layout:function e(t){var i=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;a.default.ajax({url:(0,o.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:t})}).done(function(){i.cache_preferences("browser")}).fail(function(e,t){n.pgNotifier(t,e,(0,s.default)("Failed to save the lock layout setting."))})},mnu_lock_docking:function e(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING);this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function e(){this.lock_layout(this.docker,this.lock_layout_levels.FULL);this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function e(){this.lock_layout(this.docker,this.lock_layout_levels.NONE);this.save_lock_layout(this.lock_layout_levels.NONE)}})}).call(this,u(1))},function(e,t,i){"use strict";var c=d(i(1));var u=d(i(3));var a=d(i(0));var s=d(i(49));var n=l(i(17));var r=d(i(56));var o=l(i(28));function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function d(e){return e&&e.__esModule?e:{default:e}}var f=u.default.Browser=u.default.Browser||{};f.keyboardNavigation=f.keyboardNavigation||{};c.default.extend(f.keyboardNavigation,{init:function e(){s.default.reset();if(f.preferences_cache.length>0){this.keyboardShortcut={file_shortcut:n.parseShortcutValue(f.get_preference("browser","main_menu_file").value),object_shortcut:n.parseShortcutValue(f.get_preference("browser","main_menu_object").value),tools_shortcut:n.parseShortcutValue(f.get_preference("browser","main_menu_tools").value),help_shortcut:n.parseShortcutValue(f.get_preference("browser","main_menu_help").value),left_tree_shortcut:n.parseShortcutValue(f.get_preference("browser","browser_tree").value),tabbed_panel_backward:n.parseShortcutValue(f.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:n.parseShortcutValue(f.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:n.parseShortcutValue(f.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:n.parseShortcutValue(f.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:n.parseShortcutValue(f.get_preference("browser","sub_menu_properties").value),sub_menu_create:n.parseShortcutValue(f.get_preference("browser","sub_menu_create").value),sub_menu_delete:n.parseShortcutValue(f.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:n.parseShortcutValue(f.get_preference("browser","sub_menu_refresh").value),context_menu:n.parseShortcutValue(f.get_preference("browser","context_menu").value),direct_debugging:n.parseShortcutValue(f.get_preference("browser","direct_debugging").value),drop_multiple_objects:n.parseShortcutValue(f.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:n.parseShortcutValue(f.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:n.parseShortcutValue(f.get_preference("browser","add_grid_row").value)};this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row}};this.bindShortcuts()}},bindShortcuts:function e(){var i=this;c.default.each(i.shortcutMethods,function(e,t){i._bindWithMousetrap(e.shortcuts,i[t],e.bindElem)});var t=37,n=38,r=39,o=40;(0,a.default)(".pg-navbar").on("keydown",function(e){switch(e.keyCode){case t:i.bindMainMenuLeft(e);break;case n:i.bindMainMenuUpDown(e,"up");break;case r:i.bindMainMenuRight(e);break;case o:i.bindMainMenuUpDown(e,"down");break}})},_bindWithMousetrap:function e(t,i,n){var r=this;s.default.unbind(t);if(n){var o=document.querySelector(n);(0,s.default)(o).bind(t,function(){i.apply(this,arguments)}.bind(o))}else{s.default.bind(t,function(){i.apply(r,arguments)})}},unbindShortcuts:function e(){var t=this;c.default.each(t.mousetrapInstances,function(e){e["instance"].reset()});t.mousetrapInstances=[]},bindMainMenu:function e(t,i){var n=this.keyboardShortcut;if(i===n.file_shortcut)(0,a.default)("#mnu_file a.dropdown-toggle").dropdown("toggle");if(i===n.object_shortcut)(0,a.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle");if(i===n.tools_shortcut)(0,a.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle");if(i===n.help_shortcut)(0,a.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function e(t,i){var n=u.default.Browser.docker.findPanels();var r=0;var o=n.length;var a=1;var s=0;var l=false;var d=this.keyboardShortcut;c.default.each(u.default.Browser.docker.findPanels(),function(e,t){if(e.isVisible()&&!l&&e._type!=="browser"){s=t;l=true}});if(i===d.tabbed_panel_backward)r=s>0?s-1:a;else if(i===d.tabbed_panel_forward)r=s<o?s+1:o;u.default.Browser.docker.findPanels()[r].focus();setTimeout(function(){if(document.activeElement instanceof HTMLIFrameElement){document.activeElement.blur()}},1e3)},bindMainMenuLeft:function e(t){if((0,a.default)(t.target).hasClass("nav-link")){var i=(0,a.default)(t.target).closest(".nav-item");o._stopEventPropagation(t);i=i.prev(".nav-item");while(i.hasClass("d-none")){i=i.prev(".nav-item")}i.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,a.default)(t.target).closest(".dropdown-menu").length>0){var n=(0,a.default)(t.target).closest("li");o._stopEventPropagation(t);var r=n.closest(".dropdown-menu");if(r.closest(".dropdown-submenu").length>0){r.removeClass("show");r.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible");n=r.closest(".dropdown-submenu");n.find(".dropdown-item").trigger("focus")}}},bindMainMenuRight:function e(t){if((0,a.default)(t.target).hasClass("nav-link")){var i=(0,a.default)(t.target).closest(".nav-item");o._stopEventPropagation(t);i=i.next(".nav-item");while(i.hasClass("d-none")){i=i.next(".nav-item")}i.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,a.default)(t.target).closest(".dropdown-menu").length>0){var n=(0,a.default)(t.target).closest("li");o._stopEventPropagation(t);if(n.hasClass("dropdown-submenu")){n.addClass("dropdown-submenu-visible");n.find(".dropdown-menu").addClass("show");n=n.find(".dropdown-menu .dropdown-item").first().trigger("focus")}}},bindMainMenuUpDown:function e(t,i){if((0,a.default)(t.target).closest(".dropdown-menu").length>0){o._stopEventPropagation(t);var n=(0,a.default)(t.target).closest("li");var r=(0,a.default)(t.target).closest(".dropdown-menu");r.find(".show").removeClass("show");r.find(".dropdown-submenu").removeClass("dropdown-submenu-visible");if(i==="up"){n=n.prev()}else if(i==="down"){n=n.next()}while(n.hasClass("dropdown-divider")||n.find(".dropdown-item").first().hasClass("disabled")){if(i==="up"){n=n.prev()}else if(i==="down"){n=n.next()}}n.find(".dropdown-item").trigger("focus")}},bindLeftTree:function e(){var t=this.getTreeDetails();(0,a.default)("#tree").trigger("focus");t.t.focus(t.i);t.t.select(t.i)},bindSubMenuQueryTool:function e(){var t=this.getTreeDetails();if(!t.d)return;u.default.DataGrid.show_query_tool("",t.i)},bindSubMenuViewData:function e(){var t=this.getTreeDetails();if(!t.d)return;u.default.DataGrid.show_data_grid({mnuid:1},t.i)},bindSubMenuProperties:function e(){var t=this.getTreeDetails();if(!t.d||u.default.Browser.Nodes[t.t.itemData(t.i)._type].collection_node===true)return;u.default.Browser.Node.callbacks.show_obj_properties.call(u.default.Browser.Nodes[t.t.itemData(t.i)._type],{action:"edit"})},bindSubMenuCreate:function e(){var t=this.getTreeDetails();if(!t.d||u.default.Browser.Nodes[t.t.itemData(t.i)._type].collection_node===true)return;u.default.Browser.Node.callbacks.show_obj_properties.call(u.default.Browser.Nodes[t.t.itemData(t.i)._type],{action:"create"})},bindSubMenuDelete:function e(){var t=this.getTreeDetails();if(!t.d||u.default.Browser.Nodes[t.t.itemData(t.i)._type].collection_node===true)return;u.default.Browser.Node.callbacks.delete_obj.call(u.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindSubMenuRefresh:function e(t){t.preventDefault();var i=f.keyboardNavigation.getTreeDetails();u.default.Browser.Node.callbacks.refresh.call(u.default.Browser.Nodes[i.t.itemData(i.i)._type])},bindContextMenu:function e(t){var i=this.getTreeDetails();var n=(0,a.default)(t.srcElement).find(".aciTreeEntry").position().left+70;var r=(0,a.default)(t.srcElement).find(".aciTreeEntry").position().top+70;i.t.blur(i.i);(0,a.default)("#tree").trigger("blur");i.i.children().contextMenu({x:n,y:r})},bindDirectDebugging:function e(){var t=this.getTreeDetails();var i=t.t.itemData(t.i)._type;if(!t.d||i!=="function"&&i!=="procedure")return;if(u.default.Tools.Debugger.can_debug(t.d,t.i,{debug_type:"direct"})){u.default.Tools.Debugger.get_function_information(u.default.Browser.Nodes[i])}},bindDropMultipleObjects:function e(){var t=this.isPropertyPanelVisible();if(t===true&&(0,a.default)("button.delete_multiple").length>0){(0,a.default)("button.delete_multiple").click()}},bindDropCascadeMultipleObjects:function e(){var t=this.isPropertyPanelVisible();if(t===true&&(0,a.default)("button.delete_multiple_cascade").length>0){(0,a.default)("button.delete_multiple_cascade").click()}},bindAddGridRow:function e(){var t=(0,a.default)(document.activeElement).closest(".object.subnode");if((0,a.default)(t).length){(0,a.default)(t).find(".add").click()}},isPropertyPanelVisible:function e(){var t=false;c.default.each(u.default.Browser.docker.findPanels(),function(e){if(e._type==="properties")t=e.isVisible()});return t},getTreeDetails:function e(){var t=u.default.Browser.tree;var i=t.selected().length>0?t.selected():t.first();var n=i&&i.length===1?t.itemData(i):undefined;return{t:t,i:i,d:n}},getDialogTabNavigator:function e(t){var i=f.get_preference("browser","dialog_tab_backward").value;var n=f.get_preference("browser","dialog_tab_forward").value;return new r.default.dialogTabNavigator(t,i,n)}});e.exports=u.default.Browser.keyboardNavigation},,,,function(e,t,i){"use strict";var n,r;var o=o||{};o.dashboard=i(106);var o=o||{};o.tools=o.tools||{};o.tools.user_management=i(87);var o=o||{};o.browser=o.browser||{};o.browser.object_statistics=i(110);var o=o||{};o.browser=o.browser||{};o.browser.dependencies=i(113);var o=o||{};o.browser=o.browser||{};o.browser.dependents=i(114);var o=o||{};o.browser=o.browser||{};o.browser.object_sql=i(115);var o=o||{};o.browser=o.browser||{};o.browser.bgprocess=i(116);var o=o||{};o.node=o.node||{};o.node.server_group=i(117);var o=o||{};o.node=o.node||{};o.node.server=i(59);var o=o||{};o.node=o.node||{};o.node.database=i(118);var o=o||{};o.node=o.node||{};o.node.role=i(119);var o=o||{};o.node=o.node||{};o.node.cast=i(120);var o=o||{};o.node=o.node||{};o.node.tablespace=i(121);var o=o||{};o.node=o.node||{};o.node.resource_group=i(122);var o=o||{};o.node=o.node||{};o.node.event_trigger=i(123);var o=o||{};o.node=o.node||{};o.node.extension=i(124);var o=o||{};o.node=o.node||{};o.node.language=i(125);var o=o||{};o.node=o.node||{};o.node.foreign_data_wrapper=i(126);var o=o||{};o.node=o.node||{};o.node.foreign_server=i(127);var o=o||{};o.node=o.node||{};o.node.user_mapping=i(128);var o=o||{};o.node=o.node||{};o.node.schema=i(129);var o=o||{};o.node=o.node||{};o.node.catalog=i(130);var o=o||{};o.node=o.node||{};o.node.catalog_object=i(131);var o=o||{};o.node=o.node||{};o.node.collation=i(132);var o=o||{};o.node=o.node||{};o.node.domain=i(133);var o=o||{};o.node=o.node||{};o.node.domain_constraints=i(134);var o=o||{};o.node=o.node||{};o.node.foreign_table=i(135);var o=o||{};o.node=o.node||{};o.node.fts_configuration=i(136);var o=o||{};o.node=o.node||{};o.node.fts_dictionary=i(137);var o=o||{};o.node=o.node||{};o.node.fts_parser=i(138);var o=o||{};o.node=o.node||{};o.node.fts_template=i(139);var o=o||{};o.node=o.node||{};o.node.function=i(61);var o=o||{};o.node=o.node||{};o.node.procedure=i(140);var o=o||{};o.node=o.node||{};o.node.edbfunc=i(62);var o=o||{};o.node=o.node||{};o.node.edbproc=i(141);var o=o||{};o.node=o.node||{};o.node.edbvar=i(142);var o=o||{};o.node=o.node||{};o.node.trigger_function=i(143);var o=o||{};o.node=o.node||{};o.node.package=i(144);var o=o||{};o.node=o.node||{};o.node.sequence=i(145);var o=o||{};o.node=o.node||{};o.node.synonym=i(146);var o=o||{};o.node=o.node||{};o.node.type=i(147);var o=o||{};o.node=o.node||{};o.node.rule=i(63);var o=o||{};o.node=o.node||{};o.node.index=i(148);var o=o||{};o.node=o.node||{};o.node.trigger=i(149);var o=o||{};o.node=o.node||{};o.node.catalog_object_column=i(150);var o=o||{};o.node=o.node||{};o.node.view=i(151);var o=o||{};o.node=o.node||{};o.node.mview=i(152);var o=o||{};o.node=o.node||{};o.node.table=i(153);var o=o||{};o.node=o.node||{};o.node.partition=i(163);var o=o||{};o.node=o.node||{};o.node.compound_trigger=i(164);!(n=[i(2),i(4),i(0),i(1),i(10),i(3),i(23),i(24),i(9),i(165),i(166),i(55),i(36),i(17),i(21)],r=function(d,h,p,m,r,c,e,t,i,o,a,u,g,s){var v=window.wcDocker,_=c.Browser;if(c.DataGrid)return c.DataGrid;c.DataGrid=m.extend({init:function e(){if(this.initialized)return;this.initialized=true;this.title_index=1;var t=this;var i=setInterval(function(){if(_.preference_version()>0){t.preferences=_.get_preferences_for_module("sqleditor");clearInterval(i)}},0);_.onPreferencesChange("sqleditor",function(){t.preferences=_.get_preferences_for_module("sqleditor")});var n=["table","view","mview","foreign_table","catalog_object","partition"],r=function e(t){var i=function(){if(!m.isUndefined(t)&&!m.isNull(t))return m.indexOf(n,t._type)!==-1?true:false;else return false}();u.enable(d("View Data"),i);u.enable(d("Filtered Rows"),i);return i},o=function e(t){var i=function(){if(!m.isUndefined(t)&&!m.isNull(t)){if(m.indexOf(c.unsupported_nodes,t._type)==-1){if(t._type=="database"&&t.allowConn){return true}else if(t._type!="database"){return true}else{return false}}else{return false}}else{return false}}();u.enable(d("Query Tool"),i);return i};var a=[{name:"query_tool",module:this,applies:["tools"],callback:"show_query_tool",enable:o,priority:1,label:d("Query Tool"),icon:"fa fa-bolt"}];for(var s=0;s<n.length;s++){a.push({name:"view_all_rows_context_"+n[s],node:n[s],module:this,data:{mnuid:3},applies:["context","object"],callback:"show_data_grid",enable:r,category:"view_data",priority:101,label:d("All Rows")},{name:"view_first_100_rows_context_"+n[s],node:n[s],module:this,data:{mnuid:1},applies:["context","object"],callback:"show_data_grid",enable:r,category:"view_data",priority:102,label:d("First 100 Rows")},{name:"view_last_100_rows_context_"+n[s],node:n[s],module:this,data:{mnuid:2},applies:["context","object"],callback:"show_data_grid",enable:r,category:"view_data",priority:103,label:d("Last 100 Rows")},{name:"view_filtered_rows_context_"+n[s],node:n[s],module:this,data:{mnuid:4},applies:["context","object"],callback:"show_filtered_row",enable:r,category:"view_data",priority:104,label:d("Filtered Rows...")})}c.Browser.add_menu_category("view_data",d("View/Edit Data"),100,"");c.Browser.add_menus(a);var l=new c.Browser.Frame({name:"frm_datagrid",showTitle:true,isCloseable:true,isPrivate:true,url:"about:blank"});l.load(_.docker);this.on("pgadmin-datagrid:transaction:created",function(e){this.launch_grid(e)})},show_data_grid:function e(t,i){var n=s.getRandomInt(1,9999999);o.showDataGrid(this,_,r,t,i,n)},show_filtered_row:function e(t,i){var n=s.getRandomInt(1,9999999);o.showDataGrid(this,_,r,t,i,n,true,this.preferences)},show_query_tool:function e(t,i){var n=s.getRandomInt(1,9999999);a.showQueryTool(this,_,r,t,i,n)},launch_grid:function e(t,i,n,r){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var s=this;var l='\n          <form id="queryToolForm" action="'.concat(i,'" method="post">\n            <input id="title" name="title" hidden />');if(o){l+='<input name="query_url" value="'.concat(o,'" hidden />')}if(a){l+='<textarea name="sql_filter" hidden>'.concat(a,"</textarea>")}l+='\n          </form>\n            <script>\n              document.getElementById("title").value = "'.concat(r,'";\n              document.getElementById("queryToolForm").submit();\n            <\/script>\n          ');if(s.preferences.new_browser_tab){var d=window.open("","_blank");d.document.write(l);d.document.title=r}else{var c=_.docker.findPanels("properties");var u=_.docker.addPanel("frm_datagrid",v.DOCK.STACKED,c[0]);g.setQueryToolDockerTitle(u,n,m.unescape(r));u.focus();u.on(v.EVENT.CLOSED,function(){p.ajax({url:h("datagrid.close",{trans_id:t}),method:"DELETE"})});var f=function e(i){var n=p('<div class="pg-sp-container">\n                    <div class="pg-sp-content">\n                        <div class="row">\n                            <div class="col-12 pg-sp-icon"></div>\n                        </div>\n                    </div>\n                </div>').appendTo(p(i).data("embeddedFrame").$container);var r=setInterval(function(){var e=p(i).data("frameInitialized");if(e){clearInterval(r);var t=p(i).data("embeddedFrame");if(t){t.onLoaded(function(){n.remove()});t.openHTML(l)}}},100)};f(u)}}},i.Events);return c.DataGrid}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,r){"use strict";var i,n;function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){o(i,true).forEach(function(e){a(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{o(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function a(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}!(i=[r(4),r(2),r,r(0),r(1),r(3),r(9),r(19),r(107),r(10),r(6),r(108),r(17),r(5),r(95),r(21)],n=function(p,m,e,g,v,_,u,f,a,h,b,y,w){_.Browser=_.Browser||{};var x=_.Browser;if(_.Dashboard)return;var C=true,k="",S="",T=false,N,D,P=false,E=false;var M=f.Extension.DeleteCell.extend({render:function e(){this.$el.empty();var t=this,i=t.column.get("cell_action");if(i==="cancel"){this.$el.html("<i class='fa fa-stop' data-toggle='tooltip' "+"title='"+m("Cancel the active query")+"'></i>")}else{this.$el.html("<i class='fa fa-times-circle text-danger' data-toggle='tooltip' "+"title='"+m("Terminate the session")+"'></i>")}this.delegateEvents();return this},deleteRow:function e(t){var i=this,n,r,o,a,s,l=i.column.get("cell_action");t.preventDefault();var d=f.callByNeed(i.column.get("canDeleteRow"),i.column,i.model);if(!d)return;var c=function e(){g("#btn_refresh").trigger("click")};if(l==="cancel"){n=m("Cancel Active Query?");r=m("Are you sure you wish to cancel the active query?");o=m("Active query cancelled successfully.");a=m("An error occurred whilst cancelling the active query.");s=k+i.model.get("pid")}else{n=m("Terminate Session?");r=m("Are you sure you wish to terminate the session?");o=m("Session terminated successfully.");a=m("An error occurred whilst terminating the active query.");s=S+i.model.get("pid")}h.confirm(n,r,function(){g.ajax({url:s,type:"DELETE"}).done(function(e){if(e==m("Success")){h.success(o);c()}else{h.error(a)}}).fail(function(e,t,i){h.pgRespErrorNotify(e,i)})},function(){return true})}});var I=f.Extension.ObjectCell.extend({enterEditMode:function e(){this.model.trigger("enteringEditMode",[this]);f.Cell.prototype.enterEditMode.apply(this,arguments);this.delegateEvents();var t=f.callByNeed(this.column.editable(),this.column,this.model);if(t){this.$el.html("<i class='fa fa-caret-down subnode-edit-in-process'></i>");this.model.trigger("pg-sub-node:opened",this.model,this)}},render:function e(){this.$el.empty();this.$el.html("<i class='fa fa-caret-right' data-toggle='tooltip' "+"title='"+m("View the active session details")+"'></i>");this.delegateEvents();if(this.grabFocus)this.$el.trigger("focus");return this}});var O=u.Model.extend({defaults:{version:null},schema:[{id:"backend_type",label:m("Backend type"),type:"text",editable:true,disabled:true,group:m("Details"),visible:function e(){return this.version>=1e5}},{id:"query_start",label:m("Query started at"),type:"text",editable:false,disabled:true,group:m("Details")},{id:"state_change",label:m("Last state changed at"),type:"text",editable:true,disabled:true,group:m("Details")},{id:"query",label:m("SQL"),type:"text",editable:true,disabled:true,control:b.SqlFieldControl,group:m("Details")}]});_.Dashboard={init:function e(){if(this.initialized)return;this.initialized=true;this.sid=this.did=-1;this.version=-1;var t=this.object_selected.bind(this);var i=this.object_disconnected.bind(this);x.Events.on("pgadmin-browser:tree:selected",t);x.Events.on("pgadmin:server:disconnect",i);var n=p("dashboard.index");this.chart_store={};this.charts_poller_int_id=-1;var r=x.panels["dashboard"].panel;if(r){var o=r.layout().scene().find(".pg-panel-content");if(o){var a=function i(){g.ajax({url:n,type:"GET",dataType:"html"}).done(function(e){g(o).html(e)}).fail(function(e,t){h.pgNotifier(t,e,m("An error occurred whilst loading the dashboard."),function(e){if(e==="CRYPTKEY_SET"){i()}else{g(o).html('<div class="alert alert-danger pg-panel-message" role="alert">'+m("An error occurred whilst loading the dashboard.")+"</div>")}})})};g(o).html('<div class="alert alert-info pg-panel-message" role="alert">'+m("Loading dashboard...")+"</div>");a();g(r).data("sid",-1);g(r).data("did",-1)}}},object_disconnected:function e(){var t=x.tree.selected(),i=t&&x.tree.itemData(t);if(t.length!=0){this.object_selected(t,i,x.Nodes[i._type])}},object_selected:function e(t,i,n){var r=this;if(C===false){if(!v.isUndefined(i.connected)&&i.connected!==true){r.clearChartFromStore()}}else if(i&&i._type){var o=n.getTreeNodeHierarchy(t),a=y.url(i,t,o);if(a===null){a=p("dashboard.index");r.version=o.server&&o.server.version||0;k=a+"cancel_query/";S=a+"terminate_session/";var s=o["server"];D=s&&s.db||null;if(s&&s.user&&s.user.is_superuser){T=true}else{T=false;N=s&&s.user?s.user.name:null}if("database"in o){r.sid=o.server._id;r.did=o.database._id;P=false;E=true;a+=r.sid+"/"+r.did;k+=r.sid+"/"+r.did+"/";S+=r.sid+"/"+r.did+"/"}else if("server"in o){r.sid=o.server._id;r.did=-1;P=true;E=false;a+=r.sid;k+=r.sid+"/";S+=r.sid+"/"}else{P=E=false}}else{P=E=false}var l=x.panels["dashboard"].panel;if(l){var d=l.layout().scene().find(".pg-panel-content");if(d){if(i.connected||v.isUndefined(i.connected)){if(a!==g(l).data("dashboard_url")||a===g(l).data("dashboard_url")&&g(l).data("server_status")==false){g(d).empty();r.clearChartFromStore();var c=function i(){g.ajax({url:a,type:"GET",dataType:"html"}).done(function(e){g(d).html(e);r.init_dashboard()}).fail(function(e,t){h.pgNotifier(t,e,m("An error occurred whilst loading the dashboard."),function(e){if(e==="CRYPTKEY_SET"){i()}else{g(d).html('<div class="alert alert-danger pg-panel-message" role="alert">'+m("An error occurred whilst loading the dashboard.")+"</div>")}})})};g(d).html('<div class="alert alert-info pg-panel-message" role="alert">'+m("Loading dashboard...")+"</div>");c();g(l).data("server_status",true)}}else{g(d).empty();if(!v.isUndefined(i.connected)&&i.connected!==true){r.clearChartFromStore()}g(d).html('<div class="alert alert-info pg-panel-message" role="alert">'+m("Please connect to the selected server to view the dashboard.")+"</div>");g(l).data("server_status",false)}g(l).data("dashboard_url",a)}}}},renderCharts:function e(t){var n=this,r=function e(t,i){return"Seconds ago: ".concat(parseInt(i.x*t),"</br>\n                  Value: ").concat(i.y)},o=w.getEpoch();n.stopChartsPoller();t.map(function(e){if(n.chart_store[e.chart_name]&&n.old_preferences[e.refresh_pref_name]!=n.preferences[e.refresh_pref_name]){n.clearChartFromStore(e.chart_name)}if(n.chart_store[e.chart_name]){var t=n.chart_store[e.chart_name].chart_obj;t.setOptions(e.options,false);t.setTooltipFormatter(r.bind(null,n.preferences[e.refresh_pref_name]))}if(!n.chart_store[e.chart_name]){var i=new a.Chart(e.container,e.options);i.setTooltipFormatter(r.bind(null,n.preferences[e.refresh_pref_name]));i.setOtherData("counter",e.counter);n.chart_store[e.chart_name]={chart_obj:i,refresh_on:o,refresh_rate:n.preferences[e.refresh_pref_name]}}});n.startChartsPoller(n.chart_store,n.sid,n.did)},getStatsUrl:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var r=p("dashboard.dashboard_stats");r+="/"+t;r+=i>0?"/"+i:"";r+="?chart_names="+n.join(",");return r},updateChart:function e(t,n){var r=t.getOtherData("dataset")||[],o=t.getOtherData("counter_prev_data")||n,a=t.getOtherData("counter")||false;if(r.length==0){for(var i in n){r.push({data:[[0,a?n[i]-o[i]:n[i]]],label:i})}}else{Object.keys(n).map(function(e,t){if(!a){r[t]["data"].unshift([0,n[e]])}else{if(v.isUndefined(o))return;r[t]["data"].unshift([0,n[e]-o[e]])}for(var i=0;i<r[t]["data"].length;i++){r[t]["data"][i][0]=i}});o=n}for(var s=0;s<r.length;s++){if(r[s]["data"].length>101){r[s]["data"].pop()}}t.setOtherData("dataset",r);t.setOtherData("counter_prev_data",o);if(t.isInPage()){if(t.isVisible()){t.draw(r)}}else{return}},stopChartsPoller:function e(){clearInterval(this.charts_poller_int_id)},startChartsPoller:function e(a,o,s){var l=this;var t=w.getGCD(Object.values(a).map(function(e){return e.refresh_rate}));var d=3;var c=0;l.stopChartsPoller();var i=function e(){var t=w.getEpoch();var i=[];for(var n in a){if(a[n].refresh_on<=t){a[n].refresh_on=t+a[n].refresh_rate;i.push(n)}}if(i.length==0||c>0){c--;return}var r=l.getStatsUrl(o,s,i);g.ajax({url:r,type:"GET"}).done(function(e){c=0;for(var t in e){var i=a[t].chart_obj;g(i.getContainer()).removeClass("graph-error");l.updateChart(i,e[t])}}).fail(function(e){c=0;var t="";var i="";var n="info";if(e.readyState===0){i=m("Not connected to the server or the connection to the server has been closed.")}else{t=JSON.parse(e.responseText);i=t.errormsg;if(e.status===428){if(v.isUndefined(i)||v.isNull(i)){i=m("Please connect to the selected server to view the graph.")}}else{i=m("An error occurred whilst rendering the graph.");n="danger"}}for(var r in a){var o=a[r].chart_obj;g(o.getContainer()).addClass("graph-error");g(o.getContainer()).html('<div class="alert alert-'+n+' pg-panel-message" role="alert">'+i+"</div>")}});c=d};i();l.charts_poller_int_id=setInterval(i,t*1e3)},add_new_server:function e(){if(x&&x.tree){var t=x.tree.selected().length!=0?x.tree.selected():x.tree.first(null,false),i=r(59),n=x.tree.itemData(t);while(n&&n._type!="server_group"){t=x.tree.next(t);n=x.tree.itemData(t)}if(!n){return}if(i){i.callbacks.show_obj_properties.apply(i,[{action:"create"},t])}}},render_grid:function e(t,i,n){var r=u.Model.extend({}),o=this;var a=i+o.sid;if(o.did!=-1){a+="/"+o.did}var s=u.Collection.extend({model:r,url:a,mode:"client"});var l=new s;var d=new f.Grid({emptyText:"No data found",columns:n,collection:l,className:"backgrid presentation table table-bordered table-noouter-border table-hover"});g(t).empty();g(t).append(d.render().el);var c=new f.Extension.ClientSideFilter({collection:l});c.setCustomSearchBox(g("#txtGridSearch"));g(t).data("data",l);g(t).data("grid",d);g(t).data("filter",c)},render_grid_data:function e(a){var s=g(a).data("data"),t=g(a).data("grid"),l=g(a).data("filter");if(v.isUndefined(s)){return null}s.fetch({reset:true,success:function e(){if(g(a).hasClass("grid-error")){g(a).removeClass("grid-error");g(a).html(t.render().el);g(l.el).show()}l.search()},error:function e(t,i){var n="";var r="";var o="info";if(i.readyState===0){r=m("Not connected to the server or the connection to the server has been closed.")}else{n=JSON.parse(i.responseText);r=n.errormsg;if(i.status===428){if(v.isUndefined(r)||v.isNull(r)){r=m("Please connect to the selected server to view the table.")}}else{r=m("An error occurred whilst rendering the table.");o="danger"}}if(!g(a).hasClass("grid-error")){g(l.el).hide();g(a).addClass("grid-error")}g(a).html('<div class="alert alert-'+o+' pg-panel-message" role="alert">'+r+"</div>");setTimeout(function(){_.Dashboard.render_grid_data(a,s)},5e3)}})},clearChartFromStore:function e(t){var i=this;if(!t){i.stopChartsPoller();v.each(i.chart_store,function(e,t){delete i.chart_store[t]})}else{delete i.chart_store[t]}},init_dashboard:function e(){var t=this;var i=setInterval(function(){try{if(window.top.pgAdmin.Browser.preference_version()>0){clearInterval(i);t.reflectPreferences()}}catch(e){clearInterval(i);throw e}},0);x.onPreferencesChange("dashboards",function(){t.reflectPreferences()})},reflectPreferences:function e(){var t=this;if(t.preferences){t.old_preferences=t.preferences;t.preferences=window.top.pgAdmin.Browser.get_preferences_for_module("dashboards")}else{t.preferences=window.top.pgAdmin.Browser.get_preferences_for_module("dashboards");t.old_preferences=t.preferences}if(P||E){var i=g(".dashboard-container").find("#graph-sessions")[0];var n=g(".dashboard-container").find("#graph-tps")[0];var r=g(".dashboard-container").find("#graph-ti")[0];var o=g(".dashboard-container").find("#graph-to")[0];var a=g(".dashboard-container").find("#graph-bio")[0];var s={parseFloat:false,xaxis:{min:100,max:0,autoscale:0},yaxis:{autoscale:1}};if(t.preferences.graph_data_points){s=l({},s,{},{points:{show:true,radius:1,hitRadius:3}})}if(t.preferences.graph_mouse_track){s=l({},s,{},{mouse:{track:true,position:"sw"}})}if(t.preferences.show_graphs&&g("#dashboard-graphs").hasClass("dashboard-hidden")){g("#dashboard-graphs").removeClass("dashboard-hidden")}else if(!t.preferences.show_graphs){g("#dashboard-graphs").addClass("dashboard-hidden");t.clearChartFromStore()}if(t.preferences.show_activity&&g("#dashboard-activity").hasClass("dashboard-hidden")){g("#dashboard-activity").removeClass("dashboard-hidden")}else if(!t.preferences.show_activity){g("#dashboard-activity").addClass("dashboard-hidden")}if(t.preferences.show_graphs){_.Dashboard.renderCharts([{chart_name:"session_stats",container:i,options:s,counter:false,refresh_pref_name:"session_stats_refresh"},{chart_name:"tps_stats",container:n,options:s,counter:true,refresh_pref_name:"tps_stats_refresh"},{chart_name:"ti_stats",container:r,options:s,counter:true,refresh_pref_name:"ti_stats_refresh"},{chart_name:"to_stats",container:o,options:s,counter:true,refresh_pref_name:"to_stats_refresh"},{chart_name:"bio_stats",container:a,options:s,counter:true,refresh_pref_name:"bio_stats_refresh"}])}if(!t.preferences.show_graphs&&!t.preferences.show_activity){g("#dashboard-none-show").removeClass("dashboard-hidden")}else{g("#dashboard-none-show").addClass("dashboard-hidden")}if(P){t.reflectPreferencesServer()}else if(E){t.reflectPreferencesDatabase()}}},reflectPreferencesServer:function e(){var t=this;var i=g(".dashboard-container");var n=i.find("#server_activity").get(0);var r=i.find("#server_locks").get(0);var o=i.find("#server_prepared").get(0);var a=i.find("#server_config").get(0);var s={tab_server_activity:n,tab_server_locks:r,tab_server_prepared:o,tab_server_config:a};if(t.preferences.show_activity){var l=[{name:"pid",label:m("PID"),editable:false,cell:"string"},{name:"datname",label:m("Database"),editable:false,cell:"string"},{name:"usename",label:m("User"),editable:false,cell:"string"},{name:"application_name",label:m("Application"),editable:false,cell:"string"},{name:"client_addr",label:m("Client"),editable:false,cell:"string"},{name:"backend_start",label:m("Backend start"),editable:false,cell:"string"},{name:"state",label:m("State"),editable:false,cell:"string"}];if(t.version<90600){l=l.concat([{name:"waiting",label:m("Waiting?"),editable:false,cell:"string"}])}else{l=l.concat([{name:"wait_event",label:m("Wait event"),editable:false,cell:"string"},{name:"blocking_pids",label:m("Blocking PIDs"),editable:false,cell:"string"}])}var d=new O;var c=b.generateViewSchema(null,d,"create",null,null,true);v.each(c[0].fields,function(e){e["version"]=t.version});l.unshift({name:"pg-backform-expand",label:"",cell:I,cell_priority:-1,postgres_version:t.version,schema:c});l.unshift({name:"pg-backform-delete",label:"",cell:M,cell_action:"cancel",editable:false,cell_priority:-1,canDeleteRow:_.Dashboard.can_take_action,postgres_version:t.version});l.unshift({name:"pg-backform-delete",label:"",cell:M,cell_action:"terminate",editable:false,cell_priority:-1,canDeleteRow:_.Dashboard.can_take_action,postgres_version:t.version});var u=[{name:"pid",label:m("PID"),editable:false,cell:"string"},{name:"datname",label:m("Database"),editable:false,cell:"string"},{name:"locktype",label:m("Lock type"),editable:false,cell:"string"},{name:"relation",label:m("Target relation"),editable:false,cell:"string"},{name:"page",label:m("Page"),editable:false,cell:"string"},{name:"tuple",label:m("Tuple"),editable:false,cell:"string"},{name:"virtualxid",label:m("vXID (target)"),editable:false,cell:"string"},{name:"transactionid",label:m("XID (target)"),editable:false,cell:"string"},{name:"classid",label:m("Class"),editable:false,cell:"string"},{name:"objid",label:m("Object ID"),editable:false,cell:"string"},{name:"virtualtransaction",label:m("vXID (owner)"),editable:false,cell:"string"},{name:"mode",label:m("Mode"),editable:false,cell:"string"},{name:"granted",label:m("Granted?"),editable:false,cell:"string"}];var f=[{name:"git",label:m("Name"),editable:false,cell:"string"},{name:"database",label:m("Database"),editable:false,cell:"string"},{name:"Owner",label:m("Owner"),editable:false,cell:"string"},{name:"transaction",label:m("XID"),editable:false,cell:"string"},{name:"prepared",label:m("Prepared at"),editable:false,cell:"string"}];var h=[{name:"name",label:m("Name"),editable:false,cell:"string"},{name:"category",label:m("Category"),editable:false,cell:"string"},{name:"setting",label:m("Setting"),editable:false,cell:"string"},{name:"unit",label:m("Unit"),editable:false,cell:"string"},{name:"short_desc",label:m("Description"),editable:false,cell:"string"}];g(n).addClass("pg-el-container");g(n).attr("el","sm");_.Dashboard.render_grid(n,p("dashboard.activity"),l);_.Dashboard.render_grid(r,p("dashboard.locks"),u);_.Dashboard.render_grid(o,p("dashboard.prepared"),f);_.Dashboard.render_grid(a,p("dashboard.config"),h);_.Dashboard.render_grid_data(n);g('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=s[g(e.relatedTarget).attr("aria-controls")];g(t).data("filtertext",g("#txtGridSearch").val());var i=s[g(e.target).attr("aria-controls")];g("#txtGridSearch").val(g(i).data("filtertext"));_.Dashboard.render_grid_data(i)});g("#btn_refresh").off("click").on("click",function(){var e=s[g("#dashboard-activity .nav-tabs .active").attr("aria-controls")];_.Dashboard.render_grid_data(e)})}},reflectPreferencesDatabase:function e(){var t=this;var i=document.getElementById("database_activity");var n=document.getElementById("database_locks");var r=document.getElementById("database_prepared");var o={tab_database_activity:i,tab_database_locks:n,tab_database_prepared:r};if(t.preferences.show_activity){var a=[{name:"pid",label:m("PID"),editable:false,cell:"string"},{name:"usename",label:m("User"),editable:false,cell:"string"},{name:"application_name",label:m("Application"),editable:false,cell:"string"},{name:"client_addr",label:m("Client"),editable:false,cell:"string"},{name:"backend_start",label:m("Backend start"),editable:false,cell:"string"},{name:"state",label:m("State"),editable:false,cell:"string"}];if(t.version<90600){a=a.concat([{name:"waiting",label:m("Waiting?"),editable:false,cell:"string"}])}else{a=a.concat([{name:"wait_event",label:m("Wait event"),editable:false,cell:"string"},{name:"blocking_pids",label:m("Blocking PIDs"),editable:false,cell:"string"}])}var s=new O;var l=b.generateViewSchema(null,s,"create",null,null,true);v.each(l[0].fields,function(e){e["version"]=t.version});a.unshift({name:"pg-backform-expand",label:"",cell:I,cell_priority:-1,postgres_version:t.version,schema:l});a.unshift({name:"pg-backform-delete",label:"",cell:M,cell_action:"cancel",editable:false,cell_priority:-1,canDeleteRow:_.Dashboard.can_take_action,postgres_version:t.version});a.unshift({name:"pg-backform-delete",label:"",cell:M,cell_action:"terminate",editable:false,cell_priority:-1,canDeleteRow:_.Dashboard.can_take_action,postgres_version:t.version});var d=[{name:"pid",label:m("PID"),editable:false,cell:"string"},{name:"locktype",label:m("Lock type"),editable:false,cell:"string"},{name:"relation",label:m("Target relation"),editable:false,cell:"string"},{name:"page",label:m("Page"),editable:false,cell:"string"},{name:"tuple",label:m("Tuple"),editable:false,cell:"string"},{name:"virtualxid",label:m("vXID (target)"),editable:false,cell:"string"},{name:"transactionid",label:m("XID (target)"),editable:false,cell:"string"},{name:"classid",label:m("Class"),editable:false,cell:"string"},{name:"objid",label:m("Object ID"),editable:false,cell:"string"},{name:"virtualtransaction",label:m("vXID (owner)"),editable:false,cell:"string"},{name:"mode",label:m("Mode"),editable:false,cell:"string"},{name:"granted",label:m("Granted?"),editable:false,cell:"string"}];var c=[{name:"git",label:m("Name"),editable:false,cell:"string"},{name:"Owner",label:m("Owner"),editable:false,cell:"string"},{name:"transaction",label:m("XID"),editable:false,cell:"string"},{name:"prepared",label:m("Prepared at"),editable:false,cell:"string"}];g(i).addClass("pg-el-container");g(i).attr("el","sm");_.Dashboard.render_grid(i,p("dashboard.activity"),a);_.Dashboard.render_grid(n,p("dashboard.locks"),d);_.Dashboard.render_grid(r,p("dashboard.prepared"),c);_.Dashboard.render_grid_data(i);g('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=o[g(e.relatedTarget).attr("aria-controls")];g(t).data("filtertext",g("#txtGridSearch").val());var i=o[g(e.target).attr("aria-controls")];g("#txtGridSearch").val(g(i).data("filtertext"));_.Dashboard.render_grid_data(i)});g("#btn_refresh").off("click").on("click",function(){var e=o[g("#dashboard-activity .nav-tabs .active").attr("aria-controls")];_.Dashboard.render_grid_data(e)})}},toggleVisibility:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;C=t;if(i){this.clearChartFromStore()}},can_take_action:function e(t){var i=t.collection.where({state:"active"}),n=this.get("postgres_version")||null,r=this.get("cell_action")||null,o=r==="cancel",a=o?m("cancel"):m("terminate");if(n&&n>=1e5&&!t.get("datname")){h.info(m("You cannot ")+a+m(" background worker processes."));return false}else if(D==t.get("datname")&&t.get("state")=="active"&&i.length==1){h.error(m("You are not allowed to ")+a+m(" the main active session."));return false}else if(o&&t.get("state")=="idle"){h.info(m("The session is already in idle state."));return false}else if(T){return true}else if(N&&N==t.get("usename")){return true}else{h.error(m("Superuser privileges are required to ")+a+m(" another users query."));return false}}};return _.Dashboard}.apply(t,i),n!==undefined&&(e.exports=n))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Chart=void 0;var n=r(i(205));function r(e){return e&&e.__esModule?e:{default:e}}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){o(i,true).forEach(function(e){s(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{o(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,i){if(t)d(e.prototype,t);if(i)d(e,i);return e}var u=function(){function i(e,t){l(this,i);this.chartApi=n.default;this._container=e;this._options={};this._defaultOptions={legend:{position:"nw",backgroundColor:"#D2E8FF"},lines:{show:true,lineWidth:2},shadowSize:0,resolution:3};this._dataset=null;this._tooltipFormatter=null;this._otherData={};this.setOptions(t)}c(i,[{key:"getContainer",value:function e(){return this._container}},{key:"getContainerDimensions",value:function e(){return{height:this._container.clientHeight,width:this._container.clientWidth}}},{key:"getOptions",value:function e(){return this._options}},{key:"setOptions",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(i){this._options=a({},this._defaultOptions,{},this._options,{},t)}else{this._options=a({},this._defaultOptions,{},t)}}},{key:"removeOptions",value:function e(t){if(this._options[t]){delete this._options[t]}}},{key:"getOtherData",value:function e(t){if(this._otherData[t]){return this._otherData[t]}}},{key:"setOtherData",value:function e(t,i){this._otherData[t]=i}},{key:"isVisible",value:function e(){var t=this.getContainerDimensions();return t.height>0&&t.width>0}},{key:"isInPage",value:function e(){return this._container===document.body?false:document.body.contains(this._container)}},{key:"setTooltipFormatter",value:function e(t){var i=this.getOptions();this._tooltipFormatter=t;if(this._tooltipFormatter){this.setOptions({mouse:a({},i.mouse,{trackFormatter:this._tooltipFormatter})})}}},{key:"draw",value:function e(t){this._dataset=t;if(this._container){n.default.draw(this._container,this._dataset,this._options)}}}]);return i}();t.Chart=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.url=r;var a=i(17);var s=n(i(5));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,r){var i=s.default.treeMenu.findNodeByDomElement(t);var o=null;if(i){i.anyFamilyMember(function(e){var t=e.getData();var i=s.default.Nodes[t._type];var n=i&&i.dashboard;if((0,a.isFunction)(n)){n=n.apply(i,[e,t,r])}o=(0,a.isString)(n)?n:null;return o!==null})}return o}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__109__},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(1),i(8),i(0),i(9),i(3),i(5),i(12),i(18),i(111),i(112)],r=function(g,v,_,b,i,y,w,x,C,l,k){if(w.NodeStatistics)return w.NodeStatistics;w.NodeStatistics=w.NodeStatistics||{};if(w.NodeStatistics.initialized){return w.NodeStatistics}var d=x.SizeFormatter=function(){};v.extend(d.prototype,{fromRaw:function e(t){return l(t)},toRaw:function e(t){return t}});var e=x.Extension.SwitchCell.extend({defaults:v.extend({},x.Extension.SwitchCell.prototype.defaults)}),c={16:e,20:x.IntegerCell,21:x.IntegerCell,23:x.IntegerCell,700:x.NumberCell,701:x.NumberCell,1700:x.NumberCell,702:x.DatetimeCell,703:x.DatetimeCell,1082:x.DatetimeCell.extend({includeDate:true,includeTime:false,includeMilli:false}),1083:x.DatetimeCell.extend({includeDate:false,includeTime:true,includeMilli:true}),1114:x.DatetimeCell.extend({includeDate:true,includeTime:true,includeMilli:true}),1184:"string",1266:"string"},S="backgrid presentation table table-bordered table-noouter-border table-hover",T=window.wcDocker;v.extend(e.prototype.defaults.options,{onText:g("True"),offText:g("False"),onColor:"success",offColor:"primary",size:"mini"});v.extend(w.NodeStatistics,{init:function e(){if(this.initialized){return}this.initialized=true;v.bindAll(this,"showStatistics","panelVisibilityChanged","__createMultiLineStatistics","__createSingleLineStatistics","__loadMoreRows");v.extend(this,{initialized:true,collection:new i.Collection(null),statistic_columns:[{editable:false,name:"statistics",label:g("Statistics"),cell:"string",headerCell:x.Extension.CustomHeaderCell,cellHeaderClasses:"width_percent_25"},{editable:false,name:"value",label:g("Value"),cell:"string"}],panel:w.docker.findPanels("statistics"),columns:null,grid:null});var t=this;w.Events.on("pgadmin-browser:panel-statistics:"+T.EVENT.VISIBILITY_CHANGED,this.panelVisibilityChanged);w.Events.on("pgadmin:browser:node:updated",function(){if(this.panel&&this.panel.length){b(this.panel[0]).data("node-prop","");this.panelVisibilityChanged(this.panel[0])}},this);if(this.panel.length==0){w.Events.on("pgadmin-browser:panel-statistics:"+T.EVENT.INIT,function(){t.panel=w.docker.findPanels("statistics");if(t.panel[0].isVisible()||t.panel.length!=1){w.Events.on("pgadmin-browser:tree:selected",this.showStatistics);w.Events.on("pgadmin-browser:tree:refreshing",this.refreshStatistics,this)}}.bind(this))}else{if(t.panel[0].isVisible()||t.panel.length!=1){w.Events.on("pgadmin-browser:tree:selected",this.showStatistics);w.Events.on("pgadmin-browser:tree:refreshing",this.refreshStatistics,this)}}if(t.panel.length>0&&t.panel[0].isVisible()){w.Events.on("pgadmin-browser:tree:selected",this.showStatistics);w.Events.on("pgadmin-browser:tree:refreshing",this.refreshStatistics,this)}},__updateCollection:function e(t,i,o,n){var r=this.panel[0].layout().scene().find(".pg-panel-content"),a=r.find(".pg-panel-statistics-message"),s=r.find(".pg-panel-statistics-container"),l=this.panel,d=this,c="",u=n;if(i){c=g("No statistics are available for the selected object.");var f=i.getTreeNodeHierarchy(o);var h={node_type:n,url:t};if(v.isEqual(b(l[0]).data("node-prop"),h)){return}b(l[0]).data("node-prop",h);if(k.nodeHasStatistics(i,o)){c="";var p;var m=function r(){b.ajax({url:t,type:"GET",beforeSend:function e(t){t.setRequestHeader(y.csrf_token_header,y.csrf_token);p=setTimeout(function(){a.text(g("Retrieving data from the server..."));a.removeClass("d-none");if(d.grid){d.grid.remove()}},1e3)}}).done(function(e){clearTimeout(p);a.text("");if(e.data){var t=d.data=e.data;if(i.hasCollectiveStatistics||t["rows"].length>1){w.Events.on("pgadmin-browser:panel-statistics:"+T.EVENT.SCROLLED,d.__loadMoreRows);d.__createMultiLineStatistics.call(d,t,i.statsPrettifyFields)}else{w.Events.off("pgadmin-browser:panel-statistics:"+T.EVENT.SCROLLED,d.__loadMoreRows);d.__createSingleLineStatistics.call(d,t,i.statsPrettifyFields)}if(d.grid){delete d.grid;d.grid=null}d.grid=new x.Grid({emptyText:"No data found",columns:d.columns,collection:d.collection,className:S});d.grid.render();s.empty();s.append(d.grid.$el);if(!a.hasClass("d-none")){a.addClass("d-none")}s.removeClass("d-none")}else if(e.info){if(!s.hasClass("d-none")){s.addClass("d-none")}a.text(e.info);a.removeClass("d-none")}}).fail(function(e,t,i){var n=f[u].label;w.Events.trigger("pgadmin:node:retrieval:error","statistics",e,t,i,o);if(!C.pgHandleItemError(e,t,i,{item:o,info:f})){C.pgNotifier(t,e,_(g("Error retrieving the information - %s")).sprintf(i||n).value(),function(e){if(e==="CRYPTKEY_SET"){r()}else{console.warn(arguments)}})}a.text(g("Failed to retrieve data from the server."))})};m()}}if(c!=""){if(!s.hasClass("d-none"))s.addClass("d-none");a.removeClass("d-none");a.text(c)}},refreshStatistics:function e(t,i,n){var r=this,o={node_type:i._type,url:n.generate_url(t,"stats",i,true)};if(v.isEqual(b(r.panel[0]).data("node-prop"),o)){b(r.panel[0]).data("node-prop","");r.showStatistics(t,i,n)}},showStatistics:function e(t,i,n){var r=this;if(!n){return}if(n){if(r.timeout){clearTimeout(r.timeout)}r.timeout=setTimeout(function(){r.__updateCollection.call(r,n.generate_url(t,"stats",i,true),n,t,i._type)},400)}},__createMultiLineStatistics:function e(t,i){var n=t["rows"],r=t["columns"];this.columns=[];for(var o in r){var a=r[o],s=c[a["type_code"]]||"string";if(a["name"]=="PID"){s=s.extend({orderSeparator:""})}var l={editable:false,name:a["name"],cell:s};if(v.indexOf(i,a["name"])!=-1){l["formatter"]=d}this.columns.push(l)}this.collection.reset(n.splice(0,50))},__loadMoreRows:function e(){var t=b(".pg-panel-statistics-container").closest(".wcFrameCenter")[0];if(t.scrollHeight-10<t.scrollTop+t.offsetHeight){var i=this.data["rows"];if(i.length>0){this.collection.add(i.splice(0,50))}}},__createSingleLineStatistics:function e(t,i){var n=t["rows"][0],r=t["columns"],o=[],a;this.columns=this.statistic_columns;for(var s in r){a=r[s]["name"];o.push({statistics:a,value:n&&n[a]?v.indexOf(i,a)!=-1?l(n[a]):n[a]:null})}this.collection.reset(o)},panelVisibilityChanged:function e(t){if(t.isVisible()){var i=w.tree,n=i.selected(),r=n&&i.itemData(n),o=n&&r&&w.Nodes[r._type];w.NodeStatistics.showStatistics.apply(w.NodeStatistics,[n,r,o]);w.Events.on("pgadmin-browser:tree:selected",w.NodeStatistics.showStatistics);w.Events.on("pgadmin-browser:tree:refreshing",w.NodeStatistics.refreshStatistics,this)}else{w.Events.off("pgadmin-browser:tree:selected",w.NodeStatistics.showStatistics);w.Events.off("pgadmin-browser:tree:refreshing",w.NodeStatistics.refreshStatistics,this)}}});return w.NodeStatistics}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[],r=function(){var e=function e(t){var i=Math.abs(t),n=10*1024,r=n-1,o=0,a=["bytes","kB","MB","GB","TB","PB"];if(i<n)return i+" "+a[o];else{do{i=i/1024;o+=1}while(i>r);return Math.round(i)+" "+a[o]}};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.nodeHasStatistics=n;function n(e,t){if(typeof e.hasStatistics==="function"){var i=e.getTreeNodeHierarchy(t);return e.hasStatistics(i)}return e.hasStatistics}},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(1),i(8),i(0),i(9),i(3),i(5),i(10),i(12)],r=function(p,n,m,g,i,v,_,b,r){if(_.NodeDependencies)return _.NodeDependencies;var y=window.wcDocker;_.NodeDependencies=_.NodeDependencies||{};n.extend(_.NodeDependencies,{init:function e(){if(this.initialized){return}this.initialized=true;this.dependenciesPanel=_.docker.findPanels("dependencies")[0];n.bindAll(this,"showDependencies","__loadMoreRows","__appendGridToPanel");var t=i.Model.extend({defaults:{icon:"icon-unknown",type:undefined,name:undefined,field:undefined},parse:function e(t){var i=_.Nodes[t.type];if(t.icon==null||t.icon==""){t.icon=i?n.isFunction(i["node_image"])?i["node_image"].apply(i,[null,null]):i["node_image"]||"icon-"+t.type:"icon-"+t.type}t.type=m.titleize(t.type.replace(/_/g," "),true);return t}});this.dependenciesCollection=new(i.Collection.extend({model:t}))(null);_.Events.on("pgadmin-browser:tree:selected",this.showDependencies);this.__appendGridToPanel()},__appendGridToPanel:function e(){var t=this.dependenciesPanel.layout().scene().find(".pg-panel-content"),i=t.find(".pg-panel-dependencies-container"),n=new r.Grid({emptyText:"No data found",columns:[{name:"type",label:p("Type"),cell:r.Cell.extend({render:function e(){r.Cell.prototype.render.apply(this,arguments);this.$el.prepend(g("<i>",{class:"wcTabIcon "+this.model.get("icon")}));return this}}),editable:false},{name:"name",label:p("Name"),cell:"string",editable:false},{name:"field",label:"",cell:"string",editable:false}],collection:this.dependenciesCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});this.dependenciesGrid=n;i.append(n.render().el);return true},showDependencies:function e(r,o,a){var s=this,i=p("Please select an object in the tree view."),t=this.dependenciesPanel,n=t.layout().scene().find(".pg-panel-content"),l=n.find(".pg-panel-depends-message"),d=n.find(".pg-panel-dependencies-container"),c=a.getTreeNodeHierarchy(r),u=o._type,f=a.generate_url(r,"dependency",o,true);if(a){i=p("No dependency information is available for the selected object.");if(a.hasDepends){this.dependenciesGrid.columns.models[2].set({label:p("Restriction")});l.addClass("d-none");d.removeClass("d-none");var h="";g.ajax({url:f,type:"GET",beforeSend:function e(t){t.setRequestHeader(v.csrf_token_header,v.csrf_token);h=setTimeout(function(){l.text(p("Fetching dependency information from the server..."));l.removeClass("d-none");i=""},1e3)}}).done(function(e){clearTimeout(h);if(e.length>0){if(!l.hasClass("d-none")){l.addClass("d-none")}d.removeClass("d-none");s.dependenciesData=e;s.dependenciesCollection.reset(s.dependenciesData.splice(0,100),{parse:true});_.Events.on("pgadmin-browser:panel-dependencies:"+y.EVENT.SCROLLED,s.__loadMoreRows)}else{_.Events.off("pgadmin-browser:panel-dependencies:"+y.EVENT.SCROLLED);s.dependenciesCollection.reset({silent:true});l.text(i);l.removeClass("d-none");if(!d.hasClass("d-none")){d.addClass("d-none")}}}).fail(function(e,t,i){var n=c[u].label;_.Events.trigger("pgadmin:node:retrieval:error","depends",e,t,i);if(!b.pgHandleItemError(e,t,i,{item:r,info:c})){b.pgNotifier(t,e,m(p("Error retrieving data from the server: %s")).sprintf(i||n).value(),function(e){if(e==="CRYPTKEY_SET"){s.showDependencies(r,o,a)}else{console.warn(arguments)}})}l.text(p("Failed to retrieve data from the server."))})}}if(i!=""){l.text(i);l.removeClass("d-none");if(!d.hasClass("d-none")){d.addClass("d-none")}}},__loadMoreRows:function e(){if(this.dependenciesPanel.length<1)return;var t=this.dependenciesPanel.$container.find(".pg-panel-dependencies-container").closest(".wcFrameCenter")[0];if(t.scrollHeight-10<t.scrollTop+t.offsetHeight){if(this.dependenciesData.length>0){this.dependenciesCollection.add(this.dependenciesData.splice(0,100),{parse:true})}}}});return _.NodeDependencies}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(1),i(8),i(0),i(9),i(3),i(5),i(10),i(12)],r=function(p,n,m,g,i,v,_,b,r){if(_.NodeDependents)return _.NodeDependents;var y=window.wcDocker;_.NodeDependents=_.NodeDependents||{};n.extend(_.NodeDependents,{init:function e(){if(this.initialized){return}this.initialized=true;this.dependentsPanel=_.docker.findPanels("dependents")[0];n.bindAll(this,"showDependents","__loadMoreRows","__appendGridToPanel");var t=i.Model.extend({defaults:{icon:"icon-unknown",type:undefined,name:undefined,field:undefined},parse:function e(t){var i=_.Nodes[t.type];if(t.icon==null||t.icon==""){t.icon=i?n.isFunction(i["node_image"])?i["node_image"].apply(i,[null,null]):i["node_image"]||"icon-"+t.type:"icon-"+t.type}t.type=m.titleize(t.type.replace(/_/g," "),true);return t}});this.dependentCollection=new(i.Collection.extend({model:t}))(null);_.Events.on("pgadmin-browser:tree:selected",this.showDependents);_.Events.on("pgadmin-browser:tree:refreshing",this.refreshDependents,this);this.__appendGridToPanel()},__appendGridToPanel:function e(){var t=this.dependentsPanel.layout().scene().find(".pg-panel-content"),i=t.find(".pg-panel-dependents-container"),n=new r.Grid({emptyText:"No data found",columns:[{name:"type",label:p("Type"),cell:r.Cell.extend({render:function e(){r.Cell.prototype.render.apply(this,arguments);this.$el.prepend(g("<i>",{class:"wcTabIcon "+this.model.get("icon")}));return this}}),editable:false},{name:"name",label:p("Name"),cell:"string",editable:false},{name:"field",label:"",cell:"string",editable:false}],collection:this.dependentCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});this.dependentGrid=n;i.append(n.render().el);return true},showDependents:function e(r,o,a){var s=this,i=p("Please select an object in the tree view."),t=this.dependentsPanel,n=t.layout().scene().find(".pg-panel-content"),l=n.find(".pg-panel-depends-message"),d=n.find(".pg-panel-dependents-container"),c=a.getTreeNodeHierarchy(r),u=o._type,f=a.generate_url(r,"dependent",o,true);if(a){i=p("No dependent information is available for the selected object.");if(a.hasDepends){if(a.type=="tablespace"||a.type=="role"){this.dependentGrid.columns.models[2].set({label:p("Database")})}else{this.dependentGrid.columns.models[2].set({label:p("Restriction")})}l.addClass("d-none");d.removeClass("d-none");var h="";g.ajax({url:f,type:"GET",beforeSend:function e(t){t.setRequestHeader(v.csrf_token_header,v.csrf_token);h=setTimeout(function(){l.text(p("Fetching dependent information from the server..."));l.removeClass("d-none");i=""},1e3)}}).done(function(e){clearTimeout(h);if(e.length>0){if(!l.hasClass("d-none")){l.addClass("d-none")}d.removeClass("d-none");s.dependentData=e;s.dependentCollection.reset(s.dependentData.splice(0,100),{parse:true});_.Events.on("pgadmin-browser:panel-dependents:"+y.EVENT.SCROLLED,s.__loadMoreRows)}else{_.Events.off("pgadmin-browser:panel-dependents:"+y.EVENT.SCROLLED);s.dependentCollection.reset({silent:true});l.text(i);l.removeClass("d-none");if(!d.hasClass("d-none")){d.addClass("d-none")}}}).fail(function(e,t,i){var n=c[u].label;_.Events.trigger("pgadmin:node:retrieval:error","depends",e,t,i);if(!b.pgHandleItemError(e,t,i,{item:r,info:c})){b.pgNotifier(t,e,m(p("Error retrieving data from the server: %s")).sprintf(i||n).value(),function(e){if(e==="CRYPTKEY_SET"){s.showDependents(r,o,a)}else{console.warn(arguments)}})}l.text(p("Failed to retrieve data from the server."))})}}if(i!=""){l.text(i);l.removeClass("d-none");if(!d.hasClass("d-none")){d.addClass("d-none")}}},__loadMoreRows:function e(){if(this.dependentsPanel.length<1)return;var t=this.dependentsPanel.$container.find(".pg-panel-dependents-container").closest(".wcFrameCenter")[0];if(t.scrollHeight-10<t.scrollTop+t.offsetHeight){if(this.dependentData.length>0){this.dependentCollection.add(this.dependentData.splice(0,100),{parse:true})}}}});return _.NodeDependents}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(1),i(8),i(0),i(3),i(5),i(10)],r=function(u,f,h,p,m,g,v){g.ShowNodeSQL=g.ShowNodeSQL||{};if(g.ShowNodeSQL.initialized){return g.ShowNodeSQL}var i=window.wcDocker;f.extend(g.ShowNodeSQL,{init:function e(){if(this.initialized){return}this.initialized=true;f.bindAll(this,"showSQL","sqlPanelVisibilityChanged");var t;this.sqlPanels=t=g.docker.findPanels("sql");g.Events.on("pgadmin-browser:panel-sql:"+i.EVENT.VISIBILITY_CHANGED,this.sqlPanelVisibilityChanged);g.Events.on("pgadmin:browser:node:updated",function(){if(this.sqlPanels&&this.sqlPanels.length){p(this.sqlPanels[0]).data("node-prop","");this.sqlPanelVisibilityChanged(this.sqlPanels[0])}},this);if(t.length==0){g.Events.on("pgadmin-browser:panel-sql:"+i.EVENT.INIT,function(){if(t[0].isVisible()||t.length!=1){g.Events.on("pgadmin-browser:tree:selected",this.showSQL);g.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this)}}.bind(this))}else{if(t[0].isVisible()||t.length!=1){g.Events.on("pgadmin-browser:tree:selected",this.showSQL);g.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this)}}},refreshSQL:function e(t,i,n){var r=this,o={node_type:i._type,url:n.generate_url(t,"sql",i,true)};if(f.isEqual(p(r.sqlPanels[0]).data("node-prop"),o)){p(r.sqlPanels[0]).data("node-prop","");r.showSQL(t,i,n)}},showSQL:function e(s,l,d){this.timeout&&clearTimeout(this.timeout);var c=this;this.timeout=setTimeout(function(){var e="-- "+u("Please select an object in the tree view.");if(d){e="-- "+u("No SQL could be generated for the selected object.");var o=l._type,t=d.generate_url(s,"sql",l,true),a=d.getTreeNodeHierarchy(s),i={node_type:o,url:t};if(f.isEqual(p(c.sqlPanels[0]).data("node-prop"),i)){return}p(c.sqlPanels[0]).data("node-prop",i);if(d.hasSQL){e="";var n;var r=function r(){p.ajax({url:t,type:"GET",beforeSend:function e(t){t.setRequestHeader(m.csrf_token_header,m.csrf_token);n=setTimeout(function(){m.Browser.editor.setValue(u("Retrieving data from the server..."))},1e3)}}).done(function(e){if(m.Browser.editor.getValue()!=e){m.Browser.editor.setValue(e)}clearTimeout(n)}).fail(function(e,t,i){var n=a[o].label;g.Events.trigger("pgadmin:node:retrieval:error","sql",e,t,i,s);if(!v.pgHandleItemError(e,t,i,{item:s,info:a})){v.pgNotifier(t,e,h(u("Error retrieving the information - %s")).sprintf(i||n).value(),function(e){if(e==="CRYPTKEY_SET"){r()}else{console.warn(arguments)}})}})};r()}}if(e!=""){m.Browser.editor.setValue(e)}},400)},sqlPanelVisibilityChanged:function e(t){if(t.isVisible()){var i=g.tree,n=i.selected(),r=n&&i.itemData(n),o=n&&r&&g.Nodes[r._type];g.ShowNodeSQL.showSQL.apply(g.ShowNodeSQL,[n,r,o]);g.Events.on("pgadmin-browser:tree:selected",g.ShowNodeSQL.showSQL);g.Events.on("pgadmin-browser:tree:refreshing",g.ShowNodeSQL.refreshSQL,this)}else{g.Events.off("pgadmin-browser:tree:selected",g.ShowNodeSQL.showSQL);g.Events.off("pgadmin-browser:tree:refreshing",g.ShowNodeSQL.refreshSQL,this)}}});return g.ShowNodeSQL}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(3),i(2),i(4),i(1),i(8),i(0),i(5),i(18)],r=function(c,u,i,f,h,p,m,s){m.BackgroundProcessObsorver=m.BackgroundProcessObsorver||{};if(m.BackgroundProcessObsorver.initialized){return m.BackgroundProcessObsorver}var g=window.wcDocker;var o=function e(t,i){var n=this;setTimeout(function(){n.initialize.apply(n,[t,i])},1)};f.extend(o.prototype,{success_status_tpl:f.template('\n      <div class="d-flex px-2 py-1 bg-success-light border border-success rounded">\n        <div class="pr-2">\n          <i class="fa fa-check fa-lg text-success pg-bg-status-icon" aria-hidden="true"></i>\n        </div>\n        <div class="text-body mx-auto pg-bg-status-text"><%-status_text%></div>\n      </div>'),failed_status_tpl:f.template('\n      <div class="d-flex px-2 py-1 bg-danger-lighter border border-danger rounded">\n        <div class="pr-2">\n          <i class="fa fa-close fa-lg text-danger pg-bg-status-icon" aria-hidden="true"></i>\n        </div>\n        <div class="text-body mx-auto pg-bg-status-text"><%-status_text%></div>\n      </div>'),other_status_tpl:f.template('\n      <div class="d-flex px-2 py-1 bg-primary-light border border-primary rounded">\n        <div class="pr-2">\n          <i class="fa fa-info fa-lg text-primary pg-bg-status-icon" aria-hidden="true"></i>\n        </div>\n        <div class="text-body mx-auto pg-bg-status-text"><%-status_text%></div>\n      </div>'),initialize:function e(t,i){f.extend(this,{details:false,notify:f.isUndefined(i)||i,curr_status:null,state:0,completed:false,id:t["id"],type_desc:null,desc:null,detailed_desc:null,stime:null,exit_code:null,acknowledge:t["acknowledge"],execution_time:null,out:-1,err:-1,lot_more:false,notifier:null,container:null,panel:null,logs:p("<ol></ol>",{class:"pg-bg-process-logs"})});if(this.notify){m.Events&&m.Events.on("pgadmin-bgprocess:started:"+this.id,function(e){if(!e.notifier)e.show.apply(e)});m.Events&&m.Events.on("pgadmin-bgprocess:finished:"+this.id,function(e){if(!e.notifier)e.show.apply(e)})}var n=this;setTimeout(function(){n.update.apply(n,[t])},1)},bgprocess_url:function e(t){switch(t){case"status":if(this.details&&this.out!=-1&&this.err!=-1){return i("bgprocess.detailed_status",{pid:this.id,out:this.out,err:this.err})}return i("bgprocess.status",{pid:this.id});case"acknowledge":return i("bgprocess.acknowledge",{pid:this.id});case"stop_process":return i("bgprocess.stop_process",{pid:this.id});default:return i("bgprocess.list")}},update:function e(t){var i=this,n=[],r=[];if("stime"in t)i.stime=new Date(t.stime);if("execution_time"in t)i.execution_time=parseFloat(t.execution_time);if("type_desc"in t)i.type_desc=t.type_desc;if("desc"in t)i.desc=t.desc;if("details"in t)i.detailed_desc=t.details;if("exit_code"in t)i.exit_code=t.exit_code;if("process_state"in t)i.state=t.process_state;if("out"in t){i.out=t.out&&t.out.pos;if(t.out&&t.out.lines){n=t.out.lines}}if("err"in t){i.err=t.err&&t.err.pos;if(t.err&&t.err.lines){r=t.err.lines}}i.completed=i.completed||"err"in t&&"out"in t&&t.err.done&&t.out.done||!i.details&&!f.isNull(i.exit_code);var o=0,a=0,s=[],l=document.createElement("textarea"),d=function e(t){l.textContent=t;return l.innerHTML};while(o<n.length&&a<r.length){if(c.natural_sort(n[o][0],r[a][0])<=0){s.push('<li class="pg-bg-res-out">'+d(n[o++][1])+"</li>")}else{s.push('<li class="pg-bg-res-err">'+d(r[a++][1])+"</li>")}}while(o<n.length){s.push('<li class="pg-bg-res-out">'+d(n[o++][1])+"</li>")}while(a<r.length){s.push('<li class="pg-bg-res-err">'+d(r[a++][1])+"</li>")}if(s.length){i.logs.append(s.join(""));setTimeout(function(){i.logs[0].scrollTop=i.logs[0].scrollHeight})}if(i.stime){i.curr_status=i.other_status_tpl({status_text:u("Started")});if(i.execution_time>=2){i.curr_status=i.other_status_tpl({status_text:u("Running...")})}if(!f.isNull(i.exit_code)){if(i.state===3){i.curr_status=i.failed_status_tpl({status_text:u("Terminated by user.")})}else if(i.exit_code==0){i.curr_status=i.success_status_tpl({status_text:u("Successfully completed.")})}else{i.curr_status=i.failed_status_tpl({status_text:h(u("Failed (exit code: %s).")).sprintf(String(i.exit_code)).value()})}}if(i.state==0&&i.stime){i.state=1;m.Events&&m.Events.trigger("pgadmin-bgprocess:started:"+i.id,i,i)}if(i.state==1&&!f.isNull(i.exit_code)){i.state=2;m.Events&&m.Events.trigger("pgadmin-bgprocess:finished:"+i.id,i,i)}setTimeout(function(){i.show.apply(i)},10)}if(!i.completed){setTimeout(function(){i.status.apply(i)},1e3)}},status:function e(){var t=this;p.ajax({typs:"GET",timeout:3e4,url:t.bgprocess_url("status"),cache:false,async:true,contentType:"application/json"}).done(function(e){setTimeout(function(){t.update(e)},10)}).fail(function(e){if(e.status!=410)setTimeout(function(){t.update(e)},1e4)})},show:function e(){var t=this;if(t.notify&&!t.details){if(!t.notifier){var i=p('\n            <div class="card">\n              <div class="card-header bg-primary d-flex">\n                <div>'.concat(t.type_desc,'</div>\n                <div class="ml-auto">\n                  <button class="btn btn-sm-sq btn-primary pg-bg-close"><i class="fa fa-lg fa-close"></i></button>\n                </div>\n              </div>\n              <div class="card-body px-2">\n                <div class="py-1">').concat(t.desc,'</div>\n                <div class="py-1">').concat(t.stime.toString(),'</div>\n                <div class="d-flex py-1">\n                  <div class="my-auto mr-2">\n                    <span class="fa fa-clock-o fa-2x"></span>\n                  </div>\n                  <div class="pg-bg-etime my-auto mr-2"></div>\n                  <div class="ml-auto">\n                    <button class="btn btn-secondary pg-bg-more-details"><span class="fa fa-info-circle"></span>&nbsp;').concat(u("More details..."),'</button>\n                    <button class="btn btn-danger bg-process-stop"><span class="fa fa-times-circle"></span>&nbsp;').concat(u("Stop Process"),'</button>\n                  </div>\n                </div>\n                <div class="pg-bg-status py-1">\n                </div>\n              </div>\n            </div>\n            '));var n=i.find(".pg-bg-more-details");var r=i.find(".pg-bg-close");t.container=i;t.notifier=s.notify(i.get(0),"bg-bgprocess",0,null);n.on("click",function(e){e=e||window.event;e.cancelBubble=true;e.stopPropagation();this.notifier.dismiss();this.notifier=null;this.completed=false;this.show_detailed_view.apply(this)}.bind(t));r.on("click",function(){this.notifier.dismiss();this.notifier=null;this.acknowledge_server.apply(this)}.bind(this));t.container.on("click",function(e){e=e||window.event;e.cancelBubble=true;e.stopPropagation();return});i.find(".bg-process-stop").off("click").on("click",t.stop_process.bind(this))}t.container.find(".pg-bg-etime").empty().append(p("<span></span>").text(String(t.execution_time))).append(p("<span></span>").text(" "+u("seconds")));var o=p(t.container.find(".pg-bg-status"));o.html(t.curr_status);var a=p(t.container.find(".bg-process-stop"));if(isNaN(parseInt(t.exit_code))){a.attr("disabled",false)}else{a.attr("disabled",true)}}else{t.show_detailed_view.apply(t)}},show_detailed_view:function e(){var t=this,i=this.panel,n=false;if(!t.panel){n=true;i=this.panel=m.BackgroundProcessObsorver.create_panel();i.title("Process Watcher - "+t.type_desc);i.focus()}var r=i.$container,o=r.find(".bg-process-watcher"),a=r.find(".bg-process-details"),s=r.find(".bg-process-footer"),l=r.find(".bg-process-stop");if(isNaN(parseInt(t.exit_code))){l.attr("disabled",false)}else{l.attr("disabled",true)}l.off("click").on("click",t.stop_process.bind(this));if(n){o.html(t.logs);setTimeout(function(){t.logs[0].scrollTop=t.logs[0].scrollHeight});a.find(".bg-detailed-desc").html(t.detailed_desc)}a.find(".bg-process-stats .bgprocess-start-time").html(t.stime);s.find(".bg-process-status").html(t.curr_status);s.find(".bg-process-exec-time p").empty().append(p("<span></span>").text(String(t.execution_time))).append(p("<span></span>").text(" "+u("seconds")));if(n){t.details=true;t.err=0;t.out=0;setTimeout(function(){t.status.apply(t)},1e3);var d=function(e,t,i){var n=t.outerHeight()+i.outerHeight();e.css("padding-bottom",n)}.bind(i,o,a,s);i.on(g.EVENT.RESIZED,d);i.on(g.EVENT.ATTACHED,d);i.on(g.EVENT.DETACHED,d);d();i.on(g.EVENT.CLOSED,function(e){e.panel=null;e.details=false;if(e.exit_code!=null){e.acknowledge_server.apply(e)}}.bind(i,this))}},acknowledge_server:function e(){var t=this;p.ajax({type:"PUT",timeout:3e4,url:t.bgprocess_url("acknowledge"),cache:false,async:true,contentType:"application/json"}).done(function(){return}).fail(function(){console.warn(arguments)})},stop_process:function e(){var t=this;t.state=3;p.ajax({type:"PUT",timeout:3e4,url:t.bgprocess_url("stop_process"),cache:false,async:true,contentType:"application/json"}).done(function(){return}).fail(function(){console.warn(arguments)})}});f.extend(m.BackgroundProcessObsorver,{bgprocesses:{},init:function e(){var t=this;if(t.initialized){return}t.initialized=true;setTimeout(function(){t.update_process_list.apply(t)},1e3);m.Events.on("pgadmin-bgprocess:created",function(){setTimeout(function(){m.BackgroundProcessObsorver.update_process_list(true)},1e3)})},update_process_list:function e(n){var r=this;p.ajax({typs:"GET",timeout:3e4,url:i("bgprocess.list"),cache:false,async:true,contentType:"application/json"}).done(function(e){if(!e||!f.isArray(e)){return}for(var t in e){var i=e[t];if("id"in i){if(!(i.id in r.bgprocesses)){r.bgprocesses[i.id]=new o(i)}}}if(n&&e.length==0){setTimeout(function(){r.update_process_list(false)},3e3)}}).fail(function(){console.warn(arguments)})},create_panel:function e(){this.register_panel();return m.docker.addPanel("bg_process_watcher",g.DOCK.FLOAT,null,{w:screen.width<700?screen.width*.95:screen.width*.5,h:screen.height<500?screen.height*.95:screen.height*.5,x:screen.width<700?"2%":"25%",y:screen.height<500?"2%":"25%"})},register_panel:function e(){var t=m.docker,i=t.findPanels("bg_process_watcher");if(i&&i.length>=1)return;var n=new m.Panel({name:"bg_process_watcher",showTitle:true,isCloseable:true,isPrivate:true,content:'<div class="bg-process-details">'+'<div class="bg-detailed-desc"></div>'+'<div class="bg-process-stats d-flex py-1">'+'<div class="my-auto mr-2">'+'<span class="fa fa-clock-o fa-2x"></span>'+"</div>"+'<div class="pg-bg-etime my-auto mr-2">'+"<span>"+u("Start time")+': <span class="bgprocess-start-time"></span>'+"</span>"+"</div>"+'<div class="ml-auto">'+'<button type="button" class="btn btn-danger bg-process-stop"><span class="fa fa-times-circle"></span>&nbsp;'+u("Stop Process")+"</button>"+"</div>"+"</div>"+"</div>"+'<div class="bg-process-watcher">'+"</div>"+'<div class="bg-process-footer p-2 d-flex">'+'<div class="bg-process-status flex-grow-1">'+"</div>"+'<div class="bg-process-exec-time ml-4 my-auto">'+'<div class="exec-div">'+"<span>"+u("Execution time")+":</span><p></p>"+"</div>"+"</div>"+"</div>",onCreate:function e(t,i){i.addClass("pg-no-overflow p-2")}});n.load(m.docker)}});return m.BackgroundProcessObsorver}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(27)],r=function(i,e,t,n,r){if(!r.Browser.Nodes["server_group"]){r.Browser.Nodes["server_group"]=r.Browser.Node.extend({parent_type:null,type:"server_group",dialogHelp:e("help.static",{filename:"server_group_dialog.html"}),label:i("Server Group"),width:"250px",height:"150px",is_collection:true,Init:function e(){if(this.initialized)return;this.initialized=true;r.Browser.add_menus([{name:"create_server_group",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:i("Server Group..."),data:{action:"create"},icon:"wcTabIcon icon-server_group"}])},model:r.Browser.Node.Model.extend({defaults:{id:undefined,name:null},schema:[{id:"id",label:i("ID"),type:"int",group:null,mode:["properties"]},{id:"name",label:i("Name"),type:"text",group:null,mode:["properties","edit","create"]}],validate:function e(){var t=null;this.errorModel.clear();if(!this.isNew()&&"id"in this.changed){t=i("The ID cannot be changed.");this.errorModel.set("id",t);return t}if(n.isUndefined(this.get("name"))||n.isNull(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=i("Name cannot be empty.");this.errorModel.set("name",t);return t}return null}}),canDrop:function e(t){return t.can_delete},canDelete:function e(t){var i=r.Browser.tree.siblings(t,true);if(!i||i.length==0){return false}return true}})}return r.Browser.Nodes["server_group"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(48),i(10),i(6),i(7),i(16),i(88)],r=function(h,e,l,d,s,t,p,m,i){if(!p.Nodes["coll-database"]){p.Nodes["coll-database"]=p.Collection.extend({node:"database",label:h("Databases"),type:"coll-database",columns:["name","datowner","comments"],hasStatistics:true,canDrop:true,canDropCascade:false,statsPrettifyFields:[h("Size"),h("Size of temporary files")]})}if(!p.Nodes["database"]){p.Nodes["database"]=p.Node.extend({parent_type:"server",type:"database",sqlAlterHelp:"sql-alterdatabase.html",sqlCreateHelp:"sql-createdatabase.html",dialogHelp:e("help.static",{filename:"database_dialog.html"}),hasSQL:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[h("Size"),h("Size of temporary files")],canDrop:function e(t){return t.canDrop},label:h("Database"),node_image:function e(){return"pg-icon-database"},Init:function e(){if(this.initialized)return;this.initialized=true;p.add_menus([{name:"create_database_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:h("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database_on_coll",node:"coll-database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:h("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:h("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"connect_database",node:"database",module:this,applies:["object","context"],callback:"connect_database",category:"connect",priority:4,label:h("Connect Database..."),icon:"fa fa-link",enable:"is_not_connected"},{name:"disconnect_database",node:"database",module:this,applies:["object","context"],callback:"disconnect_database",category:"drop",priority:5,label:h("Disconnect Database..."),icon:"fa fa-chain-broken",enable:"is_connected"}]);d.bindAll(this,"connection_lost");p.Events.on("pgadmin:database:connection:lost",this.connection_lost)},can_create_database:function e(t,i){var n=this.getTreeNodeHierarchy(i),r=n["server"];return r.connected&&r.user.can_create_db},is_not_connected:function e(t){return t&&t.connected!=true&&t.allowConn==true},is_connected:function e(t){return t&&t.connected==true&&t.canDisconn==true},is_conn_allow:function e(t){return t&&t.allowConn==true},connection_lost:function e(t,i,n){if(p.tree){var r=p.tree,o=t&&r.itemData(t),a=this;while(o&&o._type!="database"){t=r.parent(t);o=t&&r.itemData(t)}if(t&&o){if(!o.allowConn)return false;if(d.isUndefined(o.is_connecting)||!o.is_connecting){o.is_connecting=true;var s=function e(t,i){if(i._id==this._id){o.is_connecting=false;p.Events.off("pgadmin:database:connect:cancelled",e);t=t&&r.parent(t);i=t&&r.itemData(t);if(t&&i){p.Events.trigger("pgadmin:server:disconnect",{item:t,data:i},false)}}};p.Events.on("pgadmin:database:connect:cancelled",s);if(n){c(a,o,r,t,true);return}m.confirm(h("Connection lost"),h("Would you like to reconnect to the database?"),function(){c(a,o,r,t,true)},function(){o.is_connecting=false;r.unload(t);r.setInode(t);r.addIcon(t,{icon:"icon-database-not-connected"});p.Events.trigger("pgadmin:database:connect:cancelled",t,o,a)})}}}},callbacks:{connect_database:function e(t){var i=t||{},n=this,r=p.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a||a.label=="template0")return false;g(n,a,r,o,true);return false},disconnect_database:function e(t){var i=t||{},n=this,r=p.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;m.confirm(h("Disconnect the database"),s(h("Are you sure you want to disconnect the database - %s?")).sprintf(a.label).value(),function(){var i=a;l.ajax({url:n.generate_url(o,"connect",a,true),type:"DELETE"}).done(function(e){if(e.success==1){var t=r.parent(o);m.success(e.info);r.removeIcon(o);i.connected=false;i.icon="icon-database-not-connected";r.addIcon(o,{icon:i.icon});r.unload(o);r.setInode(o);setTimeout(function(){r.select(t)},10)}else{try{m.error(e.errormsg)}catch(e){console.warn(e.stack||e)}r.unload(o)}}).fail(function(e,t,i){m.pgRespErrorNotify(e,i);r.unload(o)})},function(){return true});return false},beforeopen:function e(t,i){if(!i||i._type!="database"||i.label=="template0"){return false}p.tree.addIcon(t,{icon:i.icon});if(!i.connected&&i.allowConn){g(this,i,p.tree,t,true);return false}return true},selected:function e(t,i){if(!i||i._type!="database"){return false}p.tree.addIcon(t,{icon:i.icon});if(!i.connected&&i.allowConn){g(this,i,p.tree,t,false);return false}return p.Node.callbacks.selected.apply(this,arguments)},refresh:function e(t,i){var n=p.tree,r=i||n.selected(),o=n.itemData(r);if(!o.allowConn)return;p.Node.callbacks.refresh.apply(this,arguments)}},model:p.Node.Model.extend({idAttribute:"did",defaults:{name:undefined,owner:undefined,comment:undefined,encoding:"UTF8",template:undefined,tablespace:undefined,collation:undefined,char_type:undefined,datconnlimit:-1,datallowconn:undefined,variables:[],privileges:[],securities:[],datacl:[],deftblacl:[],deffuncacl:[],defseqacl:[],is_template:false,deftypeacl:[]},initialize:function e(t,i){var n=d.size(t)===0;if(n){var r=p.serverInfo[i.node_info.server._id].user;this.set({datowner:r.name},{silent:true})}p.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:h("Database"),cell:"string",editable:false,type:"text"},{id:"did",label:h("OID"),cell:"string",mode:["properties"],editable:false,type:"text"},{id:"datowner",label:h("Owner"),editable:false,type:"text",node:"role",control:i.NodeListByNameControl,select2:{allowClear:false}},{id:"acl",label:h("Privileges"),type:"text",group:h("Security"),mode:["properties"],disabled:true},{id:"tblacl",label:h("Default TABLE privileges"),type:"text",group:h("Security"),mode:["properties"],disabled:true},{id:"seqacl",label:h("Default SEQUENCE privileges"),type:"text",group:h("Security"),mode:["properties"],disabled:true},{id:"funcacl",label:h("Default FUNCTION privileges"),type:"text",group:h("Security"),mode:["properties"],disabled:true},{id:"typeacl",label:h("Default TYPE privileges"),type:"text",group:h("Security"),mode:["properties"],disabled:true,min_version:90200},{id:"comments",label:h("Comment"),editable:false,type:"multiline"},{id:"encoding",label:h("Encoding"),editable:false,type:"text",group:h("Definition"),disabled:function e(t){return!t.isNew()},url:"get_encodings",control:"node-ajax-options",cache_level:"server"},{id:"template",label:h("Template"),editable:false,type:"text",group:h("Definition"),disabled:function e(t){return!t.isNew()},control:"node-list-by-name",url:"get_databases",cache_level:"server",select2:{allowClear:false},mode:["create"],transform:function e(t,i){var n=[],r=i||this,o=r.model.get("name");if(!r.model.isNew()){n.push({label:o,value:o})}else{if(t&&d.isArray(t)){d.each(t,function(e){n.push({label:e,value:e,image:"pg-icon-database"})})}}return n}},{id:"spcname",label:h("Tablespace"),editable:false,type:"text",group:h("Definition"),control:"node-list-by-name",node:"tablespace",select2:{allowClear:false},filter:function e(t){if(t.label=="pg_global")return false;else return true}},{id:"datcollate",label:h("Collation"),editable:false,type:"text",group:h("Definition"),disabled:function e(t){return!t.isNew()},url:"get_ctypes",control:"node-ajax-options",cache_level:"server"},{id:"datctype",label:h("Character type"),editable:false,type:"text",group:h("Definition"),disabled:function e(t){return!t.isNew()},url:"get_ctypes",control:"node-ajax-options",cache_level:"server"},{id:"datconnlimit",label:h("Connection limit"),editable:false,type:"int",group:h("Definition"),min:-1},{id:"is_template",label:h("Template?"),editable:false,type:"switch",group:h("Definition"),disabled:true,mode:["properties","edit"]},{id:"datallowconn",label:h("Allow connections?"),editable:false,type:"switch",group:h("Definition"),mode:["properties"],disabled:true},{id:"datacl",label:h("Privileges"),type:"collection",model:p.Node.PrivilegeRoleModel.extend({privileges:["C","T","c"]}),uniqueCol:["grantee","grantor"],editable:false,group:h("Security"),mode:["edit","create"],canAdd:true,canDelete:true,control:"unique-col-collection"},{id:"variables",label:"",type:"collection",model:p.Node.VariableModel.extend({keys:["name","role"]}),editable:false,group:h("Parameters"),mode:["edit","create"],canAdd:true,canEdit:false,canDelete:true,hasRole:true,control:i.VariableCollectionControl,node:"role"},{id:"seclabels",label:h("Security labels"),model:p.SecLabelModel,editable:false,type:"collection",canEdit:false,group:h("Security"),canDelete:true,mode:["edit","create"],canAdd:true,control:"unique-col-collection",uniqueCol:["provider"],min_version:90200},{type:"nested",control:"tab",group:h("Default Privileges"),mode:["edit"],schema:[{id:"deftblacl",model:p.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),label:"",editable:false,type:"collection",group:h("Tables"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"]},{id:"defseqacl",model:p.Node.PrivilegeRoleModel.extend({privileges:["r","w","U"]}),label:"",editable:false,type:"collection",group:h("Sequences"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"]},{id:"deffuncacl",model:p.Node.PrivilegeRoleModel.extend({privileges:["X"]}),label:"",editable:false,type:"collection",group:h("Functions"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"]},{id:"deftypeacl",model:p.Node.PrivilegeRoleModel.extend({privileges:["U"]}),label:"",editable:false,type:"collection",group:"deftypesacl_group",mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"],min_version:90200},{id:"deftypesacl_group",type:"group",label:h("Types"),mode:["edit","create"],min_version:90200}]}],validate:function e(){var t=this.get("name");if(d.isUndefined(t)||d.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){var i=h("Name cannot be empty.");this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}return null}})});p.SecurityGroupSchema={id:"security",label:h("Security"),type:"group",visible:function e(t){if(t&&"node_info"in t){var i=t.node_info||t.handler.node_info;return"catalog"in i?false:true}return true}};var g=function e(t,i,n,r){c(t,i,n,r)},c=function e(s,n,d,r,c){var o=c||n.connected,a=function t(e,i,n,r,o,a,s,l){if(!l){d.setInode(s);d.addIcon(s,{icon:"icon-database-not-connected"})}m.pgNotifier("error",e,n,function(e){setTimeout(function(){if(e=="CRYPTKEY_SET"){g(r,o,a,s,c)}else{m.dlgServerPass(h("Connect to database"),e,r,o,a,s,l,u,t,f).resizeTo()}},100)})},u=function e(t,i,n,r,o,a){n.is_connecting=false;if(!a){r.deselect(o);r.setInode(o)}if(t&&t.data){if(typeof t.data.connected=="boolean"){n.connected=t.data.connected}if(typeof t.data.icon=="string"){r.removeIcon(o);n.icon=t.data.icon;r.addIcon(o,{icon:n.icon})}m.success(t.info);s.trigger("connected",s,o,n);p.Events.trigger("pgadmin:database:connected",o,n);if(!a){setTimeout(function(){r.select(o);r.open(o)},10)}}},f=function e(t,i,n){n.is_connecting=false;var r=t.parent(i);t.unload(i);t.setInode(i);t.removeIcon(i);t.addIcon(i,{icon:"icon-database-not-connected"});s.trigger("connect:cancelled",s,i,n);p.Events.trigger("pgadmin:database:connect:cancelled",i,n,s);t.select(r)};l.post(s.generate_url(r,"connect",n,true)).done(function(e){if(e.success==1){return u(e,s,n,d,r,o)}}).fail(function(e,t,i){return a(e,t,i,s,n,d,r,o)})}}return p.Nodes["coll-database"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(18),i(6),i(68),i(7),i(35),i(88)],r=function(p,e,m,g,t,i,n,r,v){if(!n.Nodes["coll-role"]){i.Browser.Nodes["coll-role"]=i.Browser.Collection.extend({node:"role",type:"coll-role",columns:["rolname","rolvaliduntil","rolconnlimit","rolcanlogin","rolsuper","rolcreaterole","rolcreatedb","rolcatupdate","rolinherit","rolreplication"],canDrop:true,canDropCascade:false})}var o=i.Browser.SecurityModel=i.Browser.SecurityModel||i.Browser.Node.Model.extend({defaults:{provider:null,label:null},schema:[{id:"provider",label:p("Provider"),type:"text",disabled:false,cellHeaderClasses:"width_percent_50"},{id:"label",label:p("Security label"),type:"text",disabled:false}],validate:function e(){var t=this.toJSON(),i;if(g.isUndefined(t.provider)||g.isNull(t.provider)||String(t.provider).replace(/^\s+|\s+$/g,"")==""){i=p("Please specify the value for all the security providers.");this.errorModel.set("provider",i);return i}else{this.errorModel.unset("provider")}if(g.isUndefined(t.label)||g.isNull(t.label)||String(t.label).replace(/^\s+|\s+$/g,"")==""){i=p("Please specify the value for all the security providers.");this.errorModel.set("label",i);return i}else{this.errorModel.unset("label")}return null}});var a=v.Control.extend({defaults:g.defaults({extraClasses:["col-12 col-sm-12 col-md-12"]},v.NodeListByNameControl.prototype.defaults),initialize:function e(){v.NodeListByNameControl.prototype.initialize.apply(this,arguments)},formatter:{fromRaw:function e(t){var i=g.isObject(t)?t:JSON.parse(t);return g.pluck(i,"role")},toRaw:function e(t){return t}},template:g.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlsClassName%>">','  <select multiple="multiple" style="width:100%;" class="pgadmin-controls <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-JSON.stringify(value)%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%>>',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value=<%-option.value%> data-icon=<%-option.image%> <%=value != null && _.indexOf(value, option.value) != -1 ? "selected" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),selectionTemplate:g.template(["<span>",'  <span class="wcTabIcon <%= optimage %>"></span>',"  <span><%= opttext %><span>","  <% if (checkbox) { %>",'  <input type="checkbox" <%=disabled ? "disabled=\'disabled\'" : ""%>/>',"  <% } %>","</span>"].join("\n")),events:{"change select":"onChange"},getValueFromDOM:function e(){var t=[];this.$el.find("select").find(":selected").each(function(){t.push(m(this).attr("value"))});return t},render:function e(){var t=g.defaults(this.field.toJSON(),this.defaults),i=this.model.toJSON(),n=t.name.split("."),r=n.shift(),o=n.join("."),a=this.keyPathAccessor(i[r],o),s=g.extend(t,{rawValue:a,value:this.formatter.fromRaw(a,this.model),attributes:i,formatter:this.formatter}),l=function e(t,i,n){return g.isFunction(t)?!!t.apply(i,[n]):!!t},d=function e(t,i,n){return g.isFunction(t)?t.apply(i,[n]):t};g.extend(s,{disabled:l(s.disabled,s,this.model),visible:l(s.visible,s,this.model),required:l(s.required,s,this.model),helpMessage:d(s.helpMessage,s,this.model)});if(g.isFunction(s.options)){try{s.options=s.options.apply(this)}catch(e){s.options=[];this.model.trigger("pgadmin-view:transform:error",this.model,this.field,e)}}this.$el.removeClass(v.hiddenClassName);if(!s.visible)this.$el.addClass(v.hiddenClassName);this.$el.html(this.template(s)).addClass(t.name);this.updateInvalid();var c=this,u=this.model.get(this.field.get("name")),f=function e(t){if(!t.id){return t.text}var i=m(t.element).data("icon");if(!i){return t.text}else{var n=g.extend({},s,{opttext:g.escape(t.text),optimage:i,checkbox:false});return m(c.selectionTemplate(n))}},h=function e(i){if(!i.id){return i.text}var t=m(i.element).data("icon"),n=function e(t){g.each(u.where({role:i.id}),function(e){e.set("admin",m(t.target).is(":checked"))});return false};if(!t){return i.text}else{var r=g.extend({},s,{opttext:g.escape(i.text),optimage:t,checkbox:true}),o=m(c.selectionTemplate(r));setTimeout(function(){g.each(u.where({role:i.id}),function(e){o.find("input").prop("checked",e.get("admin"))})},200);o.find("input").on("change",n);return o}};this.$el.find("select").select2({templateResult:f,templateSelection:h,multiple:true,tags:true,allowClear:s.disabled?false:true,placeholder:s.disabled?"":p("Select members"),width:"style"}).on("change",function(e){m(e.target).find(":selected").each(function(){})});return this},onChange:function e(){var t=this.model,i=this.field.get("name").split("."),n=i.shift(),r=this.getValueFromDOM(),o=t.get(n),a=[];this.stopListening(this.model,"change:"+n,this.render);o.each(function(e){var t=e.get("role"),i=g.indexOf(r,t);if(i>-1){r.splice(i,1)}else{a.push(t)}});g.each(r,function(e){o.add({role:e})});g.each(a,function(e){o.remove(o.where({role:e}))});this.listenTo(this.model,"change:"+n,this.render)}});if(!n.Nodes["role"]){i.Browser.Nodes["role"]=i.Browser.Node.extend({parent_type:"server",type:"role",sqlAlterHelp:"sql-alterrole.html",sqlCreateHelp:"sql-createrole.html",dialogHelp:e("help.static",{filename:"role_dialog.html"}),label:p("Login/Group Role"),hasSQL:true,width:"550px",canDrop:function e(t,i){var n=this.getTreeNodeHierarchy(i),r=n["server"];if(t.is_superuser){return r.connected&&r.user.is_superuser}return r.connected&&r.user.can_create_role},hasDepends:true,node_label:function e(t){return t.label},node_image:function e(t){if(t==null||t==undefined)return"icon-role";return t.can_login?"icon-role":"icon-group"},title:function e(t){if(!t){return this.label}if(t.can_login){return p("Login Role")+" - "+t.label}return p("Group Role")+" - "+t.label},Init:function e(){if(this.initialized)return;this.initialized=true;n.add_menus([{name:"create_role_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:p("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role_on_roles",node:"coll-role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:p("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role",node:"role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:p("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"}])},can_create_role:function e(t,i){var n=this.getTreeNodeHierarchy(i),r=n["server"];return r.connected&&r.user.can_create_role},model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{oid:null,rolname:undefined,rolcanlogin:false,rolpassword:null,rolconnlimit:-1,rolsuper:false,rolcreaterole:false,rolcreatedb:false,rolinherit:true,rolcatupdate:false,rolreplication:false,rolmembership:[],rolvaliduntil:null,seclabels:[],variables:[]},schema:[{id:"rolname",label:p("Name"),type:"text",disabled:"readonly"},{id:"oid",label:p("OID"),cell:"string",mode:["properties"],editable:false,type:"text",visible:true,disabled:true},{id:"rolpassword",label:p("Password"),type:"password",group:p("Definition"),mode:["edit","create"],control:"input",deps:["rolcanlogin"],retype:true,cell:"string",disabled:function e(t){if(!t.isNew()){var i=this.node_info.server.user;return!(i.is_superuser||i.can_create_role)&&i.id!=t.get("oid")}return false}},{id:"rolvaliduntil",disabled:"readonly",type:"text",group:p("Definition"),label:p("Account expires"),mode:["properties","edit","create"],control:"datetimepicker",deps:["rolcanlogin"],options:{format:"YYYY-MM-DD HH:mm:ss Z"}},{id:"rolconnlimit",type:"int",group:p("Definition"),label:p("Connection limit"),cell:"integer",min:-1,mode:["properties","edit","create"],disabled:"readonly"},{id:"rolcanlogin",label:p("Can login?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",group:p("Privileges"),disabled:"readonly"},{id:"rolsuper",label:p("Superuser?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",group:p("Privileges"),control:v.SwitchControl.extend({onChange:function e(){v.SwitchControl.prototype.onChange.apply(this,arguments);this.model.set("rolcatupdate",this.model.get("rolsuper"));this.model.set("rolcreaterole",this.model.get("rolsuper"));this.model.set("rolcreatedb",this.model.get("rolsuper"))}}),disabled:"readonly"},{id:"rolcreaterole",label:p("Create roles?"),group:p("Privileges"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:"readonly"},{id:"description",label:p("Comments"),type:"multiline",group:null,mode:["properties","edit","create"],disabled:"readonly"},{id:"rolcreatedb",label:p("Create databases?"),group:p("Privileges"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:"readonly"},{id:"rolcatupdate",label:p("Update catalog?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",max_version:90400,group:p("Privileges"),disabled:function e(t){return t.get("read_only")||!t.get("rolsuper")}},{id:"rolinherit",group:p("Privileges"),label:p("Inherit rights from the parent roles?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:"readonly"},{id:"rolreplication",group:p("Privileges"),label:p("Can initiate streaming replication and backups?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",min_version:90100,disabled:"readonly"},{id:"rolmembership",label:p("Roles"),group:p("Membership"),type:"collection",cell:"string",disabled:"readonly",mode:["properties","edit","create"],control:a,model:n.Node.Model.extend({keys:["role"],idAttribute:"role",defaults:{role:undefined,admin:false},validate:function e(){return null}}),filter:function e(t){return this.model.isNew()||this.model.get("rolname")!=t.label},helpMessage:function e(t){if(t.has("read_only")&&t.get("read_only")==false){return p("Select the checkbox for roles to include WITH ADMIN OPTION.")}else{return p("Roles shown with a check mark have the WITH ADMIN OPTION set.")}}},{id:"variables",label:"",type:"collection",group:p("Parameters"),hasDatabase:true,url:"variables",model:n.Node.VariableModel.extend({keys:["name","database"]}),control:"variable-collection",mode:["edit","create"],canAdd:true,canDelete:true,disabled:"readonly"},{id:"seclabels",label:p("Security labels"),model:o,editable:false,type:"collection",group:p("Security"),mode:["edit","create"],min_version:90200,disabled:"readonly",canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection"}],readonly:function e(t){if(!t.has("read_only")){var i=this.node_info.server.user;t.set("read_only",!(i.is_superuser||i.can_create_role))}return t.get("read_only")},validate:function e(){var t={},i,n=this.get("seclabels");if(g.isUndefined(this.get("rolname"))||String(this.get("rolname")).replace(/^\s+|\s+$/g,"")==""){t["name"]=p("Name cannot be empty.");i=i||t["name"]}if(n){var r;for(var o=0;o<n.models.length&&!r;o++){r=n.models[o].validate.apply(n.models[o]);if(r){t["seclabels"]=r;i=i||r}}}this.errorModel.clear().set(t);if(g.size(t)){this.trigger("on-status",{msg:i});return i}return null}})})}return n.Nodes["role"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(10),i(6),i(7)],r=function(r,e,s,o,t,i,n,l,a){if(!n.Nodes["coll-cast"]){i.Browser.Nodes["coll-cast"]=i.Browser.Collection.extend({node:"cast",label:r("Casts"),type:"coll-cast",columns:["name","description"]})}if(!n.Nodes["cast"]){i.Browser.Nodes["cast"]=i.Browser.Node.extend({parent_type:"database",type:"cast",sqlAlterHelp:"sql-altercast.html",sqlCreateHelp:"sql-createcast.html",dialogHelp:e("help.static",{filename:"cast_dialog.html"}),canDrop:true,canDropCascade:true,label:r("Cast"),hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;n.add_menus([{name:"create_cast_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"},enable:n.Nodes["database"].is_conn_allow},{name:"create_cast_on_coll",node:"coll-cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}},{name:"create_cast",node:"cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}}])},model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,encoding:"UTF8",srctyp:undefined,trgtyp:undefined,proname:undefined,castcontext:undefined,syscast:undefined,description:undefined},schema:[{id:"name",label:r("Name"),cell:"string",editable:false,type:"text",disabled:true,cellHeaderClasses:"width_percent_50"},{id:"oid",label:r("OID"),cell:"string",editable:false,type:"text",disabled:true,mode:["properties"]},{id:"srctyp",label:r("Source type"),url:"get_type",type:"text",group:r("Definition"),disabled:function e(t){return!t.isNew()},mode:["create"],transform:function e(t){o.each(t,function(e){e["image"]="icon-cast"});return t},control:a.NodeAjaxOptionsControl.extend({onChange:function e(){a.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var t=this.model.get("srctyp");var i=this.model.get("trgtyp");if(t!=undefined&&t!=""&&i!=undefined&&i!="")this.model.set("name",t+"->"+i);else this.model.unset("name")}})},{id:"srctyp",label:r("Source type"),type:"text",group:r("Definition"),disabled:true,mode:["properties","edit"]},{id:"trgtyp",label:r("Target type"),url:"get_type",type:"text",group:r("Definition"),disabled:function e(t){return!t.isNew()},mode:["create"],transform:function e(t){o.each(t,function(e){e["image"]="icon-cast"});return t},control:a.NodeAjaxOptionsControl.extend({onChange:function e(){a.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var t=this.model.get("srctyp");var i=this.model.get("trgtyp");if(t!=undefined&&t!=""&&i!=undefined&&i!="")this.model.set("name",t+"->"+i);else this.model.unset("name")}})},{id:"trgtyp",label:r("Target type"),type:"text",group:r("Definition"),disabled:true,mode:["properties","edit"]},{id:"proname",label:r("Function"),deps:["srctyp","trgtyp"],type:"text",disabled:function e(t){return!t.isNew()},group:r("Definition"),mode:["create"],control:"node-ajax-options",options:function e(t){var i=t.model.get("srctyp");var n=t.model.get("trgtyp");var r=[];if(i!=undefined&&i!=""&&n!=undefined&&n!=""){var o=t.field.get("schema_node"),a=o.generate_url.apply(o,[null,"get_functions",t.field.get("node_data"),false,t.field.get("node_info")]);s.ajax({type:"POST",timeout:3e4,url:a,cache:false,async:false,data:{srctyp:i,trgtyp:n}}).done(function(e){r=e.data;return r}).fail(function(e,t,i){l.pgRespErrorNotify(e,i)})}return r}},{id:"proname",label:r("Function"),type:"text",group:r("Definition"),disabled:true,mode:["properties","edit"]},{id:"castcontext",label:r("Context"),options:{onText:"IMPLICIT",offText:"EXPLICIT",width:"90"},editable:false,type:"string",group:r("Definition"),mode:["create"],control:a.SwitchControl.extend({getValueFromDOM:function e(){return this.$input.prop("checked")?"IMPLICIT":"EXPLICIT"}})},{id:"castcontext",label:r("Context"),disabled:true,options:[{label:"IMPLICIT",value:"IMPLICIT"},{label:"EXPLICIT",value:"EXPLICIT"},{label:"ASSIGNMENT",value:"ASSIGNMENT"}],editable:false,type:"select2",group:r("Definition"),mode:["properties","edit"]},{id:"syscast",label:r("System cast?"),cell:"switch",type:"switch",mode:["properties"],disabled:true},{id:"description",label:r("Comment"),type:"multiline",cellHeaderClasses:"width_percent_50"}],validate:function e(){var t=this.get("srctyp"),i=this.get("trgtyp"),n;if(o.isUndefined(t)||o.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){n=r("Source type must be selected.");this.errorModel.set("srctyp",n);return n}else{this.errorModel.unset("srctyp")}if(o.isUndefined(i)||o.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){n=r("Target type must be selected.");this.errorModel.set("trgtyp",n);return n}else{this.errorModel.unset("trgtyp")}this.trigger("on-status-clear");return null}})})}return n.Nodes["coll-cast"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(10),i(6),i(7),i(35),i(16)],r=function(f,d,h,p,c,e,m,g,v){if(!m.Nodes["coll-tablespace"]){m.Nodes["coll-tablespace"]=m.Collection.extend({node:"tablespace",label:f("Tablespaces"),type:"coll-tablespace",columns:["name","spcuser","description"],hasStatistics:true,statsPrettifyFields:[f("Size")],canDrop:true,canDropCascade:false})}if(!m.Nodes["tablespace"]){m.Nodes["tablespace"]=m.Node.extend({parent_type:"server",type:"tablespace",sqlAlterHelp:"sql-altertablespace.html",sqlCreateHelp:"sql-createtablespace.html",dialogHelp:d("help.static",{filename:"tablespace_dialog.html"}),label:f("Tablespace"),hasSQL:true,canDrop:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[f("Size")],Init:function e(){if(this.initialized)return;this.initialized=true;m.add_menus([{name:"create_tablespace_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:f("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace_on_coll",node:"coll-tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:f("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace",node:"tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:f("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"move_tablespace",node:"tablespace",module:this,applies:["object","context"],callback:"move_objects",category:"move_tablespace",priority:5,label:f("Move objects to..."),icon:"fa fa-exchange",data:{action:"create"},enable:"can_move_objects"}])},can_create_tablespace:function e(t,i){var n=this.getTreeNodeHierarchy(i),r=n["server"];return r.connected&&r.user.is_superuser},can_move_objects:function e(t,i){var n=this.getTreeNodeHierarchy(i),r=n["server"];return r.connected&&r.user.is_superuser&&r.version>=90400},callbacks:{move_objects:function e(t){var i=t||{},n=this,r=m.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined,s=n.generate_url(o,"move_objects",a,true),l=n.generate_url(o,"move_objects_sql",a,true);if(!a)return false;var u=c.Model.extend({idAttribute:"id",defaults:{new_tblspc:undefined,obj_type:"all",user:undefined},schema:[{id:"tblspc",label:f("New tablespace"),type:"text",disabled:false,control:"node-list-by-name",node:"tablespace",select2:{allowClear:false},filter:function e(t){return t&&t.label!=a.label}},{id:"obj_type",label:f("Object type"),type:"text",disabled:false,control:"select2",select2:{allowClear:false,width:"100%"},options:[{label:f("All"),value:"all"},{label:f("Tables"),value:"tables"},{label:f("Indexes"),value:"indexes"},{label:f("Materialized views"),value:"materialized_views"}]},{id:"user",label:f("Object owner"),type:"text",disabled:false,control:"node-list-by-name",node:"role",select2:{allowClear:false}},{id:"sqltab",label:f("SQL"),group:f("SQL"),type:"text",disabled:false,control:v.SqlTabControl.extend({initialize:function e(){v.SqlTabControl.prototype.initialize.apply(this,arguments)},onTabChange:function e(t){if(this.dialog&&t.shown==this.tabIndex){var i=this,n=i.model.toJSON();n.old_tblspc=a.label;h.ajax({url:l,type:"GET",cache:false,data:n,dataType:"json",contentType:"application/json"}).done(function(e){i.sqlCtrl.clearHistory();i.sqlCtrl.setValue(e.data);i.sqlCtrl.refresh()}).fail(function(){i.model.trigger("pgadmin-view:msql:error")}).always(function(){i.model.trigger("pgadmin-view:msql:fetched")})}}})}],validate:function e(){return null}});if(!g.move_objects_dlg){g.dialog("move_objects_dlg",function e(){return{main:function e(){var t=f("Move objects to another tablespace");this.set("title",t)},build:function e(){g.pgDialogBuild.apply(this)},setup:function e(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:f("Users"),url:d("help.static",{filename:"move_objects.html"})}},{text:f("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:f("OK"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],options:{padding:!1,overflow:!1,modal:false,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false}}},hooks:{onclose:function e(){if(this.view){this.view.remove({data:true,internal:true,silent:true})}}},prepare:function e(){var t=this,i=h("<div class='move_objects'></div>");this.__internal.buttons[2].element.disabled=true;var n=m.tree,r=n.selected(),o=r&&r.length==1?n.itemData(r):undefined,a=o&&m.Nodes[o._type];if(!o)return;var s=a.getTreeNodeHierarchy.apply(a,[r]);var l=new u({},{node_info:s}),d=v.generateViewSchema(s,l,"create",a,s.server,true);var c=this.view=new v.Dialog({el:i,model:l,schema:d});h(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties");c.render();this.elements.content.appendChild(i.get(0));this.view.model.on("change",function(){if(!p.isUndefined(this.get("tblspc"))&&this.get("tblspc")!==""){this.errorModel.clear();t.__internal.buttons[2].element.disabled=false}else{t.__internal.buttons[2].element.disabled=true;this.errorModel.set("tblspc",f("Please select tablespace"))}})},callback:function e(t){if(t.button.element.name=="dialog_help"){t.cancel=true;m.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);return}if(t.button.text===f("OK")){var i=this,n=this.view.model.toJSON();n.old_tblspc=a.label;t.cancel=true;g.confirm(f("Move objects..."),f("Are you sure you wish to move the objects from %(old_tablespace)s to %(new_tablespace)s?",{old_tablespace:n.old_tblspc,new_tablespace:n.tblspc}),function(){h.ajax({url:s,method:"PUT",data:{data:JSON.stringify(n)}}).done(function(e){if(e.success){g.success(e.info);i.close()}else{g.error(e.errormsg)}}).fail(function(e,t,i){g.pgRespErrorNotify(e,i)})},function(){})}}}})}g.move_objects_dlg(true).resizeTo(m.stdW.md,m.stdH.md)}},model:m.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,owner:undefined,comment:undefined,spclocation:undefined,spcoptions:[],spcacl:[],seclabels:[]},initialize:function e(t,i){var n=p.size(t)===0;if(n){var r=m.serverInfo[i.node_info.server._id].user;this.set({spcuser:r.name},{silent:true})}m.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:f("Name"),cell:"string",type:"text"},{id:"oid",label:f("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"spclocation",label:f("Location"),cell:"string",group:f("Definition"),type:"text",mode:["properties","edit","create"],disabled:function e(t){return!t.isNew()}},{id:"spcuser",label:f("Owner"),cell:"string",type:"text",control:"node-list-by-name",node:"role",select2:{allowClear:false}},{id:"acl",label:f("Privileges"),type:"text",group:f("Security"),mode:["properties"],disabled:true},{id:"description",label:f("Comment"),cell:"string",type:"multiline"},{id:"spcoptions",label:"",type:"collection",group:f("Parameters"),control:"variable-collection",model:m.Node.VariableModel,mode:["edit","create"],canAdd:true,canEdit:false,canDelete:true},{id:"spcacl",label:f("Privileges"),type:"collection",group:f("Security"),control:"unique-col-collection",model:m.Node.PrivilegeRoleModel.extend({privileges:["C"]}),mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["grantee"],columns:["grantee","grantor","privileges"]},{id:"seclabels",label:f("Security labels"),model:m.SecLabelModel,editable:false,type:"collection",group:f("Security"),mode:["edit","create"],min_version:90200,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection"}],validate:function e(){var t;if(p.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=f("Name cannot be empty.");this.errorModel.set("name",t)}else if(this.isNew()&&(p.isUndefined(this.get("spclocation"))||String(this.get("spclocation")).replace(/^\s+|\s+$/g,"")=="")){t=f("Location cannot be empty.");this.errorModel.set("spclocation",t);this.errorModel.unset("name")}else{this.errorModel.unset("name");this.errorModel.unset("spclocation")}return null}})})}return m.Nodes["coll-tablespace"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(1),i(5),i(7)],r=function(o,e,a,t){if(!t.Nodes["coll-resource_group"]){t.Nodes["coll-resource_group"]=t.Collection.extend({node:"resource_group",label:o("Resource Groups"),type:"coll-resource_group",columns:["name","cpu_rate_limit","dirty_rate_limit"],canDrop:true,canDropCascade:false})}if(!t.Nodes["resource_group"]){t.Nodes["resource_group"]=t.Node.extend({parent_type:"server",type:"resource_group",dialogHelp:e("help.static",{filename:"resource_group_dialog.html"}),label:o("Resource Group"),hasSQL:true,canDrop:true,Init:function e(){if(this.initialized){return}this.initialized=true;t.add_menus([{name:"create_resourcegroup_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create"},enable:function e(t,i){var n=this.getTreeNodeHierarchy(i),r=n["server"];return r.connected&&t.server_type==="ppas"&&t.version>=90400}},{name:"create_resource_group_on_coll",node:"coll-resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create"}},{name:"create_resource_group",node:"resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create"}}])},model:t.Node.Model.extend({idAttribute:"oid",defaults:{oid:undefined,name:undefined,cpu_rate_limit:0,dirty_rate_limit:0},schema:[{id:"oid",label:o("OID"),type:"text",editable:false,disabled:true,mode:["properties"]},{id:"name",label:o("Name"),cell:"string",type:"text"},{id:"cpu_rate_limit",label:o("CPU rate limit (percentage)"),cell:"string",type:"numeric",min:0,max:16777216},{id:"dirty_rate_limit",label:o("Dirty rate limit (KB)"),cell:"string",type:"numeric",min:0,max:16777216}],validate:function e(){var t,i=this.get("name");if(a.isUndefined(i)||a.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){t=o("Name cannot be empty.");this.errorModel.set("name",t);return t}else{this.errorModel.unset("name")}var n=this.get("cpu_rate_limit");if(a.isUndefined(n)||a.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){t=o("CPU rate limit cannot be empty.");this.errorModel.set("cpu_rate_limit",t);return t}else{this.errorModel.unset("cpu_rate_limit")}var r=this.get("dirty_rate_limit");if(a.isUndefined(r)||a.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){t=o("Dirty rate limit cannot be empty.");this.errorModel.set("dirty_rate_limit",t);return t}else{this.errorModel.unset("dirty_rate_limit")}return null}})})}return t.Nodes["coll-resource_group"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(7)],r=function(i,e,t,o,n,a,s,r){if(!s.Nodes["coll-event_trigger"]){a.Browser.Nodes["coll-event_trigger"]=a.Browser.Collection.extend({node:"event_trigger",label:i("Event Trigger"),type:"coll-event_trigger",columns:["name","eventowner","comment"],canDrop:true,canDropCascade:false})}if(!s.Nodes["event_trigger"]){a.Browser.Nodes["event_trigger"]=a.Browser.Node.extend({parent_type:"database",type:"event_trigger",sqlAlterHelp:"sql-altereventtrigger.html",sqlCreateHelp:"sql-createeventtrigger.html",dialogHelp:e("help.static",{filename:"event_trigger_dialog.html"}),label:i("Event Trigger"),hasSQL:true,hasDepends:true,canDrop:true,Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_event_trigger_on_coll",node:"coll-event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"},enable:s.Nodes["database"].is_conn_allow}])},model:a.Browser.Node.Model.extend({idAttribute:"oid",defaults:{oid:undefined,name:undefined,eventowner:undefined,comment:undefined,enabled:"O",eventfuncoid:undefined,eventfunname:undefined,eventname:"DDL_COMMAND_START",when:undefined,xmin:undefined,source:undefined,language:undefined},initialize:function e(t,i){var n=o.size(t)===0;if(n){var r=s.serverInfo[i.node_info.server._id].user;this.set({eventowner:r.name},{silent:true})}a.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:i("Name"),cell:"string",type:"text"},{id:"oid",label:i("OID"),cell:"string",type:"text",mode:["properties"]},{id:"eventowner",label:i("Owner"),cell:"string",type:"text",mode:["properties","edit","create"],node:"role",control:r.NodeListByNameControl},{id:"comment",label:i("Comment"),type:"multiline"},{id:"enabled",label:i("Enabled?"),type:"radio",group:i("Definition"),mode:["properties","edit","create"],options:[{label:"Enable",value:"O"},{label:"Disable",value:"D"},{label:"Replica",value:"R"},{label:"Always",value:"A"}]},{id:"eventfunname",label:i("Trigger function"),type:"text",control:"node-ajax-options",group:i("Definition"),url:"fopts",cache_node:"trigger_function"},{id:"eventname",label:i("Events"),type:"radio",group:i("Definition"),cell:"string",options:[{label:"DDL COMMAND START",value:"DDL_COMMAND_START"},{label:"DDL COMMAND END",value:"DDL_COMMAND_END"},{label:"SQL DROP",value:"SQL_DROP"}]},{id:"when",label:i("When"),cell:"string",type:"text",group:i("Definition"),control:r.SqlFieldControl,extraClasses:["custom_height_css_class"]},{id:"seclabels",label:i("Security labels"),model:s.SecLabelModel,editable:false,type:"collection",group:i("Security"),mode:["edit","create"],min_version:90200,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection"}],validate:function e(){var t=undefined;this.errorModel.clear();if(o.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=i("Event trigger name cannot be empty.");this.errorModel.set("name",t);return t}if(o.isUndefined(this.get("eventowner"))||String(this.get("eventowner")).replace(/^\s+|\s+$/g,"")==""){t=i("Event trigger owner cannot be empty.");this.errorModel.set("eventowner",t);return t}if(o.isUndefined(this.get("enabled"))){t=i("Event trigger enabled status cannot be empty.");this.errorModel.set("enabled",t);return t}if(o.isUndefined(this.get("eventfunname"))||String(this.get("eventfunname")).replace(/^\s+|\s+$/g,"")==""){t=i("Event trigger function cannot be empty.");this.errorModel.set("eventfunname",t);return t}if(o.isUndefined(this.get("eventname"))){t=i("Event trigger event cannot be empty.");this.errorModel.set("eventname",t);return t}return null}})})}return s.Nodes["coll-event_trigger"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(7)],r=function(r,e,t,a,i,n,o,s){if(!o.Nodes["coll-extension"]){n.Browser.Nodes["coll-extension"]=n.Browser.Collection.extend({node:"extension",label:r("Extension"),type:"coll-extension",columns:["name","owner","comment"]})}if(!o.Nodes["extension"]){n.Browser.Nodes["extension"]=n.Browser.Node.extend({parent_type:"database",type:"extension",sqlAlterHelp:"sql-alterextension.html",sqlCreateHelp:"sql-createextension.html",dialogHelp:e("help.static",{filename:"extension_dialog.html"}),hasSQL:true,hasDepends:true,canDrop:true,canDropCascade:true,label:r("Extension"),Init:function e(){if(this.initialized)return;this.initialized=true;o.add_menus([{name:"create_extension_on_coll",node:"coll-extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"},enable:o.Nodes["database"].is_conn_allow}])},model:n.Browser.Node.Model.extend({idAttribute:"eid",schema:[{id:"name",label:r("Name"),first_empty:true,type:"text",mode:["properties","create","edit"],visible:true,url:"avails",disabled:function e(t){return!t.isNew()},transform:function e(t,i){var n=[],r=i||this,o=r.model.get("name");if(!r.model.isNew()){n.push({label:o,value:o})}else{if(t&&a.isArray(t)){a.each(t,function(e){if(e.installed_version===null)n.push({label:e.name,value:JSON.stringify(e)})})}}return n},control:s.NodeAjaxOptionsControl.extend({getValueFromDOM:function e(){var t=this.formatter.toRaw(a.unescape(this.$el.find("select").val()),this.model);if(t===""){return null}else if(typeof t==="string"){t=JSON.parse(t)}return t.name},onChange:function e(){s.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var t=this.$el.find("select").val();if(t.trim()!=""){var i=this.formatter.toRaw(t,this.model);if(typeof i==="string")i=JSON.parse(i);this.model.set({version:"",relocatable:!a.isNull(i.relocatable[0])&&!a.isUndefined(i.relocatable[0])?i.relocatable[0]:""})}else{this.model.set({version:"",relocatable:true,schema:""})}}})},{id:"eid",label:r("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"owner",label:r("Owner"),control:"node-list-by-name",mode:["properties"],node:"role",cell:"string",cache_level:"server"},{id:"schema",label:r("Schema"),type:"text",control:"node-list-by-name",group:r("Definition"),mode:["properties","create","edit"],deps:["relocatable"],node:"schema",first_empty:true,disabled:function e(t){return t.has("relocatable")?!t.get("relocatable"):false}},{id:"relocatable",label:r("Relocatable?"),cell:"switch",group:r("Definition"),type:"switch",mode:["properties"]},{id:"version",label:r("Version"),cell:"string",mode:["properties","create","edit"],group:r("Definition"),control:"node-ajax-options",url:"avails",first_empty:true,transform:function e(t,i){var n=[],r=i||this,o=r.model.get("name");a.each(t,function(e){if(e.name==o){if(e.version&&a.isArray(e.version)){a.each(e.version,function(e){n.push({label:e,value:e})})}}});return n}},{id:"comment",label:r("Comment"),cell:"string",type:"multiline",disabled:true}],validate:function e(){var t={},i,n=this.get("name");if(a.isUndefined(n)||a.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){t["name"]=r("Name cannot be empty.");i=i||t["name"];this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}return null}})})}return o.Nodes["coll-extension"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(7),i(16)],r=function(r,e,t,s,i,n,o,a){if(!o.Nodes["coll-language"]){o.Nodes["coll-language"]=o.Collection.extend({node:"language",label:r("Languages"),type:"coll-language",columns:["name","lanowner","description"]})}if(!o.Nodes["language"]){o.Nodes["language"]=o.Node.extend({parent_type:"database",type:"language",sqlAlterHelp:"sql-alterlanguage.html",sqlCreateHelp:"sql-createlanguage.html",dialogHelp:e("help.static",{filename:"language_dialog.html"}),label:r("Language"),hasSQL:true,canDrop:true,canDropCascade:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;o.add_menus([{name:"create_language_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"},enable:o.Nodes["database"].is_conn_allow},{name:"create_language_on_coll",node:"coll-language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}},{name:"create_language",node:"language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}}])},model:o.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,lanowner:undefined,comment:undefined,lanacl:[],seclabels:[],trusted:true,lanproc:undefined,laninl:undefined,lanval:undefined,is_template:false,template_list:[]},initialize:function e(t,i){var n=s.size(t)===0;if(n){var r=o.serverInfo[i.node_info.server._id].user;this.set({lanowner:r.name},{silent:true})}o.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:r("Name"),type:"text",control:"node-ajax-options",mode:["properties","create","edit"],url:"get_templates",select2:{allowClear:false,tags:true,multiple:false},transform:function e(t,i){var n=[],r=i||this,o=r.model.get("name");if(!r.model.isNew()){n.push({label:o,value:o})}else{var a=[];if(t&&s.isArray(t)){s.each(t,function(e){n.push({label:e.tmplname,value:e.tmplname});a.push(e.tmplname)})}this.model.set({template_list:a})}return n}},{id:"oid",label:r("OID"),cell:"string",mode:["properties"],type:"text",disabled:true},{id:"lanowner",label:r("Owner"),type:"text",control:a.NodeListByNameControl,node:"role",mode:["edit","properties","create"],select2:{allowClear:false}},{id:"acl",label:r("Privileges"),type:"text",group:r("Security"),mode:["properties"],disabled:true},{id:"description",label:r("Comment"),cell:"string",type:"multiline"},{id:"trusted",label:r("Trusted?"),type:"switch",group:r("Definition"),mode:["edit","properties","create"],deps:["name"],disabled:function e(t){if(t.isNew()){if(t.get("template_list").indexOf(t.get("name"))==-1){t.set({is_template:false});return false}else t.set({is_template:true})}return true}},{id:"lanproc",label:r("Handler function"),type:"text",control:"node-ajax-options",group:r("Definition"),mode:["edit","properties","create"],url:"get_functions",deps:["name"],first_empty:false,transform:function e(t){var i=[];if(t&&s.isArray(t)){s.each(t,function(e){if(e.prop_type=="handler"){i.push({label:e.label,value:e.label})}})}return i},disabled:function e(t){if(t.isNew()){if(t.get("template_list").indexOf(t.get("name"))==-1)return false}return true}},{id:"laninl",label:r("Inline function"),type:"text",control:"node-ajax-options",group:r("Definition"),mode:["edit","properties","create"],url:"get_functions",deps:["name"],first_empty:false,transform:function e(t){var i=[];if(t&&s.isArray(t)){s.each(t,function(e){if(e.prop_type=="inline"){i.push({label:e.label,value:e.label})}})}return i},disabled:function e(t){if(t.isNew()){if(t.get("template_list").indexOf(t.get("name"))==-1)return false}return true}},{id:"lanval",label:r("Validator function"),type:"text",control:"node-ajax-options",group:r("Definition"),mode:["edit","properties","create"],url:"get_functions",deps:["name"],transform:function e(t){var i=[];if(t&&s.isArray(t)){s.each(t,function(e){if(e.prop_type=="validator"){i.push({label:e.label,value:e.label})}})}return i},disabled:function e(t){if(t.isNew()){if(t.get("template_list").indexOf(t.get("name"))==-1)return false}return true}},{id:"lanacl",label:r("Privileges"),type:"collection",group:r("Security"),control:"unique-col-collection",mode:["edit","create"],model:o.Node.PrivilegeRoleModel.extend({privileges:["U"]}),canAdd:true,canDelete:true,uniqueCol:["grantee"]},{id:"seclabels",label:r("Security labels"),mode:["edit","create"],model:o.SecLabelModel,editable:false,type:"collection",group:r("Security"),min_version:90200,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection"}],validate:function e(){var t=this.get("name"),i;if(s.isUndefined(t)||s.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){i=r("Name cannot be empty.");this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}if(!this.get("is_template")){var n=this.get("lanproc");if(s.isUndefined(n)||s.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){i=r("Handler function cannot be empty.");this.errorModel.set("lanproc",i);return i}else{this.errorModel.unset("lanproc")}}return null}})})}return o.Nodes["coll-language"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(7),i(16)],r=function(n,e,t,o,i,r,a,s){var l=a.Node.Model.extend({idAttribute:"fdwoption",defaults:{fdwoption:undefined,fdwvalue:undefined},schema:[{id:"fdwoption",label:n("Option"),type:"text",cellHeaderClasses:"width_percent_50",editable:true},{id:"fdwvalue",label:n("Value"),type:"text",cellHeaderClasses:"width_percent_50",group:null,editable:true}],validate:function e(){if(o.isUndefined(this.get("fdwoption"))||o.isNull(this.get("fdwoption"))||String(this.get("fdwoption")).replace(/^\s+|\s+$/g,"")==""){var t="Please enter an option name";this.errorModel.set("fdwoption",t);return t}else{this.errorModel.unset("fdwoption")}return null}});if(!a.Nodes["coll-foreign_data_wrapper"]){a.Nodes["coll-foreign_data_wrapper"]=a.Collection.extend({node:"foreign_data_wrapper",label:n("Foreign Data Wrappers"),type:"coll-foreign_data_wrapper",columns:["name","fdwowner","description"]})}if(!a.Nodes["foreign_data_wrapper"]){a.Nodes["foreign_data_wrapper"]=a.Node.extend({parent_type:"database",type:"foreign_data_wrapper",sqlAlterHelp:"sql-alterforeigndatawrapper.html",sqlCreateHelp:"sql-createforeigndatawrapper.html",dialogHelp:e("help.static",{filename:"foreign_data_wrapper_dialog.html"}),label:n("Foreign Data Wrapper"),hasSQL:true,hasDepends:true,canDrop:true,canDropCascade:true,Init:function e(){if(this.initialized)return;this.initialized=true;a.add_menus([{name:"create_foreign_data_wrapper_on_coll",node:"coll-foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"},enable:a.Nodes["database"].is_conn_allow}])},model:a.Node.Model.extend({idAttribute:"fdwoid",defaults:{name:undefined,fdwowner:undefined,comment:undefined,fdwvalue:undefined,fdwhan:undefined,fdwoption:undefined,fdwacl:[]},initialize:function e(t,i){var n=o.size(t)===0;if(n){var r=a.serverInfo[i.node_info.server._id].user;this.set({fdwowner:r.name},{silent:true})}a.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:n("Name"),cell:"string",type:"text",disabled:function e(){return this.mode=="edit"&&this.node_info.server.version<90200}},{id:"fdwoid",label:n("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"fdwowner",label:n("Owner"),type:"text",control:s.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:false}},{id:"fdwhan",label:n("Handler"),type:"text",control:"node-ajax-options",group:n("Definition"),mode:["edit","create","properties"],url:"get_handlers"},{id:"description",label:n("Comment"),cell:"string",type:"multiline"},{id:"fdwoptions",label:n("Options"),type:"collection",group:n("Options"),model:l,control:"unique-col-collection",mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["fdwoption"],columns:["fdwoption","fdwvalue"]},{id:"fdwvalue",label:n("Validator"),type:"text",control:"node-ajax-options",group:n("Definition"),mode:["edit","create","properties"],url:"get_validators"},{id:"security",label:n("Security"),type:"group"},{id:"fdwacl",label:n("Privileges"),type:"collection",group:"security",mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["grantee"],model:a.Node.PrivilegeRoleModel.extend({privileges:["U"]}),control:"unique-col-collection"},{id:"acl",label:n("Privileges"),type:"text",group:n("Security"),mode:["properties"],disabled:true}],validate:function e(){var t=this.get("name");if(o.isUndefined(t)||o.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){var i=n("Name cannot be empty.");this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}return null}})})}return a.Nodes["foreign_data_wrapper"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(0),i(1),i(8),i(3),i(5),i(6),i(7),i(16)],r=function(n,e,o,t,a,s,i){var r=a.Browser.Node.Model.extend({idAttribute:"fsrvoption",defaults:{fsrvoption:undefined,fsrvvalue:undefined},schema:[{id:"fsrvoption",label:n("Options"),type:"text",cellHeaderClasses:"width_percent_50",group:null,editable:true},{id:"fsrvvalue",label:n("Value"),type:"text",cellHeaderClasses:"width_percent_50",group:null,editable:true}],validate:function e(){if(o.isUndefined(this.get("fsrvoption"))||o.isNull(this.get("fsrvoption"))||String(this.get("fsrvoption")).replace(/^\s+|\s+$/g,"")==""){var t="Please enter an option name";this.errorModel.set("fsrvoption",t);return t}else{this.errorModel.unset("fsrvoption")}return null}});if(!s.Nodes["coll-foreign_server"]){a.Browser.Nodes["coll-foreign_server"]=a.Browser.Collection.extend({node:"foreign_server",label:n("Foreign Servers"),type:"coll-foreign_server",columns:["name","fsrvowner","description"]})}if(!s.Nodes["foreign_server"]){a.Browser.Nodes["foreign_server"]=a.Browser.Node.extend({parent_type:"foreign_data_wrapper",type:"foreign_server",sqlAlterHelp:"sql-alterforeignserver.html",sqlCreateHelp:"sql-createforeignserver.html",label:n("Foreign Server"),hasSQL:true,hasDepends:true,canDrop:true,canDropCascade:true,Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_foreign_server_on_coll",node:"coll-foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}}])},model:a.Browser.Node.Model.extend({idAttribute:"fsrvid",defaults:{name:undefined,fsrvtype:undefined,fsrvversion:undefined,fsrvvalue:undefined,fsrvoptions:[],fsrvowner:undefined,description:undefined,fsrvacl:[]},initialize:function e(t,i){var n=o.size(t)===0;if(n){var r=s.serverInfo[i.node_info.server._id].user;this.set({fsrvowner:r.name},{silent:true})}a.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:n("Name"),cell:"string",type:"text",disabled:function e(){return this.mode=="edit"&&this.node_info.server.version<90200}},{id:"fsrvid",label:n("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"fsrvowner",label:n("Owner"),type:"text",control:i.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:false}},{id:"fsrvtype",label:n("Type"),cell:"string",group:n("Definition"),type:"text",mode:["edit","create","properties"],disabled:function e(t){return!t.isNew()}},{id:"fsrvversion",label:n("Version"),cell:"string",group:n("Definition"),type:"text"},{id:"description",label:n("Comment"),cell:"string",type:"multiline"},{id:"fsrvoptions",label:n("Options"),type:"collection",group:n("Options"),model:r,control:"unique-col-collection",mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["fsrvoption"],columns:["fsrvoption","fsrvvalue"]},s.SecurityGroupSchema,{id:"fsrvacl",label:n("Privileges"),type:"collection",group:"security",model:a.Browser.Node.PrivilegeRoleModel.extend({privileges:["U"]}),control:"unique-col-collection",mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["grantee"]},{id:"acl",label:n("Privileges"),type:"text",group:n("Security"),mode:["properties"],disabled:true}],validate:function e(){var t=this.get("name");if(o.isUndefined(t)||o.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){var i=n("Name cannot be empty.");this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}return null}})})}return s.Nodes["coll-foreign_server"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(7)],r=function(n,e,t,o,i,a,s,r){var l=a.Browser.Node.Model.extend({idAttribute:"umoption",defaults:{umoption:undefined,umvalue:undefined},schema:[{id:"umoption",label:n("Options"),type:"text",cellHeaderClasses:"width_percent_50",group:null,editable:true},{id:"umvalue",label:n("Value"),type:"text",cellHeaderClasses:"width_percent_50",group:null,editable:true}],validate:function e(){if(o.isUndefined(this.get("umoption"))||o.isNull(this.get("umoption"))||String(this.get("umoption")).replace(/^\s+|\s+$/g,"")==""){var t="Please enter an option name";this.errorModel.set("umoption",t);return t}else{this.errorModel.unset("umoption")}return null}});if(!s.Nodes["coll-user_mapping"]){a.Browser.Nodes["coll-user_mapping"]=a.Browser.Collection.extend({node:"user_mapping",label:n("User Mappings"),type:"coll-user_mapping",columns:["name"]})}if(!s.Nodes["user_mapping"]){a.Browser.Nodes["user_mapping"]=a.Browser.Node.extend({parent_type:"foreign_server",type:"user_mapping",sqlAlterHelp:"sql-alterusermapping.html",sqlCreateHelp:"sql-createusermapping.html",dialogHelp:e("help.static",{filename:"user_mapping_dialog.html"}),label:n("User Mapping"),hasSQL:true,hasDepends:true,canDrop:true,canDropCascade:true,Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_user_mapping_on_coll",node:"coll-user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}}])},model:a.Browser.Node.Model.extend({idAttribute:"um_oid",defaults:{name:undefined,um_options:[]},initialize:function e(t,i){var n=o.size(t)===0;if(n){var r=s.serverInfo[i.node_info.server._id].user;this.set({name:r.name},{silent:true})}a.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:n("User"),type:"text",control:r.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:false},disabled:function e(t){return!t.isNew()},transform:function e(){var t=this,i=t.field.get("schema_node");var n=r.NodeListByNameControl.prototype.defaults.transform.apply(this,arguments);n.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-"+i.type},{label:"PUBLIC",value:"PUBLIC",image:"icon-"+i.type});return n}},{id:"um_oid",label:n("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"umoptions",label:n("Options"),type:"collection",group:n("Options"),model:l,control:"unique-col-collection",mode:["create","edit"],canAdd:true,canDelete:true,uniqueCol:["umoption"]}],validate:function e(){var t=this.get("name");if(o.isUndefined(t)||o.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){var i=n("Name cannot be empty.");this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}return null}})})}return s.Nodes["coll-user_mapping"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(12),i(7),i(16)],r=function(i,e,d,c,t,o,u,a){u.VacuumCollectionControl=u.Control.extend({grid_columns:undefined,initialize:function e(){u.Control.prototype.initialize.apply(this,arguments);var t=this,i=this.model,n=t.field.get("url");if(n&&i.isNew()){var r=t.field.get("node"),o=t.field.get("node_data"),a=t.field.get("node_info"),s=r.generate_url.apply(r,[null,n,o,false,a]),l;i.trigger("pgadmin-view:fetching",i,t.field);d.ajax({async:false,url:s}).done(function(e){l=e}).fail(function(){i.trigger("pgadmin-view:fetch:error",i,t.field)});i.trigger("pgadmin-view:fetched",i,t.field);if(l&&c.isArray(l)){i.get(t.field.get("name")).reset(l,{silent:true})}}},render:function e(){var t=this,i=t.field.attributes;if(t.grid){t.grid.remove();delete t.grid;t.grid=undefined}t.$el.empty();var n=c.template(['<div class="subnode-header">','  <label class="control-label col-sm-4"><%-label%></label>',"</div>"].join("\n")),r=d('<div class="pgadmin-control-group backgrid form-group col-12 object subnode"></div>').append(n(i));var o=t.grid=new a.Grid({columns:t.grid_columns,collection:t.model.get(t.field.get("name")),className:"backgrid table table-bordered table-noouter-border table-hover"});t.$el.addClass("mb-0");t.$el.append(d(r).append(o.render().$el));return t}});u.cellFunction=function(e){var t=e.get("column_type");switch(t){case"integer":return a.IntegerCell;case"number":return a.NumberCell;case"string":return a.StringCell;default:return a.Cell}};u.VacuumTableModel=o.Node.Model.extend({defaults:{name:undefined,setting:undefined,label:undefined,value:undefined,column_type:undefined},toJSON:function e(){var t=o.Node.Model.prototype.toJSON.apply(this);delete t.label;delete t.setting;delete t.column_type;return t}});u.VacuumSettingsSchema=[{id:"spacer_ctrl",group:i("Table"),mode:["edit","create"],type:"spacer"},{id:"autovacuum_custom",label:i("Custom auto-vacuum?"),group:i("Table"),mode:["edit","create"],type:"switch",disabled:function e(t){if(t.top&&t.top.get("is_partitioned")){setTimeout(function(){t.set("autovacuum_custom",false)},10);return true}if(!t.top.inSchema.apply(this,[t])){return false}return true}},{id:"autovacuum_enabled",label:i("Enabled?"),group:i("Table"),mode:["edit","create"],type:"switch",deps:["autovacuum_custom"],disabled:function e(t){if(!t.top.inSchema.apply(this,[t])&&t.get("autovacuum_custom")==true){if(!c.isUndefined(t.get("reloptions"))&&c.isNull(t.get("reloptions"))){setTimeout(function(){t.set("autovacuum_enabled",true)},10)}return false}setTimeout(function(){t.set("autovacuum_enabled",false)},10);return true},control:u.SwitchControl.extend({onChange:function e(){u.SwitchControl.prototype.onChange.apply(this,arguments);var t=this.model;if(!t.get("autovacuum_enabled")&&!c.isUndefined(t.get("reloptions"))&&c.isNull(t.get("reloptions"))){setTimeout(function(){t.set("autovacuum_custom",false)},10)}}})},{id:"vacuum_table",label:"",model:u.VacuumTableModel,editable:false,type:"collection",canEdit:true,group:i("Table"),mode:["edit","create"],url:"get_table_vacuum",control:u.VacuumCollectionControl.extend({grid_columns:[{name:"label",label:i("Label"),headerCell:a.Extension.CustomHeaderCell,cell:"string",editable:false,cellHeaderClasses:"width_percent_40"},{name:"value",label:i("Value"),cellHeaderClasses:"width_percent_30",cellFunction:u.cellFunction,editable:function e(t){return t.handler.get("autovacuum_enabled")},headerCell:a.Extension.CustomHeaderCell},{name:"setting",label:i("Default"),cellHeaderClasses:"width_percent_30",headerCell:a.Extension.CustomHeaderCell,cellFunction:u.cellFunction,editable:false}]}),deps:["autovacuum_enabled"]},{id:"spacer_ctrl",group:i("TOAST table"),mode:["edit","create"],type:"spacer"},{id:"toast_autovacuum",label:i("Custom auto-vacuum?"),group:i("TOAST table"),mode:["edit","create"],type:"switch",disabled:function e(t){if(!t.top.inSchema.apply(this,[t])&&t.isNew()){return false}else if(!t.top.inSchema.apply(this,[t])&&(t.get("toast_autovacuum_enabled")===true||t.top.get("hastoasttable")===true)){return false}return true}},{id:"toast_autovacuum_enabled",label:i("Enabled?"),group:i("TOAST table"),mode:["edit","create"],type:"switch",deps:["toast_autovacuum"],disabled:function e(t){if(!t.top.inSchema.apply(this,[t])&&t.get("toast_autovacuum")===true){if(!c.isUndefined(t.get("toast_reloptions"))&&c.isNull(t.get("toast_reloptions"))){setTimeout(function(){t.set("toast_autovacuum_enabled",true)},10)}return false}if(t.isNew()||t.get("hastoasttable")){setTimeout(function(){t.set("toast_autovacuum_enabled",false)},10)}return true},control:u.SwitchControl.extend({onChange:function e(){u.SwitchControl.prototype.onChange.apply(this,arguments);var t=this.model;if(!t.get("toast_autovacuum_enabled")&&!c.isUndefined(t.get("toast_reloptions"))&&c.isNull(t.get("toast_reloptions"))){setTimeout(function(){t.set("toast_autovacuum",false)},10)}}})},{id:"vacuum_toast",label:"",model:u.VacuumTableModel,type:"collection",editable:function e(t){return t.isNew()},canEdit:true,group:i("TOAST table"),mode:["properties","edit","create"],url:"get_toast_table_vacuum",control:u.VacuumCollectionControl.extend({grid_columns:[{name:"label",label:i("Label"),headerCell:a.Extension.CustomHeaderCell,cell:"string",editable:false,cellHeaderClasses:"width_percent_40"},{name:"value",label:i("Value"),cellHeaderClasses:"width_percent_30",headerCell:a.Extension.CustomHeaderCell,cellFunction:u.cellFunction,editable:function e(t){return t.handler.get("toast_autovacuum_enabled")}},{name:"setting",label:i("Default"),cellHeaderClasses:"width_percent_30",headerCell:a.Extension.CustomHeaderCell,cellFunction:u.cellFunction,editable:false}]}),deps:["toast_autovacuum_enabled"]}];if(!o.Nodes["coll-schema"]){o.Nodes["coll-schema"]=o.Collection.extend({node:"schema",label:i("Schemas"),type:"coll-schema",columns:["name","namespaceowner","description"]})}if(!o.Nodes["schema"]){o.Nodes["schema"]=o.Node.extend({parent_type:"database",type:"schema",sqlAlterHelp:"sql-alterschema.html",sqlCreateHelp:"sql-createschema.html",dialogHelp:e("help.static",{filename:"schema_dialog.html"}),label:i("Schema"),hasSQL:true,canDrop:true,canDropCascade:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;o.add_menus([{name:"create_schema_on_coll",node:"coll-schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"},enable:"can_create_schema"}])},can_create_schema:function e(t){return o.Nodes["database"].is_conn_allow.call(this,t)},model:o.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,namespaceowner:undefined,description:undefined,is_system_obj:undefined},initialize:function e(t,i){var n=c.size(t)===0;if(n){var r=o.serverInfo[i.node_info.server._id].user;this.set({namespaceowner:r.name},{silent:true})}o.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:i("Name"),cell:"string",type:"text"},{id:"oid",label:i("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"namespaceowner",label:i("Owner"),cell:"string",type:"text",control:"node-list-by-name",node:"role",select2:{allowClear:false}},{id:"is_sys_object",label:i("System schema?"),cell:"switch",type:"switch",mode:["properties"],disabled:true},{id:"description",label:i("Comment"),cell:"string",type:"multiline"},{id:"acl",label:i("Privileges"),type:"text",group:i("Security"),mode:["properties"],disabled:true},{id:"tblacl",label:i("Default TABLE privileges"),type:"text",group:i("Security"),mode:["properties"],disabled:true},{id:"seqacl",label:i("Default SEQUENCE privileges"),type:"text",group:i("Security"),mode:["properties"],disabled:true},{id:"funcacl",label:i("Default FUNCTION privileges"),group:i("Security"),type:"text",mode:["properties"],disabled:true},{id:"typeacl",label:i("Default TYPE privileges"),type:"text",group:i("Security"),mode:["properties"],disabled:true,min_version:90200,visible:function e(){return this.version_compatible}},{id:"nspacl",label:i("Privileges"),model:o.Node.PrivilegeRoleModel.extend({privileges:["C","U"]}),uniqueCol:["grantee","grantor"],editable:false,type:"collection",group:i("Security"),mode:["edit","create"],canAdd:true,canDelete:true,control:"unique-col-collection"},{id:"seclabels",label:i("Security labels"),model:o.SecLabelModel,editable:false,type:"collection",group:i("Security"),mode:["edit","create"],min_version:90200,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection"},{type:"nested",control:"tab",group:i("Default privileges"),mode:["create","edit"],schema:[{id:"deftblacl",model:o.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),label:"",editable:false,type:"collection",group:i("Tables"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"]},{id:"defseqacl",model:o.Node.PrivilegeRoleModel.extend({privileges:["r","w","U"]}),label:"",editable:false,type:"collection",group:i("Sequences"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"]},{id:"deffuncacl",model:o.Node.PrivilegeRoleModel.extend({privileges:["X"]}),label:"",editable:false,type:"collection",group:i("Functions"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"]},{id:"deftypeacl",model:o.Node.PrivilegeRoleModel.extend({privileges:["U"]}),label:"",editable:false,type:"collection",group:i("Types"),mode:["edit","create"],control:"unique-col-collection",canAdd:true,canDelete:true,uniqueCol:["grantee","grantor"],min_version:90200}]}],validate:function e(){var t=null;this.errorModel.clear();if(c.isUndefined(this.get("name"))||c.isNull(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=i("Name cannot be empty.");this.errorModel.set("name",t);return t}else if(c.isUndefined(this.get("namespaceowner"))||c.isNull(this.get("namespaceowner"))||String(this.get("namespaceowner")).replace(/^\s+|\s+$/g,"")==""){t=i("Owner cannot be empty.");this.errorModel.set("namespaceowner",t);return t}return null}})});o.tableChildTreeNodeHierarchy=function(e){return this.getTreeNodeHierarchy(e)}}a.Extension.TableChildSwitchCell=a.Extension.SwitchCell.extend({initialize:function e(){a.Extension.SwitchCell.prototype.initialize.apply(this,arguments);a.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function e(){var t=this.model,i=this.column,n=this.column.get("editable"),r=this.$el.find("input[type=checkbox]").first(),o=i.get("name"),a;a=c.isFunction(n)?!!n.apply(i,[t]):!!n;if(a){this.$el.addClass("editable");r.bootstrapToggle("disabled",false)}else{this.$el.removeClass("editable");r.bootstrapToggle("disabled",true);setTimeout(function(){t.set(o,false)},10)}this.delegateEvents();return this},remove:a.Extension.DependentCell.prototype.remove});return o.Nodes["schema"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(0),i(1),i(3),i(5),i(7)],r=function(e,t,o,i,a){if(!a.Nodes["coll-catalog"]){a.Nodes["coll-catalog"]=a.Collection.extend({node:"catalog",label:e("Catalogs"),type:"coll-catalog",columns:["name","namespaceowner","description"],canDrop:false,canDropCascade:false})}if(!a.Nodes["catalog"]){a.Nodes["catalog"]=a.Node.extend({parent_type:"database",type:"catalog",label:e("Catalog"),hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true},model:a.Node.Model.extend({defaults:{name:undefined,namespaceowner:undefined,nspacl:undefined,description:undefined,securitylabel:[]},initialize:function e(t,i){var n=o.size(t)===0;if(n){var r=a.serverInfo[i.node_info.server._id].user;this.set({namespaceowner:r.name},{silent:true})}a.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:true},{id:"oid",label:e("OID"),cell:"string",mode:["properties"],type:"text",disabled:true},{id:"namespaceowner",label:e("Owner"),cell:"string",type:"text",disabled:true},{id:"acl",label:e("Privileges"),type:"text",group:e("Security"),mode:["properties"],disabled:true},{id:"description",label:e("Comment"),cell:"string",type:"multiline"},{id:"seclabels",label:e("Security labels"),model:a.SecLabelModel,editable:false,type:"collection",group:e("Security"),mode:["edit","create"],min_version:90200,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection"}],validate:function e(){return null}})})}return a.Nodes["catalog"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(0),i(1),i(8),i(3),i(5),i(7)],r=function(e,t,i,n,r,o){if(!o.Nodes["coll-catalog_object"]){r.Browser.Nodes["coll-catalog_object"]=r.Browser.Collection.extend({node:"catalog_object",label:e("Catalog Objects"),type:"coll-catalog_object",columns:["name","owner","description"],canDrop:false,canDropCascade:false})}if(!o.Nodes["catalog_object"]){r.Browser.Nodes["catalog_object"]=r.Browser.Node.extend({parent_type:"catalog",type:"catalog_object",label:e("Catalog Object"),hasSQL:false,hasScriptTypes:[],hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true},model:r.Browser.Node.Model.extend({defaults:{name:undefined,namespaceowner:undefined,nspacl:undefined,description:undefined},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:true},{id:"oid",label:e("OID"),cell:"string",type:"text",disabled:true},{id:"owner",label:e("Owner"),cell:"string",type:"text",disabled:true},{id:"description",label:e("Comment"),cell:"string",type:"multiline",disabled:true}]})})}return o.Nodes["catalog_object"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(13),i(11),i(7)],r=function(d,e,t,c,i,a,s,n,r){if(!s.Nodes["coll-collation"]){a.Browser.Nodes["coll-collation"]=a.Browser.Collection.extend({node:"collation",label:d("Collations"),type:"coll-collation",columns:["name","owner","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})}if(!s.Nodes["collation"]){a.Browser.Nodes["collation"]=n.SchemaChildNode.extend({type:"collation",sqlAlterHelp:"sql-altercollation.html",sqlCreateHelp:"sql-createcollation.html",dialogHelp:e("help.static",{filename:"collation_dialog.html"}),label:d("Collation"),collection_type:"coll-collation",hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_collation_on_coll",node:"coll-collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:d("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:true},enable:"canCreate"},{name:"create_collation",node:"collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:d("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:true},enable:"canCreate"},{name:"create_collation",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:d("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:false},enable:"canCreate"}])},model:a.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,owner:undefined,lc_type:undefined,lc_collate:undefined,description:undefined},initialize:function e(t,i){var n=c.size(t)===0;if(n){var r=s.serverInfo[i.node_info.server._id].user;var o=i.node_info.schema;this.set({owner:r.name},{silent:true});this.set({schema:o._label},{silent:true})}a.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:d("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:d("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:d("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchema",control:"node-list-by-name",node:"role"},{id:"schema",label:d("Schema"),cell:"string",type:"text",mode:["create","edit"],node:"schema",disabled:"inSchema",filter:function e(t){if(t&&t.label.match(/^pg_/)){return false}return true},control:"node-list-by-name",cache_node:"database",cached_level:"database"},{id:"copy_collation",label:d("Copy collation"),cell:"string",control:"node-ajax-options",type:"text",mode:["create","edit"],group:d("Definition"),url:"get_collations",disabled:"inSchemaWithModelCheck",deps:["locale","lc_collate","lc_type"]},{id:"locale",label:d("Locale"),cell:"string",type:"text",mode:["create","edit"],group:d("Definition"),disabled:"inSchemaWithModelCheck",deps:["lc_collate","lc_type","copy_collation"]},{id:"lc_collate",label:d("LC_COLLATE"),cell:"string",type:"text",mode:["properties","create","edit"],group:d("Definition"),deps:["locale","copy_collation"],disabled:"inSchemaWithModelCheck"},{id:"lc_type",label:d("LC_TYPE"),cell:"string",type:"text",mode:["properties","create","edit"],group:d("Definition"),disabled:"inSchemaWithModelCheck",deps:["locale","copy_collation"]},{id:"description",label:d("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],validate:function e(){var t={},i=undefined,n=this.changed,r=false,o=false,a=false,s=false,l=this.toJSON();this.errorModel.clear();if(c.has(n,l.name)&&c.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){i=d("Name cannot be empty.");this.errorModel.set("name",i)}if(c.has(n,l.locale)&&(c.isUndefined(this.get("locale"))||String(this.get("locale")).replace(/^\s+|\s+$/g,"")=="")){r=true}if(c.has(n,l.lc_collate)&&(c.isUndefined(this.get("lc_collate"))||String(this.get("lc_collate")).replace(/^\s+|\s+$/g,"")=="")){a=true}if(c.has(n,l.lc_type)&&(c.isUndefined(this.get("lc_type"))||String(this.get("lc_type")).replace(/^\s+|\s+$/g,"")=="")){o=true}if(c.has(n,l.copy_collation)&&(c.isUndefined(this.get("copy_collation"))||String(this.get("copy_collation")).replace(/^\s+|\s+$/g,"")=="")){s=true}if(r&&(a||o)&&s){i=d("Definition incomplete. Please provide Locale OR Copy Collation OR LC_TYPE/LC_COLLATE.");t["locale"]=i}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()&&this.name=="copy_collation"){if(t.get("locale"))return true;if(t.get("lc_collate")||t.get("lc_type"))return true;return false}if(t.isNew()&&(this.name=="lc_collate"||this.name=="lc_type")){if(t.get("locale"))return true;if(t.get("copy_collation"))return true;return false}if(t.isNew()&&this.name=="locale"){if(t.get("lc_collate")||t.get("lc_type"))return true;if(t.get("copy_collation"))return true;return false}if(t.isNew()){return false}else{return true}}return true}})})}return s.Nodes["collation"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(6),i(12),i(13),i(11),i(7)],r=function(n,e,t,a,i,r,s,o,l,d,c){if(!s.Nodes["coll-domain"]){s.Nodes["coll-domain"]=s.Collection.extend({node:"domain",label:n("Domains"),type:"coll-domain",columns:["name","owner","description"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})}var u=s.Node.Model.extend({idAttribute:"conoid",initialize:function e(t){if(!a.size(t)===0){this.convalidated_default=this.get("convalidated")}s.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{conoid:undefined,conname:undefined,consrc:undefined,convalidated:true},convalidated_default:true,schema:[{id:"conoid",type:"text",cell:"string",visible:false},{id:"conname",label:n("Name"),type:"text",cell:"string",cellHeaderClasses:"width_percent_40",editable:function e(t){if(a.isUndefined(t.isNew)){return true}if(!t.isNew()){var i=this.get("node_info").server;if(i.version<90200){return false}}return true}},{id:"consrc",label:n("Check"),type:"multiline",cell:l.Extension.TextareaCell,group:n("Definition"),cellHeaderClasses:"width_percent_60",editable:function e(t){return a.isUndefined(t.isNew)?true:t.isNew()}},{id:"convalidated",label:n("Validate?"),type:"switch",cell:"boolean",group:n("Definition"),editable:function e(t){var i=this.get("node_info").server;if(i.version<90200){return false}if(a.isUndefined(t.isNew)){return true}if(!t.isNew()){if(t.get("convalidated")&&t.convalidated_default){return false}return true}return true}}],toJSON:i.Model.prototype.toJSON,validate:function e(){return null}});if(!s.Nodes["domain"]){s.Nodes["domain"]=d.SchemaChildNode.extend({type:"domain",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-createdomain.html",dialogHelp:e("help.static",{filename:"domain_dialog.html"}),label:n("Domain"),collection_type:"coll-domain",hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_domain_on_coll",node:"coll-domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:true},enable:"canCreate"},{name:"create_domain",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:true},enable:"canCreate"},{name:"create_domain",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:false},enable:"canCreate"}])},model:s.Node.Model.extend({idAttribute:"oid",initialize:function e(t,i){var n=a.size(t)===0;if(n){var r=i.node_info.schema.label;this.set({basensp:r},{silent:true});var o=s.serverInfo[i.node_info.server._id].user;this.set({owner:o.name},{silent:true})}s.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{name:undefined,oid:undefined,owner:undefined,basensp:undefined,description:undefined,basetype:undefined,typlen:undefined,precision:undefined,typdefault:undefined,typnotnull:undefined,sysdomain:undefined,collname:undefined,constraints:[],seclabels:[]},type_options:undefined,schema:[{id:"name",label:n("Name"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"oid",label:n("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:n("Owner"),cell:"string",control:o.NodeListByNameControl,node:"role",type:"text",mode:["edit","create","properties"]},{id:"basensp",label:n("Schema"),cell:"node-list-by-name",control:"node-list-by-name",cache_level:"database",type:"text",node:"schema",mode:["create","edit"]},{id:"sysdomain",label:n("System domain?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:n("Comment"),cell:"string",type:"multiline"},{id:"basetype",label:n("Base type"),cell:"string",control:"node-ajax-options",type:"text",url:"get_types",mode:["properties","create","edit"],group:n("Definition"),first_empty:true,cache_node:"type",disabled:function e(t){return!t.isNew()},transform:function e(t){this.model.type_options=t;return t}},{id:"typlen",label:n("Length"),cell:"string",type:"text",group:n("Definition"),deps:["basetype"],disabled:function e(t){if(!t.isNew()){return true}var i=t.get("basetype");if(t.type_options){a.each(t.type_options,function(e){if(i==e.value){if(e.length){t.set("is_tlength",true,{silent:true});t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true})}else t.set("is_tlength",false,{silent:true})}});!t.get("is_tlength")&&setTimeout(function(){if(t.get("typlen")){t.set("typlen",null)}},10)}return!t.get("is_tlength")}},{id:"precision",label:n("Precision"),cell:"string",type:"text",group:n("Definition"),deps:["basetype"],disabled:function e(t){if(!t.isNew()){return true}var i=t.get("basetype");if(t.type_options){a.each(t.type_options,function(e){if(i==e.value){if(e.precision){t.set("is_precision",true,{silent:true});t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true})}else t.set("is_precision",false,{silent:true})}});!t.get("is_precision")&&setTimeout(function(){if(t.get("precision")){t.set("precision",null)}},10)}return!t.get("is_precision")}},{id:"typdefault",label:n("Default"),cell:"string",type:"text",group:n("Definition"),placeholder:"Enter an expression or a value."},{id:"typnotnull",label:n("Not NULL?"),cell:"boolean",type:"switch",group:n("Definition")},{id:"collname",label:n("Collation"),cell:"string",control:"node-ajax-options",type:"text",url:"get_collations",group:n("Definition"),cache_level:"database",cache_node:"schema",disabled:function e(t){return!t.isNew()}},{id:"constraints",label:n("Constraints"),cell:"string",type:"collection",group:n("Constraints"),mode:["edit","create"],model:u,canAdd:true,canDelete:true,canEdit:false,columns:["conname","consrc","convalidated"]},s.SecurityGroupSchema,{id:"seclabels",label:n("Security labels"),model:s.SecLabelModel,type:"collection",group:"security",mode:["edit","create"],min_version:90100,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection",uniqueCol:["provider"]}],validate:function e(){var t={},i;if(a.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t["name"]=n("Name cannot be empty.");i=i||t["name"]}if(a.isUndefined(this.get("basetype"))||String(this.get("basetype")).replace(/^\s+|\s+$/g,"")==""){t["basetype"]=n("Base Type cannot be empty.");i=i||t["basetype"]}this.errorModel.clear().set(t);return i}}),isDisabled:function e(t){if(!t.isNew()){var i=this.node_info.server;if(i.version<90200){return false}}return true}})}return s.Nodes["domain"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(11),i(7)],r=function(n,e,t,r,i,o,a,s){if(!a.Nodes["coll-domain_constraints"]){o.Browser.Nodes["coll-domain_constraints"]=o.Browser.Collection.extend({node:"domain_constraints",label:n("Domain Constraints"),type:"coll-domain_constraints",columns:["name","description"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:false})}if(!a.Nodes["domain_constraints"]){o.Browser.Nodes["domain_constraints"]=a.Node.extend({type:"domain_constraints",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-alterdomain.html",dialogHelp:e("help.static",{filename:"domain_constraint_dialog.html"}),label:n("Domain Constraints"),collection_type:"coll-domain_constraints",hasSQL:true,hasDepends:true,parent_type:["domain"],Init:function e(){if(this.initialized)return;this.initialized=true;a.add_menus([{name:"create_domain_on_coll",node:"coll-domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:n("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:true},enable:"canCreate"},{name:"create_domain_constraints",node:"domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:n("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:true},enable:"canCreate"},{name:"create_domain_constraints",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:n("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:false},enable:"canCreate"}])},canDrop:s.isTreeItemOfChildOfSchema,model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,description:undefined,consrc:undefined,connoinherit:undefined,convalidated:true},schema:[{id:"name",label:n("Name"),type:"text",cell:"string",disabled:"isDisabled"},{id:"oid",label:n("OID"),cell:"string",type:"text",mode:["properties"]},{id:"description",label:n("Comment"),type:"multiline",cell:"string",mode:["properties","create","edit"],min_version:90500},{id:"consrc",label:n("Check"),type:"multiline",cel:"string",group:n("Definition"),mode:["properties","create","edit"],disabled:function e(t){return!t.isNew()}},{id:"connoinherit",label:n("No inherit?"),type:"switch",cell:"boolean",group:n("Definition"),mode:["properties","create","edit"],disabled:"isDisabled",visible:false},{id:"convalidated",label:n("Validate?"),type:"switch",cell:"boolean",group:n("Definition"),min_version:90200,disabled:function e(t){if(!t.isNew()){var i=this.node_info.server;if(i.version<90200){return true}else if(t.get("convalidated")){return true}return false}return false},mode:["properties","create","edit"]}],validate:function e(){var t={},i;if(r.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t["name"]=n("Name cannot be empty.");i=i||t["name"]}if(r.isUndefined(this.get("consrc"))||String(this.get("consrc")).replace(/^\s+|\s+$/g,"")==""){t["consrc"]=n("Check cannot be empty.");i=i||t["consrc"]}this.errorModel.clear().set(t);if(r.size(t)){this.trigger("on-status",{msg:i});return i}return null},isDisabled:function e(t){if(!t.isNew()){var i=this.node_info.server;if(i.version<90200){return true}}return false}})})}return a.Nodes["domain"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(6),i(12),i(13),i(11),i(7)],r=function(n,e,u,h,p,t,f,i,r,o,a){if(!f.Nodes["coll-foreign_table"]){f.Nodes["coll-foreign_table"]=f.Collection.extend({node:"foreign_table",label:n("Foreign Tables"),type:"coll-foreign_table",columns:["name","owner","description"],canDrop:a.isTreeItemOfChildOfSchema,canDropCascade:a.isTreeItemOfChildOfSchema})}var s=f.Node.Model.extend({idAttribute:"option",defaults:{option:undefined,value:undefined},schema:[{id:"option",label:n("Option"),type:"text",editable:true,cellHeaderClasses:"width_percent_30"},{id:"value",label:n("Value"),type:"text",editable:true,cellHeaderClasses:"width_percent_50"}],validate:function e(){if(h.isUndefined(this.get("value"))||h.isNull(this.get("value"))||String(this.get("value")).replace(/^\s+|\s+$/g,"")==""){var t="Please enter a value.";this.errorModel.set("value",t);return t}else{this.errorModel.unset("value")}return null}});var l=f.Node.Model.extend({idAttribute:"attnum",defaults:{attname:undefined,datatype:undefined,typlen:undefined,precision:undefined,typdefault:undefined,attnotnull:undefined,collname:undefined,attnum:undefined,inheritedfrom:undefined,inheritedid:undefined,attstattarget:undefined,coloptions:[]},type_options:undefined,schema:[{id:"attname",label:n("Name"),cell:"string",type:"text",editable:"is_editable_column",cellHeaderClasses:"width_percent_40"},{id:"datatype",label:n("Data type"),cell:"node-ajax-options",control:"node-ajax-options",type:"text",url:"get_types",editable:"is_editable_column",cellHeaderClasses:"width_percent_0",group:n("Definition"),transform:function e(t,i){i.model.type_options=t;return t}},{id:"typlen",label:n("Length"),cell:"string",group:n("Definition"),type:"int",deps:["datatype"],disabled:function e(t){var i=t.get("typlen");if(!(h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom")))){if(!h.isUndefined(i)){setTimeout(function(){t.set("typlen",undefined)},10)}return true}var n=t.get("datatype"),r=false;if(t.type_options){t.set("is_tlength",false,{silent:true});h.each(t.type_options,function(e){if(n==e.value){if(e.length){r=true;t.set("is_tlength",true,{silent:true});t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true})}}});if(!r&&!h.isUndefined(i)){setTimeout(function(){t.set("typlen",undefined)},10)}return!t.get("is_tlength")}if(!r&&!h.isUndefined(i)){setTimeout(function(){t.set("typlen",undefined)},10)}return true},cellHeaderClasses:"width_percent_10"},{id:"precision",label:n("Precision"),type:"int",deps:["datatype"],cell:"string",group:n("Definition"),disabled:function e(t){var i=t.get("precision");if(!(h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom")))){if(!h.isUndefined(i)){setTimeout(function(){t.set("precision",undefined)},10)}return true}var n=t.get("datatype"),r=false;if(t.type_options){t.set("is_precision",false,{silent:true});h.each(t.type_options,function(e){if(n==e.value){if(e.precision){r=true;t.set("is_precision",true,{silent:true});t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true})}}});if(!r&&!h.isUndefined(i)){setTimeout(function(){t.set("precision",undefined)},10)}return!t.get("is_precision")}if(!r&&!h.isUndefined(i)){setTimeout(function(){t.set("precision",undefined)},10)}return true},cellHeaderClasses:"width_percent_10"},{id:"typdefault",label:n("Default"),type:"text",cell:"string",min_version:90300,group:n("Definition"),placeholder:"Enter an expression or a value.",cellHeaderClasses:"width_percent_10",editable:function e(t){if(!(h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom")))){return false}if(this.get("node_info").server.version<90300){return false}return true}},{id:"attnotnull",label:n("Not NULL?"),cell:"boolean",type:"switch",editable:"is_editable_column",cellHeaderClasses:"width_percent_10",group:n("Definition")},{id:"attstattarget",label:n("Statistics"),min_version:90200,cell:"integer",type:"int",group:n("Definition"),editable:function e(t){if(h.isUndefined(t.isNew)||t.isNew()){return false}if(this.get("node_info").server.version<90200){return false}return h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom"))?true:false},cellHeaderClasses:"width_percent_10"},{id:"collname",label:n("Collation"),cell:"node-ajax-options",control:"node-ajax-options",type:"text",url:"get_collations",min_version:90300,editable:function e(t){if(!h.isUndefined(t.isNew)&&!t.isNew()){return false}return h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom"))?true:false},cellHeaderClasses:"width_percent_20",group:n("Definition")},{id:"attnum",cell:"string",type:"text",visible:false},{id:"inheritedfrom",label:n("Inherited From"),cell:"string",type:"text",visible:false,mode:["properties","edit"],cellHeaderClasses:"width_percent_10"},{id:"coloptions",label:n("Options"),cell:"string",type:"collection",group:n("Options"),mode:["edit","create"],model:s,canAdd:true,canDelete:true,canEdit:false,control:i.UniqueColCollectionControl,uniqueCol:["option"],min_version:90200}],validate:function e(){var t=null;if(h.isUndefined(this.get("attname"))||String(this.get("attname")).replace(/^\s+|\s+$/g,"")==""){t=n("Column Name cannot be empty.");this.errorModel.set("attname",t)}else{this.errorModel.unset("attname")}if(h.isUndefined(this.get("datatype"))||String(this.get("datatype")).replace(/^\s+|\s+$/g,"")==""){t=n("Column Datatype cannot be empty.");this.errorModel.set("datatype",t)}else{this.errorModel.unset("datatype")}return t},is_editable_column:function e(t){return h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom"))?true:false},toJSON:p.Model.prototype.toJSON});var d=i.NodeAjaxOptionsControl.extend({onChange:function e(){var t=this.model,i=this.field.get("name").split("."),n=i.shift(),r=i.join("."),o=this.getValueFromDOM(),a={},s=t.get("columns"),l=t.get(n);if(this.model.errorModel instanceof p.Model){if(h.isEmpty(r)){this.model.errorModel.unset(n)}else{var d=this.model.errorModel.get(n);if(d){this.keyPathSetter(d,r,null);this.model.errorModel.set(n,d)}}}var c=this;if(typeof l=="string"){l=JSON.parse(l)}if(h.size(o)<h.size(l)){var u=h.difference(l,o);var f=s.where({inheritedid:parseInt(u[0])});s.remove(f)}else{h.each(o,function(e){var t=s.where({inheritedid:parseInt(e)});if(t&&t.length<=0){var i=c.fetchColumns(e);s.add(i)}})}a[n]=h.isEmpty(r)?o:h.clone(t.get(n))||{};this.stopListening(this.model,"change:"+n,this.render);t.set(a);this.listenTo(this.model,"change:"+n,this.render)},fetchColumns:function e(t){var i=this,n="get_columns",r=i.model.top||i.model;if(n){var o=this.field.get("schema_node"),a=this.field.get("node_info"),s=o.generate_url.apply(o,[null,n,this.field.get("node_data"),this.field.get("url_with_id")||false,a]),l=this.field.get("cache_level")||o.type,d=this.field.get("cache_node");d=d&&f.Nodes["cache_node"]||o;r.trigger("pgadmin:view:fetching",r,i.field);var c={attrelid:t};u.ajax({async:false,url:s,data:c}).done(function(e){c=d.cache(n,a,l,e.data)}).fail(function(){r.trigger("pgadmin:view:fetch:error",r,i.field)});r.trigger("pgadmin:view:fetched",r,i.field);c=c&&c.data||[];return c}}});var c=f.Node.Model.extend({idAttribute:"conoid",initialize:function e(t){var i=h.size(t)===0;if(!i){this.convalidated_default=this.get("convalidated")}f.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{conoid:undefined,conname:undefined,consrc:undefined,connoinherit:undefined,convalidated:true,conislocal:undefined},convalidated_default:true,schema:[{id:"conoid",type:"text",cell:"string",visible:false},{id:"conname",label:n("Name"),type:"text",cell:"string",editable:"is_editable",cellHeaderClasses:"width_percent_30"},{id:"consrc",label:n("Check"),type:"multiline",editable:"is_editable",cell:r.Extension.TextareaCell,cellHeaderClasses:"width_percent_30"},{id:"connoinherit",label:n("No inherit?"),type:"switch",cell:"boolean",editable:"is_editable",cellHeaderClasses:"width_percent_20"},{id:"convalidated",label:n("Validate?"),type:"switch",cell:"boolean",cellHeaderClasses:"width_percent_20",editable:function e(t){if(h.isUndefined(t.isNew)){return true}if(!t.isNew()){if(t.get("convalidated")&&t.convalidated_default){return false}return true}return true}}],validate:function e(){var t={},i;if(h.isUndefined(this.get("conname"))||String(this.get("conname")).replace(/^\s+|\s+$/g,"")==""){t["conname"]=n("Constraint Name cannot be empty.");i=i||t["conname"]}if(h.isUndefined(this.get("consrc"))||String(this.get("consrc")).replace(/^\s+|\s+$/g,"")==""){t["consrc"]=n("Constraint Check cannot be empty.");i=i||t["consrc"]}this.errorModel.clear().set(t);return i},is_editable:function e(t){return h.isUndefined(t.isNew)?true:t.isNew()},toJSON:p.Model.prototype.toJSON});var m=f.Node.Model.extend({defaults:{option:undefined,value:undefined},schema:[{id:"option",label:n("Option"),cell:"string",type:"text",editable:true,cellHeaderClasses:"width_percent_50"},{id:"value",label:n("Value"),cell:"string",type:"text",editable:true,cellHeaderClasses:"width_percent_50"}],validate:function e(){},toJSON:p.Model.prototype.toJSON});if(!f.Nodes["foreign_table"]){f.Nodes["foreign_table"]=o.SchemaChildNode.extend({type:"foreign_table",sqlAlterHelp:"sql-alterforeigntable.html",sqlCreateHelp:"sql-createforeigntable.html",dialogHelp:e("help.static",{filename:"foreign_table_dialog.html"}),label:n("Foreign Table"),collection_type:"coll-foreign_table",hasSQL:true,hasDepends:true,hasScriptTypes:["create","select","insert","update","delete"],parent_type:["schema"],Init:function e(){if(this.initialized)return;this.initialized=true;f.add_menus([{name:"create_foreign_table_on_coll",node:"coll-foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:true},enable:"canCreate"},{name:"create_foreign_table",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:true},enable:"canCreate"},{name:"create_foreign_table",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:false},enable:"canCreate"}])},model:f.Node.Model.extend({idAttribute:"oid",initialize:function e(t,i){var n=h.size(t)===0;if(n){var r=i.node_info.schema._label,o=f.serverInfo[i.node_info.server._id].user;this.set({basensp:r,owner:o.name},{silent:true})}f.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{name:undefined,oid:undefined,owner:undefined,basensp:undefined,description:undefined,ftsrvname:undefined,strftoptions:undefined,inherits:[],columns:[],constraints:[],ftoptions:[],relacl:[],stracl:[],seclabels:[]},schema:[{id:"name",label:n("Name"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"oid",label:n("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:n("Owner"),cell:"string",control:i.NodeListByNameControl,node:"role",type:"text",select2:{allowClear:false}},{id:"basensp",label:n("Schema"),cell:"node-list-by-name",control:"node-list-by-name",cache_level:"database",type:"text",node:"schema",mode:["create","edit"]},{id:"description",label:n("Comment"),cell:"string",type:"multiline"},{id:"ftsrvname",label:n("Foreign server"),cell:"string",control:"node-ajax-options",type:"text",group:n("Definition"),url:"get_foreign_servers",disabled:function e(t){return!t.isNew()},cache_node:"database"},{id:"inherits",label:n("Inherits"),group:n("Definition"),type:"array",min_version:90500,control:d,url:"get_tables",select2:{multiple:true},cache_level:"database",transform:function e(t){if(this.field.get("mode")=="edit"){var i=this.model.get("oid");var n=h.findWhere(t,{id:i});if(n){t=h.reject(t,n)}}return t}},{id:"columns",label:n("Columns"),cell:"string",type:"collection",group:n("Columns"),mode:["edit","create"],model:l,canAdd:true,canDelete:true,canEdit:true,columns:["attname","datatype","inheritedfrom"],canDeleteRow:function e(t){return h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom"))?true:false},canEditRow:function e(t){return h.isUndefined(t.get("inheritedid"))||h.isNull(t.get("inheritedid"))||h.isUndefined(t.get("inheritedfrom"))||h.isNull(t.get("inheritedfrom"))?true:false}},{id:"constraints",label:n("Constraints"),cell:"string",type:"collection",group:n("Constraints"),mode:["edit","create"],model:c,canAdd:true,canDelete:true,columns:["conname","consrc","connoinherit","convalidated"],canEdit:function e(t){if(t instanceof p.Model){if(t instanceof c){return t.isNew()}}return true},min_version:90500,canDeleteRow:function e(t){return t.get("conislocal")==true||h.isUndefined(t.get("conislocal"))?true:false}},{id:"strftoptions",label:n("Options"),cell:"string",type:"text",group:n("Definition"),mode:["properties"]},{id:"ftoptions",label:n("Options"),cell:"string",type:"collection",group:n("Options"),mode:["edit","create"],model:m,canAdd:true,canDelete:true,canEdit:false,control:"unique-col-collection",uniqueCol:["option"]},{id:"relacl",label:n("Privileges"),cell:"string",type:"text",group:n("Security"),mode:["properties"],min_version:90200},f.SecurityGroupSchema,{id:"acl",label:n("Privileges"),model:t.Browser.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","x"]}),uniqueCol:["grantee","grantor"],editable:false,type:"collection",group:"security",mode:["edit","create"],canAdd:true,canDelete:true,control:"unique-col-collection",min_version:90200},{id:"seclabels",label:n("Security labels"),model:f.SecLabelModel,type:"collection",group:"security",mode:["edit","create"],min_version:90100,canAdd:true,canEdit:false,canDelete:true,control:"unique-col-collection",uniqueCol:["provider"]}],validate:function e(){var t={},i=null;if(h.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t["name"]=n("Name cannot be empty.");i=i||t["name"]}if(h.isUndefined(this.get("basensp"))||String(this.get("basensp")).replace(/^\s+|\s+$/g,"")==""){t["basensp"]=n("Schema cannot be empty.");i=i||t["basensp"]}if(h.isUndefined(this.get("ftsrvname"))||String(this.get("ftsrvname")).replace(/^\s+|\s+$/g,"")==""){t["ftsrvname"]=n("Foreign server cannot be empty.");i=i||t["ftsrvname"]}this.errorModel.clear().set(t);return i}})})}return f.Nodes["foreign_table"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(6),i(12),i(13),i(11),i(7)],r=function(s,e,u,f,l,h,o,p,d,t,i){var n=h.Browser.Node.Model.extend({defaults:{token:undefined,dictname:undefined},keys:["token"],schema:[{id:"token",label:s("Token"),type:"text",group:null,cellHeaderClasses:"width_percent_50",editable:false,cell:"string",url:"tokens"},{id:"dictname",label:s("Dictionaries"),type:"text",group:null,cellHeaderClasses:"width_percent_50",editable:true,cell:d.Extension.MultiSelectAjaxCell,url:"dictionaries"}],validate:function e(){var t;this.errorModel.clear();var i=this.get("token");var n=this.get("dictname");if(f.isNull(i)||f.isUndefined(i)||String(i).replace(/^\s+|\s+$/g,"")==""){t=s("Token cannot be empty.");this.errorModel.set("token",t);return t}if(f.isNull(n)||f.isUndefined(n)||String(n).replace(/^\s+|\s+$/g,"")==""){t=s("Dictionary name cannot be empty.");this.errorModel.set("dictname",t);return t}return null}});var r=p.TokenControl=p.UniqueColCollectionControl.extend({initialize:function e(){p.UniqueColCollectionControl.prototype.initialize.apply(this,arguments);var t=this,i=[{id:"token",label:"",type:"text",url:"tokens",node:"fts_configuration",canAdd:true,url_with_id:true,control:p.NodeAjaxOptionsControl.extend({formatter:p.NodeAjaxOptionsControl.prototype.formatter,initialize:function e(){p.NodeAjaxOptionsControl.prototype.initialize.apply(this,arguments);var t=this,i=t.field.get("url")||t.defaults.url,n=t.model.top||t.model;if(i){var r=this.field.get("schema_node"),o=this.field.get("node_info"),a=r.generate_url.apply(r,[null,i,this.field.get("node_data"),this.field.get("url_with_id")||false,o]),s=this.field.get("cache_level")||r.type,l=this.field.get("cache_node");l=l&&h.Browser.Nodes[l]||r;var d=l.cache(i,o,s);if(this.field.get("version_compatible")&&(f.isUndefined(d)||f.isNull(d))){n.trigger("pgadmin:view:fetching",n,t.field);u.ajax({async:false,url:a}).done(function(e){d=l.cache(i,o,s,e.data)}).fail(function(){n.trigger("pgadmin:view:fetch:error",n,t.field)});n.trigger("pgadmin:view:fetched",n,t.field)}d=d&&d.data||[];var c=this.field.get("transform")||t.defaults.transform;if(c&&f.isFunction(c)){t.field.set("options",c.bind(t,d))}else{t.field.set("options",d)}}}}),select2:{allowClear:true,width:"style",placeholder:s("Select token")},first_empty:true,disabled:function e(){return f.isUndefined(t.model.get("oid"))}}],n={token:null},r=["token","dictname"];t.headerData=new(l.Model.extend({defaults:n,schema:i}))({});var o=p.generateViewSchema(t.field.get("node_info"),t.headerData,"create",t.field.get("schema_node"),t.field.get("node_data")),a=[];f.each(o,function(e){a=a.concat(e.fields)});t.headerFields=new p.Fields(a);t.gridSchema=p.generateGridColumnsFromModel(t.field.get("node_info"),t.field.get("model"),"edit",r,t.field.get("schema_node"));t.controls=[];t.listenTo(t.headerData,"change",t.headerDataChanged);t.listenTo(t.headerData,"select2",t.headerDataChanged);t.listenTo(t.collection,"add",t.onAddorRemoveTokens);t.listenTo(t.collection,"remove",t.onAddorRemoveTokens)},generateHeader:function e(t){var i=['<div class="subnode-header-form">',' <div class="container-fluid">','  <div class="row">','   <div class="col-3">','    <label class="control-label"><%-token_label%></label>',"   </div>",'   <div class="col-6" header="token"></div>','   <div class="col-2">','     <button class="btn btn-sm-sq btn-secondary add fa fa-plus" <%=canAdd ? "" : "disabled=\'disabled\'"%> ></button>',"   </div>","  </div>"," </div>","</div>"].join("\n");f.extend(t,{token_label:s("Tokens")});var n=this,r=f.template(i),o=u(r(t)),a=this.controls;n.headerFields.each(function(e){var t=new(e.get("control"))({field:e,model:n.headerData});o.find('div[header="'+e.get("name")+'"]').append(t.render().$el);t.$el.find(".control-label").remove();a.push(t)});if(t.mode=="properties"){o.find("button.add").remove()}if(t.mode=="create"){o.find("button.add").attr("disabled",true)}n.$header=o;return o},events:f.extend({},p.UniqueColCollectionControl.prototype.events,{"click button.add":"addTokens"}),showGridControl:function e(t){var i=this,n=f.template("<div class='subnode-header'></div>"),r=u("<div></div>",{class:"pgadmin-control-group backgrid form-group col-12 object subnode"}).append(n({label:t.label}));r.append(i.generateHeader(t));var o=f.clone(this.gridSchema.columns);if(t.disabled==false&&t.canDelete){o.unshift({name:"pg-backform-delete",label:"",cell:d.Extension.DeleteCell,editable:false,cell_priority:-1})}if(i.grid){i.grid.remove();i.grid.null}var a=i.grid=new d.Grid({columns:o,collection:i.collection,className:"backgrid table-bordered"});i.$grid=a.render().$el;r.append(i.$grid);setTimeout(function(){i.headerData.set({token:i.$header.find('div[header="token"] select').val()},{silent:true})},10);return r},headerDataChanged:function e(){var t=this,i=this.headerData.toJSON(),n=f.isEmpty(i)||f.isUndefined(i);if(!t.$header){return}t.$header.find("button.add").prop("disabled",n)},addTokens:function e(t){t.preventDefault();var i=this,n=i.headerData.get("token");if(!n||n==""){return false}var r=i.model.get(i.field.get("name")),o=new(i.field.get("model"))(i.headerData.toJSON(),{silent:true,top:i.model.top,collection:r,handler:r}),a=["token"],s=-1;i.collection.each(function(i){f.each(a,function(e){var t=i.get(e);if(t==n){s=r.indexOf(i)}})});if(s==-1){r.add(o);s=r.indexOf(o)}i.$grid.find(".new").removeClass("new");var l=i.grid.body.rows[s].$el;l.addClass("new");u(l).pgMakeVisible("backform-tab");return false},onAddorRemoveTokens:function e(){var t=this;setTimeout(function(){t.collection.trigger("pgadmin:tokens:updated",t.collection);t.headerDataChanged()},10)},remove:function e(){this.stopListening(this.headerData,"change",this.headerDataChanged);this.listenTo(this.headerData,"select2",this.headerDataChanged);this.listenTo(this.collection,"remove",this.onAddorRemoveTokens);f.each(this.controls,function(e){e.remove()});r.__super__.remove.apply(this,arguments);delete this.headerData}});if(!o.Nodes["coll-fts_configuration"]){h.Browser.Nodes["coll-fts_configuration"]=h.Browser.Collection.extend({node:"fts_configuration",label:s("FTS Configurations"),type:"coll-fts_configuration",columns:["name","description"],canDrop:i.isTreeItemOfChildOfSchema,canDropCascade:i.isTreeItemOfChildOfSchema})}if(!o.Nodes["fts_configuration"]){h.Browser.Nodes["fts_configuration"]=t.SchemaChildNode.extend({type:"fts_configuration",sqlAlterHelp:"sql-altertsconfig.html",sqlCreateHelp:"sql-createtsconfig.html",dialogHelp:e("help.static",{filename:"fts_configuration_dialog.html"}),label:s("FTS Configuration"),hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;o.add_menus([{name:"create_fts_configuration_on_schema",node:"schema",module:this,category:"create",priority:4,applies:["object","context"],callback:"show_obj_properties",label:s("FTS Configuration..."),icon:"wcTabIcon icon-fts_configuration",data:{action:"create"},enable:"canCreate"},{name:"create_fts_configuration_on_coll",module:this,priority:4,node:"coll-fts_configuration",applies:["object","context"],callback:"show_obj_properties",category:"create",label:s("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"},{name:"create_fts_configuration",node:"fts_configuration",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"}])},model:h.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,owner:undefined,description:undefined,schema:undefined,prsname:undefined,copy_config:undefined,tokens:undefined},initialize:function e(t,i){var n=f.size(t)===0;h.Browser.Node.Model.prototype.initialize.apply(this,arguments);if(n){var r=o.serverInfo[i.node_info.server._id].user;this.set({owner:r.name,schema:i.node_info.schema._id},{silent:true})}},schema:[{id:"name",label:s("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"oid",label:s("OID"),cell:"string",editable:false,type:"text",disabled:true,mode:["properties"]},{id:"owner",label:s("Owner"),cell:"string",type:"text",mode:["properties","edit","create"],node:"role",control:p.NodeListByNameControl,select2:{allowClear:false}},{id:"schema",label:s("Schema"),cell:"string",type:"text",mode:["create","edit"],node:"schema",control:"node-list-by-id",cache_node:"database",cache_level:"database"},{id:"description",label:s("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"prsname",label:s("Parser"),type:"text",url:"parsers",first_empty:true,group:s("Definition"),control:"node-ajax-options",deps:["copy_config"],disabled:function e(t){var i=t.get("copy_config");return t.isNew()&&(f.isNull(i)||f.isUndefined(i)||i==="")?false:true}},{id:"copy_config",label:s("Copy config"),type:"text",mode:["create"],group:s("Definition"),control:"node-ajax-options",url:"copyConfig",deps:["prsname"],disabled:function e(t){var i=t.get("prsname");return t.isNew()&&(f.isNull(i)||f.isUndefined(i)||i==="")?false:true}},{id:"tokens",label:s("Tokens"),type:"collection",group:s("Tokens"),control:r,model:n,columns:["token","dictionary"],uniqueCol:["token"],mode:["create","edit"],canAdd:true,canEdit:false,canDelete:true}],validate:function e(){var t;var i=this.get("name");var n=this.get("prsname");var r=!(n===""||f.isUndefined(n)||f.isNull(n))?this.get("prsname"):this.get("copy_config");var o=this.get("schema");this.errorModel.clear();this.trigger("on-status-clear");if(f.isUndefined(i)||f.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){t=s("Name must be specified.");this.errorModel.set("name",t);return t}else if(f.isUndefined(r)||f.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){t=s("Select parser or configuration to copy.");this.errorModel.set("parser",t);return t}else if(f.isUndefined(o)||f.isNull(o)||String(o).replace(/^\s+|\s+$/g,"")==""){t=s("Schema must be selected.");this.errorModel.set("schema",t);return t}return null}})})}return o.Nodes["coll-fts_configuration"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(13),i(11),i(7)],r=function(o,e,t,a,i,s,l,n,r,d){var c=s.Browser.Node.Model.extend({defaults:{options:undefined,value:undefined},schema:[{id:"option",label:o("Option"),type:"text",group:null,cellHeaderClasses:"width_percent_50",editable:true},{id:"value",label:o("Value"),type:"text",group:null,cellHeaderClasses:"width_percent_50",editable:true}],validate:function e(){this.errorModel.clear();var t;if(a.isUndefined(this.get("option"))||String(this.get("option")).replace(/^\s+|\s+$/g,"")==""){t=o("Option cannot be empty.");this.errorModel.set("option",t);return t}if(a.isUndefined(this.get("value"))||String(this.get("value")).replace(/^\s+|\s+$/g,"")==""){t=o("Value cannot be empty.");this.errorModel.set("value",t);return t}return t}});if(!l.Nodes["coll-fts_dictionary"]){s.Browser.Nodes["coll-fts_dictionary"]=s.Browser.Collection.extend({node:"fts_dictionary",label:o("FTS Dictionaries"),type:"coll-fts_dictionary",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})}if(!l.Nodes["fts_dictionary"]){s.Browser.Nodes["fts_dictionary"]=r.SchemaChildNode.extend({type:"fts_dictionary",sqlAlterHelp:"sql-altertsdictionary.html",sqlCreateHelp:"sql-createtsdictionary.html",dialogHelp:e("help.static",{filename:"fts_dictionary_dialog.html"}),label:o("FTS Dictionary"),hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;l.add_menus([{name:"create_fts_dictionary_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"},{name:"create_fts_dictionary_on_coll",node:"coll-fts_dictionary",module:this,applies:["object","context"],priority:4,callback:"show_obj_properties",category:"create",label:o("FTS Dictionary..."),data:{action:"create"},icon:"wcTabIcon icon-fts_dictionary",enable:"canCreate"},{name:"create_fts_dictionary",node:"fts_dictionary",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"}])},model:s.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,owner:undefined,description:undefined,schema:undefined,template:undefined,options:undefined},initialize:function e(t,i){var n=a.size(t)===0;s.Browser.Node.Model.prototype.initialize.apply(this,arguments);if(n){var r=l.serverInfo[i.node_info.server._id].user;this.set({owner:r.name,schema:i.node_info.schema._id},{silent:true})}},schema:[{id:"name",label:o("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"oid",label:o("OID"),cell:"string",editable:false,type:"text",disabled:true,mode:["properties"]},{id:"owner",label:o("Owner"),cell:"string",type:"text",mode:["properties","edit","create"],node:"role",control:n.NodeListByNameControl},{id:"schema",label:o("Schema"),cell:"string",type:"text",mode:["create","edit"],node:"schema",cache_node:"database",control:"node-list-by-id"},{id:"description",label:o("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"template",label:o("Template"),type:"text",disabled:function e(t){return!t.isNew()},url:"fetch_templates",group:o("Definition"),control:"node-ajax-options",cache_node:"fts_template"},{id:"options",label:o("Option"),type:"collection",group:o("Options"),control:"unique-col-collection",model:c,columns:["option","value"],uniqueCol:["option"],mode:["edit","create"],canAdd:true,canEdit:false,canDelete:true}],validate:function e(){var t=this.get("name"),i=this.get("template"),n=this.get("schema"),r;if(a.isUndefined(t)||a.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){r=o("Name must be specified.");this.errorModel.set("name",r);return r}else if(a.isUndefined(i)||a.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){r=o("Template must be selected.");this.errorModel.set("template",r);return r}else if(a.isUndefined(n)||a.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){r=o("Schema must be selected.");this.errorModel.set("schema",r);return r}else this.errorModel.clear();this.trigger("on-status-clear");return null}})})}return l.Nodes["fts_dictionary"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(13),i(11),i(7)],r=function(l,e,t,d,r,i,n,o){if(!i.Nodes["coll-fts_parser"]){r.Browser.Nodes["coll-fts_parser"]=r.Browser.Collection.extend({node:"fts_parser",label:l("FTS Parsers"),type:"coll-fts_parser",columns:["name","description"],canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:o.isTreeItemOfChildOfSchema})}if(!i.Nodes["fts_parser"]){r.Browser.Nodes["fts_parser"]=n.SchemaChildNode.extend({type:"fts_parser",sqlAlterHelp:"sql-altertsparser.html",sqlCreateHelp:"sql-createtsparser.html",dialogHelp:e("help.static",{filename:"fts_parser_dialog.html"}),label:l("FTS Parser"),hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;i.add_menus([{name:"create_fts_parser_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"},{name:"create_fts_parser_on_coll",node:"coll-fts_parser",applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},module:this,enable:"canCreate"},{name:"create_fts_parser",node:"fts_parser",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"}])},model:r.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,description:undefined,schema:undefined,prsstart:undefined,prstoken:undefined,prsend:undefined,prslextype:undefined,prsheadline:undefined},initialize:function e(t,i){var n=d.size(t)===0;r.Browser.Node.Model.prototype.initialize.apply(this,arguments);if(n){this.set("schema",i.node_info.schema._id)}},schema:[{id:"name",label:l("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"oid",label:l("OID"),cell:"string",editable:false,type:"text",disabled:true,mode:["properties"]},{id:"schema",label:l("Schema"),cell:"string",type:"text",mode:["create","edit"],node:"schema",control:"node-list-by-id",cache_node:"database",cache_level:"database"},{id:"description",label:l("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"prsstart",label:l("Start function"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"start_functions",group:l("Definition"),cache_level:"database",cache_node:"schema"},{id:"prstoken",label:l("Get next token function"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"token_functions",group:l("Definition"),cache_level:"database",cache_node:"schema"},{id:"prsend",label:l("End function"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"end_functions",group:l("Definition"),cache_level:"database",cache_node:"schema"},{id:"prslextype",label:l("Lextypes function"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"lextype_functions",group:l("Definition"),cache_level:"database",cache_node:"schema"},{id:"prsheadline",label:l("Headline function"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"headline_functions",group:l("Definition"),cache_level:"database",cache_node:"schema"}],validate:function e(){var t=this.get("name"),i=this.get("prsstart"),n=this.get("prstoken"),r=this.get("prsend"),o=this.get("prslextype"),a=this.get("schema"),s;if(d.isUndefined(t)||d.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){s=l("Name must be specified.");this.errorModel.set("name",s);return s}else if(d.isUndefined(i)||d.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){s=l("Start function must be selected.");this.errorModel.set("prsstart",s);return s}else if(d.isUndefined(n)||d.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){s=l("Get next token function must be selected.");this.errorModel.set("prstoken",s);return s}else if(d.isUndefined(r)||d.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){s=l("End function must be selected.");this.errorModel.set("prsend",s);return s}else if(d.isUndefined(o)||d.isNull(o)||String(o).replace(/^\s+|\s+$/g,"")==""){s=l("Lextype function must be selected.");this.errorModel.set("prslextype",s);return s}else if(d.isUndefined(a)||d.isNull(a)||String(a).replace(/^\s+|\s+$/g,"")==""){s=l("Schema must be selected.");this.errorModel.set("schema",s);return s}else this.errorModel.clear();this.trigger("on-status-clear");return null}})})}return i.Nodes["coll-fts_parser"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(13),i(11),i(7)],r=function(o,e,t,a,r,i,n,s){if(!i.Nodes["coll-fts_template"]){r.Browser.Nodes["coll-fts_template"]=r.Browser.Collection.extend({node:"fts_template",label:o("FTS Templates"),type:"coll-fts_template",columns:["name","description"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})}if(!i.Nodes["fts_template"]){r.Browser.Nodes["fts_template"]=n.SchemaChildNode.extend({type:"fts_template",sqlAlterHelp:"sql-altertstemplate.html",sqlCreateHelp:"sql-createtstemplate.html",dialogHelp:e("help.static",{filename:"fts_template_dialog.html"}),label:o("FTS Template"),hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;i.add_menus([{name:"create_fts_template_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template_on_coll",node:"coll-fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template",node:"fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"}])},model:r.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,description:undefined,schema:undefined,tmplinit:undefined,tmpllexize:undefined},initialize:function e(t,i){var n=a.size(t)===0;r.Browser.Node.Model.prototype.initialize.apply(this,arguments);if(n){this.set("schema",i.node_info.schema._id)}},schema:[{id:"name",label:o("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"oid",label:o("OID"),cell:"string",editable:false,type:"text",disabled:true,mode:["properties"]},{id:"schema",label:o("Schema"),cell:"string",type:"text",mode:["create","edit"],node:"schema",control:"node-list-by-id",cache_node:"database",cache_level:"database"},{id:"description",label:o("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"tmplinit",label:o("Init function"),group:o("Definition"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"get_init",cache_level:"database",cache_node:"schema"},{id:"tmpllexize",label:o("Lexize function"),group:o("Definition"),type:"text",disabled:function e(t){return!t.isNew()},control:"node-ajax-options",url:"get_lexize",cache_level:"database",cache_node:"schema"}],validate:function e(){var t=this.get("name"),i=this.get("tmpllexize"),n=this.get("schema"),r;if(a.isUndefined(t)||a.isNull(t)||String(t).replace(/^\s+|\s+$/g,"")==""){r=o("Name must be specified.");this.errorModel.set("name",r);return r}else if(a.isUndefined(i)||a.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){r=o("Lexize function must be selected.");this.errorModel.set("tmpllexize",r);return r}else if(a.isUndefined(n)||a.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){r=o("Schema must be selected.");this.errorModel.set("schema",r);return r}else this.errorModel.clear();this.trigger("on-status-clear");return null}})})}return i.Nodes["fts_template"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(18),i(61),i(13),i(11),i(7),i(16)],r=function(a,e,t,s,i,n,r,o,l,d,c){if(!r.Nodes["coll-procedure"]){n.Browser.Nodes["coll-procedure"]=n.Browser.Collection.extend({node:"procedure",label:a("Procedures"),type:"coll-procedure",columns:["name","funcowner","description"],hasStatistics:true,canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})}if(!r.Nodes["procedure"]){n.Browser.Nodes["procedure"]=d.SchemaChildNode.extend({type:"procedure",sqlAlterHelp:"sql-alterprocedure.html",sqlCreateHelp:"sql-createprocedure.html",dialogHelp:e("help.static",{filename:"procedure_dialog.html"}),label:a("Procedure"),collection_type:"coll-procedure",hasSQL:true,hasDepends:true,hasStatistics:true,hasScriptTypes:["create","exec"],width:r.stdW.md+"px",Init:function e(){if(this.proc_initialized)return;this.proc_initialized=true;r.add_menus([{name:"create_procedure_on_coll",node:"coll-procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:a("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:false},enable:"canCreateProc"},{name:"create_procedure",node:"procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:a("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:true},enable:"canCreateProc"},{name:"create_procedure",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:a("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:true},enable:"canCreateProc"}])},canCreateProc:function e(t,i){var n=this.getTreeNodeHierarchy.apply(this,[i]);if("catalog"in n)return false;return"server"in n&&(n["server"].server_type=="ppas"||n["server"].server_type=="pg"&&n["server"].version>=11e4)},model:l.model.extend({defaults:s.extend({},l.model.prototype.defaults,{lanname:"edbspl"}),canVarAdd:function e(){var t=this.node_info.server;if(t.version<90500){return false}else{return true}},isVisible:function e(){if(this.name=="sysfunc"){return false}else if(this.name=="sysproc"){return true}return false},isDisabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}switch(this.name){case"provolatile":case"proisstrict":case"procost":case"proleakproof":if(this.node_info.server.version<90500||this.node_info.server.server_type!="ppas"||t.get("lanname")!="edbspl"){setTimeout(function(){t.set("provolatile",undefined);t.set("proisstrict",undefined);t.set("procost",undefined);t.set("proleakproof",undefined)},10);return true}else{return false}case"variables":case"prosecdef":return this.node_info.server.version<90500;case"prorows":var i=this.node_info.server;return!(i.version>=90500&&t.get("proretset")==true);case"funcowner":case"proargs":return true;case"proparallel":if(this.node_info.server.version<90600||this.node_info.server.server_type!="ppas"||t.get("lanname")!="edbspl"){setTimeout(function(){t.set("proparallel",undefined)},10);return true}else{return false}case"lanname":return this.node_info.server.version<11e4;default:return false}},validate:function e(){var t={},i,n=this.get("seclabels");if(s.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t["name"]=a("Name cannot be empty.");i=i||t["name"]}if(s.isUndefined(this.get("pronamespace"))||String(this.get("pronamespace")).replace(/^\s+|\s+$/g,"")==""){t["pronamespace"]=a("Schema cannot be empty.");i=i||t["pronamespace"]}if(s.isUndefined(this.get("lanname"))||String(this.get("lanname")).replace(/^\s+|\s+$/g,"")==""){t["lanname"]=a("Language cannot be empty.");i=i||t["lanname"]}if(String(this.get("lanname"))=="c"){if(s.isUndefined(this.get("probin"))||String(this.get("probin")).replace(/^\s+|\s+$/g,"")==""){t["probin"]=a("Object File cannot be empty.");i=i||t["probin"]}if(s.isUndefined(this.get("prosrc_c"))||String(this.get("prosrc_c")).replace(/^\s+|\s+$/g,"")==""){t["prosrc_c"]=a("Link Symbol cannot be empty.");i=i||t["prosrc_c"]}}else{if(s.isUndefined(this.get("prosrc"))||String(this.get("prosrc")).replace(/^\s+|\s+$/g,"")==""){t["prosrc"]=a("Code cannot be empty.");i=i||t["prosrc"]}}if(n){var r;for(var o=0;o<n.models.length&&!r;o++){r=n.models[o].validate.apply(n.models[o]);if(r){t["seclabels"]=r;i=i||r}}}this.errorModel.clear().set(t);return null}})})}return r.Nodes["procedure"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(62),i(7),i(16)],r=function(e,t,i,n,r,o,a){if(!o.Nodes["coll-edbproc"]){r.Browser.Nodes["coll-edbproc"]=r.Browser.Collection.extend({node:"edbproc",label:e("Procedures"),type:"coll-edbproc",columns:["name","funcowner","description"],hasStatistics:true,canDrop:false,canDropCascade:false})}if(!o.Nodes["edbproc"]){r.Browser.Nodes["edbproc"]=o.Node.extend({type:"edbproc",dialogHelp:t("help.static",{filename:"edbproc_dialog.html"}),label:e("Procedure"),collection_type:"coll-edbproc",hasDepends:true,canEdit:false,hasSQL:true,hasScriptTypes:[],parent_type:["package"],Init:function e(){if(this.proc_initialized)return;this.proc_initialized=true},canDrop:false,canDropCascade:false,model:a.model.extend({defaults:n.extend({},a.model.prototype.defaults,{lanname:"edbspl"}),isVisible:function e(){if(this.name=="sysfunc"){return false}else if(this.name=="sysproc"){return true}return false},validate:function e(){return null}})})}return o.Nodes["edbproc"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(7),i(16)],r=function(e,t,i,n,r,o){if(!o.Nodes["coll-edbvar"]){o.Nodes["coll-edbvar"]=o.Collection.extend({node:"edbvar",label:e("Variables"),type:"coll-edbvar",columns:["name","funcowner","description"],canDrop:false,canDropCascade:false})}if(!o.Nodes["edbvar"]){o.Nodes["edbvar"]=o.Node.extend({type:"edbvar",dialogHelp:t("help.static",{filename:"edbvar_dialog.html"}),label:e("Function"),collection_type:"coll-edbvar",canEdit:false,hasSQL:true,hasScriptTypes:[],parent_type:["package"],Init:function e(){if(this.initialized)return;this.initialized=true},canDrop:false,canDropCascade:false,model:o.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,datatype:undefined,visibility:"Unknown"},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties"],disabled:true},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"datatype",label:e("Data type"),cell:"string",type:"text",disabled:true},{id:"visibility",label:e("Visibility"),cell:"string",type:"text",mode:["properties"],disabled:true}],validate:function e(){return null}})})}return o.Nodes["edbvar"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(13),i(11),i(7),i(16)],r=function(s,e,t,l,i,a,n,r,o){if(!a.Nodes["coll-trigger_function"]){a.Nodes["coll-trigger_function"]=a.Collection.extend({node:"trigger_function",label:s("Trigger functions"),type:"coll-trigger_function",columns:["name","funcowner","description"],hasStatistics:true,canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:o.isTreeItemOfChildOfSchema})}if(!a.Nodes["trigger_function"]){a.Nodes["trigger_function"]=r.SchemaChildNode.extend({type:"trigger_function",sqlAlterHelp:"plpgsql-trigger.html",sqlCreateHelp:"plpgsql-trigger.html",dialogHelp:e("help.static",{filename:"trigger_function_dialog.html"}),label:s("Trigger function"),collection_type:"coll-trigger_function",hasSQL:true,hasDepends:true,hasStatistics:true,Init:function e(){if(this.initialized)return;this.initialized=true;a.add_menus([{name:"create_trigger_function_on_coll",node:"coll-trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:true},enable:"canCreate"},{name:"create_trigger_function",node:"trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:true},enable:"canCreate"},{name:"create_trigger_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:false},enable:"canCreate"}])},model:a.Node.Model.extend({idAttribute:"oid",initialize:function e(t,i){var n=l.size(t)===0;if(n){var r=i.node_info.schema._id;this.set({pronamespace:r},{silent:true});var o=a.serverInfo[i.node_info.server._id].user;this.set({funcowner:o.name},{silent:true})}a.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{name:undefined,oid:undefined,xmin:undefined,funcowner:undefined,pronamespace:undefined,description:undefined,pronargs:undefined,proargs:undefined,proargtypenames:undefined,prorettypename:"trigger",lanname:"plpgsql",provolatile:undefined,proretset:undefined,proisstrict:undefined,prosecdef:undefined,proiswindow:undefined,procost:undefined,prorows:undefined,proleakproof:undefined,args:[],prosrc:undefined,prosrc_c:undefined,probin:"$libdir/",options:[],variables:[],proacl:undefined,seclabels:[],acl:[],sysfunc:undefined,sysproc:undefined},schema:[{id:"name",label:s("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"isDisabled"},{id:"oid",label:s("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:s("Owner"),cell:"string",control:n.NodeListByNameControl,node:"role",type:"text",disabled:"isDisabled"},{id:"pronamespace",label:s("Schema"),cell:"string",control:"node-list-by-id",type:"text",cache_level:"database",node:"schema",disabled:"isDisabled",mode:["create","edit"]},{id:"sysfunc",label:s("System function?"),cell:"boolean",type:"switch",mode:["properties"],visible:"isVisible"},{id:"sysproc",label:s("System procedure?"),cell:"boolean",type:"switch",mode:["properties"],visible:"isVisible"},{id:"description",label:s("Comment"),cell:"string",type:"multiline",disabled:"isDisabled"},{id:"pronargs",label:s("Argument count"),cell:"string",type:"text",group:s("Definition"),mode:["properties"]},{id:"proargs",label:s("Arguments"),cell:"string",type:"text",group:s("Definition"),mode:["properties","edit"],disabled:"isDisabled"},{id:"proargtypenames",label:s("Signature arguments"),cell:"string",type:"text",group:s("Definition"),mode:["properties"],disabled:"isDisabled"},{id:"prorettypename",label:s("Return type"),cell:"string",control:"select2",type:"text",group:s("Definition"),disabled:"isDisabled",first_empty:true,select2:{width:"100%",allowClear:false},mode:["create"],visible:"isVisible",options:[{label:s("trigger"),value:"trigger"},{label:s("event_trigger"),value:"event_trigger"}]},{id:"prorettypename",label:s("Return type"),cell:"string",type:"text",group:s("Definition"),mode:["properties","edit"],disabled:"isDisabled",visible:"isVisible"},{id:"lanname",label:s("Language"),cell:"string",control:"node-ajax-options",type:"text",group:s("Definition"),url:"get_languages",disabled:"isDisabled",transform:function e(t){return l.reject(t,function(e){return e.label=="sql"||e.label=="edbspl"})},select2:{allowClear:false}},{id:"prosrc",label:s("Code"),cell:"string",type:"text",mode:["properties","create","edit"],group:s("Code"),deps:["lanname"],tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl,visible:function e(t){if(t.get("lanname")=="c"){return false}return true},disabled:"isDisabled"},{id:"probin",label:s("Object file"),cell:"string",type:"text",group:s("Definition"),deps:["lanname"],visible:function e(t){if(t.get("lanname")=="c"){return true}return false},disabled:"isDisabled"},{id:"prosrc_c",label:s("Link symbol"),cell:"string",type:"text",group:s("Definition"),deps:["lanname"],visible:function e(t){if(t.get("lanname")=="c"){return true}return false},disabled:"isDisabled"},{id:"provolatile",label:s("Volatility"),cell:"string",control:"node-ajax-options",type:"text",group:s("Options"),options:[{label:"VOLATILE",value:"v"},{label:"STABLE",value:"s"},{label:"IMMUTABLE",value:"i"}],disabled:"isDisabled",select2:{allowClear:false}},{id:"proretset",label:s("Returns a set?"),type:"switch",group:s("Options"),disabled:"isDisabled",visible:"isVisible"},{id:"proisstrict",label:s("Strict?"),type:"switch",disabled:"isDisabled",group:s("Options")},{id:"prosecdef",label:s("Security of definer?"),group:s("Options"),cell:"boolean",type:"switch",disabled:"isDisabled"},{id:"proiswindow",label:s("Window?"),group:s("Options"),cell:"boolean",type:"switch",disabled:"isDisabled",visible:"isVisible"},{id:"procost",label:s("Estimated cost"),type:"text",group:s("Options"),disabled:"isDisabled"},{id:"prorows",label:s("Estimated rows"),type:"text",group:s("Options"),disabled:"isDisabled",deps:["proretset"],visible:"isVisible"},{id:"proleakproof",label:s("Leak proof?"),group:s("Options"),cell:"boolean",type:"switch",min_version:90200,disabled:"isDisabled"},a.SecurityGroupSchema,{id:"proacl",label:s("Privileges"),mode:["properties"],group:s("Security"),type:"text"},{id:"variables",label:"",type:"collection",group:s("Parameters"),control:"variable-collection",model:a.Node.VariableModel,mode:["edit","create"],canAdd:"canVarAdd",canEdit:false,canDelete:true,disabled:"isDisabled"},{id:"acl",label:s("Privileges"),editable:false,type:"collection",group:"security",mode:["edit","create"],model:a.Node.PrivilegeRoleModel.extend({privileges:["X"]}),uniqueCol:["grantee","grantor"],disabled:"isDisabled",canAdd:true,canDelete:true,control:"unique-col-collection"},{id:"seclabels",label:s("Security labels"),canEdit:true,model:a.SecLabelModel,type:"collection",min_version:90100,group:"security",mode:["edit","create"],canDelete:true,control:"unique-col-collection",canAdd:true,uniqueCol:["provider"],disabled:"isDisabled"}],validate:function e(t){var i={},n,r=this.get("seclabels");if(t&&t.length==0){this.errorModel.clear();return null}if(l.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){i["name"]=s("Name cannot be empty.");n=n||i["name"]}if(l.isUndefined(this.get("funcowner"))||String(this.get("funcowner")).replace(/^\s+|\s+$/g,"")==""){i["funcowner"]=s("Owner cannot be empty.");n=n||i["funcowner"]}if(l.isUndefined(this.get("pronamespace"))||String(this.get("pronamespace")).replace(/^\s+|\s+$/g,"")==""){i["pronamespace"]=s("Schema cannot be empty.");n=n||i["pronamespace"]}if(l.isUndefined(this.get("prorettypename"))||String(this.get("prorettypename")).replace(/^\s+|\s+$/g,"")==""){i["prorettypename"]=s("Return type cannot be empty.");n=n||i["prorettypename"]}if(l.isUndefined(this.get("lanname"))||String(this.get("lanname")).replace(/^\s+|\s+$/g,"")==""){i["lanname"]=s("Language cannot be empty.");n=n||i["lanname"]}if(String(this.get("lanname"))=="c"){if(l.isUndefined(this.get("probin"))||String(this.get("probin")).replace(/^\s+|\s+$/g,"")==""){i["probin"]=s("Object File cannot be empty.");n=n||i["probin"]}if(l.isUndefined(this.get("prosrc_c"))||String(this.get("prosrc_c")).replace(/^\s+|\s+$/g,"")==""){i["prosrc_c"]=s("Link Symbol cannot be empty.");n=n||i["prosrc_c"]}}else{if(l.isUndefined(this.get("prosrc"))||String(this.get("prosrc")).replace(/^\s+|\s+$/g,"")==""){i["prosrc"]=s("Code cannot be empty.");n=n||i["prosrc"]}}if(r){var o;for(var a=0;a<r.models.length&&!o;a++){o=r.models[a].validate.apply(r.models[a]);if(o){i["seclabels"]=o;n=n||o}}}this.errorModel.clear().set(i);if(l.size(i)){this.trigger("on-status",{msg:n});return n}return null},isVisible:function e(){if(this.name=="sysproc"){return false}return true},isDisabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}switch(this.name){case"proargs":case"proargtypenames":case"prorettypename":case"proretset":case"proiswindow":return!t.isNew();case"prorows":if(t.get("proretset")==true){return false}return true;default:return false}},canVarAdd:function e(){return!(this.node_info&&"catalog"in this.node_info)}})})}return a.Nodes["trigger_function"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(13),i(11),i(7)],r=function(i,e,t,o,a,s,n,r,l){if(!s.Nodes["coll-package"]){s.Nodes["coll-package"]=s.Collection.extend({node:"package",label:i("Packages"),type:"coll-package",columns:["name","owner","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})}if(!s.Nodes["package"]){s.Nodes["package"]=r.SchemaChildNode.extend({type:"package",dialogHelp:e("help.static",{filename:"package_dialog.html"}),label:i("Package"),collection_type:"coll-package",hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_package_on_coll",node:"coll-package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:true},enable:"canCreate"},{name:"create_package",node:"package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:true},enable:"canCreate"},{name:"create_package",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:true},enable:"canCreate"}])},canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=this.getTreeNodeHierarchy(i),o=r["server"];if(o&&o.server_type==="pg")return false;if(r["catalog"]!=undefined)return false;return true},model:s.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,owner:undefined,is_sys_object:undefined,description:undefined,pkgheadsrc:undefined,pkgbodysrc:undefined,acl:undefined,pkgacl:[]},initialize:function e(t,i){if(o.size(t)===0){var n=s.serverInfo[i.node_info.server._id].user;var r=i.node_info.schema;this.set({owner:n.name,schema:r._label},{silent:true})}a.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:i("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:function e(t){return!t.isNew()}},{id:"oid",label:i("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:i("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:true,editable:false,visible:function e(t){return!t.isNew()}},{id:"schema",label:i("Schema"),type:"text",node:"schema",control:"node-list-by-name",disabled:function e(t){return!t.isNew()},filter:function e(t){if(t&&t.label.match(/^pg_/)){return false}return true},cache_node:"database",cache_level:"database"},{id:"is_sys_object",label:i("System package?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:i("Comment"),type:"multiline",mode:["properties","create","edit"]},{id:"pkgheadsrc",label:i("Header"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Header"),tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl},{id:"pkgbodysrc",label:i("Body"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Body"),tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl},{id:"acl",label:i("Privileges"),type:"text",group:i("Security"),mode:["properties"]},{id:"pkgacl",label:i("Privileges"),type:"collection",model:s.Node.PrivilegeRoleModel.extend({privileges:["X"]}),uniqueCol:["grantee","grantor"],editable:false,group:i("Security"),mode:["edit","create"],canAdd:true,canDelete:true,control:"unique-col-collection"}],validate:function e(){var t=undefined;this.errorModel.clear();if(o.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=i("Name cannot be empty.");this.errorModel.set("name",t);return t}if(o.isUndefined(this.get("pkgheadsrc"))||String(this.get("pkgheadsrc")).replace(/^\s+|\s+$/g,"")==""){t=i("Header cannot be empty.");this.errorModel.set("pkgheadsrc",t);return t}return null}})})}return s.Nodes["package"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(13),i(11),i(7)],r=function(l,e,t,d,i,n,a,r,o,s){if(!a.Nodes["coll-sequence"]){a.Nodes["coll-sequence"]=a.Collection.extend({node:"sequence",label:l("Sequences"),type:"coll-sequence",columns:["name","seqowner","comment"],hasStatistics:true,canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})}if(!a.Nodes["sequence"]){a.Nodes["sequence"]=o.SchemaChildNode.extend({type:"sequence",sqlAlterHelp:"sql-altersequence.html",sqlCreateHelp:"sql-createsequence.html",dialogHelp:e("help.static",{filename:"sequence_dialog.html"}),label:l("Sequence"),collection_type:"coll-sequence",hasSQL:true,hasDepends:true,hasStatistics:true,Init:function e(){if(this.initialized)return;this.initialized=true;a.add_menus([{name:"create_sequence_on_coll",node:"coll-sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:true},enable:"canCreate"},{name:"create_sequence",node:"sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:true},enable:"canCreate"},{name:"create_sequence",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:false},enable:"canCreate"}])},model:a.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,seqowner:undefined,schema:undefined,comment:undefined,increment:undefined,start:undefined,current_value:undefined,minimum:undefined,maximum:undefined,cache:undefined,cycled:undefined,relacl:[],securities:[]},initialize:function e(t,i){var n=d.size(t)===0;if(n){var r=a.serverInfo[i.node_info.server._id].user;var o=i.node_info.schema;this.set({seqowner:r.name},{silent:true});this.set({schema:o._label},{silent:true})}a.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:l("Name"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"oid",label:l("OID"),cell:"string",type:"text",mode:["properties"]},{id:"seqowner",label:l("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],node:"role",control:r.NodeListByNameControl},{id:"schema",label:l("Schema"),cell:"string",control:"node-list-by-name",node:"schema",type:"text",mode:["create","edit"],filter:function e(t){if(t&&t.label.match(/^pg_/)){return false}return true},cache_node:"database",cache_level:"database"},{id:"comment",label:l("Comment"),type:"multiline",mode:["properties","create","edit"]},{id:"current_value",label:l("Current value"),type:"int",mode:["properties","edit"],group:l("Definition")},{id:"increment",label:l("Increment"),type:"int",mode:["properties","create","edit"],group:l("Definition")},{id:"start",label:l("Start"),type:"int",mode:["properties","create"],group:l("Definition"),disabled:function e(t){return!t.isNew()}},{id:"minimum",label:l("Minimum"),type:"int",mode:["properties","create","edit"],group:l("Definition")},{id:"maximum",label:l("Maximum"),type:"int",mode:["properties","create","edit"],group:l("Definition")},{id:"cache",label:l("Cache"),type:"int",mode:["properties","create","edit"],group:l("Definition"),min:1},{id:"cycled",label:l("Cycled"),type:"switch",mode:["properties","create","edit"],group:l("Definition")},a.SecurityGroupSchema,{id:"acl",label:l("Privileges"),type:"text",group:l("Security"),mode:["properties"],disabled:true},{id:"relacl",label:l("Privileges"),group:"security",model:a.Node.PrivilegeRoleModel.extend({privileges:["r","w","U"]}),uniqueCol:["grantee","grantor"],mode:["edit","create"],editable:false,type:"collection",canAdd:true,canDelete:true,control:"unique-col-collection"},{id:"securities",label:l("Security labels"),canAdd:true,model:a.SecLabelModel,editable:false,type:"collection",canEdit:false,group:"security",mode:["edit","create"],canDelete:true,control:"unique-col-collection",min_version:90200,uniqueCol:["provider"]}],validate:function e(){var t=undefined,i=this.get("minimum"),n=this.get("maximum"),r=this.get("start");if(d.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=l("Name cannot be empty.");this.errorModel.set("name",t);return t}else{this.errorModel.unset("name")}if(d.isUndefined(this.get("seqowner"))||String(this.get("seqowner")).replace(/^\s+|\s+$/g,"")==""){t=l("Owner cannot be empty.");this.errorModel.set("seqowner",t);return t}else{this.errorModel.unset("seqowner")}if(d.isUndefined(this.get("schema"))||String(this.get("schema")).replace(/^\s+|\s+$/g,"")==""){t=l("Schema cannot be empty.");this.errorModel.set("schema",t);return t}else{this.errorModel.unset("schema")}if(!this.isNew()){if(d.isUndefined(this.get("current_value"))||String(this.get("current_value")).replace(/^\s+|\s+$/g,"")==""){t=l("Current value cannot be empty.");this.errorModel.set("current_value",t);return t}else{this.errorModel.unset("current_value")}if(d.isUndefined(this.get("increment"))||String(this.get("increment")).replace(/^\s+|\s+$/g,"")==""){t=l("Increment value cannot be empty.");this.errorModel.set("increment",t);return t}else{this.errorModel.unset("increment")}if(d.isUndefined(this.get("minimum"))||String(this.get("minimum")).replace(/^\s+|\s+$/g,"")==""){t=l("Minimum value cannot be empty.");this.errorModel.set("minimum",t);return t}else{this.errorModel.unset("minimum")}if(d.isUndefined(this.get("maximum"))||String(this.get("maximum")).replace(/^\s+|\s+$/g,"")==""){t=l("Maximum value cannot be empty.");this.errorModel.set("maximum",t);return t}else{this.errorModel.unset("maximum")}if(d.isUndefined(this.get("cache"))||String(this.get("cache")).replace(/^\s+|\s+$/g,"")==""){t=l("Cache value cannot be empty.");this.errorModel.set("cache",t);return t}else{this.errorModel.unset("cache")}}var o=l("Minimum value must be less than maximum value."),a=l("Start value cannot be less than minimum value."),s=l("Start value cannot be greater than maximum value.");if(d.isEmpty(i)||d.isEmpty(n))return null;if(i==0&&n==0||parseInt(i,10)>=parseInt(n,10)){this.errorModel.set("minimum",o);return o}else{this.errorModel.unset("minimum")}if(r&&i&&parseInt(r)<parseInt(i)){this.errorModel.set("start",a);return a}else{this.errorModel.unset("start")}if(r&&n&&parseInt(r)>parseInt(n)){this.errorModel.set("start",s);return s}else{this.errorModel.unset("start")}return null}})})}return a.Nodes["sequence"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(10),i(13),i(11),i(7)],r=function(i,e,s,a,t,l,d,c,n,r){if(!d.Nodes["coll-synonym"]){l.Browser.Nodes["coll-synonym"]=l.Browser.Collection.extend({node:"synonym",label:i("Synonyms"),type:"coll-synonym",columns:["name","owner","is_public_synonym"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})}if(!d.Nodes["synonym"]){l.Browser.Nodes["synonym"]=n.SchemaChildNode.extend({type:"synonym",dialogHelp:e("help.static",{filename:"synonym_dialog.html"}),label:i("Synonym"),collection_type:"coll-synonym",hasSQL:true,hasDepends:true,parent_type:["schema","catalog"],Init:function e(){if(this.initialized)return;this.initialized=true;d.add_menus([{name:"create_synonym_on_coll",node:"coll-synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:true},enable:"canCreate"},{name:"create_synonym",node:"synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:true},enable:"canCreate"},{name:"create_synonym",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:true},enable:"canCreate"}])},model:l.Browser.Node.Model.extend({isNew:function e(){return!this.fetchFromServer},idAttribute:"name",initialize:function e(t,i){var n=a.size(t)===0;if(n){var r=d.serverInfo[i.node_info.server._id].user;var o=i.node_info.schema;this.set({owner:r.name,synobjschema:o._label,schema:o._label,targettype:"r"},{silent:true})}else{this.fetchFromServer=true}l.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:i("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck"},{id:"owner",label:i("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:true,control:"node-list-by-name",node:"role",visible:false},{id:"schema",label:i("Schema"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:function e(t){return!t.isNew()},node:"schema",control:"node-list-by-name",cache_node:"database",cache_level:"database"},{id:"targettype",label:i("Target type"),cell:"string",disabled:"inSchema",group:i("Definition"),select2:{width:"50%",allowClear:false},options:function e(){return[{label:i("Function"),value:"f"},{label:i("Package"),value:"P"},{label:i("Procedure"),value:"p"},{label:i("Public Synonym"),value:"s"},{label:i("Sequence"),value:"S"},{label:i("Table"),value:"r"},{label:i("View"),value:"v"}]},control:"select2"},{id:"synobjschema",label:i("Target schema"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Definition"),deps:["targettype"],select2:{allowClear:false},control:"node-list-by-name",node:"schema",filter:function e(t){var i=["pg_catalog","sys","dbo","pgagent","information_schema","dbms_job_procedure"];return t&&a.indexOf(i,t.label)==-1},disabled:function e(t){if(!t.inSchema.apply(this,[t])){var i=t.get("targettype")=="s";if(i){t.set("synobjschema","public",{silent:true});return true}else{return false}}return true}},{id:"synobjname",label:i("Target object"),cell:"string",type:"text",disabled:"inSchema",group:i("Definition"),deps:["targettype","synobjschema"],control:"node-ajax-options",options:function e(t){var i=t.model.get("targettype");var n=t.model.get("synobjschema");var r=[];var o=t.field.get("schema_node"),a=o.generate_url.apply(o,[null,"get_target_objects",t.field.get("node_data"),false,t.field.get("node_info")]);s.ajax({type:"GET",timeout:3e4,url:a,cache:false,async:false,data:{trgTyp:i,trgSchema:n}}).done(function(e){r=e.data;return r}).fail(function(e,t,i){c.pgRespErrorNotify(e,i)});return r}},{id:"is_public_synonym",label:i("Public synonym?"),disabled:true,type:"switch",mode:["properties"],cell:"switch",options:{onText:i("Yes"),offText:i("No"),onColor:"success",offColor:"primary",size:"mini"}}],validate:function e(){var t=undefined;this.errorModel.clear();if(a.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=i("Name cannot be empty.");this.errorModel.set("name",t)}else if(a.isUndefined(this.get("synobjschema"))||String(this.get("synobjschema")).replace(/^\s+|\s+$/g,"")==""){t=i("Target schema cannot be empty.");this.errorModel.set("synobjschema",t)}else if(a.isUndefined(this.get("synobjname"))||String(this.get("synobjname")).replace(/^\s+|\s+$/g,"")==""){t=i("Target object cannot be empty.");this.errorModel.set("synobjname",t)}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=this.getTreeNodeHierarchy(i),o=r["server"];if(o&&o.server_type==="pg")return false;if(r["catalog"]!=undefined)return false;return true}})}return d.Nodes["synonym"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(12),i(13),i(11),i(7)],r=function(i,e,s,l,t,o,n,r,a,d){if(!o.Nodes["coll-type"]){o.Nodes["coll-type"]=o.Collection.extend({node:"type",label:i("Types"),type:"coll-type",columns:["name","typeowner","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})}var c=r.IntegerCell.extend({initialize:function e(){r.NumberCell.prototype.initialize.apply(this,arguments);r.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function e(){this.$el.empty();var t=this.model;var i=this.column;var n=this.column.get("editable");var r=l.isFunction(n)?!!n.apply(i,[t]):!!n;if(r){this.$el.addClass("editable")}else{this.$el.removeClass("editable")}this.delegateEvents();return this},remove:r.Extension.DependentCell.prototype.remove});var u=r.Extension.NodeAjaxOptionsCell.extend({initialize:function e(){r.Extension.NodeAjaxOptionsCell.prototype.initialize.apply(this,arguments);r.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function e(){var t=this.model,i=this.column,n=this.column.get("editable"),r=this.$el.find("select").first();var o=l.isFunction(n)?!!n.apply(i,[t]):!!n;if(o){this.$el.addClass("editable");r.prop("disabled",false)}else{this.$el.removeClass("editable");r.prop("disabled",true)}this.delegateEvents();return this},remove:r.Extension.DependentCell.prototype.remove});var f=n.CompositeModel=o.Node.Model.extend({idAttribute:"attnum",defaults:{attnum:undefined,member_name:undefined,type:undefined,tlength:undefined,is_tlength:false,precision:undefined,is_precision:false,collation:undefined,min_val:undefined,max_val:undefined},type_options:undefined,subtypes:undefined,schema:[{id:"member_name",label:i("Member Name"),type:"text",disabled:false,editable:true},{id:"type",label:i("Type"),control:"node-ajax-options",type:"text",url:"get_types",disabled:false,node:"type",cache_node:"domain",editable:true,cell:"node-ajax-options",select2:{allowClear:false},transform:function e(t,i){i.model.type_options=t;return t}},{id:"tlength",label:i("Length/precision"),deps:["type"],type:"text",disabled:false,cell:c,editable:function e(t){var i=t.get("type");if(t.type_options){l.each(t.type_options,function(e){if(i==e.value){if(e.length){t.set("is_tlength",true,{silent:true});t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true})}else{t.set("is_tlength",false,{silent:true})}}})}return t.get("is_tlength")}},{id:"precision",label:i("Scale"),deps:["type"],type:"text",disabled:false,cell:c,editable:function e(t){var i=t.get("type");if(t.type_options){l.each(t.type_options,function(e){if(i==e.value){if(e.precision){t.set("is_precision",true,{silent:true});t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true})}else{t.set("is_precision",false,{silent:true})}}})}return t.get("is_precision")}},{id:"collation",label:i("Collation"),cell:u,deps:["type"],select2:{allowClear:false},control:"node-ajax-options",editable:function e(t){var i=t.get("type"),n=false;if(t.type_options){l.each(t.type_options,function(e){if(i==e.value){if(e.is_collatable){n=true}}})}if(n){setTimeout(function(){t.set("collspcname","",{silent:true})},10)}return n},type:"text",disabled:false,url:"get_collations",node:"type"}],validate:function e(){var t=null;this.errorModel.clear();if(l.isUndefined(this.get("member_name"))||l.isNull(this.get("member_name"))||String(this.get("member_name")).replace(/^\s+|\s+$/g,"")==""){t=i("Please specify the value for member name.");this.errorModel.set("member_name",t);return t}else if(l.isUndefined(this.get("type"))||l.isNull(this.get("type"))||String(this.get("type")).replace(/^\s+|\s+$/g,"")==""){t=i("Please specify the type.");this.errorModel.set("type",t);return t}else if(this.get("is_tlength")&&!l.isUndefined(this.get("tlength"))){if(this.get("tlength")<this.get("min_val"))t=i("Length/precision should not be less than %(value)s",{value:this.get("min_val")});if(this.get("tlength")>this.get("max_val"))t=i("Length/precision should not be greater than %(value)s",{value:this.get("max_val")});if(t){this.errorModel.set("tlength",t);return t}}else if(this.get("is_precision")&&!l.isUndefined(this.get("precision"))){if(this.get("precision")<this.get("min_val"))t=i("Scale should not be less than %(value)s",{value:this.get("min_val")});if(this.get("precision")>this.get("max_val"))t=i("Scale should not be greater than %(value)s",{value:this.get("max_val")});if(t){this.errorModel.set("precision",t);return t}}return null}});var h=n.EnumModel=o.Node.Model.extend({defaults:{label:undefined},schema:[{id:"label",label:i("Label"),type:"text",disabled:false,cellHeaderClasses:"width_percent_99",editable:function e(t){return l.isUndefined(t.get("label"))}}],validate:function e(){return null}});if(!o.Nodes["type"]){o.Nodes["type"]=a.SchemaChildNode.extend({type:"type",sqlAlterHelp:"sql-altertype.html",sqlCreateHelp:"sql-createtype.html",dialogHelp:e("help.static",{filename:"type_dialog.html"}),label:i("Type"),collection_type:"coll-type",hasSQL:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;o.add_menus([{name:"create_type_on_coll",node:"coll-type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:true},enable:"canCreate"},{name:"create_type",node:"type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:true},enable:"canCreate"},{name:"create_type",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:i("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:false},enable:"canCreate"}])},ext_funcs:undefined,model:o.Node.Model.extend({defaults:{name:undefined,oid:undefined,is_sys_type:false,typtype:undefined},initialize:function e(t,i){if(l.size(t)===0){var n=o.serverInfo[i.node_info.server._id].user,r=i.node_info.schema;this.set({typeowner:n.name,schema:r._label},{silent:true})}o.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:i("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"schemaCheck"},{id:"oid",label:i("OID"),cell:"string",type:"text",mode:["properties"],disabled:true},{id:"typeowner",label:i("Owner"),cell:"string",control:"node-list-by-name",type:"text",mode:["properties","create","edit"],node:"role",disabled:"inSchema",select2:{allowClear:false}},{id:"schema",label:i("Schema"),cell:"string",type:"text",mode:["create","edit"],node:"schema",disabled:"schemaCheck",filter:function e(t){if(t&&t.label.match(/^pg_/)){return false}return true},cache_node:"database",cache_level:"database",control:"node-list-by-name",select2:{allowClear:false}},{id:"typtype",label:i("Type"),mode:["create","edit"],disabled:"inSchemaWithModelCheck",group:i("Definition"),select2:{allowClear:false},options:function e(){return[{label:"Composite",value:"c"},{label:"Enumeration",value:"e"},{label:"External",value:"b"},{label:"Range",value:"r"},{label:"Shell",value:"p"}]},control:n.Select2Control.extend({render:function e(){n.Select2Control.prototype.render.apply(this,arguments);if(this.model.isNew()){this.model.set({typtype:"c"})}return this}})},{id:"composite",label:i("Composite Type"),model:f,editable:true,type:"collection",group:i("Definition"),mode:["edit","create"],control:"unique-col-collection",uniqueCol:["member_name"],canAdd:true,canEdit:false,canDelete:true,disabled:"inSchema",deps:["typtype"],visible:function e(t){return t.get("typtype")==="c"}},{id:"enum",label:i("Enumeration type"),model:h,editable:true,type:"collection",group:i("Definition"),mode:["edit","create"],canAdd:true,canEdit:false,canDelete:function e(t){if(t.isNew()){return true}else{return false}},disabled:"inSchema",deps:["typtype"],control:"unique-col-collection",uniqueCol:["label"],visible:function e(t){return t.get("typtype")==="e"}},{type:"nested",control:"plain-fieldset",group:i("Definition"),mode:["edit","create"],visible:function e(t){return t.get("typtype")==="r"},deps:["typtype"],label:"",schema:[{id:"typname",label:i("Subtype"),cell:"string",control:"node-ajax-options",select2:{allowClear:true,placeholder:"",width:"100%"},url:"get_stypes",type:"text",mode:["properties","create","edit"],group:i("Range Type"),disabled:"inSchemaWithModelCheck",transform:function e(t,i){i.model.subtypes=t;return t}},{id:"opcname",label:i("Subtype operator class"),cell:"string",mode:["properties","create","edit"],group:i("Range Type"),disabled:"inSchemaWithModelCheck",deps:["typname"],control:"select",options:function e(){var t=this.model.get("typname"),i=this,n=[];if(!l.isUndefined(t)&&t!=""){var r=this.field.get("schema_node"),o=r.generate_url.apply(r,[null,"get_subopclass",this.field.get("node_data"),false,this.field.get("node_info")]);s.ajax({async:false,url:o,cache:false,data:{typname:t}}).done(function(e){n=e.data}).fail(function(){i.model.trigger("pgadmin:view:fetch:error",i.model,i.field)})}return n}},{id:"collname",label:i("Collation"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Range Type"),deps:["typname"],control:"node-ajax-options",url:"get_collations",select2:{allowClear:true,placeholder:"",width:"100%"},disabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}if(!t.isNew()){return true}var i=t.get("typname"),n=undefined;if(!l.isUndefined(i)){l.each(t.subtypes,function(e){if(i===e.label){n=e.is_collate}})}return n?false:true}},{id:"rngcanonical",label:i("Canonical function"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Range Type"),disabled:"inSchemaWithModelCheck",deps:["name","typname"],control:"select",options:function e(){var t=this.model.get("name"),i=this,n=[];if(!l.isUndefined(t)&&t!=""){var r=this.field.get("schema_node"),o=r.generate_url.apply(r,[null,"get_canonical",this.field.get("node_data"),false,this.field.get("node_info")]);s.ajax({async:false,url:o,cache:false,data:{name:t}}).done(function(e){n=e.data}).fail(function(){i.model.trigger("pgadmin:view:fetch:error",i.model,i.field)})}return n}},{id:"rngsubdiff",label:i("Subtype diff function"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Range Type"),disabled:"inSchemaWithModelCheck",deps:["opcname"],control:"select",options:function e(){var t=this.model.get("typname"),i=this.model.get("opcname"),n=this,r=[];if(!l.isUndefined(t)&&t!=""&&!l.isUndefined(i)&&i!=""){var o=this.field.get("schema_node"),a=o.generate_url.apply(o,[null,"get_stypediff",this.field.get("node_data"),false,this.field.get("node_info")]);s.ajax({async:false,url:a,cache:false,data:{typname:t,opcname:i}}).done(function(e){r=e.data}).fail(function(){n.model.trigger("pgadmin:view:fetch:error",n.model,n.field)})}return r}}]},{type:"nested",control:"tab",group:i("Definition"),label:i("External Type"),deps:["typtype"],mode:["create","edit"],tabPanelExtraClasses:"inline-tab-panel-padded",visible:function e(t){return t.get("typtype")==="b"},schema:[{id:"spacer_ctrl",group:i("Required"),mode:["edit","create"],type:"spacer"},{id:"typinput",label:i("Input function"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Required"),disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",transform:"external_func_combo",select2:{allowClear:true,placeholder:"",width:"100%"}},{id:"typoutput",label:i("Output function"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Required"),disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",transform:"external_func_combo",select2:{allowClear:true,placeholder:"",width:"100%"}},{id:"spacer_ctrl_optional_1",group:i("Optional-1"),mode:["edit","create"],type:"spacer"},{id:"typreceive",label:i("Receive function"),cell:"string",type:"text",group:i("Optional-1"),mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",transform:"external_func_combo",select2:{allowClear:true,placeholder:"",width:"100%"}},{id:"typsend",label:i("Send function"),cell:"string",group:i("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",transform:"external_func_combo",select2:{allowClear:true,placeholder:"",width:"100%"}},{id:"typmodin",label:i("Typmod in function"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Optional-1"),disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",select2:{allowClear:true,placeholder:"",width:"100%"},transform:function e(t){var i=[{label:"",value:""}];l.each(t,function(e){if(e.cbtype==="typmodin"||e.cbtype==="all"){i.push(e)}});return i}},{id:"typmodout",label:i("Typmod out function"),cell:"string",group:i("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",select2:{allowClear:true,placeholder:"",width:"100%"},transform:function e(t){var i=[{label:"",value:""}];l.each(t,function(e){if(e.cbtype==="typmodout"||e.cbtype==="all"){i.push(e)}});return i}},{id:"typlen",label:i("Internal length"),cell:"integer",group:i("Optional-1"),type:"int",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck"},{id:"variable",label:i("Variable?"),cell:"switch",group:i("Optional-1"),type:"switch",mode:["create","edit"],disabled:"inSchemaWithModelCheck"},{id:"typdefault",label:i("Default?"),cell:"string",group:i("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck"},{id:"typanalyze",label:i("Analyze function"),cell:"string",group:i("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",control:"node-ajax-options",url:"get_external_functions",transform:"external_func_combo",select2:{allowClear:true,placeholder:"",width:"100%"}},{id:"typcategory",label:i("Category type"),cell:"string",group:i("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",control:"select2",select2:{allowClear:true,placeholder:"",width:"100%"},options:[{label:"",value:""},{label:"Array types",value:"A"},{label:"Boolean types",value:"B"},{label:"Composite types",value:"C"},{label:"Date/time types",value:"D"},{label:"Enum types",value:"E"},{label:"Geometric types",value:"G"},{label:"Network address types",value:"I"},{label:"Numeric types",value:"N"},{label:"Pseudo-types",value:"P"},{label:"String types",value:"S"},{label:"Timespan types",value:"T"},{label:"User-defined types",value:"U"},{label:"Bit-string types",value:"V"},{label:"unknown type",value:"X"}]},{id:"typispreferred",label:i("Preferred?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",group:i("Optional-1")},{id:"spacer_ctrl_optional_2",group:i("Optional-2"),mode:["edit","create"],type:"spacer"},{id:"element",label:i("Element type"),cell:"string",control:"node-ajax-options",group:i("Optional-2"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",url:"get_types"},{id:"typdelim",label:i("Delimiter"),cell:"string",type:"text",mode:["properties","create","edit"],group:i("Optional-2"),disabled:"inSchemaWithModelCheck"},{id:"typalign",label:i("Alignment type"),cell:"string",group:i("Optional-2"),type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",control:"select2",select2:{allowClear:true,placeholder:"",width:"100%"},options:[{label:"",value:""},{label:"char",value:"c"},{label:"int2",value:"s"},{label:"int4",value:"i"},{label:"double",value:"d"}]},{id:"typstorage",label:i("Storage type"),type:"text",mode:["properties","create","edit"],group:i("Optional-2"),cell:"string",disabled:"inSchemaWithModelCheck",control:"select2",select2:{allowClear:true,placeholder:"",width:"100%"},options:[{label:"",value:""},{label:"PLAIN",value:"p"},{label:"EXTERNAL",value:"e"},{label:"MAIN",value:"m"},{label:"EXTENDED",value:"x"}]},{id:"typbyval",label:i("Passed by value?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",group:i("Optional-2")},{id:"is_collatable",label:i("Collatable?"),cell:"switch",min_version:90100,group:i("Optional-2"),type:"switch",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck"}]},{id:"alias",label:i("Alias"),cell:"string",type:"text",mode:["properties"],disabled:"inSchema"},o.SecurityGroupSchema,{id:"type_acl",label:i("Privileges"),cell:"string",type:"text",mode:["properties"],group:"security",disabled:"inSchema"},{id:"member_list",label:i("Members"),cell:"string",type:"text",mode:["properties"],group:i("Definition"),disabled:"inSchema",visible:function e(t){if(t.get("typtype")==="c"){return true}return false}},{id:"enum_list",label:i("Labels"),cell:"string",type:"text",mode:["properties"],group:i("Definition"),disabled:"inSchema",visible:function e(t){if(t.get("typtype")==="e"){return true}return false}},{id:"is_sys_type",label:i("System type?"),cell:"switch",type:"switch",mode:["properties"],disabled:"inSchema"},{id:"description",label:i("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"},{id:"typacl",label:i("Privileges"),type:"collection",group:"security",control:"unique-col-collection",model:o.Node.PrivilegeRoleModel.extend({privileges:["U"]}),mode:["edit","create"],canDelete:true,uniqueCol:["grantee"],deps:["typtype"],canAdd:function e(t){if(t.get("typtype")==="p"){var i=t.get("typacl");if(i.length>0)i.reset()}return!(t.get("typtype")==="p")}},{id:"seclabels",label:i("Security labels"),model:o.SecLabelModel,editable:false,type:"collection",group:"security",mode:["edit","create"],min_version:90100,canEdit:false,canDelete:true,control:"unique-col-collection",deps:["typtype"],canAdd:function e(t){if(t.get("typtype")==="p"){var i=t.get("seclabels");if(i.length>0)i.reset()}return!(t.get("typtype")==="p")}}],validate:function e(){var t;this.errorModel.clear();if(l.isUndefined(this.get("name"))||l.isNull(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=i("Name cannot be empty.");this.errorModel.set("name",t);return t}if(l.isUndefined(this.get("schema"))||l.isNull(this.get("schema"))||String(this.get("schema")).replace(/^\s+|\s+$/g,"")==""){t=i("Schema cannot be empty.");this.errorModel.set("schema",t);return t}if(l.isUndefined(this.get("typtype"))||l.isNull(this.get("typtype"))||String(this.get("typtype")).replace(/^\s+|\s+$/g,"")==""){t=i("Type cannot be empty.");this.errorModel.set("typtype",t);return t}if(this.get("typtype")=="r"){if(l.isUndefined(this.get("typname"))||l.isNull(this.get("typname"))||String(this.get("typname")).replace(/^\s+|\s+$/g,"")==""){t=i("Subtype name cannot be empty.");this.errorModel.set("typname",t);return t}}if(this.get("typtype")=="b"){if(l.isUndefined(this.get("typinput"))||l.isNull(this.get("typinput"))||String(this.get("typinput")).replace(/^\s+|\s+$/g,"")==""){t=i("Input function cannot be empty.");this.errorModel.set("typinput",t);return t}if(l.isUndefined(this.get("typoutput"))||l.isNull(this.get("typoutput"))||String(this.get("typoutput")).replace(/^\s+|\s+$/g,"")==""){t=i("Output function cannot be empty.");this.errorModel.set("typoutput",t);return t}}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},schemaCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return t.get("typtype")==="p"}}return true},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},inSchemaWithEditMode:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return true}else{return false}}return true},external_func_combo:function e(t){var i=[];l.each(t,function(e){if(e.cbtype=="all"){i.push(e)}});return i}})})}return o.Nodes["type"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(10),i(6),i(12),i(11),i(7)],r=function(o,e,t,u,i,n,f,a,s,r,l){if(!f.Nodes["coll-index"]){n.Browser.Nodes["coll-index"]=n.Browser.Collection.extend({node:"index",label:o("Indexes"),type:"coll-index",columns:["name","description"],hasStatistics:true,statsPrettifyFields:[o("Size"),o("Index size")],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})}var d=r.Extension.NodeAjaxOptionsCell.extend({initialize:function e(){r.Extension.NodeAjaxOptionsCell.prototype.initialize.apply(this,arguments);r.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function e(){var t=this.model,i=this.column,n=this.column.get("editable"),r=this.$el.find("select").first();var o=u.isFunction(n)?!!n.apply(i,[t]):!!n;if(o){this.$el.addClass("editable");r.prop("disabled",false)}else{this.$el.removeClass("editable");r.prop("disabled",true)}this.delegateEvents();return this},remove:r.Extension.DependentCell.prototype.remove});var c=n.Browser.Node.Model.extend({defaults:{colname:undefined,collspcname:undefined,op_class:undefined,sort_order:false,nulls:false,is_sort_nulls_applicable:true},schema:[{id:"colname",label:o("Column"),cell:"node-list-by-name",type:"text",disabled:"inSchemaWithModelCheck",editable:function e(t){if(t instanceof i.Collection){return false}return!t.inSchemaWithModelCheck.apply(this,arguments)},control:"node-list-by-name",node:"column"},{id:"collspcname",label:o("Collation"),cell:d,type:"text",disabled:"inSchemaWithModelCheck",editable:function e(t){if(t instanceof i.Collection){return false}return!t.inSchemaWithModelCheck.apply(this,arguments)},control:"node-ajax-options",url:"get_collations",node:"index"},{id:"op_class",label:o("Operator class"),cell:d,tags:true,type:"text",disabled:"checkAccessMethod",editable:function e(t){if(t instanceof i.Collection){return false}else if(t.inSchemaWithModelCheck.apply(this,arguments)){return false}return!t.checkAccessMethod.apply(this,arguments)},control:"node-ajax-options",url:"get_op_class",node:"index",deps:["amname"],transform:function e(t,i){var n=i.model.top.get("amname"),r=t["btree"];if(u.isUndefined(n))return r;u.each(t,function(e,t){if(n===t){r=e}});return r}},{id:"sort_order",label:o("Sort order"),cell:r.Extension.TableChildSwitchCell,type:"switch",editable:function e(t){if(t instanceof i.Collection){return false}else if(t.inSchemaWithModelCheck.apply(this,arguments)){return false}else if(t.top.get("amname")==="btree"){t.set("is_sort_nulls_applicable",true);return true}else{t.set("is_sort_nulls_applicable",false);return false}},deps:["amname"],options:{onText:"DESC",offText:"ASC"}},{id:"nulls",label:o("NULLs"),cell:r.Extension.TableChildSwitchCell,type:"switch",editable:function e(t){if(t instanceof i.Collection){return false}else if(t.inSchemaWithModelCheck.apply(this,arguments)){return false}else if(t.top.get("amname")==="btree"){t.set("is_sort_nulls_applicable",true);return true}else{t.set("is_sort_nulls_applicable",false);return false}},deps:["amname","sort_order"],options:{onText:"FIRST",offText:"LAST"}}],validate:function e(){this.errorModel.clear();if(u.isUndefined(this.get("colname"))||String(this.get("colname")).replace(/^\s+|\s+$/g,"")==""){var t=o("Column Name cannot be empty.");this.errorModel.set("colname",t);return t}},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(t.top.node_info&&"schema"in t.top.node_info){if(t.top.isNew()){return false}else{return true}}return true},checkAccessMethod:function e(t){var i=t.top;if(u.isUndefined(i.get("amname"))||u.isNull(i.get("amname"))||String(i.get("amname")).replace(/^\s+|\s+$/g,"")==""||i.get("amname")==="btree"){if(t.get("sort_order")==true&&t.previous("sort_order")==false){setTimeout(function(){t.set("nulls",true)},10)}}else{t.set("is_sort_nulls_applicable",false)}return false}});if(!f.Nodes["index"]){n.Browser.Nodes["index"]=f.Node.extend({parent_type:["table","view","mview","partition"],collection_type:["coll-table","coll-view"],sqlAlterHelp:"sql-alterindex.html",sqlCreateHelp:"sql-createindex.html",dialogHelp:e("help.static",{filename:"index_dialog.html"}),type:"index",label:o("Index"),hasSQL:true,hasDepends:true,hasStatistics:true,width:f.stdW.md+"px",statsPrettifyFields:[o("Size"),o("Index size")],Init:function e(){if(this.initialized)return;this.initialized=true;f.add_menus([{name:"create_index_on_coll",node:"coll-index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:true},enable:"canCreate"},{name:"create_index",node:"index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:true},enable:"canCreate"},{name:"create_index_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:true},enable:"canCreate"},{name:"create_index_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:true},enable:"canCreate"},{name:"create_index_onMatView",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:o("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:true},enable:"canCreate"}])},canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema,model:n.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,nspname:undefined,tabname:undefined,spcname:undefined,amname:"btree"},schema:[{id:"name",label:o("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:o("OID"),cell:"string",type:"int",disabled:true,mode:["edit","properties"]},{id:"spcname",label:o("Tablespace"),cell:"string",control:"node-list-by-name",node:"tablespace",select2:{allowClear:true},type:"text",mode:["properties","create","edit"],disabled:"inSchema",filter:function e(t){if(t&&t.label.match(/pg_global/)){return false}return true}},{id:"amname",label:o("Access Method"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",url:"get_access_methods",group:o("Definition"),select2:{allowClear:true},control:s.NodeAjaxOptionsControl.extend({onChange:function e(){s.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var n=this,t=n.model.get("amname"),i=n.model.previous("amname");if(t!=i&&n.model.get("columns").length!==0){var r=o("Changing access method will clear columns collection");a.confirm(r,function(){var e=n.model.get("columns"),t=e.length;for(var i=t-1;i>=0;i--){e.remove(e.models[i])}},function(){setTimeout(function(){n.model.set("amname",i)},10)})}}})},{id:"columns_csv",label:o("Columns"),cell:"string",type:"text",disabled:"inSchema",mode:["properties"],group:o("Definition")},{id:"include",label:o("Include columns"),type:"array",group:o("Definition"),editable:false,canDelete:true,canAdd:true,mode:["properties"],disabled:"inSchemaWithModelCheck",visible:function e(t){if(!u.isUndefined(t.node_info)&&!u.isUndefined(t.node_info.server)&&!u.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=11e4)return true;return false},control:s.MultiSelectAjaxControl.extend({defaults:u.extend({},s.NodeListByNameControl.prototype.defaults,{select2:{allowClear:false,width:"style",multiple:true,placeholder:o("Select the column(s)")}})}),transform:function e(t){var i=[];if(t&&u.isArray(t)){u.each(t,function(e){i.push({label:e.label,value:e.label,image:"icon-column"})})}return i},node:"column"},{id:"fillfactor",label:o("Fill factor"),cell:"string",type:"int",disabled:"inSchema",mode:["create","edit","properties"],min:10,max:100,group:o("Definition")},{id:"indisunique",label:o("Unique?"),cell:"string",type:"switch",disabled:"inSchemaWithModelCheck",group:o("Definition")},{id:"indisclustered",label:o("Clustered?"),cell:"string",type:"switch",disabled:"inSchema",group:o("Definition")},{id:"indisvalid",label:o("Valid?"),cell:"string",type:"switch",disabled:true,mode:["properties"],group:o("Definition")},{id:"indisprimary",label:o("Primary?"),cell:"string",type:"switch",disabled:true,mode:["properties"],group:o("Definition")},{id:"is_sys_idx",label:o("System index?"),cell:"string",type:"switch",disabled:true,mode:["properties"]},{id:"isconcurrent",label:o("Concurrent build?"),cell:"string",type:"switch",disabled:"inSchemaWithModelCheck",mode:["create","edit"],group:o("Definition")},{id:"indconstraint",label:o("Constraint"),cell:"string",type:"text",disabled:"inSchemaWithModelCheck",mode:["create","edit"],control:"sql-field",visible:true,group:o("Definition")},{id:"columns",label:o("Columns"),type:"collection",deps:["amname"],group:o("Definition"),model:c,mode:["edit","create"],canAdd:function e(t){if(t.isNew()){return true}else{return false}},canEdit:false,canDelete:function e(t){if(t.isNew()){return true}else{return false}},control:"unique-col-collection",uniqueCol:["colname"],columns:["colname","op_class","sort_order","nulls","collspcname"]},{id:"include",label:o("Include columns"),type:"array",group:o("Definition"),editable:false,canDelete:true,canAdd:true,mode:["edit","create"],disabled:"inSchemaWithModelCheck",visible:function e(t){if(!u.isUndefined(t.node_info)&&!u.isUndefined(t.node_info.server)&&!u.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=11e4)return true;return false},control:s.MultiSelectAjaxControl.extend({defaults:u.extend({},s.NodeListByNameControl.prototype.defaults,{select2:{allowClear:false,width:"style",multiple:true,placeholder:o("Select the column(s)")}})}),transform:function e(t){var i=[];if(t&&u.isArray(t)){u.each(t,function(e){i.push({label:e.label,value:e.label,image:"icon-column"})})}return i},node:"column"},{id:"description",label:o("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],validate:function e(t){var i;if(t&&t.length==0){this.errorModel.clear();return null}else{this.errorModel.clear()}if(u.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){i=o("Name cannot be empty.");this.errorModel.set("name",i);return i}if(u.isUndefined(this.get("spcname"))||String(this.get("spcname")).replace(/^\s+|\s+$/g,"")==""){i=o("Tablespace cannot be empty.");this.errorModel.set("spcname",i);return i}if(u.isUndefined(this.get("amname"))||String(this.get("amname")).replace(/^\s+|\s+$/g,"")==""){i=o("Access method cannot be empty.");this.errorModel.set("amname",i);return i}var n=this.get("columns");if(n&&n.length>0){if(!u.every(n.pluck("colname"))){i=o("You must specify column name.");this.errorModel.set("columns",i);return i}}else if(n){i=o("You must specify at least one column.");this.errorModel.set("columns",i);return i}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},inSchemaWithColumnCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{if(!u.isUndefined(t.get("attnum"))&&t.get("attnum")>=1){return false}else{return true}}}return true}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=f.tree,o=i,a=t,s=[],l=false,d=false,c=this.getTreeNodeHierarchy(o).server.version;while(o){if(!l&&u.indexOf(["table","partition"],a._type)>-1){l=true;if("is_partitioned"in a&&a.is_partitioned&&c<11e4){d=true}}if(u.indexOf(["schema"],a._type)>-1)return!d;s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(u.indexOf(s,"catalog")>-1){return false}else{return!d}}})}return f.Nodes["index"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(10),i(11),i(7)],r=function(l,e,d,a,t,i,c,n,u,r){if(!c.Nodes["coll-trigger"]){i.Browser.Nodes["coll-trigger"]=i.Browser.Collection.extend({node:"trigger",label:l("Triggers"),type:"coll-trigger",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})}if(!c.Nodes["trigger"]){i.Browser.Nodes["trigger"]=c.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"trigger",label:l("Trigger"),hasSQL:true,hasDepends:true,width:c.stdW.sm+"px",sqlAlterHelp:"sql-altertrigger.html",sqlCreateHelp:"sql-createtrigger.html",dialogHelp:e("help.static",{filename:"trigger_dialog.html"}),Init:function e(){if(this.initialized)return;this.initialized=true;c.add_menus([{name:"create_trigger_on_coll",node:"coll-trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"create_trigger",node:"trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"create_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"create_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"enable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"enable_trigger",category:"connect",priority:3,label:l("Enable trigger"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable"},{name:"disable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"disable_trigger",category:"drop",priority:3,label:l("Disable trigger"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable"},{name:"create_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:true},enable:"canCreate"}])},callbacks:{enable_trigger:function e(t){var i=t||{},n=this,r=c.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;var s=a;d.ajax({url:n.generate_url(o,"enable",a,true),type:"PUT",data:{enable:true},dataType:"json"}).done(function(e){if(e.success==1){u.success(e.info);r.removeIcon(o);s.icon="icon-trigger";r.addIcon(o,{icon:s.icon});r.unload(o);r.setInode(false);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){u.pgRespErrorNotify(e,i);r.unload(o)})},disable_trigger:function e(t){var i=t||{},n=this,r=c.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;var s=a;d.ajax({url:n.generate_url(o,"enable",a,true),type:"PUT",data:{enable:false},dataType:"json"}).done(function(e){if(e.success==1){u.success(e.info);r.removeIcon(o);s.icon="icon-trigger-bad";r.addIcon(o,{icon:s.icon});r.unload(o);r.setInode(false);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){u.pgRespErrorNotify(e,i,l("Disable trigger failed"));r.unload(o)})}},canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,is_row_trigger:true,fires:"BEFORE"},schema:[{id:"name",label:l("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:l("OID"),cell:"string",type:"int",disabled:true,mode:["properties"]},{id:"is_enable_trigger",label:l("Trigger enabled?"),type:"switch",mode:["edit","properties"],group:l("Definition"),disabled:function e(){if(this.node_info&&("catalog"in this.node_info||"view"in this.node_info)){return true}return false}},{id:"is_row_trigger",label:l("Row trigger?"),type:"switch",group:l("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],disabled:function e(t){if(a.has(t,"node_info")&&a.has(t.node_info,"table")&&a.has(t.node_info.table,"is_partitioned")&&t.node_info.table.is_partitioned&&t.node_info.server.version<11e4){setTimeout(function(){t.set("is_row_trigger",false)},10);return true}var i=t.get("is_constraint_trigger");if(!t.inSchemaWithModelCheck.apply(this,[t])){if(!a.isUndefined(i)&&i===true){setTimeout(function(){t.set("is_row_trigger",true)},10);return true}else{return false}}else{var n=t.get("is_row_trigger");if(!a.isUndefined(n)&&t.node_info["server"]["server_type"]=="ppas"){return false}return true}}},{id:"is_constraint_trigger",label:l("Constraint trigger?"),type:"switch",mode:["create","edit","properties"],group:l("Definition"),disabled:function e(t){if(a.has(t,"node_info")&&a.has(t.node_info,"table")&&a.has(t.node_info.table,"is_partitioned")&&t.node_info.table.is_partitioned||a.indexOf(Object.keys(t.node_info),"view")!=-1){setTimeout(function(){t.set("is_constraint_trigger",false)},10);return true}return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"tgdeferrable",label:l("Deferrable?"),type:"switch",group:l("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],disabled:function e(t){var i=t.get("is_constraint_trigger");if(!t.inSchemaWithModelCheck.apply(this,[t])){if(!a.isUndefined(i)&&i===true){return false}else{if(t.get("tgdeferrable")){setTimeout(function(){t.set("tgdeferrable",false)},10)}return true}}else{return true}}},{id:"tginitdeferred",label:l("Deferred?"),type:"switch",group:l("Definition"),mode:["create","edit","properties"],deps:["tgdeferrable","is_constraint_trigger"],disabled:function e(t){var i=t.get("tgdeferrable");if(!t.inSchemaWithModelCheck.apply(this,[t])){if(!a.isUndefined(i)&&i){return false}else{if(t.get("tginitdeferred")){setTimeout(function(){t.set("tginitdeferred",false)},10)}return t.get("is_constraint_trigger")?false:true}}else{return true}}},{id:"tfunction",label:l("Trigger function"),type:"text",disabled:"inSchemaWithModelCheck",mode:["create","edit","properties"],group:l("Definition"),control:"node-ajax-options",url:"get_triggerfunctions",cache_node:"trigger_function"},{id:"tgargs",label:l("Arguments"),cell:"string",group:l("Definition"),type:"text",mode:["create","edit","properties"],deps:["tfunction"],disabled:function e(t){var i=t.get("tfunction"),n=t.node_info["server"]["server_type"];if(!t.inSchemaWithModelCheck.apply(this,[t])){if(n==="ppas"&&!a.isUndefined(i)&&i==="Inline EDB-SPL"){t.set("tgargs",undefined);return true}else{return false}}else{return true}}},{id:"fires",label:l("Fires"),deps:["is_constraint_trigger"],mode:["create","edit","properties"],group:l("Events"),options:function e(t){var i=[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"}],n=[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"},{label:"INSTEAD OF",value:"INSTEAD OF"}];if(a.indexOf(Object.keys(t.model.node_info),"table")!=-1){return i}else{return n}},control:"select2",select2:{allowClear:false,width:"100%"},disabled:function e(t){var i=t.get("is_constraint_trigger");if(!t.inSchemaWithModelCheck.apply(this,[t])){if(!a.isUndefined(i)&&i===true){setTimeout(function(){t.set("fires","AFTER")},10);return true}else{return false}}else{var n=t.get("fires");if(!a.isUndefined(n)&&t.node_info["server"]["server_type"]=="ppas"){return false}return true}}},{type:"nested",control:"fieldset",mode:["create","edit","properties"],label:l("Events"),group:l("Events"),contentClass:"row",schema:[{id:"evnt_insert",label:l("INSERT"),type:"switch",mode:["create","edit","properties"],group:l("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_insert");if(!a.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"evnt_update",label:l("UPDATE"),type:"switch",mode:["create","edit","properties"],group:l("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_update");if(!a.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"evnt_delete",label:l("DELETE"),type:"switch",mode:["create","edit","properties"],group:l("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_delete");if(!a.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"evnt_truncate",label:l("TRUNCATE"),type:"switch",group:l("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("is_constraint_trigger"),n=t.get("is_row_trigger"),r=t.node_info["server"]["server_type"];if(!t.inSchemaWithModelCheck.apply(this,[t])){if(r==="ppas"&&!a.isUndefined(i)&&!a.isUndefined(n)&&i===false&&n===false){return false}else{return true}}else{return true}}}]},{id:"whenclause",label:l("When"),type:"text",disabled:"inSchemaWithModelCheck",mode:["create","edit","properties"],control:"sql-field",visible:true,group:l("Events")},{id:"columns",label:l("Columns"),url:"nodes",control:"node-list-by-name",cache_node:"column",type:"array",select2:{multiple:true},deps:["evnt_update"],node:"column",group:l("Events"),disabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}if(!t.isNew()){return true}var i=t.get("evnt_update");if(!a.isUndefined(i)&&i){return false}return true}},{id:"tgoldtable",label:l("Old table"),type:"text",group:l("Transition"),cell:"string",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:"disableTransition"},{id:"tgnewtable",label:l("New table"),type:"text",group:l("Transition"),cell:"string",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:"disableTransition"},{id:"prosrc",label:l("Code"),group:l("Code"),type:"text",mode:["create","edit"],deps:["tfunction"],tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl,visible:true,disabled:function e(t){var i=t.get("tfunction"),n=t.node_info["server"]["server_type"];if(n==="ppas"&&!a.isUndefined(i)&&i==="Inline EDB-SPL")return false;else return true}},{id:"is_sys_trigger",label:l("System trigger?"),cell:"string",type:"switch",disabled:"inSchemaWithModelCheck",mode:["properties"]},{id:"description",label:l("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],validate:function e(t){var i;this.errorModel.clear();if(t&&t.length==0){return null}if(a.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){i=l("Name cannot be empty.");this.errorModel.set("name",i);return i}if(a.isUndefined(this.get("tfunction"))||String(this.get("tfunction")).replace(/^\s+|\s+$/g,"")==""){i=l("Trigger function cannot be empty.");this.errorModel.set("tfunction",i);return i}if(!this.get("evnt_truncate")&&!this.get("evnt_delete")&&!this.get("evnt_update")&&!this.get("evnt_insert")){i=l("Specify at least one event.");this.errorModel.set("evnt_truncate"," ");this.errorModel.set("evnt_delete"," ");this.errorModel.set("evnt_update"," ");this.errorModel.set("evnt_insert",i);return i}if(!a.isUndefined(this.get("tfunction"))&&this.get("tfunction")==="Inline EDB-SPL"&&(a.isUndefined(this.get("prosrc"))||String(this.get("prosrc")).replace(/^\s+|\s+$/g,"")=="")){i=l("Trigger code cannot be empty.");this.errorModel.set("prosrc",i);return i}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},inSchemaWithColumnCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{if(!a.isUndefined(t.get("attnum"))&&t.get("attnum")>=1){return false}else{return true}}}return true},disableTransition:function e(t){var i=true,n=null,r=this.name,o=0;if(a.indexOf(Object.keys(t.node_info),"table")==-1||t.node_info.server.version<1e5)return true;if(r=="tgoldtable")n="evnt_delete";else if(r=="tgnewtable")n="evnt_insert";if(t.get("evnt_insert"))o++;if(t.get("evnt_update"))o++;if(t.get("evnt_delete"))o++;if(!t.get("is_constraint_trigger")&&t.get("fires")=="AFTER"&&(t.get("evnt_update")||t.get(n))&&o==1){if(t.get("evnt_update")&&a.size(t.get("columns"))>=1&&t.get("columns")[0]!="")i=true;else i=false}i&&setTimeout(function(){if(t.get(r)){t.set(r,null)}},10);return i}}),canCreate:r.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function e(t,i,n){var r=this.getTreeNodeHierarchy(i);if("view"in r){return false}return t.icon==="icon-trigger-bad"&&this.canCreate.apply(this,[t,i,n])},canCreate_with_trigger_disable:function e(t,i,n){var r=this.getTreeNodeHierarchy(i);if("view"in r){return false}return t.icon==="icon-trigger"&&this.canCreate.apply(this,[t,i,n])}})}return c.Nodes["trigger"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(0),i(1),i(8),i(3),i(5),i(7)],r=function(e,t,i,n,r,o){if(!o.Nodes["coll-catalog_object_column"]){r.Browser.Nodes["coll-catalog_object_column"]=r.Browser.Collection.extend({node:"catalog_object_column",label:e("catalog_object_column"),type:"coll-catalog_object_column",columns:["attname","attnum","cltype","description"],canDrop:false,canDropCascade:false})}if(!o.Nodes["catalog_object_column"]){r.Browser.Nodes["catalog_object_column"]=r.Browser.Node.extend({parent_type:"catalog_object",type:"catalog_object_column",label:e("catalog_object_column"),hasSQL:false,hasScriptTypes:[],hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true},model:r.Browser.Node.Model.extend({defaults:{attname:undefined,attowner:undefined,atttypid:undefined,attnum:undefined,cltype:undefined,collspcname:undefined,attacl:undefined,description:undefined},schema:[{id:"attname",label:e("Column"),cell:"string",type:"text",disabled:true},{id:"attowner",label:e("Owner"),cell:"string",type:"text",disabled:true},{id:"attnum",label:e("Position"),cell:"string",type:"text",disabled:true},{id:"cltype",label:e("Data type"),cell:"string",group:e("Definition"),type:"text",disabled:true},{id:"collspcname",label:e("Collation"),cell:"string",group:e("Definition"),type:"text",disabled:true},{id:"attacl",label:e("Privileges"),cell:"string",group:e("Security"),type:"text",disabled:true},{id:"description",label:e("Comment"),cell:"string",type:"multiline",disabled:true}]})})}return o.Nodes["catalog_object_column"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(13),i(11),i(16),i(63)],r=function(o,e,t,a,i,s,n,r,l){if(!s.Nodes["coll-view"]){s.Nodes["coll-view"]=s.Collection.extend({node:"view",label:o("Views"),type:"coll-view",columns:["name","owner"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})}if(!s.Nodes["view"]){s.Nodes["view"]=r.SchemaChildNode.extend({type:"view",sqlAlterHelp:"sql-alterview.html",sqlCreateHelp:"sql-createview.html",dialogHelp:e("help.static",{filename:"view_dialog.html"}),label:o("View"),hasSQL:true,hasDepends:true,hasScriptTypes:["create","select","insert"],collection_type:"coll-view",Init:function e(){if(this.initialized)return;this.initialized=true;s.add_menus([{name:"create_view_on_coll",node:"coll-view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:o("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:true},enable:"canCreate"},{name:"create_view",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:o("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:true},enable:"canCreate"},{name:"create_view",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:17,label:o("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:false},enable:"canCreate"}])},model:s.Node.Model.extend({idAttribute:"oid",initialize:function e(t,i){if(a.size(t)===0){var n=i.node_info.schema._label||"public",r=s.serverInfo[i.node_info.server._id].user;this.set({schema:n,owner:r.name},{silent:true})}s.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:o("Name"),cell:"string",type:"text",disabled:"notInSchema"},{id:"oid",label:o("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"owner",label:o("Owner"),cell:"string",control:"node-list-by-name",node:"role",disabled:"notInSchema",select2:{allowClear:false}},{id:"schema",label:o("Schema"),cell:"string",first_empty:false,control:"node-list-by-name",type:"text",cache_level:"database",node:"schema",disabled:"notInSchema",mode:["create","edit"],select2:{allowClear:false},cache_node:"database"},{id:"system_view",label:o("System view?"),cell:"string",type:"switch",disabled:true,mode:["properties"]},{id:"acl",label:o("Privileges"),mode:["properties"],type:"text",group:o("Security")},{id:"comment",label:o("Comment"),cell:"string",type:"multiline",disabled:"notInSchema"},{id:"security_barrier",label:o("Security barrier?"),type:"switch",min_version:"90200",group:o("Definition"),disabled:"notInSchema"},{id:"check_option",label:o("Check options"),control:"select2",group:o("Definition"),type:"text",min_version:"90400",mode:["properties","create","edit"],select2:{allowClear:false},disabled:"notInSchema",options:[{label:o("No"),value:"no"},{label:o("Local"),value:"local"},{label:o("Cascaded"),value:"cascaded"}]},{id:"definition",label:o("Code"),cell:"string",type:"text",mode:["create","edit"],group:o("Code"),tabPanelCodeClass:"sql-code-control",control:n.SqlCodeControl,disabled:"notInSchema"},s.SecurityGroupSchema,{id:"datacl",label:o("Privileges"),type:"collection",model:s.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),uniqueCol:["grantee"],editable:false,group:"security",mode:["edit","create"],canAdd:true,canDelete:true,control:"unique-col-collection",disabled:"notInSchema"},{id:"seclabels",label:o("Security labels"),model:s.SecLabelModel,editable:false,type:"collection",canEdit:false,group:"security",canDelete:true,mode:["edit","create"],canAdd:true,disabled:"notInSchema",control:"unique-col-collection",uniqueCol:["provider"]}],validate:function e(){var t={},i,n=this.get("name"),r=this.get("definition");if(a.isUndefined(n)||a.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){t["name"]=o("Please specify name.");i=i||t["name"];this.errorModel.set("name",i);return i}else{this.errorModel.unset("name")}if(a.isUndefined(r)||a.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){t["definition"]=o("Please enter view code.");i=i||t["definition"];this.errorModel.set("definition",i);return i}else{this.errorModel.unset("definition")}return null},notInSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false}})})}return s.Nodes["view"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(10),i(5),i(6),i(13),i(11),i(16)],r=function(s,e,l,a,d,c,u,t,i,n){if(!u.Nodes["coll-mview"]){u.Nodes["coll-mview"]=u.Collection.extend({node:"mview",label:s("Materialized Views"),type:"coll-mview",columns:["name","owner"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})}if(!u.Nodes["mview"]){u.Nodes["mview"]=i.SchemaChildNode.extend({type:"mview",sqlAlterHelp:"sql-altermaterializedview.html",sqlCreateHelp:"sql-creatematerializedview.html",dialogHelp:e("help.static",{filename:"materialized_view_dialog.html"}),label:s("Materialized View"),hasSQL:true,hasDepends:true,hasScriptTypes:["create","select"],collection_type:"coll-mview",Init:function e(){if(this.initialized)return;this.initialized=true;d.Browser.add_menu_category("refresh_mview",s("Refresh View"),18,"");u.add_menus([{name:"create_mview_on_coll",node:"coll-mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:true},enable:"canCreate",label:s("Materialized View...")},{name:"create_mview",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:true},enable:"canCreate",label:s("Materialized View...")},{name:"create_mview",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:18,icon:"wcTabIcon icon-mview",data:{action:"create",check:false},enable:"canCreate",label:s("Materialized View...")},{name:"refresh_mview_data",node:"mview",module:this,priority:1,callback:"refresh_mview",category:"refresh_mview",applies:["object","context"],label:s("With data"),data:{concurrent:false,with_data:true},icon:"fa fa-recycle"},{name:"refresh_mview_nodata",node:"mview",callback:"refresh_mview",priority:2,module:this,category:"refresh_mview",applies:["object","context"],label:s("With no data"),data:{concurrent:false,with_data:false},icon:"fa fa-refresh"},{name:"refresh_mview_concurrent",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:true,with_data:true},priority:3,applies:["object","context"],callback:"refresh_mview",label:s("With data (concurrently)"),icon:"fa fa-recycle"},{name:"refresh_mview_concurrent_nodata",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:true,with_data:false},priority:4,applies:["object","context"],callback:"refresh_mview",label:s("With no data (concurrently)"),icon:"fa fa-refresh"}])},model:u.Node.Model.extend({idAttribute:"oid",initialize:function e(t,i){if(a.size(t)===0){var n=i.node_info.schema._label||"public",r=u.serverInfo[i.node_info.server._id].user;this.set({schema:n,owner:r.name},{silent:true})}u.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{spcname:undefined,toast_autovacuum_enabled:false,autovacuum_enabled:false},schema:[{id:"name",label:s("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:s("OID"),cell:"string",type:"text",disabled:true,mode:["properties"]},{id:"owner",label:s("Owner"),cell:"string",control:"node-list-by-name",select2:{allowClear:false},node:"role",disabled:"inSchema"},{id:"schema",label:s("Schema"),cell:"string",first_empty:false,control:"node-list-by-name",type:"text",cache_level:"database",node:"schema",mode:["create","edit"],cache_node:"database",disabled:"inSchema",select2:{allowClear:false}},{id:"system_view",label:s("System view?"),cell:"string",type:"switch",disabled:true,mode:["properties"]},u.SecurityGroupSchema,{id:"acl",label:s("Privileges"),mode:["properties"],type:"text",group:s("Security")},{id:"comment",label:s("Comment"),cell:"string",type:"multiline"},{id:"definition",label:s("Definition"),cell:"string",type:"text",mode:["create","edit"],group:s("Definition"),tabPanelCodeClass:"sql-code-control",control:t.SqlCodeControl},{id:"with_data",label:s("With data?"),group:s("Storage"),mode:["edit","create"],type:"switch"},{id:"spcname",label:s("Tablespace"),cell:"string",type:"text",group:s("Storage"),first_empty:false,control:"node-list-by-name",node:"tablespace",select2:{allowClear:false},filter:function e(t){if(t.label=="pg_global")return false;else return true}},{id:"fillfactor",label:s("Fill factor"),group:s("Storage"),mode:["edit","create"],type:"int"},{type:"nested",control:"tab",id:"materialization",label:s("Parameter"),mode:["edit","create"],group:s("Parameter"),schema:t.VacuumSettingsSchema},{id:"datacl",label:s("Privileges"),type:"collection",model:u.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),uniqueCol:["grantee"],editable:false,group:"security",canAdd:true,canDelete:true,mode:["edit","create"],control:"unique-col-collection"},{id:"seclabels",label:s("Security labels"),model:u.SecLabelModel,editable:false,type:"collection",canEdit:false,group:"security",canDelete:true,mode:["edit","create"],canAdd:true,control:"unique-col-collection",uniqueCol:["provider"]}],validate:function e(t){var i={},n,r=this.get("name"),o=this.get("definition");if(a.indexOf(t,"autovacuum_enabled")!=-1||a.indexOf(t,"toast_autovacuum_enabled")!=-1)return null;if(a.isUndefined(r)||a.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){i["name"]=s("Please specify name.");n=n||i["name"];this.errorModel.set("name",n);return n}else{this.errorModel.unset("name")}if(a.isUndefined(o)||a.isNull(o)||String(o).replace(/^\s+|\s+$/g,"")==""){i["definition"]=s("Please enter view definition.");n=n||i["definition"];this.errorModel.set("definition",n);return n}else{this.errorModel.unset("definition")}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false}}),refresh_mview:function e(t){var i=t||{},n=this,r=u.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;l.ajax({url:n.generate_url(o,"refresh_data",a,true),type:"PUT",data:{concurrent:t.concurrent,with_data:t.with_data},dataType:"json"}).done(function(e){if(e.success==1){c.success(s("View refreshed successfully"))}else{c.alert(s("Error refreshing view"),e.data.result)}}).fail(function(e,t,i){c.pgRespErrorNotify(e,i,s("Error refreshing view"))})},is_version_supported:function e(t,i){var n=d.Browser.tree,r=i||n.selected(),o=t||(r&&r.length==1?n.itemData(r):undefined),a=this||o&&d.Browser.Nodes[o._type],s=a.getTreeNodeHierarchy.apply(a,[r]),l=s.server.version;return l>=90400}})}return u.Nodes["mview"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(154),i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(10),i(6),i(12),i(155),i(13),i(11),i(7),i(156),i(157),i(64)],r=function(i,l,e,u,g,d,v,_,c,f,t,n,r,o){if(!_.Nodes["coll-table"]){_.Nodes["coll-table"]=_.Collection.extend({node:"table",label:l("Tables"),type:"coll-table",columns:["name","relowner","is_partitioned","description"],hasStatistics:true,statsPrettifyFields:[l("Size"),l("Indexes size"),l("Table size"),l("TOAST table size"),l("Tuple length"),l("Dead tuple length"),l("Free space")],canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:o.isTreeItemOfChildOfSchema})}if(!_.Nodes["table"]){_.Nodes["table"]=r.SchemaChildNode.extend({type:"table",label:l("Table"),collection_type:"coll-table",hasSQL:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[l("Size"),l("Indexes size"),l("Table size"),l("TOAST table size"),l("Tuple length"),l("Dead tuple length"),l("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:e("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create","select","insert","update","delete"],width:"650px",Init:function e(){if(this.initialized)return;this.initialized=true;_.add_menus([{name:"create_table_on_coll",node:"coll-table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:l("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:true},enable:"canCreate"},{name:"create_table",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:l("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:true},enable:"canCreate"},{name:"create_table__on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:false},enable:"canCreate"},{name:"truncate_table",node:"table",module:this,applies:["object","context"],callback:"truncate_table",category:"Truncate",priority:3,label:l("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"table",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:"Truncate",priority:3,label:l("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:"Trigger(s)",priority:4,label:l("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable"},{name:"disable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:"Trigger(s)",priority:4,label:l("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable"},{name:"reset_table_stats",node:"table",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:l("Reset Statistics"),icon:"fa fa-bar-chart",enable:"canCreate"},{name:"count_table_rows",node:"table",module:this,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:l("Count Rows"),enable:true}]);_.Events.on("pgadmin:browser:node:table:updated",this.onTableUpdated,this);_.Events.on("pgadmin:browser:node:type:cache_cleared",this.handle_cache,this);_.Events.on("pgadmin:browser:node:domain:cache_cleared",this.handle_cache,this)},callbacks:{enable_triggers_on_table:function e(t){i.enableTriggers(_.treeMenu,c,this.generate_url.bind(this),t)},disable_triggers_on_table:function e(t){i.disableTriggers(_.treeMenu,c,this.generate_url.bind(this),t)},truncate_table:function e(t){var i={cascade:false};this.callbacks.truncate.apply(this,[t,i])},truncate_table_cascade:function e(t){var i={cascade:true};this.callbacks.truncate.apply(this,[t,i])},truncate:function e(t,i){var n=t||{},r=this,o=_.tree,a=n.item||o.selected(),s=a&&a.length==1?o.itemData(a):undefined;if(!s)return false;c.confirm(l("Truncate Table"),d(l("Are you sure you want to truncate table %s?")).sprintf(s.label).value(),function(e){if(e){var t=s;u.ajax({url:r.generate_url(a,"truncate",s,true),type:"PUT",data:i,dataType:"json"}).done(function(e){if(e.success==1){c.success(e.info);o.removeIcon(a);t.icon=t.is_partitioned?"icon-partition":"icon-table";o.addIcon(a,{icon:t.icon});o.unload(a);o.setInode(a);o.deselect(a);setTimeout(function(){o.select(a)},10)}}).fail(function(e,t,i){c.pgRespErrorNotify(e,i);o.unload(a)})}},function(){})},reset_table_stats:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;c.confirm(l("Reset statistics"),d(l('Are you sure you want to reset the statistics for table "%s"?')).sprintf(a._label).value(),function(e){if(e){var t=a;u.ajax({url:n.generate_url(o,"reset",a,true),type:"DELETE"}).done(function(e){if(e.success==1){c.success(e.info);r.removeIcon(o);t.icon=t.is_partitioned?"icon-partition":"icon-table";r.addIcon(o,{icon:t.icon});r.unload(o);r.setInode(o);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){c.pgRespErrorNotify(e,i);r.unload(o)})}},function(){})},count_table_rows:function e(t){var i=t||{},n=this,r=_.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;u.ajax({url:n.generate_url(o,"count_rows",a,true),type:"GET"}).done(function(e){c.success(e.info);a.rows_cnt=e.data.total_rows;r.unload(o);r.setInode(o);r.deselect(o);setTimeout(function(){r.select(o)},10)}).fail(function(e,t,i){c.pgRespErrorNotify(e,i);r.unload(o)})}},model:_.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,spcoid:undefined,spcname:undefined,relowner:undefined,relacl:undefined,relhasoids:undefined,relhassubclass:undefined,reltuples:undefined,description:undefined,conname:undefined,conkey:undefined,isrepl:undefined,triggercount:undefined,relpersistence:undefined,fillfactor:undefined,reloftype:undefined,typname:undefined,labels:undefined,providers:undefined,is_sys_table:undefined,coll_inherits:[],hastoasttable:true,toast_autovacuum_enabled:false,autovacuum_enabled:false,primary_key:[],partitions:[],partition_type:"range",is_partitioned:false},initialize:function e(t,i){if(g.size(t)===0){var n=_.serverInfo[i.node_info.server._id].user,r=i.node_info.schema;this.set({relowner:n.name,schema:r._label},{silent:true})}_.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:l("Name"),type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:l("OID"),type:"text",mode:["properties"]},{id:"relowner",label:l("Owner"),type:"text",node:"role",mode:["properties","create","edit"],select2:{allowClear:false},disabled:"inSchema",control:"node-list-by-name"},{id:"schema",label:l("Schema"),type:"text",node:"schema",control:"node-list-by-name",mode:["create","edit"],disabled:"inSchema",filter:function e(t){if(t&&t.label.match(/^pg_/)){return false}return true},cache_node:"database",cache_level:"database"},{id:"spcname",label:l("Tablespace"),node:"tablespace",type:"text",control:"node-list-by-name",mode:["properties","create","edit"],filter:function e(t){return!(t&&t.label.match(/pg_global/))},deps:["is_partitioned"],disabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=12e4&&t.get("is_partitioned")){setTimeout(function(){t.set("spcname",undefined)},10);return true}return false}},{id:"partition",type:"group",label:l("Partition"),mode:["edit","create"],min_version:1e5,visible:function e(t){if(t.isNew()||t.get("is_partitioned"))return true;return false}},{id:"is_partitioned",label:l("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(!t.isNew())return true;return false}},{id:"description",label:l("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"},{id:"coll_inherits",label:l("Inherited from table(s)"),url:"get_inherits",type:"array",group:l("Columns"),disabled:"checkInheritance",deps:["typname","is_partitioned"],mode:["create","edit"],select2:{multiple:true,allowClear:true,placeholder:l("Select to inherit from...")},transform:function e(t,i){var n=i||this,r=n.model;r.inherited_tables_list=t;return t},control:f.MultiSelectAjaxControl.extend({onChange:function e(){f.MultiSelectAjaxControl.prototype.onChange.apply(this,arguments);var t=this,i=t.model.get("coll_inherits")||[],n=t.model.previous("coll_inherits")||[];if(!g.isUndefined(i)){var r=undefined,o=undefined;if(i.length>1&&i.length>n.length){r=g.difference(i,n);o=this.get_table_oid(r[0]);this.add_columns(o)}else if(i.length==1){o=this.get_table_oid(i[0]);this.add_columns(o)}if(i.length>0&&i.length<n.length){r=g.difference(n,i);this.remove_columns(r[0])}else if(n.length===1&&i.length<1){r=n[0];this.remove_columns(r)}}},add_columns:function e(t){var i=this,n=i.model.top||i.model,r=undefined,o=n.get("columns");var a={tid:t};r=i.model.fetch_columns_ajax.apply(i,[a]);o.set(r,{merge:false,remove:false})},remove_columns:function e(t){var i=this.get_table_oid(t),n=this.model.get("columns");n.remove(n.where({inheritedid:i}))},get_table_oid:function e(t){var i=undefined;g.each(this.model.inherited_tables_list,function(e){if(e.label===t){i=e.tid}});return i}})},{id:"advanced",label:l("Advanced"),type:"group",visible:n.show_advanced_tab},{id:"coll_inherits",label:l("Inherited from table(s)"),type:"text",group:"advanced",mode:["properties"]},{id:"inherited_tables_cnt",label:l("Inherited tables count"),type:"text",mode:["properties"],group:"advanced",disabled:"inSchema"},{id:"columns",label:l("Columns"),type:"collection",group:l("Columns"),model:_.Nodes["column"].model,subnode:_.Nodes["column"].model,mode:["create","edit"],disabled:function e(t){if(t.isNew()&&t.get("is_partitioned")){setTimeout(function(){var e=t.get("columns");e.remove(e.filter(function(e){if(g.isUndefined(e.get("inheritedfrom")))return false;return true}))},10)}if(this.node_info&&"catalog"in this.node_info){return true}return false},deps:["typname","is_partitioned"],canAdd:"check_grid_add_condition",canEdit:true,canDelete:true,canEditRow:"check_grid_row_edit_delete",canDeleteRow:"check_grid_row_edit_delete",uniqueCol:["name"],columns:["name","cltype","attlen","attprecision","attnotnull","is_primary_key"],control:f.UniqueColCollectionControl.extend({initialize:function e(){f.UniqueColCollectionControl.prototype.initialize.apply(this,arguments);var l=this,t=l.model.get(l.field.get("name"));t.on("change:is_primary_key",function(e){var t=l.model.get("primary_key"),i=e.get("name"),n,r;if(e.get("is_primary_key")){if(t.length<1){n=new t.model({},{top:l.model,collection:t,handler:t});t.add(n)}else{n=t.first()}if(g.isUndefined(n.get("oid"))){r=n.get("columns");var o=r.where({column:i});if(o.length==0){var a=new r.model({column:i},{silent:true,top:l.model,collection:t,handler:t});r.add(a)}r.trigger("pgadmin:multicolumn:updated",r)}}else{if(t.length>0){n=t.first();if(!g.isUndefined(n.get("oid"))){return}r=n.get("columns");var s=r.where({column:i});if(s.length>0){r.remove(s);g.each(s,function(e){e.destroy()});if(r.length==0){t.remove(t.first())}}r.trigger("pgadmin:multicolumn:updated",r)}}})},remove:function e(){var t=this.model.get(this.field.get("name"));if(t){t.off("change:is_primary_key")}f.UniqueColCollectionControl.prototype.remove.apply(this,arguments)}}),allowMultipleEmptyRow:false},{type:"nested",control:"tab",group:l("Constraints"),mode:["edit","create"],schema:[{id:"primary_key",label:"",model:_.Nodes["primary_key"].model,subnode:_.Nodes["primary_key"].model,editable:false,type:"collection",group:l("Primary Key"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",columns:["name","columns"],canAdd:function e(t){if(t.get("is_partitioned")&&!g.isUndefined(t.top.node_info)&&!g.isUndefined(t.top.node_info.server)&&!g.isUndefined(t.top.node_info.server.version)&&t.top.node_info.server.version<11e4){setTimeout(function(){var e=t.get("primary_key");e.remove(e.filter(function(){return true}))},10);return false}return true},canAddRow:function e(t){var i=t.get("columns");return t.get("primary_key")&&t.get("primary_key").length<1&&g.some(i.pluck("name"))}},{id:"foreign_key",label:"",model:_.Nodes["foreign_key"].model,subnode:_.Nodes["foreign_key"].model,editable:false,type:"collection",group:l("Foreign Key"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",canAdd:function e(t){if(t.get("is_partitioned")&&!g.isUndefined(t.top.node_info)&&!g.isUndefined(t.top.node_info.server)&&!g.isUndefined(t.top.node_info.server.version)&&t.top.node_info.server.version<11e4){setTimeout(function(){var e=t.get("foreign_key");e.remove(e.filter(function(){return true}))},10);return false}return true},columns:["name","columns"],canAddRow:function e(t){var i=t.get("columns");return g.some(i.pluck("name"))}},{id:"check_constraint",label:"",model:_.Nodes["check_constraint"].model,subnode:_.Nodes["check_constraint"].model,editable:false,type:"collection",group:l("Check"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",canAdd:true,columns:["name","consrc"]},{id:"unique_constraint",label:"",model:_.Nodes["unique_constraint"].model,subnode:_.Nodes["unique_constraint"].model,editable:false,type:"collection",group:l("Unique"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",columns:["name","columns"],canAdd:function e(t){if(t.get("is_partitioned")&&!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version<11e4){setTimeout(function(){var e=t.get("unique_constraint");e.remove(e.filter(function(){return true}))},10);return false}return true},canAddRow:function e(t){var i=t.get("columns");return g.some(i.pluck("name"))}},{id:"exclude_constraint",label:"",model:_.Nodes["exclusion_constraint"].model,subnode:_.Nodes["exclusion_constraint"].model,editable:false,type:"collection",group:l("Exclude"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",columns:["name","columns","constraint"],canAdd:function e(t){if(t.get("is_partitioned")){setTimeout(function(){var e=t.get("exclude_constraint");e.remove(e.filter(function(){return true}))},10);return false}return true},canAddRow:function e(t){var i=t.get("columns");return g.some(i.pluck("name"))}}]},{id:"typname",label:l("Of type"),type:"text",mode:["properties","create","edit"],disabled:"checkOfType",url:"get_oftype",group:l("advanced"),deps:["coll_inherits"],transform:function e(t,i){var n=i||this,r=n.model;r.of_types_tables=t;return t},control:f.NodeAjaxOptionsControl.extend({onChange:function e(){f.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var t=this,i=t.model.get("typname"),n=undefined,r=undefined,o=t.model.get("columns");if(!g.isUndefined(i)&&!g.isNull(i)&&i!==""&&o.length!==0){var a=l("Remove column definitions?"),s=l("Changing 'Of type' will remove column definitions.");c.confirm(a,s,function(){o.remove(o.filter(function(){return true}))},function(){setTimeout(function(){t.model.set("typname",null)},10)})}else if(!g.isUndefined(i)&&i===""){o.remove(o.filter(function(){return true}))}if(!g.isUndefined(i)&&i!==""){r={tname:i};n=t.model.fetch_columns_ajax.apply(t,[r]);o.set(n,{merge:false,remove:false})}}})},{id:"fillfactor",label:l("Fill factor"),type:"int",mode:["create","edit"],min:10,max:100,disabled:"inSchema",group:l("advanced")},{id:"relhasoids",label:l("Has OIDs?"),cell:"switch",type:"switch",mode:["properties","create","edit"],group:l("advanced"),disabled:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=12e4)return true;return t.inSchema()}},{id:"relpersistence",label:l("Unlogged?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",group:l("advanced")},{id:"conname",label:l("Primary key"),cell:"string",type:"text",mode:["properties"],group:l("advanced"),disabled:"inSchema"},{id:"reltuples",label:l("Rows (estimated)"),cell:"string",type:"text",mode:["properties"],group:l("advanced"),disabled:"inSchema"},{id:"rows_cnt",label:l("Rows (counted)"),cell:"string",type:"text",mode:["properties"],group:l("advanced"),disabled:"inSchema",control:f.InputControl.extend({formatter:{fromRaw:function e(t){var i=v.Browser.tree,n=i.selected(),r=n&&n.length==1?i.itemData(n):undefined;if(r&&r.rows_cnt&&parseInt(r.rows_cnt,10)>0)return r.rows_cnt;else return t},toRaw:function e(t){return t}}})},{id:"relhassubclass",label:l("Inherits tables?"),cell:"switch",type:"switch",mode:["properties"],group:l("advanced"),disabled:"inSchema"},{id:"is_sys_table",label:l("System table?"),cell:"switch",type:"switch",mode:["properties"],disabled:"inSchema"},{type:"nested",control:"fieldset",label:l("Like"),group:l("advanced"),schema:[{id:"like_relation",label:l("Relation"),type:"text",mode:["create","edit"],deps:["typname"],control:"node-ajax-options",url:"get_relations",disabled:"isLikeDisable",group:l("Like")},{id:"like_default_value",label:l("With default values?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_constraints",label:l("With constraints?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_indexes",label:l("With indexes?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_storage",label:l("With storage?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_comments",label:l("With comments?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")}]},{id:"partition_type",label:l("Partition Type"),editable:false,type:"select2",select2:{allowClear:false},group:"partition",deps:["is_partitioned"],options:function e(){var e=[{label:l("Range"),value:"range"},{label:l("List"),value:"list"}];if(!g.isUndefined(this.node_info)&&!g.isUndefined(this.node_info.server)&&!g.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=11e4){e.push({label:l("Hash"),value:"hash"})}return e},mode:["create"],visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(!t.isNew()||!t.get("is_partitioned"))return true;return false}},{id:"partition_keys",label:l("Partition Keys"),model:f.PartitionKeyModel,subnode:f.PartitionKeyModel,editable:true,type:"collection",group:"partition",mode:["create"],deps:["is_partitioned","partition_type","typname"],canEdit:false,canDelete:true,control:"sub-node-collection",canAdd:function e(t){if(t.isNew()&&t.get("is_partitioned"))return true;return false},canAddRow:function e(t){var i=t.get("columns"),n=t.get("typname"),r=false;var o=1e3;if(t.get("partition_type")&&t.get("partition_type")=="list")o=1;if(i.length<=0&&!g.isUndefined(n)&&!g.isNull(n)&&t.of_types_tables.length>0){g.each(t.of_types_tables,function(e){if(e.label==n&&e.oftype_columns.length>0){r=true}})}else if(i.length>0){r=g.some(i.pluck("name"))}return t.get("partition_keys")&&t.get("partition_keys").length<o&&r},visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(t.get("partition_keys")&&t.get("partition_keys").models.length>0){setTimeout(function(){var e=t.get("partition_keys");e.remove(e.filter(function(){return true}))},10)}}},{id:"partition_scheme",label:l("Partition Scheme"),type:"note",group:"partition",mode:["edit"],visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(!t.isNew()){this.text=t.get("partition_scheme")}}},{id:"partition_key_note",label:l("Partition Keys"),type:"note",group:"partition",mode:["create"],text:["<ul><li>",l("Partition table supports two types of keys:"),"</li><li>","<strong>",l("Column: "),"</strong>",l("User can select any column from the list of available columns."),"</li><li>","<strong>",l("Expression: "),"</strong>",l("User can specify expression to create partition key."),"</li><li>","<strong>",l("Example: "),"</strong>",l("Let's say, we want to create a partition table based per year for the column 'saledate', having datatype 'date/timestamp', then we need to specify the expression as 'extract(YEAR from saledate)' as partition key."),"</li></ul>"].join(""),visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false}},{id:"partitions",label:l("Partitions"),model:f.PartitionsModel,subnode:f.PartitionsModel,editable:true,type:"collection",group:"partition",mode:["edit","create"],deps:["is_partitioned","partition_type","typname"],canEdit:false,canDelete:true,customDeleteTitle:l("Detach Partition"),customDeleteMsg:l("Are you sure you wish to detach this partition?"),columns:["is_attach","partition_name","is_default","values_from","values_to","values_in","values_modulus","values_remainder"],control:f.SubNodeCollectionControl.extend({row:t.PartitionRow,initialize:function e(){f.SubNodeCollectionControl.prototype.initialize.apply(this,arguments);var t=this;if(!this.model.isNew()){var i=this.field.get("schema_node"),n=this.field.get("node_info");u.ajax({url:i.generate_url.apply(i,[null,"get_attach_tables",this.field.get("node_data"),true,n]),type:"GET",async:false}).done(function(e){if(e.success==1){t.model.table_options=e.data}else{c.alert(l("Error fetching tables to be attached"),e.data.result)}}).fail(function(e,t,i){c.pgRespErrorNotify(e,i)})}}}),canAdd:function e(t){if(t.get("is_partitioned"))return true;return false},visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(t.isNew()&&t.get("partitions")&&t.get("partitions").models.length>0){setTimeout(function(){var e=t.get("partitions");e.remove(e.filter(function(){return true}))},10)}}},{id:"partition_note",label:l("Partitions"),type:"note",group:"partition",text:["<ul><li>","<strong>",l("Create a table: "),"</strong>",l("User can create multiple partitions while creating new partitioned table. Operation switch is disabled in this scenario."),"</li><li>","<strong>",l("Edit existing table: "),"</strong>",l("User can create/attach/detach multiple partitions. In attach operation user can select table from the list of suitable tables to be attached."),"</li><li>","<strong>",l("Default: "),"</strong>",l("The default partition can store rows that do not fall into any existing partition’s range or list."),"</li><li>","<strong>",l("From/To/In input: "),"</strong>",l("From/To/In input: Values for these fields must be quoted with single quote. For more than one partition key values must be comma(,) separated."),"</li><li>","<strong>",l("Example: From/To: "),"</strong>",l("Enabled for range partition. Consider partitioned table with multiple keys of type Integer, then values should be specified like '100','200'."),"</li><li>","<strong>",l("In: "),"</strong>",l("Enabled for list partition. Values must be comma(,) separated and quoted with single quote."),"</li><li>","<strong>",l("Modulus/Remainder: "),"</strong>",l("Enabled for hash partition."),"</li></ul>"].join(""),visible:function e(t){if(!g.isUndefined(t.node_info)&&!g.isUndefined(t.node_info.server)&&!g.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false}},{type:"nested",control:"tab",group:l("Parameters"),mode:["edit","create"],deps:["is_partitioned"],schema:f.VacuumSettingsSchema},{id:"relacl_str",label:l("Privileges"),disabled:"inSchema",type:"text",mode:["properties"],group:l("Security")},_.SecurityGroupSchema,{id:"relacl",label:l("Privileges"),type:"collection",group:"security",control:"unique-col-collection",model:_.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["grantee"]},{id:"seclabels",label:l("Security labels"),canEdit:false,model:_.SecLabelModel,editable:false,canAdd:true,type:"collection",min_version:90100,mode:["edit","create"],group:"security",canDelete:true,control:"unique-col-collection"},{id:"vacuum_settings_str",label:l("Storage settings"),type:"multiline",group:"advanced",mode:["properties"]}],validate:function e(){var t,i=this.get("name"),n=this.get("schema"),r=this.get("relowner"),o=this.get("is_partitioned"),a=this.get("partition_keys");if(g.isUndefined(i)||g.isNull(i)||String(i).replace(/^\s+|\s+$/g,"")==""){t=l("Table name cannot be empty.");this.errorModel.set("name",t);return t}this.errorModel.unset("name");if(g.isUndefined(n)||g.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){t=l("Table schema cannot be empty.");this.errorModel.set("schema",t);return t}this.errorModel.unset("schema");if(g.isUndefined(r)||g.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){t=l("Table owner cannot be empty.");this.errorModel.set("relowner",t);return t}this.errorModel.unset("relowner");if(o&&this.isNew()&&!g.isNull(a)&&a.length<=0){t=l("Please specify at least one key for partitioned table.");this.errorModel.set("partition_keys",t);return t}this.errorModel.unset("partition_keys");return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},isInheritedTable:function e(t){if(!t.inSchema.apply(this,[t])){if(!g.isUndefined(t.get("coll_inherits"))&&t.get("coll_inherits").length!=0||!g.isUndefined(t.get("typname"))&&String(t.get("typname")).replace(/^\s+|\s+$/g,"")!==""){return false}else{return true}}return false},checkInheritance:function e(t){if(t.get("is_partitioned")){setTimeout(function(){t.set("coll_inherits",[])},10);return true}if(!t.inSchema.apply(this,[t])&&(g.isUndefined(t.get("typname"))||g.isNull(t.get("typname"))||String(t.get("typname")).replace(/^\s+|\s+$/g,"")=="")){return false}return true},isLikeDisable:function e(t){if(!t.inSchemaWithModelCheck.apply(this,[t])&&(g.isUndefined(t.get("typname"))||g.isNull(t.get("typname"))||String(t.get("typname")).replace(/^\s+|\s+$/g,"")=="")){return false}return true},check_grid_add_condition:function e(t){var i=true;if(!t.inSchema.apply(this,[t])){if(!g.isUndefined(t.get("typname"))&&!g.isNull(t.get("typname"))&&t.get("typname")!==""){i=false}}return i},check_grid_row_edit_delete:function e(t){var i=true;if(!g.isUndefined(t.get("inheritedfrom"))&&!g.isNull(t.get("inheritedfrom"))&&String(t.get("inheritedfrom")).replace(/^\s+|\s+$/g,"")!==""){i=false}return i},checkOfType:function e(t){if(!t.inSchemaWithModelCheck.apply(this,[t])&&(g.isUndefined(t.get("coll_inherits"))||g.isNull(t.get("coll_inherits"))||String(t.get("coll_inherits")).replace(/^\s+|\s+$/g,"")=="")){return false}return true},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},isTableAutoVacuumEnable:function e(t){if(!t.inSchema.apply(this,[t])&&t.get("autovacuum_enabled")===true){return false}return true},isToastTableAutoVacuumEnable:function e(t){if(!t.inSchemaWithModelCheck.apply(this,[t])&&t.get("toast_autovacuum_enabled")==true){return false}return true},fetch_columns_ajax:function e(t){var i=this,n="get_columns",r=i.model.top||i.model,o=undefined,a=this.field.get("schema_node"),s=this.field.get("node_info"),l=a.generate_url.apply(a,[null,n,this.field.get("node_data"),this.field.get("url_with_id")||false,s]),d=this.field.get("cache_level")||a.type,c=this.field.get("cache_node");c=c&&_.Nodes[c]||a;r.trigger("pgadmin:view:fetching",r,i.field);u.ajax({async:false,url:l,data:t}).done(function(e){o=c.cache(n,s,d,e.data)}).fail(function(){r.trigger("pgadmin:view:fetch:error",r,i.field)});r.trigger("pgadmin:view:fetched",r,i.field);o=o&&o.data||[];return o}}),canCreate_with_trigger_enable:function e(t,i,n){return t.tigger_count>0&&this.canCreate.apply(this,[t,i,n])},canCreate_with_trigger_disable:function e(t,i,n){return t.tigger_count>0&&t.has_enable_triggers>0&&this.canCreate.apply(this,[t,i,n])},onTableUpdated:function e(t,i,n){var r,o;if(n.is_partitioned&&"affected_partitions"in n){var a=n.affected_partitions,s=this,l=[],d=[],c=function e(){if(!d.length)return;var t=d.pop();_.addChildTreeNodes(t.treeHierarchy,t.parent,t.type,t.childrenIDs,e)},u;if("detached"in a&&a.detached.length>0){_.removeChildTreeNodesById(t,"coll-partition",g.map(a.detached,function(e){return parseInt(e.oid)}));u=_.findParentTreeNodeByType(t,"schema");var f=g.groupBy(a.detached,function(e){return parseInt(e.schema_id)});for(r in f){u=_.findSiblingTreeNode(u,r);if(u){o=g.map(f[r],function(e){return parseInt(e.oid)});var h=_.findChildCollectionTreeNode(u,"coll-table");if(h){d.push({parent:h,type:"table",treeHierarchy:v.Browser.Nodes.schema.getTreeNodeHierarchy(u),childrenIDs:g.clone(o)})}}}}if("attached"in a&&a.attached.length>0){u=_.findParentTreeNodeByType(t,"schema");var p=g.groupBy(a.attached,function(e){return parseInt(e.schema_id)});for(r in p){u=_.findSiblingTreeNode(u,r);if(u){o=g.map(p[r],function(e){return parseInt(e.oid)});_.removeChildTreeNodesById(u,"coll-table",o)}l=l.concat(o)}}if("created"in a&&a.created.length>0){g.each(a.created,function(e){l.push(e.oid)})}if(l.length){var m=_.findChildCollectionTreeNode(t,"coll-partition");if(m){d.push({parent:m,type:"partition",treeHierarchy:s.getTreeNodeHierarchy(t),childrenIDs:l})}}c()}},handle_cache:function e(){this.clear_cache.apply(this,null)}})}return _.Nodes["table"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.disableTriggers=r;t.enableTriggers=o;var a=n(i(25));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,n){return s(e,t,i,n,{enable:"false"})}function o(e,t,i,n){return s(e,t,i,n,{enable:"true"})}function s(i,n,e,t,r){var o=l(t,i);if(!o||o.getData()===null||o.getData()===undefined)return false;a.default.put(e(o.getHtmlIdentifier(),"set_trigger",o.getData(),true),r).then(function(e){if(e.data.success===1){n.success(e.data.info);o.reload(i)}}).catch(function(e){try{var t=e.response.data;if(t.success===0){n.error(t.errormsg)}}catch(e){console.warn(e.stack||e)}o.unload(i)})}function l(e,t){var i=e||{};var n=i.item||t.selected();return t.findNodeByDomElement(n)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.show_advanced_tab=a;var n=r(i(1));function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function o(e){return!n.isUndefined(e.node_info)&&!n.isUndefined(e.node_info.server)&&e.node_info.server.server_type==="gpdb"}function a(e){if(o(e)){return false}return true}},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(6),i(12),i(11),i(7)],r=function(c,e,t,u,i,n,l,r,o,a){if(!l.Nodes["coll-column"]){l.Nodes["coll-column"]=l.Collection.extend({node:"column",label:c("Columns"),type:"coll-column",columns:["name","atttypid","description"],canDrop:a.isTreeItemOfChildOfSchema,canDropCascade:false})}var s=r.VariablesModel=l.Node.Model.extend({idAttribute:"name",defaults:{name:null,value:null},schema:[{id:"name",label:c("Name"),cell:"select2",type:"text",disabled:false,node:"column",options:[["n_distinct","n_distinct"],["n_distinct_inherited","n_distinct_inherited"]],select2:{placeholder:"Select variable"},cellHeaderClasses:"width_percent_50"},{id:"value",label:c("Value"),type:"text",disabled:false,cellHeaderClasses:"width_percent_50"}],validate:function e(){if(u.isUndefined(this.get("value"))||u.isNull(this.get("value"))||String(this.get("value")).replace(/^\s+|\s+$/g,"")==""){var t=c("Please provide input for variable.");this.errorModel.set("value",t);return t}else{this.errorModel.unset("value")}return null}});var d=o.Extension.IntegerDepCell=o.IntegerCell.extend({initialize:function e(){o.NumberCell.prototype.initialize.apply(this,arguments);o.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function e(){this.$el.empty();var t=this.model,i=this.column,n=this.column.get("editable"),r=u.isFunction(n)?!!n.apply(i,[t]):!!n;if(r){this.$el.addClass("editable")}else{this.$el.removeClass("editable")}this.delegateEvents();return this},render:function e(){o.NumberCell.prototype.render.apply(this,arguments);var t=this.model,i=this.column,n=this.column.get("editable"),r=u.isFunction(n)?!!n.apply(i,[t]):!!n;if(r){this.$el.addClass("editable")}else{this.$el.removeClass("editable")}return this},remove:o.Extension.DependentCell.prototype.remove});if(!l.Nodes["column"]){l.Nodes["column"]=l.Node.extend({parent_type:["table","view","mview"],collection_type:["coll-table","coll-view","coll-mview"],type:"column",label:c("Column"),hasSQL:true,sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-altertable.html",dialogHelp:e("help.static",{filename:"column_dialog.html"}),canDrop:function e(t,i){var n=l.treeMenu.findNodeByDomElement(i);if(!n)return false;return n.anyParent(function(e){return e.getData()._type==="table"&&!e.anyParent(function(e){return e.getData()._type==="catalog"})})},hasDepends:true,hasStatistics:true,Init:function e(){if(this.initialized)return;this.initialized=true;l.add_menus([{name:"create_column_on_coll",node:"coll-column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:c("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:true},enable:"canCreate"},{name:"create_column",node:"column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:c("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:true},enable:"canCreate"},{name:"create_column_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:c("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:true},enable:"canCreate"},{name:"create_column_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:c("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:true},enable:"canCreate"}])},model:l.Node.Model.extend({idAttribute:"attnum",defaults:{name:undefined,attowner:undefined,atttypid:undefined,attnum:undefined,cltype:undefined,collspcname:undefined,attacl:undefined,description:undefined,parent_tbl:undefined,min_val:undefined,max_val:undefined,edit_types:undefined,is_primary_key:false,inheritedfrom:undefined,attstattarget:undefined,attnotnull:false,attlen:null,attprecision:null,attidentity:"a",seqincrement:undefined,seqstart:undefined,seqmin:undefined,seqmax:undefined,seqcache:undefined,seqcycle:undefined,colconstype:"n",genexpr:undefined},initialize:function e(t){if(u.size(t)!==0){this.set({old_attidentity:this.get("attidentity")},{silent:true})}l.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:c("Name"),cell:"string",type:"text",disabled:"inSchemaWithColumnCheck",cellHeaderClasses:"width_percent_30",editable:"editable_check_for_table"},{id:"is_primary_key",label:c("Primary key?"),cell:o.Extension.TableChildSwitchCell,type:"switch",deps:["name"],cellHeaderClasses:"width_percent_5",options:{onText:c("Yes"),offText:c("No"),onColor:"success",offColor:"primary"},visible:function e(t){return u.isUndefined(t.top.node_info["table"]||t.top.node_info["view"]||t.top.node_info["mview"])},disabled:function e(t){if(t.top&&(!u.isUndefined(t.top.get("oid"))&&!u.isUndefined(t.top.get("primary_key"))&&t.top.get("primary_key").length>0&&!u.isUndefined(t.top.get("primary_key").first().get("oid"))||t.top.has("is_partitioned")&&t.top.get("is_partitioned")&&t.top.node_info.server&&t.top.node_info.server.version<11e3)){return true}var i=t.get("name");if(!t.inSchemaWithColumnCheck.apply(this,[t])&&(u.isUndefined(i)||u.isNull(i)||i=="")){return true}return false},editable:function e(t){if(t instanceof i.Collection){return true}if(t.top&&!u.isUndefined(t.top.get("oid"))&&!u.isUndefined(t.top.get("primary_key"))&&t.top.get("primary_key").length>0&&!u.isUndefined(t.top.get("primary_key").first().get("oid"))){return false}if(t.top&&!u.isUndefined(t.top.get("is_partitioned"))&&t.top.get("is_partitioned")&&t.top.node_info.server&&t.top.node_info.server.version<11e3){setTimeout(function(){t.set("is_primary_key",false)},10);return false}if(!t.inSchemaWithColumnCheck.apply(this,[t])){return true}return false}},{id:"attnum",label:c("Position"),cell:"string",type:"text",disabled:"notInSchema",mode:["properties"]},{id:"cltype",label:c("Data type"),cell:o.Extension.NodeAjaxOptionsCell,type:"text",disabled:"inSchemaWithColumnCheck",control:"node-ajax-options",url:"get_types",node:"table",cellHeaderClasses:"width_percent_30",first_empty:true,select2:{allowClear:false},group:c("Definition"),cache_node:"table",transform:function e(t,i){var n=i||this,r=n.model;n.model.datatypes=t;var o=r.get("edit_types"),a=[];if(!u.isUndefined(r.top)&&!r.top.isNew()){u.each(t,function(e){if(u.indexOf(o,e.value)!=-1){a.push(e)}});return a.length>0?a:t}if(r.isNew()){return t}else{u.each(t,function(e){if(u.indexOf(o,e.value)!=-1){a.push(e)}});return a}},editable:"editable_check_for_table"},{id:"inheritedfrom",label:c("Inherited from table"),type:"text",disabled:true,editable:false,cellHeaderClasses:"width_percent_10",visible:function e(t){return u.isUndefined(t.top.node_info["table"]||t.top.node_info["view"]||t.top.node_info["mview"])}},{id:"attlen",label:c("Length"),cell:d,deps:["cltype"],type:"int",group:c("Definition"),cellHeaderClasses:"width_percent_20",disabled:function e(t){var i=t.get("cltype"),n=true;u.each(t.datatypes,function(e){if(i==e.value){if(e.length){t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true});n=false}}});n&&setTimeout(function(){if(t.get("attlen")){t.set("attlen",null)}},10);return n},editable:function e(t){if(!u.isUndefined(t.get("inheritedfrom"))){return false}if(!t.datatypes){return true}var i=t.get("cltype"),n=false;u.each(t.datatypes,function(e){if(i==e.value){if(e.length){t.set("min_val",e.min_val,{silent:true});t.set("max_val",e.max_val,{silent:true});n=true}}});!n&&setTimeout(function(){if(t.get("attlen")){t.set("attlen",null,{silent:true})}},10);return n}},{id:"attprecision",label:c("Precision"),cell:d,deps:["cltype"],type:"int",group:c("Definition"),cellHeaderClasses:"width_percent_20",disabled:function e(t){var i=t.get("cltype"),n=true;u.each(t.datatypes,function(e){if(i==e.value){if(e.precision){t.set("min_val",0,{silent:true});t.set("max_val",e.max_val,{silent:true});n=false}}});n&&setTimeout(function(){if(t.get("attprecision")){t.set("attprecision",null)}},10);return n},editable:function e(t){if(!u.isUndefined(t.get("inheritedfrom"))){return false}if(!t.datatypes){return true}var i=t.get("cltype"),n=false;u.each(t.datatypes,function(e){if(i==e.value){if(e.precision){t.set("min_val",0,{silent:true});t.set("max_val",e.max_val,{silent:true});n=true}}});!n&&setTimeout(function(){if(t.get("attprecision")){t.set("attprecision",null)}},10);return n}},{id:"collspcname",label:c("Collation"),cell:"string",type:"text",control:"node-ajax-options",url:"get_collations",group:c("Definition"),node:"collation",deps:["cltype"],disabled:function e(t){var i=t.get("cltype"),n=true;u.each(t.datatypes,function(e){if(i==e.value){if(e.is_collatable){n=false}}});if(n){setTimeout(function(){if(t.get("collspcname")&&t.get("collspcname")!==""){t.set("collspcname","")}},10)}return n}},{id:"attstattarget",label:c("Statistics"),cell:"string",type:"text",disabled:"inSchemaWithColumnCheck",mode:["properties","edit"],group:c("Definition")},{id:"attstorage",label:c("Storage"),group:c("Definition"),type:"text",mode:["properties","edit"],cell:"string",disabled:"inSchemaWithColumnCheck",first_empty:true,control:"select2",select2:{placeholder:"Select storage",allowClear:false,width:"100%"},options:[{label:"PLAIN",value:"p"},{label:"MAIN",value:"m"},{label:"EXTERNAL",value:"e"},{label:"EXTENDED",value:"x"}]},{id:"defval",label:c("Default"),cell:"string",type:"text",group:c("Constraints"),deps:["cltype","colconstype"],disabled:function e(t){var i=false;if(!t.inSchemaWithModelCheck.apply(this,[t])){var n=t.get("cltype");i=n=="serial"||n=="bigserial"||n=="smallserial"}i=i||t.get("colconstype")!="n";if(i&&t.isNew()){setTimeout(function(){t.set("defval",undefined)},10)}return i}},{id:"attnotnull",label:c("Not NULL?"),cell:"switch",type:"switch",cellHeaderClasses:"width_percent_20",group:c("Constraints"),editable:"editable_check_for_table",options:{onText:c("Yes"),offText:c("No"),onColor:"success",offColor:"primary"},deps:["colconstype"],disabled:function e(t){if(t.get("colconstype")=="i"){setTimeout(function(){t.set("attnotnull",true)},10)}return t.inSchemaWithColumnCheck(t)}},{id:"colconstype",label:c("Type"),cell:"string",type:"radioModern",controlsClassName:"pgadmin-controls col-12 col-sm-9",controlLabelClassName:"control-label col-sm-3 col-12",group:c("Constraints"),options:function e(t){var i=[{label:c("NONE"),value:"n"},{label:c("IDENTITY"),value:"i"}];if(t.top.node_info&&t.top.node_info.server&&t.top.node_info.server.version>=12e4){if(t.isNew()){i.push({label:c("GENERATED"),value:"g"})}else{i.push({label:c("GENERATED"),value:"g",disabled:true})}}return i},disabled:function e(t){if(!t.isNew()&&t.get("colconstype")=="g"){return true}return false},visible:function e(t){if(t.top.node_info&&t.top.node_info.server&&t.top.node_info.server.version>=1e5){return true}return false}},{id:"attidentity",label:c("Identity"),control:"select2",cell:"select2",select2:{placeholder:"Select identity",allowClear:false,width:"100%"},min_version:1e5,group:c("Constraints"),options:[{label:c("ALWAYS"),value:"a"},{label:c("BY DEFAULT"),value:"d"}],deps:["colconstype"],visible:"isTypeIdentity",disabled:function e(t){if(!t.isNew()){if(t.get("attidentity")==""&&t.get("colconstype")=="i"){setTimeout(function(){t.set("attidentity",t.get("old_attidentity"))},10)}}return false}},{id:"seqincrement",label:c("Increment"),type:"int",mode:["properties","create","edit"],group:c("Constraints"),min:1,deps:["attidentity","colconstype"],disabled:"isIdentityColumn",visible:"isTypeIdentity"},{id:"seqstart",label:c("Start"),type:"int",mode:["properties","create"],group:c("Constraints"),disabled:function e(t){if(!t.isNew())return true;var i=t.get("attidentity");if(!u.isUndefined(i)&&!u.isNull(i)&&!u.isEmpty(i))return false;return true},deps:["attidentity","colconstype"],visible:"isTypeIdentity"},{id:"seqmin",label:c("Minimum"),type:"int",mode:["properties","create","edit"],group:c("Constraints"),deps:["attidentity","colconstype"],disabled:"isIdentityColumn",visible:"isTypeIdentity"},{id:"seqmax",label:c("Maximum"),type:"int",mode:["properties","create","edit"],group:c("Constraints"),deps:["attidentity","colconstype"],disabled:"isIdentityColumn",visible:"isTypeIdentity"},{id:"seqcache",label:c("Cache"),type:"int",mode:["properties","create","edit"],group:c("Constraints"),min:1,deps:["attidentity","colconstype"],disabled:"isIdentityColumn",visible:"isTypeIdentity"},{id:"seqcycle",label:c("Cycled"),type:"switch",mode:["properties","create","edit"],group:c("Constraints"),deps:["attidentity","colconstype"],disabled:"isIdentityColumn",visible:"isTypeIdentity"},{id:"genexpr",label:c("Expression"),type:"text",mode:["properties","create","edit"],group:c("Constraints"),min_version:12e4,deps:["colconstype"],visible:"isTypeGenerated",disabled:function e(t){return!t.isNew()}},{id:"is_pk",label:c("Primary key?"),type:"switch",disabled:true,mode:["properties"],group:c("Definition")},{id:"is_fk",label:c("Foreign key?"),type:"switch",disabled:true,mode:["properties"],group:c("Definition")},{id:"is_inherited",label:c("Inherited?"),type:"switch",disabled:true,mode:["properties"],group:c("Definition")},{id:"tbls_inherited",label:c("Inherited from table(s)"),type:"text",disabled:true,mode:["properties"],deps:["is_inherited"],group:c("Definition"),visible:function e(t){if(!u.isUndefined(t.get("is_inherited"))&&t.get("is_inherited")){return true}else{return false}}},{id:"is_sys_column",label:c("System column?"),cell:"string",type:"switch",disabled:true,mode:["properties"]},{id:"description",label:c("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"notInSchema"},{id:"attoptions",label:c("Variables"),type:"collection",group:c("Variables"),control:"unique-col-collection",model:s,uniqueCol:["name"],mode:["edit","create"],canAdd:true,canEdit:false,canDelete:true},l.SecurityGroupSchema,{id:"attacl",label:c("Privileges"),type:"collection",group:"security",control:"unique-col-collection",model:l.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","x"]}),mode:["edit"],canAdd:true,canDelete:true,uniqueCol:["grantee"]},{id:"seclabels",label:c("Security labels"),canAdd:true,model:l.SecLabelModel,group:"security",mode:["edit","create"],editable:false,type:"collection",min_version:90100,canEdit:false,canDelete:true,control:"unique-col-collection"}],validate:function e(t){var i=undefined;if(t&&t.length==0){this.errorModel.clear();return null}else{this.errorModel.clear()}if(u.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){i=c("Column name cannot be empty.");this.errorModel.set("name",i);return i}if(u.isUndefined(this.get("cltype"))||String(this.get("cltype")).replace(/^\s+|\s+$/g,"")==""){i=c("Column type cannot be empty.");this.errorModel.set("cltype",i);return i}if(!u.isUndefined(this.get("cltype"))&&!u.isUndefined(this.get("attlen"))&&!u.isNull(this.get("attlen"))&&this.get("attlen")!==""){if(this.get("attlen")<this.get("min_val"))i=c("Length should not be less than: ")+this.get("min_val");if(this.get("attlen")>this.get("max_val"))i=c("Length should not be greater than: ")+this.get("max_val");if(i){this.errorModel.set("attlen",i);return i}}if(!u.isUndefined(this.get("cltype"))&&!u.isUndefined(this.get("attprecision"))&&!u.isNull(this.get("attprecision"))&&this.get("attprecision")!==""){if(this.get("attprecision")<this.get("min_val"))i=c("Precision should not be less than: ")+this.get("min_val");if(this.get("attprecision")>this.get("max_val"))i=c("Precision should not be greater than: ")+this.get("max_val");if(i){this.errorModel.set("attprecision",i);return i}}var n=this.get("genexpr");if(this.get("colconstype")=="g"&&(u.isUndefined(n)||u.isNull(n)||n=="")){i=c("Expression value cannot be empty.");this.errorModel.set("genexpr",i);return i}else{this.errorModel.unset("genexpr")}var r=this.get("seqmin"),o=this.get("seqmax"),a=this.get("seqstart");if(!this.isNew()&&this.get("colconstype")=="i"&&(this.get("old_attidentity")=="a"||this.get("old_attidentity")=="d")&&(this.get("attidentity")=="a"||this.get("attidentity")=="d")){if(u.isUndefined(this.get("seqincrement"))||String(this.get("seqincrement")).replace(/^\s+|\s+$/g,"")==""){i=c("Increment value cannot be empty.");this.errorModel.set("seqincrement",i);return i}else{this.errorModel.unset("seqincrement")}if(u.isUndefined(this.get("seqmin"))||String(this.get("seqmin")).replace(/^\s+|\s+$/g,"")==""){i=c("Minimum value cannot be empty.");this.errorModel.set("seqmin",i);return i}else{this.errorModel.unset("seqmin")}if(u.isUndefined(this.get("seqmax"))||String(this.get("seqmax")).replace(/^\s+|\s+$/g,"")==""){i=c("Maximum value cannot be empty.");this.errorModel.set("seqmax",i);return i}else{this.errorModel.unset("seqmax")}if(u.isUndefined(this.get("seqcache"))||String(this.get("seqcache")).replace(/^\s+|\s+$/g,"")==""){i=c("Cache value cannot be empty.");this.errorModel.set("seqcache",i);return i}else{this.errorModel.unset("seqcache")}}var s=c("Minimum value must be less than maximum value."),l=c("Start value cannot be less than minimum value."),d=c("Start value cannot be greater than maximum value.");if(u.isEmpty(r)||u.isEmpty(o))return null;if(r==0&&o==0||parseInt(r,10)>=parseInt(o,10)){this.errorModel.set("seqmin",s);return s}else{this.errorModel.unset("seqmin")}if(a&&r&&parseInt(a)<parseInt(r)){this.errorModel.set("seqstart",l);return l}else{this.errorModel.unset("seqstart")}if(a&&o&&parseInt(a)>parseInt(o)){this.errorModel.set("seqstart",d);return d}else{this.errorModel.unset("seqstart")}return null},isIdentityColumn:function e(t){var i=t.get("attidentity");if(!u.isUndefined(i)&&!u.isNull(i)&&!u.isEmpty(i))return false;return true},isTypeIdentity:function e(t){var i=t.get("colconstype");if(!u.isUndefined(i)&&!u.isNull(i)&&i=="i"){return true}return false},isTypeGenerated:function e(t){var i=t.get("colconstype");if(!u.isUndefined(i)&&!u.isNull(i)&&i=="g"){return true}return false},notInSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},inSchemaWithColumnCheck:function e(t){var i=this.node_info||t.node_info||t.top.node_info;if(i&&("view"in i||"mview"in i)){if(this&&u.has(this,"name")&&this.name!="defval"){return true}}if(i&&"schema"in i){if(!u.isUndefined(t.get("inheritedfrom"))){return true}if(t.isNew()){return false}if(!u.isUndefined(t.get("attnum"))&&t.get("attnum")>0){return false}else{return true}}return true},editable_check_for_table:function e(t){if(t instanceof i.Collection){return!t.model.prototype.inSchemaWithColumnCheck.apply(this,[t.top])}else{return!t.inSchemaWithColumnCheck.apply(this,[t])}}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=l.tree,o=i,a=t,s=[];while(o){if(u.indexOf(["schema"],a._type)>-1){return true}else if(u.indexOf(["view","coll-view","mview","coll-mview"],a._type)>-1){s.push(a._type);break}s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(u.indexOf(s,"catalog")>-1||u.indexOf(s,"coll-view")>-1||u.indexOf(s,"coll-mview")>-1||u.indexOf(s,"mview")>-1||u.indexOf(s,"view")>-1){return false}else{return true}}})}return l.Nodes["column"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(0),i(1),i(3),i(5),i(7),i(158),i(159),i(160),i(161),i(162)],r=function(e,t,i,n,r){if(!r.Nodes["coll-constraints"]){n.Browser.Nodes["coll-constraints"]=n.Browser.Collection.extend({node:"constraints",label:e("Constraints"),type:"coll-constraints",columns:["name","comment"],canDrop:false,canDropCascade:false})}if(!r.Nodes["constraints"]){n.Browser.Nodes["constraints"]=r.Node.extend({type:"constraints",label:e("Constraints"),collection_type:"coll-constraints",parent_type:["table","partition"],Init:function e(){if(this.initialized)return;this.initialized=true;r.add_menus([])},model:n.Browser.Node.Model.extend({defaults:{name:undefined,oid:undefined,comment:undefined},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"]},{id:"oid",label:e("Oid"),cell:"string",type:"text",mode:["properties"]},{id:"comment",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"]}]})})}return r.Nodes["constraints"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(12),i(7)],r=function(r,e,t,u,i,f,n,o){if(!f.Nodes["unique_constraint"]){i.Browser.Nodes["unique_constraint"]=f.Node.extend({type:"unique_constraint",label:r("Unique constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:e("help.static",{filename:"unique_constraint_dialog.html"}),hasSQL:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[r("Index size")],parent_type:["table","partition"],canDrop:true,canDropCascade:true,Init:function e(){if(this.initialized)return;this.initialized=true;f.add_menus([{name:"create_unique_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Unique constraint"),icon:"wcTabIcon icon-unique_constraint",data:{action:"create",check:true},enable:"canCreate"}])},canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=f.tree,o=i,a=t,s=[],l=false,d=false,c=this.getTreeNodeHierarchy(o).server.version;while(o){if(!l&&(a._type=="table"||a._type=="partition")){l=true;if("is_partitioned"in a&&a.is_partitioned&&c<11e4){d=true}}if(u.indexOf(["schema"],a._type)>-1){return!d}s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(u.indexOf(s,"catalog")>-1){return false}else{return!d}},model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,comment:undefined,spcname:undefined,index:undefined,fillfactor:undefined,condeferrable:undefined,condeferred:undefined,columns:[],include:[]},schema:[{id:"name",label:r("Name"),type:"text",mode:["properties","create","edit"],editable:true,cellHeaderClasses:"width_percent_40"},{id:"oid",label:r("OID"),cell:"string",type:"text",mode:["properties"],editable:false,cellHeaderClasses:"width_percent_20"},{id:"comment",label:r("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function e(t){var i=t.get("name");if(!(i&&i!="")){setTimeout(function(){if(t.get("comment")&&t.get("comment")!==""){t.set("comment",null)}},10);return true}else{return false}}},{id:"columns",label:r("Columns"),type:"collection",group:r("Definition"),editable:false,cell:o.StringCell.extend({initialize:function e(){o.StringCell.prototype.initialize.apply(this,arguments);var t=this,i=this.model.get("columns");if(u.isUndefined(t.model.get("oid"))){var n=t.model.top.get("columns");t.listenTo(n,"remove",t.removeColumn);t.listenTo(n,"change:name",t.resetColOptions)}i.on("pgadmin:multicolumn:updated",function(){t.render.apply(t)});t.listenTo(i,"add",t.render);t.listenTo(i,"remove",t.render)},removeColumn:function e(t){var i=this,n=i.model.get("columns").where({column:t.get("name")});i.model.get("columns").remove(n);setTimeout(function(){i.render()},10);var r="unique_constraint";setTimeout(function(){var e=i.model.top.get(r),t=[];e.each(function(e){if(e.get("columns").length==0){t.push(e)}});e.remove(t)},100)},resetColOptions:function e(t){var i=this,n=i.model.get("columns").where({column:t.previous("name")});if(n.length>0){n[0].set({column:t.get("name")},{silent:true})}setTimeout(function(){i.render()},10)},formatter:{fromRaw:function e(t){return t.pluck("column").toString()},toRaw:function e(t){return t}},render:function e(){return o.StringCell.prototype.render.apply(this,arguments)},remove:function e(){var t=this.model.top.get("columns"),i=this.model.get("columns");if(i){i.off("pgadmin:multicolumn:updated")}this.stopListening(t,"remove",self.removeColumn);this.stopListening(t,"change:name",self.resetColOptions);o.StringCell.prototype.remove.apply(this,arguments)}}),canDelete:true,canAdd:true,control:n.MultiSelectAjaxControl.extend({defaults:u.extend({},n.NodeListByNameControl.prototype.defaults,{select2:{multiple:true,allowClear:true,width:"style",placeholder:r("Select the column(s)")}}),keyPathAccessor:function e(t,i){var n=t;if(u.isArray(n)){return u.map(n,function(e){return e["column"]})}i=i.split(".");for(var r=0;r<i.length;r++){if(u.isNull(n))return null;if(u.isEmpty(i[r]))continue;if(!u.isUndefined(n[i[r]]))n=n[i[r]]}return u.isObject(n)&&!u.isArray(n)?null:n},initialize:function e(){var t=this;if(this.model.handler){n.Select2Control.prototype.initialize.apply(this,arguments);if(u.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.resetColOptions);t.listenTo(i,"change:name",t.resetColOptions)}t.custom_options()}else{n.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)}t.model.get("columns").on("pgadmin:multicolumn:updated",function(){t.render.apply(t)})},resetColOptions:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},custom_options:function e(){var t=this.model.top.get("columns"),i=[];if(t.length>0){u.each(t.models,function(e){var t=e.get("name");if(!u.isUndefined(t)&&!u.isNull(t)){i.push({label:t,value:t,image:"icon-column"})}})}this.field.set("options",i)},onChange:function e(){var i=this,t=this.model,n=this.field.get("name").split("."),r=n.shift(),o=this.getValueFromDOM(),a=t.get(r),s=[];this.stopListening(this.model,"change:"+r,this.render);a.each(function(e){var t=e.get("column"),i=u.indexOf(o,t);if(i>-1){o.splice(i,1)}else{s.push(t)}});u.each(o,function(e){var t=new(i.field.get("model"))({column:e},{silent:true,top:i.model.top,collection:a,handler:a});a.add(t)});u.each(s,function(e){a.remove(a.where({column:e}))});this.listenTo(this.model,"change:"+r,this.render)},remove:function e(){if(this.model.handler){var t=this,i=t.model.top.get("columns");t.stopListening(i,"remove",t.resetColOptions);t.stopListening(i,"change:name",t.resetColOptions);t.model.get("columns").off("pgadmin:multicolumn:updated");n.Select2Control.prototype.remove.apply(this,arguments)}else{n.MultiSelectAjaxControl.prototype.remove.apply(this,arguments)}}}),deps:["index"],node:"column",model:f.Node.Model.extend({defaults:{column:undefined},validate:function e(){return null}}),transform:function e(t){var i=[];if(t&&u.isArray(t)){u.each(t,function(e){i.push({label:e.label,value:e.label,image:"icon-column"})})}return i},select2:{allowClear:false},disabled:function e(t){if(u.has(t,"top")&&!u.isUndefined(t.top)&&!t.top.isNew()){return!u.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(u.isUndefined(i)||i==""){return false}else{var n=t.get("columns");n.reset();return true}}},{id:"include",label:r("Include columns"),type:"array",group:r("Definition"),editable:false,canDelete:true,canAdd:true,mode:["properties","create","edit"],visible:function e(t){t=t.top;if(!u.isUndefined(t.node_info)&&!u.isUndefined(t.node_info.server)&&!u.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=11e4)return true;return false},control:n.MultiSelectAjaxControl.extend({defaults:u.extend({},n.NodeListByNameControl.prototype.defaults,{select2:{allowClear:false,width:"style",multiple:true,placeholder:r("Select the column(s)")}}),initialize:function e(){var t=this;if(this.model.handler){n.Select2Control.prototype.initialize.apply(this,arguments);if(u.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.resetColOptions);t.listenTo(i,"change:name",t.resetColOptions)}t.custom_options()}else{n.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)}},resetColOptions:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},custom_options:function e(){var t=this.model.top.get("columns"),i=[];if(t.length>0){u.each(t.models,function(e){var t=e.get("name");if(!u.isUndefined(t)&&!u.isNull(t)){i.push({label:t,value:t,image:"icon-column"})}})}this.field.set("options",i)}}),deps:["index"],node:"column",disabled:function e(t){if(u.has(t,"top")&&!u.isUndefined(t.top)&&!t.top.isNew()){return!u.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(u.isUndefined(i)||i==""){return false}else{var n=t.get("columns");n.reset();return true}}},{id:"spcname",label:r("Tablespace"),type:"text",group:r("Definition"),control:"node-list-by-name",node:"tablespace",deps:["index"],select2:{allowClear:false},filter:function e(t){if(t.label=="pg_global")return false;else return true},disabled:function e(t){t=t.top||t;var i=t.get("index");if(u.isUndefined(i)||i==""){return false}else{setTimeout(function(){t.set("spcname","")},10);return true}}},{id:"index",label:r("Index"),type:"text",group:r("Definition"),control:n.NodeListByNameControl.extend({initialize:function e(){if(u.isUndefined(this.model.top)){n.NodeListByNameControl.prototype.initialize.apply(this,arguments)}else{n.Control.prototype.initialize.apply(this,arguments)}}}),select2:{allowClear:true},node:"index",disabled:function e(t){if(u.has(t,"top")&&!u.isUndefined(t.top)&&!t.top.isNew()){return true}return!t.isNew()},visible:function e(t){return!u.isUndefined(t.top.node_info["table"])}},{id:"fillfactor",label:r("Fill factor"),deps:["index"],type:"int",group:r("Definition"),allowNull:true,disabled:function e(t){var i=t.get("index");if(u.isUndefined(i)||i==""){return false}else{setTimeout(function(){t.set("fillfactor",null)},10);return true}}},{id:"condeferrable",label:r("Deferrable?"),type:"switch",group:r("Definition"),deps:["index"],disabled:function e(t){if(u.has(t,"top")&&!u.isUndefined(t.top)&&!t.top.isNew()){return!u.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(u.isUndefined(i)||i==""){return false}else{setTimeout(function(){if(t.get("condeferrable"))t.set("condeferrable",false)},10);return true}}},{id:"condeferred",label:r("Deferred?"),type:"switch",group:r("Definition"),deps:["condeferrable"],disabled:function e(t){if(u.has(t,"top")&&!u.isUndefined(t.top)&&!t.top.isNew()){return!u.isUndefined(t.get("oid"))}if(!t.isNew()){return true}if(t.get("condeferrable")==true){return false}else{setTimeout(function(){if(t.get("condeferred"))t.set("condeferred",false)},10);return true}}}],validate:function e(){this.errorModel.clear();if(u.has(this,"top")){this.top.errorModel.clear()}var t=this.get("columns"),i=this.get("index");if((u.isUndefined(i)||String(i).replace(/^\s+|\s+$/g,"")=="")&&(u.isUndefined(t)||u.isNull(t)||t.length<1)){var n=r("Please specify columns for %(node)s",{node:r("Unique constraint")});this.errorModel.set("columns",n);return n}return null}})})}return f.Nodes["unique_constraint"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(10),i(11),i(7)],r=function(n,e,l,d,t,i,c,u,r){if(!c.Nodes["check_constraint"]){i.Browser.Nodes["check_constraint"]=c.Node.extend({type:"check_constraint",label:n("Check"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:e("help.static",{filename:"check_dialog.html"}),hasSQL:true,hasDepends:true,parent_type:["table","partition"],Init:function e(){if(this.initialized)return;this.initialized=true;c.add_menus([{name:"create_check_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:n("Check..."),icon:"wcTabIcon icon-check_constraint",data:{action:"create",check:true},enable:"canCreate"},{name:"validate_check_constraint",node:"check_constraint",module:this,applies:["object","context"],callback:"validate_check_constraint",category:"validate",priority:4,label:n("Validate check constraint"),icon:"fa fa-link",enable:"is_not_valid",data:{action:"edit",check:true}}])},is_not_valid:function e(t,i,n){if(this.canCreate(t,i,n)){return t&&!t.valid}else{return false}},callbacks:{validate_check_constraint:function e(t){var i=t||{},n=this,r=c.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a){return false}var s=a;l.ajax({url:n.generate_url(o,"validate",a,true),type:"GET"}).done(function(e){if(e.success==1){u.success(e.info);r.removeIcon(o);s.valid=true;s.icon="icon-check_constraint";r.addIcon(o,{icon:s.icon});setTimeout(function(){r.deselect(o)},10);setTimeout(function(){r.select(o)},100)}}).fail(function(e,t,i){u.pgRespErrorNotify(e,i);r.unload(o)});return false}},canDrop:r.isTreeItemOfChildOfSchema,model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,description:undefined,consrc:undefined,connoinherit:undefined,convalidated:true},schema:[{id:"name",label:n("Name"),type:"text",cell:"string",disabled:"isDisabled"},{id:"oid",label:n("OID"),cell:"string",type:"text",mode:["properties"]},{id:"comment",label:n("Comment"),type:"multiline",cell:"string",mode:["properties","create","edit"],deps:["name"],disabled:function e(t){var i=t.get("name");if(!(i&&i!="")){setTimeout(function(){if(t.get("comment")&&t.get("comment")!=="")t.set("comment",null)},10);return true}else{return false}}},{id:"consrc",label:n("Check"),type:"multiline",cell:"string",group:n("Definition"),mode:["properties","create","edit"],disabled:function e(t){return d.has(t,"handler")&&!d.isUndefined(t.handler)&&!d.isUndefined(t.get("oid"))||d.isFunction(t.isNew)&&!t.isNew()},editable:false},{id:"connoinherit",label:n("No inherit?"),type:"switch",cell:"boolean",group:n("Definition"),mode:["properties","create","edit"],min_version:90200,disabled:function e(t){if(d.has(t,"top")&&!d.isUndefined(t.top)&&t.top.get("is_partitioned")||d.has(t,"node_info")&&d.has(t.node_info,"table")&&d.has(t.node_info.table,"is_partitioned")&&t.node_info.table.is_partitioned){setTimeout(function(){t.set("connoinherit",false)},10);return true}return d.has(t,"handler")&&!d.isUndefined(t.handler)&&!d.isUndefined(t.get("oid"))||d.isFunction(t.isNew)&&!t.isNew()}},{id:"convalidated",label:n("Don't validate?"),type:"switch",cell:"boolean",group:n("Definition"),min_version:90200,disabled:function e(t){if(d.isFunction(t.isNew)&&!t.isNew()||d.has(t,"handler")&&!d.isUndefined(t.handler)&&!d.isUndefined(t.get("oid"))){return!t.get("convalidated")}else{return false}},mode:["properties","create","edit"]}],validate:function e(){var t={},i;if(d.isUndefined(this.get("consrc"))||String(this.get("consrc")).replace(/^\s+|\s+$/g,"")==""){t["consrc"]=n("Check cannot be empty.");i=i||t["consrc"]}this.errorModel.clear().set(t);if(d.size(t)){this.trigger("on-status",{msg:i});return i}return null},isDisabled:function e(t){if(d.has(t,"handler")&&!d.isUndefined(t.handler)&&!d.isUndefined(t.get("oid"))||d.isFunction(t.isNew)&&!t.isNew()){var i=(this.node_info||t.top.node_info).server;if(i.version<90200){return true}}return false}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=c.tree,o=i,a=t,s=[];while(o){if(d.indexOf(["schema"],a._type)>-1)return true;s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(d.indexOf(s,"catalog")>-1){return false}else{return true}}})}return c.Nodes["check_constraint"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(10),i(6),i(12),i(7)],r=function(d,e,c,u,f,i,h,l,p,s){var m=function e(t){if(!t.id){return t.text}var i=c(t.element).data("image");if(!i){return t.text}else{return c('<span><span class="wcTabIcon '+i+'"/>'+t.text+"</span>")}},g=u.template(["<div class=\"<%=Backform.controlsClassName%> <%=extraClasses.join(' ')%>\">",'  <select class="pgadmin-node-select form-control" name="<%=name%>" style="width:100%;" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> >','    <%=select2.first_empty ? " <option></option>" : ""%>',"    <% for (var i=0; i < options.length; i++) { %>","    <% var option = options[i]; %>",'    <option <% if (option.image) { %> data-image=<%= option.image %> <% } %> value=<%= formatter.fromRaw(option.value) %> <%=option.value === rawValue ? "selected=\'selected\'" : "" %>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n"));var t=h.Node.Model.extend({defaults:{local_column:undefined,references:undefined,referenced:undefined},schema:[{id:"local_column",label:d("Local"),type:"text",editable:false,cellHeaderClasses:"width_percent_50",cell:"string",headerCell:s.Extension.CustomHeaderCell},{id:"referenced",label:d("Referenced"),type:"text",editable:false,cell:"string",cellHeaderClasses:"width_percent_50",headerCell:s.Extension.CustomHeaderCell}]});var n=p.ForeignKeyColumnControl=p.UniqueColCollectionControl.extend({initialize:function e(){p.UniqueColCollectionControl.prototype.initialize.apply(this,arguments);var n=this,t="foreign_key",i=[{id:"local_column",label:"",type:"text",node:"column",control:p.NodeListByNameControl.extend({initialize:function e(){if(n.model.handler){p.Select2Control.prototype.initialize.apply(this,arguments);if(u.isUndefined(n.model.get("oid"))){var t=n.model.top.get("columns");this.listenTo(t,"remove",this.removeColumn);this.listenTo(t,"change:name",this.resetColOptions)}this.custom_options()}else{p.NodeListByNameControl.prototype.initialize.apply(this,arguments)}},removeColumn:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},resetColOptions:function e(t){var i=this;if(t.previous("name")==n.headerData.get("local_column")){n.headerData.set({local_column:t.get("name")});n.headerDataChanged()}setTimeout(function(){i.custom_options();i.render.apply(i)},50)},custom_options:function e(){var t=n.model.top.get("columns"),i=[];if(t.length>0){u.each(t.models,function(e){var t=e.get("name");if(!u.isUndefined(t)&&!u.isNull(t)){i.push({label:t,value:t,image:"icon-column"})}})}this.field.set("options",i)},template:g,remove:function e(){if(n.model.handler){var t=n.model.top.get("columns");this.stopListening(t,"remove",this.removeColumn);this.stopListening(t,"change:name",this.resetColOptions);p.Select2Control.prototype.remove.apply(this,arguments)}else{p.NodeListByNameControl.prototype.remove.apply(this,arguments)}}}),select2:{allowClear:false,width:"style",placeholder:d("Select column"),first_empty:!u.isUndefined(n.model.get("oid"))},version_compatible:n.field.get("version_compatible"),disabled:function e(){return!u.isUndefined(n.model.get("oid"))}},{id:"references",label:"",type:"text",cache_level:"server",select2:{allowClear:false,width:"style",placeholder:"Select foreign table"},first_empty:true,control:p.NodeListByNameControl.extend({formatter:p.ControlFormatter,template:g}),url:"all_tables",node:"table",version_compatible:n.field.get("version_compatible"),disabled:function e(){return!u.isUndefined(n.model.get("oid"))},transform:function e(t){var i=[];u.each(t,function(e){i.push({value:e.value,image:"icon-table",label:e.label})});return i}},{id:"referenced",label:"",type:"text",cache_level:"server",transform:function e(t){var i=[];u.each(t,function(e){i.push({value:e.name,image:"icon-column",label:e.name})});return i},control:p.Select2Control.extend({formatter:p.ControlFormatter,template:g,render:function e(){var t=this,i=t.field.get("url")||t.defaults.url,n=t.model,r=n.get("references");n.set(t.field.get("name"),null,{silent:true});if(i&&!u.isUndefined(r)&&!u.isNull(r)&&r!=""){var o=this.field.get("schema_node"),a=this.field.get("node_info"),s=o.generate_url.apply(o,[null,i,this.field.get("node_data"),this.field.get("url_with_id")||false,a]),l=[];if(this.field.get("version_compatible")){n.trigger("pgadmin:view:fetching",n,t.field);c.ajax({async:false,data:{tid:r},url:s}).done(function(e){l=e.data}).fail(function(){n.trigger("pgadmin:view:fetch:error",n,t.field)});n.trigger("pgadmin:view:fetched",n,t.field)}var d=this.field.get("transform")||t.defaults.transform;if(d&&u.isFunction(d)){t.field.set("options",d.bind(t,l))}else{t.field.set("options",l)}}else{t.field.set("options",[])}p.Select2Control.prototype.render.apply(this,arguments);return this}}),url:"get_columns",select2:{allowClear:false,width:"style",placeholder:d("Select column"),templateResult:m,templateSelection:m},deps:["references"],node:"table",version_compatible:n.field.get("version_compatible"),disabled:function e(){return!u.isUndefined(n.model.get("oid"))}}],r={local_column:null,references:null,referenced:null},o=["local_column","references","referenced"];if(!n.model.isNew()&&u.isUndefined(n.model.handler)||u.has(n.model,"handler")&&!u.isUndefined(n.model.handler)&&!u.isUndefined(n.model.get("oid"))){var a=n.collection.first();if(a){r["references"]=a.get("references")}}n.headerData=new(f.Model.extend({defaults:r,schema:i}))({});var s=p.generateViewSchema(n.field.get("node_info"),n.headerData,"create",t,n.field.get("node_data")),l=[];u.each(s,function(e){l=l.concat(e.fields)});n.headerFields=new p.Fields(l);n.gridSchema=p.generateGridColumnsFromModel(n.field.get("node_info"),n.field.get("model"),"edit",o,n.field.get("schema_node"));n.controls=[];n.listenTo(n.headerData,"change",n.headerDataChanged);n.listenTo(n.headerData,"select2",n.headerDataChanged);n.listenTo(n.collection,"add",n.onAddorRemoveColumns);n.listenTo(n.collection,"remove",n.onAddorRemoveColumns)},generateHeader:function e(t){var i=['<div class="subnode-header-form">'," <div>",'  <div class="row">','   <div class="col-md-4">','    <label class="control-label"><%-column_label%></label>',"   </div>",'   <div class="col-md-6" header="local_column"></div>',"  </div>",'  <div class="row">','   <div class="col-md-4">','    <label class="control-label"><%-references_label%></label>',"   </div>",'   <div class="col-md-6" header="references"></div>',"  </div>",'  <div class="row">','   <div class="col-md-4">','    <label class="control-label"><%-referenced_label%></label>',"   </div>",'   <div class="col-md-6" header="referenced"></div>',"  </div>"," </div>","</div>"].join("\n");u.extend(t,{column_label:d("Local column"),references_label:d("References"),referenced_label:d("Referencing")});var n=this,r=u.template(i),o=c(r(t)),a=this.controls;this.headerFields.each(function(e){var t=new(e.get("control"))({field:e,model:n.headerData});o.find('div[header="'+e.get("name")+'"]').append(t.render().$el);a.push(t)});if(t.mode=="properties"){o.html("")}n.$header=o;return o},events:u.extend({},p.UniqueColCollectionControl.prototype.events,{"click button.add":"addColumns"}),showGridControl:function e(t){var i=this,n=u.template(['<div class="subnode-header">','  <label class="control-label pg-el-sm-10"><%-label%></label>','  <button class="btn btn-sm-sq btn-secondary add fa fa-plus" <%=canAdd ? "" : "disabled=\'disabled\'"%> title="'+u("Add new row")+'"></button>',"</div>"].join("\n")),r=c("<div class='pgadmin-control-group backgrid form-group col-12 object subnode'></div>").append(t.mode!=="properties"?n({label:t.label,canAdd:t.canAdd}):"");if(i.grid){i.grid.remove()}r.append(i.generateHeader(t));var o=u.clone(this.gridSchema);if(t.disabled==false&&t.canDelete){o.columns.unshift({name:"pg-backform-delete",label:"",cell:s.Extension.DeleteCell,editable:false,cell_priority:-1})}var a=i.grid=new s.Grid({columns:o.columns,collection:i.collection,className:"backgrid table-bordered table-noouter-border table-hover"});i.$grid=a.render().$el;r.append(i.$grid);setTimeout(function(){i.headerData.set({local_column:i.$header.find('div[header="local_column"] select option:first').val(),referenced:i.$header.find('div[header="referenced"] select option:first').val(),references:i.$header.find('div[header="references"] select option:first').val()},{silent:true})},10);if(t.mode==="properties")r.find(".subnode-header-form").removeClass("subnode-header-form");i.$gridBody=r;return r},headerDataChanged:function e(){var t=this,i,n=this.headerData.toJSON(),r=false,o=["local_column","referenced"];if(!t.$header){return}if(t.control_data.canAdd){t.collection.each(function(t){if(!r){u.each(o,function(e){if(!r){i=t.get(e);r=(u.isUndefined(i)||u.isNull(i))&&(u.isUndefined(n[e])||u.isNull(n[e]))||i==n[e]}})}})}else{r=true}t.$gridBody.find("button.add").prop("disabled",r)},addColumns:function e(t){t.preventDefault();var i=this,n=i.headerData.get("local_column"),r=i.headerData.get("referenced");if(!n||n==""||!r||r==""){return false}var o=new(i.field.get("model"))(i.headerData.toJSON()),a=i.model.get(i.field.get("name"));a.add(o);var s=a.indexOf(o);if(s>-1){i.$grid.find(".new").removeClass("new");var l=i.grid.body.rows[s].$el;l.addClass("new");c(l).pgMakeVisible("backform-tab")}else{}return false},onAddorRemoveColumns:function e(){var t=this;setTimeout(function(){if(t.collection.length>0){t.$header.find('div[header="references"] select').prop("disabled",true)}else{t.$header.find('div[header="references"] select').prop("disabled",false)}t.collection.trigger("pgadmin:columns:updated",t.collection);t.headerDataChanged();if(!u.has(t.model,"handler")||u.has(t.model,"handler")&&u.isUndefined(t.model.handler)||u.has(t.model,"handler")&&!u.isUndefined(t.model.handler)&&!u.isUndefined(t.model.handler.get("oid"))){t.getCoveringIndex()}},10)},getCoveringIndex:function e(){var t=this,i="get_coveringindex",n=t.model,r=[],o=null;t.collection.each(function(e){r.push(e.get("local_column"))});if(r.length>0){var a=this.field.get("schema_node"),s=this.field.get("node_info"),l=a.generate_url.apply(a,[null,i,this.field.get("node_data"),this.field.get("url_with_id")||false,s]);if(this.field.get("version_compatible")){n.trigger("pgadmin:view:fetching",n,t.field);c.ajax({async:false,data:{cols:JSON.stringify(r)},url:l}).done(function(e){o=e.data}).fail(function(){n.trigger("pgadmin:view:fetch:error",n,t.field)});n.trigger("pgadmin:view:fetched",n,t.field)}}if(o){n.set("hasindex",true);n.set("autoindex",false);n.set("coveringindex",o)}else{n.set("coveringindex",null);n.set("autoindex",true);n.set("hasindex",false)}},remove:function e(){this.stopListening(this.headerData,"change",this.headerDataChanged);this.listenTo(this.headerData,"select2",this.headerDataChanged);this.listenTo(this.collection,"remove",this.onRemoveVariable);u.each(this.controls,function(e){e.remove()});n.__super__.remove.apply(this,arguments);delete this.headerData}});if(!h.Nodes["foreign_key"]){i.Browser.Nodes["foreign_key"]=h.Node.extend({type:"foreign_key",label:d("Foreign key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:e("help.static",{filename:"foreign_key_dialog.html"}),hasSQL:true,parent_type:["table","partition"],canDrop:true,canDropCascade:true,hasDepends:true,Init:function e(){if(this.initialized)return;this.initialized=true;h.add_menus([{name:"create_foreign_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:d("Foreign key..."),icon:"wcTabIcon icon-foreign_key",data:{action:"create",check:true},enable:"canCreate"},{name:"validate_foreign_key",node:"foreign_key",module:this,applies:["object","context"],callback:"validate_foreign_key",category:"validate",priority:4,label:d("Validate foreign key"),icon:"fa fa-link",enable:"is_not_valid"}])},is_not_valid:function e(t){return t&&!t.valid},callbacks:{validate_foreign_key:function e(t){var i=t||{},n=this,r=h.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a){return false}var s=a;c.ajax({url:n.generate_url(o,"validate",a,true),type:"GET"}).done(function(e){if(e.success==1){l.success(e.info);r.removeIcon(o);s.valid=true;s.icon="icon-foreign_key";r.addIcon(o,{icon:s.icon});setTimeout(function(){r.deselect(o)},10);setTimeout(function(){r.select(o)},100)}}).fail(function(e,t,i){l.pgRespErrorNotify(e,i);r.unload(o)});return false}},model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,comment:undefined,condeferrable:undefined,condeferred:undefined,confmatchtype:undefined,convalidated:undefined,columns:undefined,confupdtype:"a",confdeltype:"a",autoindex:true,coveringindex:undefined,hasindex:undefined},toJSON:function e(){var t=i.Browser.Node.Model.prototype.toJSON.apply(this,arguments);delete t.hasindex;return t},schema:[{id:"name",label:d("Name"),type:"text",mode:["properties","create","edit"],editable:true,headerCell:s.Extension.CustomHeaderCell,cellHeaderClasses:"width_percent_50"},{id:"oid",label:d("OID"),cell:"string",type:"text",mode:["properties"]},{id:"comment",label:d("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function e(t){var i=t.get("name");if(!(i&&i!="")){setTimeout(function(){if(t.get("comment")&&t.get("comment")!=="")t.set("comment",null)},10);return true}else{return false}}},{id:"condeferrable",label:d("Deferrable?"),type:"switch",group:d("Definition"),disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!u.isUndefined(t.get("oid"))}return!t.isNew()}},{id:"condeferred",label:d("Deferred?"),type:"switch",group:d("Definition"),deps:["condeferrable"],disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!u.isUndefined(t.get("oid"))}else if(!t.isNew()){return true}if(t.get("condeferrable")==true){return false}else{setTimeout(function(){if(t.get("condeferred"))t.set("condeferred",false)},10);return true}}},{id:"confmatchtype",label:d("Match type"),type:"switch",group:d("Definition"),options:{onText:"FULL",offText:"SIMPLE",width:"80"},disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!u.isUndefined(t.get("oid"))}return!t.isNew()}},{id:"convalidated",label:d("Validated?"),type:"switch",group:d("Definition"),options:{onText:d("Yes"),offText:d("No")},disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!(u.isUndefined(t.get("oid"))||t.get("convalidated"))}return!(t.isNew()||!t.get("convalidated"))}},{id:"autoindex",label:d("Auto FK index?"),type:"switch",group:d("Definition"),deps:["name","hasindex"],options:{onText:d("Yes"),offText:d("No")},disabled:function e(r){var o=r.get("coveringindex"),t=r.get("autoindex"),i=function e(){var t=r.get("name"),i="fki_"+r.previous("name");if(r.get("hasindex")){return true}else if(r.get("autoindex")&&!u.isUndefined(t)&&!u.isNull(t)&&t!=""&&(u.isUndefined(o)||u.isNull(o)||o==""||o==i)){var n="fki_"+t;r.set("coveringindex",n);return false}else{return false}};if(u.has(r,"handler")&&!u.isUndefined(r.handler)){if(u.isUndefined(r.get("oid"))&&u.isUndefined(r.handler.get("oid"))){setTimeout(function(){if(r.get("autoindex"))r.set("autoindex",false)},10);return true}else{return i()}}else{if(!r.isNew()&&t&&!u.isUndefined(o)&&!u.isNull(o)&&o!=""&&r.get("hasindex")){return true}else{return i()}}}},{id:"coveringindex",label:d("Covering index"),type:"text",mode:["properties","create","edit"],group:d("Definition"),deps:["autoindex","hasindex"],disabled:function e(i){var t=i.get("coveringindex"),n=function e(){if(i.get("hasindex")){return true}else if(!i.get("autoindex")){setTimeout(function(){i.set("coveringindex",null)});return true}else{setTimeout(function(){var e=i.get("name"),t="fki_"+e;if(i.get("autoindex")&&!u.isUndefined(e)&&!u.isNull(e)&&e!=""){i.set("coveringindex",t)}});return false}};if(u.has(i,"handler")&&!u.isUndefined(i.handler)){if(u.isUndefined(i.get("oid"))&&u.isUndefined(i.handler.get("oid"))){return true}else{return n()}}else if(!i.isNew()&&i.get("autoindex")&&!u.isUndefined(t)&&u.isNull(t)&&t==""){return true}return n()}},{id:"columns",label:d("Columns"),type:"collection",group:d("Columns"),node:"foreign_key",editable:false,headerCell:s.Extension.CustomHeaderCell,cellHeaderClasses:"width_percent_50",cell:s.StringCell.extend({initialize:function e(){s.StringCell.prototype.initialize.apply(this,arguments);var t=this,i=this.model.get("columns");if(u.isUndefined(t.model.get("oid"))){var n=t.model.top.get("columns");t.listenTo(n,"remove",t.removeColumn);t.listenTo(n,"change:name",t.resetColOptions)}t.model.get("columns").on("pgadmin:columns:updated",function(){t.render.apply(t)});t.listenTo(i,"add",t.render);t.listenTo(i,"remove",t.render)},removeColumn:function e(t){var i=this,n=i.model.get("columns").where({local_column:t.get("name")});i.model.get("columns").remove(n);setTimeout(function(){i.render()},10);setTimeout(function(){var e=i.model.top.get("foreign_key");var t=[];e.each(function(e){if(e.get("columns").length==0){t.push(e)}});e.remove(t)},100)},resetColOptions:function e(t){var i=this,n=i.model.get("columns").where({local_column:t.previous("name")});if(n.length>0){n[0].set({local_column:t.get("name")})}setTimeout(function(){i.render()},10)},formatter:{fromRaw:function e(t){var i=[],n=[];if(t.length>0){t.each(function(e){i.push(e.get("local_column"));n.push(e.get("referenced"))});return"("+i.join(", ")+") -> ("+n.join(", ")+")"}return""},toRaw:function e(t){return t}},render:function e(){return s.StringCell.prototype.render.apply(this,arguments)},remove:function e(){var t=this.model.top.get("columns");this.stopListening(t,"remove",self.removeColumn);this.stopListening(t,"change:name",self.resetColOptions);s.StringCell.prototype.remove.apply(this,arguments)}}),canAdd:function e(t){return t.isNew()},canDelete:true,control:n,model:t,disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!u.isUndefined(t.get("oid"))}return!t.isNew()}},{id:"confupdtype",label:d("On update"),type:"select2",group:d("Action"),mode:["edit","create"],select2:{width:"50%",allowClear:false},options:[{label:"NO ACTION",value:"a"},{label:"RESTRICT",value:"r"},{label:"CASCADE",value:"c"},{label:"SET NULL",value:"n"},{label:"SET DEFAULT",value:"d"}],disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!u.isUndefined(t.get("oid"))}return!t.isNew()}},{id:"confdeltype",label:d("On delete"),type:"select2",group:d("Action"),mode:["edit","create"],select2:{width:"50%",allowClear:false},options:[{label:"NO ACTION",value:"a"},{label:"RESTRICT",value:"r"},{label:"CASCADE",value:"c"},{label:"SET NULL",value:"n"},{label:"SET DEFAULT",value:"d"}],disabled:function e(t){if(u.has(t,"handler")&&!u.isUndefined(t.handler)){return!u.isUndefined(t.get("oid"))}return!t.isNew()}}],validate:function e(){var t=this.get("columns"),i;this.errorModel.clear();if(u.isUndefined(t)||u.isNull(t)||t.length<1){i=d("Please specify columns for Foreign key.");this.errorModel.set("columns",i);return i}var n=this.get("coveringindex"),r=this.get("autoindex");if(r&&(u.isUndefined(n)||u.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")=="")){i=d("Please specify covering index name.");this.errorModel.set("coveringindex",i);return i}return null}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=h.tree,o=i,a=t,s=[],l=false,d=false,c=this.getTreeNodeHierarchy(o).server.version;while(o){if(!l&&(a._type=="table"||a._type=="partition")){l=true;if("is_partitioned"in a&&a.is_partitioned&&c<11e4){d=true}}if(u.indexOf(["schema"],a._type)>-1)return!d;s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(u.indexOf(s,"catalog")>-1){return false}else{return!d}}})}return h.Nodes["foreign_key"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(9),i(3),i(5),i(18),i(6),i(12),i(7)],r=function(s,e,u,c,d,t,f,a,h,p){var i=f.Node.Model.extend({defaults:{column:undefined,oper_class:undefined,order:false,nulls_order:false,operator:undefined,col_type:undefined,is_sort_nulls_applicable:true},toJSON:function e(){var t=f.Node.Model.prototype.toJSON.apply(this,arguments);delete t.col_type;return t},schema:[{id:"column",label:s("Column"),type:"text",editable:false,cell:"string"},{id:"oper_class",label:s("Operator class"),type:"text",node:"table",url:"get_oper_class",first_empty:true,editable:function e(t){if(t instanceof d.Collection){return true}else if(c.has(t.collection,"handler")&&!c.isUndefined(t.collection.handler)&&!c.isUndefined(t.collection.handler.get("oid"))){return false}else if(c.has(t.collection,"handler")&&!c.isUndefined(t.collection.handler)&&!c.isUndefined(t.collection.handler.get("amname"))&&t.collection.handler.get("amname")!="btree"){return false}return true},select2:{allowClear:true,width:"style",tags:true,placeholder:s("Select the operator class")},cell:p.Extension.Select2Cell.extend({initialize:function e(){p.Extension.Select2Cell.prototype.initialize.apply(this,arguments);var t=this,i=t.column.get("url")||t.defaults.url,n=t.model,r=t.model.collection.handler.get("amname");if(i&&(r=="btree"||c.isUndefined(r)||c.isNull(r)||r=="")){setTimeout(function(){n.set("order",true);n.set("nulls_order",true)},10);var o=this.column.get("schema_node"),a=n.top||n,s=this.column.get("node_info"),l=o.generate_url.apply(o,[null,i,this.column.get("node_data"),this.column.get("url_with_id")||false,s]),d=[];r="btree";if(this.column.get("version_compatible")){a.trigger("pgadmin:view:fetching",n,t.column);u.ajax({async:false,data:{indextype:r},url:l}).done(function(e){d=e.data;t.column.set("options",d)}).fail(function(){a.trigger("pgadmin:view:fetch:error",n,t.column)});a.trigger("pgadmin:view:fetched",n,t.column)}}else{t.column.set("options",[])}}})},{id:"order",label:s("DESC"),type:"switch",options:{onText:"ASC",offText:"DESC"},editable:function e(t){if(t instanceof d.Collection){return true}else if(c.has(t.collection,"handler")&&!c.isUndefined(t.collection.handler)&&!c.isUndefined(t.collection.handler.get("oid"))){return false}else if(t.top.get("amname")==="btree"){t.set("is_sort_nulls_applicable",true);return true}else{t.set("is_sort_nulls_applicable",false);return false}}},{id:"nulls_order",label:s("NULLs order"),type:"switch",options:{onText:"FIRST",offText:"LAST"},editable:function e(t){if(t instanceof d.Collection){return true}else if(c.has(t.collection,"handler")&&!c.isUndefined(t.collection.handler)&&!c.isUndefined(t.collection.handler.get("oid"))){return false}else if(t.top.get("amname")==="btree"){t.set("is_sort_nulls_applicable",true);return true}else{t.set("is_sort_nulls_applicable",false);return false}}},{id:"operator",label:s("Operator"),type:"text",node:"table",url:"get_operator",editable:function e(t){if(t instanceof d.Collection){return true}if(c.has(t.collection,"handler")&&!c.isUndefined(t.collection.handler)&&!c.isUndefined(t.collection.handler.get("oid"))){return false}return true},select2:{allowClear:false,width:"style"},cell:p.Extension.Select2Cell.extend({initialize:function e(){p.Extension.Select2Cell.prototype.initialize.apply(this,arguments);var t=this,i=t.column.get("url")||t.defaults.url,n=t.model,r=t.model.get("col_type");t.column.set("options",[]);if(i&&!c.isUndefined(r)&&!c.isNull(r)&&r!=""){var o=this.column.get("schema_node"),a=n.top||n,s=this.column.get("node_info"),l=o.generate_url.apply(o,[null,i,this.column.get("node_data"),this.column.get("url_with_id")||false,s]),d=[];if(this.column.get("version_compatible")){a.trigger("pgadmin:view:fetching",n,t.column);u.ajax({async:false,data:{col_type:r},url:l}).done(function(e){d=e.data;t.column.set("options",d)}).fail(function(){a.trigger("pgadmin:view:fetch:error",n,t.column)});a.trigger("pgadmin:view:fetched",n,t.column)}}}})}],validate:function e(){this.errorModel.clear();var t=this.get("operator"),i=this.get("column");if(c.isUndefined(t)||c.isNull(t)){var n=s("Please specify operator for column: ")+i;this.errorModel.set("operator",n);return n}return null}});var n=h.ExclusionConstraintColumnControl=h.UniqueColCollectionControl.extend({initialize:function e(){h.UniqueColCollectionControl.prototype.initialize.apply(this,arguments);var l=this,t="exclusion_constraint",i=[{id:"column",label:"",type:"text",node:"column",control:h.NodeListByNameControl.extend({initialize:function e(){if(l.model.handler){h.Select2Control.prototype.initialize.apply(this,arguments);if(c.isUndefined(l.model.get("oid"))){var t=l.model.top.get("columns");this.listenTo(t,"remove",this.removeColumn);this.listenTo(t,"change:name",this.resetColOptions);this.listenTo(t,"change:cltype",this.resetColOptions)}this.custom_options()}else{h.NodeListByNameControl.prototype.initialize.apply(this,arguments)}},removeColumn:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},resetColOptions:function e(t){var i=this;if(t.previous("name")==l.headerData.get("column")){l.headerData.set({column:t.get("name")});l.headerDataChanged()}setTimeout(function(){i.custom_options();i.render.apply(i)},50)},custom_options:function e(){var t=l.model.top.get("columns"),i=[],n=[];if(t.length>0){c.each(t.models,function(e){var t=e.get("name");if(!c.isUndefined(t)&&!c.isNull(t)){i.push({label:t,value:t,image:"icon-column"});n.push({name:t,type:e.get("cltype")})}})}this.field.set("options",i);l.field.set("col_types",n)},remove:function e(){if(l.model.handler){var t=l.model.top.get("columns");this.stopListening(t,"remove",this.removeColumn);this.stopListening(t,"change:name",this.resetColOptions);this.stopListening(t,"change:cltype",this.resetColOptions);h.Select2Control.prototype.remove.apply(this,arguments)}else{h.NodeListByNameControl.prototype.remove.apply(this,arguments)}},template:c.template(["<div class=\"<%=Backform.controlsClassName%> <%=extraClasses.join(' ')%>\">",'  <select class="pgadmin-node-select form-control" name="<%=name%>" style="width:100%;" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> >',"    <% for (var i=0; i < options.length; i++) { %>","    <% var option = options[i]; %>",'    <option <% if (option.image) { %> data-image=<%= option.image %> <% } %> value=<%= formatter.fromRaw(option.value) %> <%=option.value === rawValue ? "selected=\'selected\'" : "" %>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n"))}),transform:function e(t){var n=this,r=n.field.get("schema_node"),o=[],a=[],s=n.field.get("filter")||function(){return true};s=s.bind(n);c.each(t,function(e){if(s(e)){var t=c.isFunction(r["node_label"])?r["node_label"].apply(r,[e,n.model,n]):e.label,i=c.isFunction(r["node_image"])?r["node_image"].apply(r,[e,n.model,n]):r["node_image"]||"icon-"+r.type;o.push({value:e.label,image:i,label:t});a.push({name:e.label,type:e.datatype})}});l.field.set("col_types",a);return o},canAdd:function e(t){return!(c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew())},select2:{allowClear:false,width:"style",placeholder:"Select column"},first_empty:!l.model.isNew(),disabled:function e(){return!c.isUndefined(l.model.get("oid"))}}],n={column:null},r=["column","oper_class","order","nulls_order","operator"];l.headerData=new(d.Model.extend({defaults:n,schema:i}))({});var o=h.generateViewSchema(l.field.get("node_info"),l.headerData,"create",t,l.field.get("node_data")),a=[];c.each(o,function(e){a=a.concat(e.fields)});l.headerFields=new h.Fields(a);l.gridSchema=h.generateGridColumnsFromModel(l.field.get("node_info"),l.field.get("model"),"edit",r,l.field.get("schema_node"));l.controls=[];l.listenTo(l.headerData,"change",l.headerDataChanged);l.listenTo(l.headerData,"select2",l.headerDataChanged);l.listenTo(l.collection,"add",l.onAddorRemoveColumns);l.listenTo(l.collection,"remove",l.onAddorRemoveColumns)},generateHeader:function e(t){var i=['<div class="subnode-header-form">'," <div>",'  <div class="row">','   <div class="col-4">','    <label class="control-label"><%-column_label%></label>',"   </div>",'   <div class="col-4" header="column"></div>',"  </div>"," </div>","</div>"].join("\n");c.extend(t,{column_label:s("Column")});var n=this,r=c.template(i),o=u(r(t)),a=this.controls;this.headerFields.each(function(e){var t=new(e.get("control"))({field:e,model:n.headerData});o.find('div[header="'+e.get("name")+'"]').append(t.render().$el);a.push(t)});if(t.mode=="properties"){o.html("")}n.$header=o;return o},events:c.extend({},h.UniqueColCollectionControl.prototype.events,{"click button.add":"addColumns"}),showGridControl:function e(t){var i=this,n=c.template(['<div class="subnode-header">','  <label class="control-label pg-el-sm-10"><%-label%></label>','  <button class="btn btn-sm-sq btn-secondary add fa fa-plus" <%=canAdd ? "" : "disabled=\'disabled\'"%> title="'+c("Add new row")+'"></button>',"</div>"].join("\n")),r=u("<div class='pgadmin-control-group backgrid form-group col-12 object subnode'></div>").append(t.mode!=="properties"?n({label:t.label,canAdd:t.canAdd}):"");r.append(i.generateHeader(t));var o=c.clone(this.gridSchema.columns);if(t.disabled==false&&t.canDelete){o.unshift({name:"pg-backform-delete",label:"",cell:p.Extension.DeleteCell,editable:false,cell_priority:-1})}if(i.grid){i.grid.remove();i.grid.null}var a=i.grid=new p.Grid({columns:o,collection:i.collection,className:"backgrid table-bordered table-noouter-border table-hover"});i.$grid=a.render().$el;r.append(i.$grid);setTimeout(function(){i.headerData.set({column:i.$header.find('div[header="column"] select').val()},{silent:true})},10);if(t.mode==="properties")r.find(".subnode-header-form").removeClass("subnode-header-form");i.$gridBody=r;return r},headerDataChanged:function e(){var t=this,i,n=this.headerData.toJSON(),r=false,o=["column"];if(!t.$header){return}if(t.control_data.canAdd){t.collection.each(function(t){if(!r){c.each(o,function(e){if(!r){i=t.get(e);r=(c.isUndefined(i)||c.isNull(i))&&(c.isUndefined(n[e])||c.isNull(n[e]))||i==n[e]}})}})}else{r=true}t.$gridBody.find("button.add").prop("disabled",r)},addColumns:function e(t){t.preventDefault();var i=this,n=i.headerData.get("column");if(!n||n==""){return false}var r=i.model.get(i.field.get("name")),o=new(i.field.get("model"))(i.headerData.toJSON(),{silent:true,top:i.model.top,collection:r,handler:r}),a=i.field.get("col_types")||[];for(var s=0;s<a.length;s++){var l=a[s];if(l["name"]==o.get("column")){o.set({col_type:l["type"]});break}}r.add(o);var d=r.indexOf(o);if(d>-1){i.$grid.find(".new").removeClass("new");var c=i.grid.body.rows[d].$el;c.addClass("new");u(c).pgMakeVisible("backform-tab")}else{}return false},onAddorRemoveColumns:function e(){var t=this;setTimeout(function(){t.collection.trigger("pgadmin:columns:updated",t.collection);t.headerDataChanged()},10)},remove:function e(){this.stopListening(this.headerData,"change",this.headerDataChanged);this.listenTo(this.headerData,"select2",this.headerDataChanged);this.listenTo(this.collection,"remove",this.onAddorRemoveColumns);c.each(this.controls,function(e){e.remove()});n.__super__.remove.apply(this,arguments);delete this.headerData}});if(!f.Nodes["exclusion_constraint"]){t.Browser.Nodes["exclusion_constraint"]=f.Node.extend({type:"exclusion_constraint",label:s("Exclusion constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:e("help.static",{filename:"exclusion_constraint_dialog.html"}),hasSQL:true,parent_type:["table","partition"],canDrop:true,canDropCascade:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[s("Index size")],Init:function e(){if(this.initialized)return;this.initialized=true;f.add_menus([{name:"create_exclusion_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Exclusion constraint..."),icon:"wcTabIcon icon-exclusion_constraint",data:{action:"create",check:true},enable:"canCreate"}])},is_not_valid:function e(t){return t&&!t.valid},model:t.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,comment:undefined,spcname:undefined,amname:"gist",fillfactor:undefined,condeferrable:undefined,condeferred:undefined,columns:[],include:[]},schema:[{id:"name",label:s("Name"),type:"text",mode:["properties","create","edit"],editable:true},{id:"oid",label:s("OID"),cell:"string",type:"text",mode:["properties"]},{id:"comment",label:s("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function e(t){var i=t.get("name");if(!(i&&i!="")){setTimeout(function(){if(t.get("comment")&&t.get("comment")!=="")t.set("comment",null)},10);return true}else{return false}}},{id:"spcname",label:s("Tablespace"),type:"text",group:s("Definition"),control:"node-list-by-name",node:"tablespace",select2:{allowClear:false},filter:function e(t){if(t.label=="pg_global")return false;else return true}},{id:"amname",label:s("Access method"),type:"text",group:s("Definition"),url:"get_access_methods",node:"table",control:h.NodeAjaxOptionsControl.extend({onChange:function e(){h.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var t=this,i=t.model.get("amname"),n=t.model.previous("amname"),r=t.model.get("columns");if(r.length>0&&i!=n){var o=s("Changing access method will clear columns collection");a.confirm(o,function(){r.each(function(e){r.remove(e)});setTimeout(function(){r.trigger("pgadmin:columns:updated",r)},10)},function(){setTimeout(function(){t.model.set("amname",n)},10)})}}}),select2:{allowClear:true},disabled:function e(t){return c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew()}},{id:"fillfactor",label:s("Fill factor"),type:"int",group:s("Definition"),allowNull:true},{id:"condeferrable",label:s("Deferrable?"),type:"switch",group:s("Definition"),deps:["index"],disabled:function e(t){return c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew()}},{id:"condeferred",label:s("Deferred?"),type:"switch",group:s("Definition"),deps:["condeferrable"],disabled:function e(t){if(c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew()){return true}if(t.get("condeferrable")==true){return false}else{setTimeout(function(){if(t.get("condeferred"))t.set("condeferred",false)},10);return true}}},{id:"indconstraint",label:s("Constraint"),cell:"string",type:"multiline",mode:["create","edit","properties"],editable:false,group:s("Definition"),disabled:function e(t){return c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew()}},{id:"columns",label:s("Columns"),type:"collection",group:s("Columns"),deps:["amname"],canDelete:true,editable:false,canAdd:function e(t){return!(c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew())},control:n,model:i,disabled:function e(t){return c.has(t,"handler")&&!c.isUndefined(t.handler)&&!c.isUndefined(t.get("oid"))||c.isFunction(t.isNew)&&!t.isNew()},cell:p.StringCell.extend({initialize:function e(){p.StringCell.prototype.initialize.apply(this,arguments);var t=this;if(c.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.removeColumn);t.listenTo(i,"change:name",t.resetColOptions);t.listenTo(i,"change:cltype",t.removeColumnWithType)}this.model.get("columns").on("pgadmin:columns:updated",function(){t.render.apply(t)})},removeColumnWithType:function e(t){var i=this,n=i.model.get("columns"),r=n.where({col_type:t.previous("cltype")});n.remove(r);setTimeout(function(){i.render()},10);setTimeout(function(){var e=i.model.top.get("exclude_constraint");var t=[];e.each(function(e){if(e.get("columns").length==0){t.push(e)}});e.remove(t)},100)},removeColumn:function e(t){var i=this,n=i.model.get("columns").where({column:t.get("name")});i.model.get("columns").remove(n);setTimeout(function(){i.render()},10);setTimeout(function(){var e=i.model.top.get("exclude_constraint");var t=[];e.each(function(e){if(e.get("columns").length==0){t.push(e)}});e.remove(t)},100)},resetColOptions:function e(t){var i=this,n=i.model.get("columns").where({column:t.previous("name")});if(n.length>0){n[0].set({column:t.get("name")})}setTimeout(function(){i.render()},10)},formatter:{fromRaw:function e(t){return t.pluck("column").toString()},toRaw:function e(t){return t}},render:function e(){return p.StringCell.prototype.render.apply(this,arguments)},remove:function e(){var t=this.model.top.get("columns"),i=this.model.get("columns");if(i){i.off("pgadmin:columns:updated")}this.stopListening(t,"remove",self.removeColumn);this.stopListening(t,"change:name",self.resetColOptions);this.stopListening(t,"change:cltype",self.removeColumnWithType);p.StringCell.prototype.remove.apply(this,arguments)}})},{id:"include",label:s("Include columns"),type:"array",group:s("Columns"),editable:false,canDelete:true,canAdd:true,mode:["properties","create","edit"],visible:function e(t){t=t.top;if(!c.isUndefined(t.node_info)&&!c.isUndefined(t.node_info.server)&&!c.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=11e4)return true;return false},control:h.MultiSelectAjaxControl.extend({defaults:c.extend({},h.NodeListByNameControl.prototype.defaults,{select2:{allowClear:false,width:"style",multiple:true,placeholder:s("Select the column(s)")}}),initialize:function e(){var t=this;if(this.model.handler){h.Select2Control.prototype.initialize.apply(this,arguments);if(c.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.resetColOptions);t.listenTo(i,"change:name",t.resetColOptions)}t.custom_options()}else{h.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)}},resetColOptions:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},custom_options:function e(){var t=this.model.top.get("columns"),i=[];if(t.length>0){c.each(t.models,function(e){var t=e.get("name");if(!c.isUndefined(t)&&!c.isNull(t)){i.push({label:t,value:t,image:"icon-column"})}})}this.field.set("options",i)}}),deps:["index"],node:"column",disabled:function e(t){if(c.has(t,"top")&&!c.isUndefined(t.top)&&!t.top.isNew()){return!c.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(c.isUndefined(i)||i==""){return false}else{var n=t.get("columns");n.reset();return true}}}],validate:function e(){this.errorModel.clear();var t=this.get("columns"),i=this.get("name"),n;if(c.isUndefined(i)||c.isNull(i)||i.length<1){n=s("Please specify name for exclusion constraint.");this.errorModel.set("name",n);return n}else if(c.isUndefined(t)||c.isNull(t)||t.length<1){n=s("Please specify columns for exclusion constraint.");this.errorModel.set("columns",n);return n}return null}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=f.tree,o=i,a=t,s=[],l=false,d=false;while(o){if(!l&&(a._type=="table"||a._type=="partition")){l=true;if("is_partitioned"in a&&a.is_partitioned){d=true}}if(c.indexOf(["schema"],a._type)>-1)return!d;s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(c.indexOf(s,"catalog")>-1){return false}else{return!d}}})}return f.Nodes["exclusion_constraint"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(3),i(5),i(6),i(12),i(7)],r=function(r,e,h,p,t,m,n,o){if(!m.Nodes["primary_key"]){t.Browser.Nodes["primary_key"]=m.Node.extend({type:"primary_key",label:r("Primary key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:e("help.static",{filename:"primary_key_dialog.html"}),hasSQL:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[r("Index size")],parent_type:["table","partition"],canDrop:true,canDropCascade:true,Init:function e(){if(this.initialized)return;this.initialized=true;m.add_menus([{name:"create_primary_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:r("Primary key"),icon:"wcTabIcon icon-primary_key",data:{action:"create",check:true},enable:"canCreate"}])},canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=m.tree,o=i,a=t,s=[],l=false,d=false,c=this.getTreeNodeHierarchy(o).server.version;while(o){if(!l&&(a._type=="table"||a._type=="partition")){l=true;if("is_partitioned"in a&&a.is_partitioned&&c<11e4){d=true}}if(p.indexOf(["schema"],a._type)>-1){if(d){return false}var u=r.children(arguments[1],false),f=false;p.each(u,function(e){n=m.tree.itemData(h(e));if(!f&&n._type=="primary_key"){f=true}});return!f}s.push(a._type);o=r.hasParent(o)?r.parent(o):null;a=o?r.itemData(o):null}if(p.indexOf(s,"catalog")>-1){return false}else{return!d}},model:t.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined,oid:undefined,comment:undefined,spcname:undefined,index:undefined,fillfactor:undefined,condeferrable:undefined,condeferred:undefined,columns:[],include:[]},schema:[{id:"name",label:r("Name"),type:"text",mode:["properties","create","edit"],editable:true,cellHeaderClasses:"width_percent_40"},{id:"oid",label:r("OID"),cell:"string",type:"text",mode:["properties"],editable:false,cellHeaderClasses:"width_percent_20"},{id:"comment",label:r("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function e(t){var i=t.get("name");if(!(i&&i!="")){setTimeout(function(){if(t.get("comment")&&t.get("comment")!==""){t.set("comment",null)}},10);return true}else{return false}}},{id:"columns",label:r("Columns"),type:"collection",group:r("Definition"),editable:false,cell:o.StringCell.extend({initialize:function e(){o.StringCell.prototype.initialize.apply(this,arguments);var t=this,i=this.model.get("columns");if(p.isUndefined(t.model.get("oid"))){var n=t.model.top.get("columns");t.listenTo(n,"remove",t.removeColumn);t.listenTo(n,"change:name",t.resetColOptions)}i.on("pgadmin:multicolumn:updated",function(){t.render.apply(t)});t.listenTo(i,"add",t.render);t.listenTo(i,"remove",t.render)},removeColumn:function e(t){var i=this,n=i.model.get("columns").where({column:t.get("name")});i.model.get("columns").remove(n);setTimeout(function(){i.render()},10);var r="primary_key";setTimeout(function(){var e=i.model.top.get(r),t=[];e.each(function(e){if(e.get("columns").length==0){t.push(e)}});e.remove(t)},100)},resetColOptions:function e(t){var i=this,n=i.model.get("columns").where({column:t.previous("name")});if(n.length>0){n[0].set({column:t.get("name")},{silent:true})}setTimeout(function(){i.render()},10)},formatter:{fromRaw:function e(t){return t.pluck("column").toString()},toRaw:function e(t){return t}},render:function e(){return o.StringCell.prototype.render.apply(this,arguments)},remove:function e(){var t=this.model.top.get("columns"),i=this.model.get("columns");if(i){i.off("pgadmin:multicolumn:updated")}this.stopListening(t,"remove",self.removeColumn);this.stopListening(t,"change:name",self.resetColOptions);o.StringCell.prototype.remove.apply(this,arguments)}}),canDelete:true,canAdd:true,control:n.MultiSelectAjaxControl.extend({defaults:p.extend({},n.NodeListByNameControl.prototype.defaults,{select2:{multiple:true,allowClear:true,width:"style",placeholder:r("Select the column(s)")}}),keyPathAccessor:function e(t,i){var n=t;if(p.isArray(n)){return p.map(n,function(e){return e["column"]})}i=i.split(".");for(var r=0;r<i.length;r++){if(p.isNull(n))return null;if(p.isEmpty(i[r]))continue;if(!p.isUndefined(n[i[r]]))n=n[i[r]]}return p.isObject(n)&&!p.isArray(n)?null:n},initialize:function e(){var t=this;if(this.model.handler){n.Select2Control.prototype.initialize.apply(this,arguments);if(p.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.resetColOptions);t.listenTo(i,"change:name",t.resetColOptions)}t.custom_options()}else{n.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)}t.model.get("columns").on("pgadmin:multicolumn:updated",function(){t.render.apply(t)})},resetColOptions:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},custom_options:function e(){var t=this.model.top.get("columns"),i=[];if(t.length>0){p.each(t.models,function(e){var t=e.get("name");if(!p.isUndefined(t)&&!p.isNull(t)){i.push({label:t,value:t,image:"icon-column"})}})}this.field.set("options",i)},onChange:function e(){var i=this,t=this.model,n=this.field.get("name").split("."),r=n.shift(),o=this.getValueFromDOM(),a=t.get(r),s=[];this.stopListening(this.model,"change:"+r,this.render);a.each(function(e){var t=e.get("column"),i=p.indexOf(o,t);if(i>-1){o.splice(i,1)}else{s.push(t)}});p.each(o,function(e){var t=new(i.field.get("model"))({column:e},{silent:true,top:i.model.top,collection:a,handler:a});a.add(t)});p.each(s,function(e){a.remove(a.where({column:e}))});this.listenTo(this.model,"change:"+r,this.render)},remove:function e(){if(this.model.handler){var t=this,i=t.model.top.get("columns");t.stopListening(i,"remove",t.resetColOptions);t.stopListening(i,"change:name",t.resetColOptions);t.model.get("columns").off("pgadmin:multicolumn:updated");n.Select2Control.prototype.remove.apply(this,arguments)}else{n.MultiSelectAjaxControl.prototype.remove.apply(this,arguments)}}}),deps:["index"],node:"column",model:m.Node.Model.extend({defaults:{column:undefined},validate:function e(){return null}}),transform:function e(t){var i=[];if(t&&p.isArray(t)){p.each(t,function(e){i.push({label:e.label,value:e.label,image:"icon-column"})})}return i},select2:{allowClear:false},disabled:function e(t){if(p.has(t,"top")&&!p.isUndefined(t.top)&&!t.top.isNew()){return!p.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(p.isUndefined(i)||i==""){return false}else{var n=t.get("columns");n.reset();return true}}},{id:"include",label:r("Include columns"),type:"array",group:r("Definition"),editable:false,canDelete:true,canAdd:true,mode:["properties","create","edit"],visible:function e(t){t=t.top;if(!p.isUndefined(t.node_info)&&!p.isUndefined(t.node_info.server)&&!p.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=11e4)return true;return false},control:n.MultiSelectAjaxControl.extend({defaults:p.extend({},n.NodeListByNameControl.prototype.defaults,{select2:{allowClear:false,width:"style",multiple:true,placeholder:r("Select the column(s)")}}),initialize:function e(){var t=this;if(this.model.handler){n.Select2Control.prototype.initialize.apply(this,arguments);if(p.isUndefined(t.model.get("oid"))){var i=t.model.top.get("columns");t.listenTo(i,"remove",t.resetColOptions);t.listenTo(i,"change:name",t.resetColOptions)}t.custom_options()}else{n.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)}},resetColOptions:function e(){var t=this;setTimeout(function(){t.custom_options();t.render.apply(t)},50)},custom_options:function e(){var t=this.model.top.get("columns"),i=[];if(t.length>0){p.each(t.models,function(e){var t=e.get("name");if(!p.isUndefined(t)&&!p.isNull(t)){i.push({label:t,value:t,image:"icon-column"})}})}this.field.set("options",i)}}),deps:["index"],node:"column",disabled:function e(t){if(p.has(t,"top")&&!p.isUndefined(t.top)&&!t.top.isNew()){return!p.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(p.isUndefined(i)||i==""){return false}else{var n=t.get("columns");n.reset();return true}}},{id:"spcname",label:r("Tablespace"),type:"text",group:r("Definition"),control:"node-list-by-name",node:"tablespace",deps:["index"],select2:{allowClear:false},filter:function e(t){if(t.label=="pg_global")return false;else return true},disabled:function e(t){t=t.top||t;var i=t.get("index");if(p.isUndefined(i)||i==""){return false}else{setTimeout(function(){t.set("spcname","")},10);return true}}},{id:"index",label:r("Index"),mode:["create"],type:"text",group:r("Definition"),control:n.NodeListByNameControl.extend({initialize:function e(){n.NodeListByNameControl.prototype.initialize.apply(this,arguments)}}),select2:{allowClear:true},node:"index",disabled:function e(t){if(p.has(t,"top")&&!p.isUndefined(t.top)&&!t.top.isNew()){return true}return!t.isNew()},visible:function e(t){return!p.isUndefined(t.top.node_info["table"])}},{id:"fillfactor",label:r("Fill factor"),deps:["index"],type:"int",group:r("Definition"),allowNull:true,disabled:function e(t){var i=t.get("index");if(p.isUndefined(i)||i==""){return false}else{setTimeout(function(){t.set("fillfactor",null)},10);return true}}},{id:"condeferrable",label:r("Deferrable?"),type:"switch",group:r("Definition"),deps:["index"],disabled:function e(t){if(p.has(t,"top")&&!p.isUndefined(t.top)&&!t.top.isNew()){return!p.isUndefined(t.get("oid"))}if(!t.isNew()){return true}var i=t.get("index");if(p.isUndefined(i)||i==""){return false}else{setTimeout(function(){if(t.get("condeferrable"))t.set("condeferrable",false)},10);return true}}},{id:"condeferred",label:r("Deferred?"),type:"switch",group:r("Definition"),deps:["condeferrable"],disabled:function e(t){if(p.has(t,"top")&&!p.isUndefined(t.top)&&!t.top.isNew()){return!p.isUndefined(t.get("oid"))}if(!t.isNew()){return true}if(t.get("condeferrable")==true){return false}else{setTimeout(function(){if(t.get("condeferred"))t.set("condeferred",false)},10);return true}}}],validate:function e(){this.errorModel.clear();if(p.has(this,"top")){this.top.errorModel.clear()}var t=this.get("columns"),i=this.get("index");if((p.isUndefined(i)||String(i).replace(/^\s+|\s+$/g,"")=="")&&(p.isUndefined(t)||p.isNull(t)||t.length<1)){var n=r("Please specify columns for %(node)s",{node:r("Primary key")});this.errorModel.set("columns",n);return n}return null}})})}return m.Nodes["primary_key"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(10),i(6),i(12),i(11),i(7),i(64)],r=function(l,e,u,d,c,t,f,h,s,i,n){if(!f.Nodes["coll-partition"]){t.Browser.Nodes["coll-partition"]=t.Browser.Collection.extend({node:"partition",label:l("Partitions"),type:"coll-partition",columns:["name","schema","partition_value","is_partitioned","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})}if(!f.Nodes["partition"]){t.Browser.Nodes["partition"]=f.Node.extend({parent_type:"table",collection_type:"coll-partition",type:"partition",label:l("Partition"),hasSQL:true,hasDepends:true,hasStatistics:true,statsPrettifyFields:[l("Size"),l("Indexes size"),l("Table size"),l("TOAST table size"),l("Tuple length"),l("Dead tuple length"),l("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:e("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create"],height:"95%",width:"85%",Init:function e(){if(this.initialized)return;this.initialized=true;f.add_menus([{name:"truncate_table",node:"partition",module:this,applies:["object","context"],callback:"truncate_table",category:"Truncate",priority:3,label:l("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"partition",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:"Truncate",priority:3,label:l("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:"Trigger(s)",priority:4,label:l("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable"},{name:"disable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:"Trigger(s)",priority:4,label:l("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable"},{name:"reset_table_stats",node:"partition",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:l("Reset Statistics"),icon:"fa fa-bar-chart",enable:"canCreate"},{name:"detach_partition",node:"partition",module:this,applies:["object","context"],callback:"detach_partition",priority:2,label:l("Detach Partition"),icon:"fa fa-remove"}])},generate_url:function e(t,i,n,r,o){if(d.indexOf(["stats","statistics","dependency","dependent","reset","get_relations","get_oftype","get_attach_tables"],i)==-1){return f.Node.generate_url.apply(this,arguments)}if(i=="statistics"){i="stats"}o=d.isUndefined(t)||d.isNull(t)?o||{}:this.getTreeNodeHierarchy(t);return c("table/%s/%s/%s/%s/%s/%s").sprintf(encodeURIComponent(i),encodeURIComponent(o["server_group"]._id),encodeURIComponent(o["server"]._id),encodeURIComponent(o["database"]._id),encodeURIComponent(o["partition"].schema_id),encodeURIComponent(o["partition"]._id)).value()},canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema,callbacks:{enable_triggers_on_table:function e(t){var i={enable:true};this.callbacks.set_triggers.apply(this,[t,i])},disable_triggers_on_table:function e(t){var i={enable:false};this.callbacks.set_triggers.apply(this,[t,i])},set_triggers:function e(t,i){var n=t||{},r=this,o=f.tree,a=n.item||o.selected(),s=a&&a.length==1?o.itemData(a):undefined;if(!s)return false;u.ajax({url:r.generate_url(a,"set_trigger",s,true),type:"PUT",data:i,dataType:"json"}).done(function(e){if(e.success==1){h.success(e.info);o.unload(a);o.setInode(a);o.deselect(a);setTimeout(function(){o.select(a)},10)}}).fail(function(e,t,i){h.pgRespErrorNotify(e,i);o.unload(a)})},truncate_table:function e(t){var i={cascade:false};this.callbacks.truncate.apply(this,[t,i])},truncate_table_cascade:function e(t){var i={cascade:true};this.callbacks.truncate.apply(this,[t,i])},truncate:function e(t,i){var n=t||{},r=this,o=f.tree,a=n.item||o.selected(),s=a&&a.length==1?o.itemData(a):undefined;if(!s)return false;h.confirm(l("Truncate Table"),c(l("Are you sure you want to truncate table %s?")).sprintf(s.label).value(),function(e){if(e){var t=s;u.ajax({url:r.generate_url(a,"truncate",s,true),type:"PUT",data:i,dataType:"json"}).done(function(e){if(e.success==1){h.success(e.info);o.removeIcon(a);t.icon="icon-partition";o.addIcon(a,{icon:t.icon});o.unload(a);o.setInode(a);o.deselect(a);setTimeout(function(){o.select(a)},10)}}).fail(function(e,t,i){h.pgRespErrorNotify(e,i);o.unload(a)})}},function(){})},reset_table_stats:function e(t){var i=t||{},n=this,r=f.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;h.confirm(l("Reset statistics"),c(l('Are you sure you want to reset the statistics for table "%s"?')).sprintf(a._label).value(),function(e){if(e){var t=a;u.ajax({url:n.generate_url(o,"reset",a,true),type:"DELETE"}).done(function(e){if(e.success==1){h.success(e.info);r.removeIcon(o);t.icon="icon-partition";r.addIcon(o,{icon:t.icon});r.unload(o);r.setInode(o);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){h.pgRespErrorNotify(e,i);r.unload(o)})}},function(){})},detach_partition:function e(t){var i=t||{},n=this,r=f.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;h.confirm(l("Detach Partition"),c(l("Are you sure you want to detach the partition %s?")).sprintf(a._label).value(),function(e){if(e){u.ajax({url:n.generate_url(o,"detach",a,true),type:"PUT"}).done(function(e){if(e.success==1){h.success(e.info);var t=r.next(o);if(!t||!t.length){t=r.prev(o);if(!t||!t.length){t=r.parent(o);r.setInode(t,true)}}r.remove(o);if(t.length){r.select(t)}}}).fail(function(e,t,i){h.pgRespErrorNotify(e,i)})}},function(){})}},model:f.Node.Model.extend({defaults:{name:undefined,oid:undefined,spcoid:undefined,spcname:undefined,relowner:undefined,relacl:undefined,relhasoids:undefined,relhassubclass:undefined,reltuples:undefined,description:undefined,conname:undefined,conkey:undefined,isrepl:undefined,triggercount:undefined,relpersistence:undefined,fillfactor:undefined,reloftype:undefined,typname:undefined,labels:undefined,providers:undefined,is_sys_table:undefined,coll_inherits:[],hastoasttable:true,toast_autovacuum_enabled:false,autovacuum_enabled:false,primary_key:[],partitions:[],partition_type:"range",is_partitioned:false,partition_value:undefined},initialize:function e(t,i){if(d.size(t)===0){var n=f.serverInfo[i.node_info.server._id].user,r=i.node_info.schema;this.set({relowner:n.name,schema:r._label},{silent:true})}f.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:l("Name"),type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:l("OID"),type:"text",mode:["properties"]},{id:"relowner",label:l("Owner"),type:"text",node:"role",mode:["properties","create","edit"],select2:{allowClear:false},disabled:"inSchema",control:"node-list-by-name"},{id:"schema",label:l("Schema"),type:"text",node:"schema",control:"node-list-by-name",mode:["create","edit","properties"],disabled:"inSchema",filter:function e(t){if(t&&t.label.match(/^pg_/)){return false}return true},cache_node:"database",cache_level:"database"},{id:"spcname",label:l("Tablespace"),node:"tablespace",type:"text",control:"node-list-by-name",disabled:"inSchema",mode:["properties","create","edit"],filter:function e(t){return!(t&&t.label.match(/pg_global/))}},{id:"partition",type:"group",label:l("Partition"),mode:["edit","create"],min_version:1e5,visible:function e(t){if(t.isNew()||t.get("is_partitioned"))return true;return false}},{id:"is_partitioned",label:l("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],visible:function e(t){if(!d.isUndefined(t.node_info)&&!d.isUndefined(t.node_info.server)&&!d.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(!t.isNew())return true;return false}},{id:"description",label:l("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"},{id:"partition_value",label:l("Partition Scheme"),type:"text",visible:false},{id:"coll_inherits",label:l("Inherited from table(s)"),type:"text",group:l("Advanced"),mode:["properties"]},{id:"Columns",type:"group",label:l("Columns"),mode:["edit","create"],min_version:1e5,visible:function e(){return false}},{id:"columns",label:l("Columns"),type:"collection",group:l("Columns"),model:f.Nodes["column"].model,subnode:f.Nodes["column"].model,mode:["create","edit"],disabled:function e(t){if(t.isNew()&&t.get("is_partitioned")){setTimeout(function(){var e=t.get("columns");e.remove(e.filter(function(e){if(d.isUndefined(e.get("inheritedfrom")))return false;return true}))},10)}if(this.node_info&&"catalog"in this.node_info){return true}return false},deps:["typname","is_partitioned"],canAdd:"check_grid_add_condition",canEdit:true,canDelete:true,canEditRow:"check_grid_row_edit_delete",canDeleteRow:"check_grid_row_edit_delete",uniqueCol:["name"],columns:["name","cltype","attlen","attprecision","attnotnull","is_primary_key"],control:s.UniqueColCollectionControl.extend({initialize:function e(){s.UniqueColCollectionControl.prototype.initialize.apply(this,arguments);var l=this,t=l.model.get(l.field.get("name"));t.on("change:is_primary_key",function(e){var t=l.model.get("primary_key"),i=e.get("name"),n,r;if(e.get("is_primary_key")){if(t.length<1){n=new t.model({},{top:l.model,collection:t,handler:t});t.add(n)}else{n=t.first()}if(d.isUndefined(n.get("oid"))){r=n.get("columns");var o=r.where({column:i});if(o.length==0){var a=new r.model({column:i},{silent:true,top:l.model,collection:t,handler:t});r.add(a)}r.trigger("pgadmin:multicolumn:updated",r)}}else{if(t.length>0){n=t.first();if(!d.isUndefined(n.get("oid"))){return}r=n.get("columns");var s=r.where({column:i});if(s.length>0){r.remove(s);d.each(s,function(e){e.destroy()});if(r.length==0){setTimeout(function(){t.remove(t.first())},10)}}r.trigger("pgadmin:multicolumn:updated",r)}}})},remove:function e(){var t=this.model.get(this.field.get("name"));if(t){t.off("change:is_primary_key")}s.UniqueColCollectionControl.prototype.remove.apply(this,arguments)}}),allowMultipleEmptyRow:false},{id:"inherited_tables_cnt",label:l("Inherited tables count"),type:"text",mode:["properties"],group:l("Advanced"),disabled:"inSchema"},{type:"nested",control:"tab",group:l("Constraints"),mode:["edit","create"],schema:[{id:"primary_key",label:l("Primary key"),model:f.Nodes["primary_key"].model,subnode:f.Nodes["primary_key"].model,editable:false,type:"collection",group:l("Primary Key"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",columns:["name","columns"],canAdd:function e(t){if(t.get("is_partitioned")){setTimeout(function(){var e=t.get("primary_key");e.remove(e.filter(function(){return true}))},10);return false}return true},canAddRow:function e(t){var i=t.get("columns");return t.get("primary_key")&&t.get("primary_key").length<1&&d.some(i.pluck("name"))}},{id:"foreign_key",label:l("Foreign key"),model:f.Nodes["foreign_key"].model,subnode:f.Nodes["foreign_key"].model,editable:false,type:"collection",group:l("Foreign Key"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",canAdd:function e(t){if(t.get("is_partitioned")){setTimeout(function(){var e=t.get("foreign_key");e.remove(e.filter(function(){return true}))},10);return false}return true},columns:["name","columns"],canAddRow:function e(t){var i=t.get("columns");return d.some(i.pluck("name"))}},{id:"check_constraint",label:l("Check constraint"),model:f.Nodes["check_constraint"].model,subnode:f.Nodes["check_constraint"].model,editable:false,type:"collection",group:l("Check"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",canAdd:true,columns:["name","consrc"]},{id:"unique_constraint",label:l("Unique Constraint"),model:f.Nodes["unique_constraint"].model,subnode:f.Nodes["unique_constraint"].model,editable:false,type:"collection",group:l("Unique"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",columns:["name","columns"],canAdd:function e(t){if(t.get("is_partitioned")){setTimeout(function(){var e=t.get("unique_constraint");e.remove(e.filter(function(){return true}))},10);return false}return true},canAddRow:function e(t){var i=t.get("columns");return d.some(i.pluck("name"))}},{id:"exclude_constraint",label:l("Exclude constraint"),model:f.Nodes["exclusion_constraint"].model,subnode:f.Nodes["exclusion_constraint"].model,editable:false,type:"collection",group:l("Exclude"),mode:["edit","create"],canEdit:true,canDelete:true,deps:["is_partitioned"],control:"unique-col-collection",columns:["name","columns","constraint"],canAdd:function e(t){if(t.get("is_partitioned")){setTimeout(function(){var e=t.get("exclude_constraint");e.remove(e.filter(function(){return true}))},10);return false}return true},canAddRow:function e(t){var i=t.get("columns");return d.some(i.pluck("name"))}}]},{id:"typname",label:l("Of type"),type:"text",mode:["properties","create","edit"],group:l("Advanced"),disabled:"checkOfType",url:"get_oftype",deps:["coll_inherits","is_partitioned"],transform:function e(t,i){var n=i||this,r=n.model;r.of_types_tables=t;return t},control:s.NodeAjaxOptionsControl.extend({onChange:function e(){s.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var t=this,i=t.model.get("typname"),n=undefined,r=undefined,o=t.model.get("columns");if(!d.isUndefined(i)&&i!==""&&o.length!==0){var a=l("Changing of table type will clear columns collection.");h.confirm(a,function(e){if(e){o.reset()}else{return this}})}else if(!d.isUndefined(i)&&i===""){o.reset()}if(!d.isUndefined(i)&&i!==""){r={tname:i};n=t.model.fetch_columns_ajax.apply(t,[r]);o.set(n,{merge:false,remove:false})}}})},{id:"fillfactor",label:l("Fill factor"),type:"int",mode:["create","edit"],min:10,max:100,disabled:"inSchema",group:l("Advanced")},{id:"relhasoids",label:l("Has OIDs?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:"inSchema",group:l("Advanced")},{id:"relpersistence",label:l("Unlogged?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:"inSchemaWithModelCheck",group:l("Advanced")},{id:"conname",label:l("Primary key"),cell:"string",type:"text",mode:["properties"],group:l("Advanced"),disabled:"inSchema"},{id:"reltuples",label:l("Rows (estimated)"),cell:"string",type:"text",mode:["properties"],group:l("Advanced"),disabled:"inSchema"},{id:"rows_cnt",label:l("Rows (counted)"),cell:"string",type:"text",mode:["properties"],group:l("Advanced"),disabled:"inSchema"},{id:"relhassubclass",label:l("Inherits tables?"),cell:"switch",type:"switch",mode:["properties"],group:l("Advanced"),disabled:"inSchema"},{id:"is_sys_table",label:l("System table?"),cell:"switch",type:"switch",mode:["properties"],disabled:"inSchema"},{type:"nested",control:"fieldset",label:l("Like"),group:l("Advanced"),schema:[{id:"like_relation",label:l("Relation"),type:"text",mode:["create","edit"],deps:["typname"],control:"node-ajax-options",url:"get_relations",disabled:"isLikeDisable",group:l("Like")},{id:"like_default_value",label:l("With default values?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_constraints",label:l("With constraints?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_indexes",label:l("With indexes?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_storage",label:l("With storage?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")},{id:"like_comments",label:l("With comments?"),type:"switch",mode:["create","edit"],deps:["typname"],disabled:"isLikeDisable",group:l("Like")}]},{id:"partition_type",label:l("Partition Type"),editable:false,type:"select2",select2:{allowClear:false},group:"partition",deps:["is_partitioned"],options:[{label:l("Range"),value:"range"},{label:l("List"),value:"list"}],mode:["create"],visible:function e(t){if(!d.isUndefined(t.node_info)&&!d.isUndefined(t.node_info.server)&&!d.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(!t.isNew()||!t.get("is_partitioned"))return true;return false}},{id:"partition_keys",label:l("Partition Keys"),model:s.PartitionKeyModel,subnode:s.PartitionKeyModel,editable:true,type:"collection",group:"partition",mode:["create"],deps:["is_partitioned","partition_type"],canEdit:false,canDelete:true,control:"sub-node-collection",canAdd:function e(t){if(t.isNew()&&t.get("is_partitioned"))return true;return false},canAddRow:function e(t){var i=t.get("columns");var n=1e3;if(t.get("partition_type")&&t.get("partition_type")=="list")n=1;return t.get("partition_keys")&&t.get("partition_keys").length<n&&d.some(i.pluck("name"))},visible:function e(t){if(!d.isUndefined(t.node_info)&&!d.isUndefined(t.node_info.server)&&!d.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(t.get("partition_keys")&&t.get("partition_keys").models.length>0){setTimeout(function(){var e=t.get("partition_keys");e.remove(e.filter(function(){return true}))},10)}}},{id:"partition_scheme",label:l("Partition Scheme"),type:"note",group:"partition",mode:["edit"],visible:function e(t){if(!d.isUndefined(t.node_info)&&!d.isUndefined(t.node_info.server)&&!d.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(!t.isNew()){this.text=t.get("partition_scheme")}}},{id:"partitions",label:l("Partitions"),model:s.PartitionsModel,subnode:s.PartitionsModel,editable:true,type:"collection",group:"partition",mode:["edit","create"],deps:["is_partitioned","partition_type"],canEdit:false,canDelete:true,customDeleteTitle:l("Detach Partition"),customDeleteMsg:l("Are you sure you wish to detach this partition?"),columns:["is_attach","partition_name","values_from","values_to","values_in"],control:s.SubNodeCollectionControl.extend({row:i.PartitionRow,initialize:function e(){s.SubNodeCollectionControl.prototype.initialize.apply(this,arguments);var t=this;if(!this.model.isNew()){var i=this.field.get("schema_node"),n=this.field.get("node_info");u.ajax({url:i.generate_url.apply(i,[null,"get_attach_tables",this.field.get("node_data"),true,n]),type:"GET",async:false}).done(function(e){if(e.success==1){t.model.table_options=e.data}else{h.alert(l("Error fetching tables to be attached"),e.data.result)}}).fail(function(e,t,i){h.pgRespErrorNotify(e,i,l("Error fetching tables to be attached"))})}}}),canAdd:function e(t){if(t.get("is_partitioned"))return true;return false},visible:function e(t){if(!d.isUndefined(t.node_info)&&!d.isUndefined(t.node_info.server)&&!d.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false},disabled:function e(t){if(t.isNew()&&t.get("partitions")&&t.get("partitions").models.length>0){setTimeout(function(){var e=t.get("partitions");e.remove(e.filter(function(){return true}))},10)}}},{id:"partition_note",label:l("Partition"),type:"note",group:"partition",text:l("The control above is used to Create/Attach/Detach partitions.<br>"+"<ul><li>Create Mode: User will be able to create N number of partitions. Mode switch control is disabled in this scenario.</li>"+"<li>Edit Mode: User will be able to create/attach/detach N number of partitions. "+"In attach mode there will be list of suitable tables to be attached.</li></ul>"),visible:function e(t){if(!d.isUndefined(t.node_info)&&!d.isUndefined(t.node_info.server)&&!d.isUndefined(t.node_info.server.version)&&t.node_info.server.version>=1e5)return true;return false}},{type:"nested",control:"tab",group:l("Parameter"),mode:["edit","create"],deps:["is_partitioned"],schema:s.VacuumSettingsSchema},{id:"relacl_str",label:l("Privileges"),disabled:"inSchema",type:"text",mode:["properties"],group:l("Security")},f.SecurityGroupSchema,{id:"relacl",label:l("Privileges"),type:"collection",group:"security",control:"unique-col-collection",model:f.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),mode:["edit","create"],canAdd:true,canDelete:true,uniqueCol:["grantee"]},{id:"seclabels",label:l("Security labels"),canEdit:false,model:f.SecLabelModel,editable:false,canAdd:true,type:"collection",min_version:90100,mode:["edit","create"],group:"security",canDelete:true,control:"unique-col-collection"},{id:"vacuum_settings_str",label:l("Storage settings"),type:"multiline",group:l("Advanced"),mode:["properties"]}],validate:function e(t){var i,n=this.get("name"),r=this.get("schema"),o=this.get("relowner"),a=this.get("is_partitioned"),s=this.get("partition_keys");if(t&&(t.length==0||d.indexOf(t,"autovacuum_enabled")!=-1||d.indexOf(t,"toast_autovacuum_enabled")!=-1)){return null}this.errorModel.clear();if(d.isUndefined(n)||d.isNull(n)||String(n).replace(/^\s+|\s+$/g,"")==""){i=l("Table name cannot be empty.");this.errorModel.set("name",i);return i}else if(d.isUndefined(r)||d.isNull(r)||String(r).replace(/^\s+|\s+$/g,"")==""){i=l("Table schema cannot be empty.");this.errorModel.set("schema",i);return i}else if(d.isUndefined(o)||d.isNull(o)||String(o).replace(/^\s+|\s+$/g,"")==""){i=l("Table owner cannot be empty.");this.errorModel.set("relowner",i);return i}else if(a&&this.isNew()&&!d.isNull(s)&&s.length<=0){i=l("Please specify at least one key for partitioned table.");this.errorModel.set("partition_keys",i);return i}return null},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},isInheritedTable:function e(t){if(!t.inSchema.apply(this,[t])){if(!d.isUndefined(t.get("coll_inherits"))&&t.get("coll_inherits").length!=0||!d.isUndefined(t.get("typname"))&&String(t.get("typname")).replace(/^\s+|\s+$/g,"")!==""){return false}else{return true}}return false},checkInheritance:function e(t){if(t.get("is_partitioned")){setTimeout(function(){t.set("coll_inherits",[])},10);return true}if(!t.inSchema.apply(this,[t])&&(d.isUndefined(t.get("typname"))||d.isNull(t.get("typname"))||String(t.get("typname")).replace(/^\s+|\s+$/g,"")=="")){return false}return true},isLikeDisable:function e(t){if(!t.inSchemaWithModelCheck.apply(this,[t])&&(d.isUndefined(t.get("typname"))||d.isNull(t.get("typname"))||String(t.get("typname")).replace(/^\s+|\s+$/g,"")=="")){return false}return true},check_grid_add_condition:function e(t){var i=true;if(!t.inSchema.apply(this,[t])){if(!d.isUndefined(t.get("typname"))&&!d.isNull(t.get("typname"))&&t.get("typname")!==""){i=false}}return i},check_grid_row_edit_delete:function e(t){var i=true;if(!d.isUndefined(t.get("inheritedfrom"))&&!d.isNull(t.get("inheritedfrom"))&&String(t.get("inheritedfrom")).replace(/^\s+|\s+$/g,"")!==""){i=false}return i},checkOfType:function e(t){if(t.get("is_partitioned")){setTimeout(function(){t.set("typname",undefined)},10);return true}if(!t.inSchemaWithModelCheck.apply(this,[t])&&(d.isUndefined(t.get("coll_inherits"))||d.isNull(t.get("coll_inherits"))||String(t.get("coll_inherits")).replace(/^\s+|\s+$/g,"")=="")){return false}return true},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},isTableAutoVacuumEnable:function e(t){if(!t.inSchema.apply(this,[t])&&t.get("autovacuum_enabled")===true){return false}return true},isToastTableAutoVacuumEnable:function e(t){if(!t.inSchemaWithModelCheck.apply(this,[t])&&t.get("toast_autovacuum_enabled")==true){return false}return true},fetch_columns_ajax:function e(t){var i=this,n="get_columns",r=i.model.top||i.model,o=undefined,a=this.field.get("schema_node"),s=this.field.get("node_info"),l=a.generate_url.apply(a,[null,n,this.field.get("node_data"),this.field.get("url_with_id")||false,s]),d=this.field.get("cache_level")||a.type,c=this.field.get("cache_node");c=c&&f.Nodes["cache_node"]||a;r.trigger("pgadmin:view:fetching",r,i.field);u.ajax({async:false,url:l,data:t}).done(function(e){o=c.cache(n,s,d,e.data)}).fail(function(){r.trigger("pgadmin:view:fetch:error",r,i.field)});r.trigger("pgadmin:view:fetched",r,i.field);o=o&&o.data||[];return o}}),canCreate:n.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function e(t,i,n){if(this.canCreate.apply(this,[t,i,n])){if(t.tigger_count>0){return true}else{return false}}},canCreate_with_trigger_disable:function e(t,i,n){if(this.canCreate.apply(this,[t,i,n])){if(t.tigger_count>0&&t.has_enable_triggers>0){return true}else{return false}}}})}return f.Nodes["partition"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(4),i(0),i(1),i(8),i(3),i(5),i(6),i(10),i(11),i(7)],r=function(l,e,d,n,t,i,c,r,u,o){if(!c.Nodes["coll-compound_trigger"]){i.Browser.Nodes["coll-compound_trigger"]=i.Browser.Collection.extend({node:"compound_trigger",label:l("Compound Triggers"),type:"coll-compound_trigger",columns:["name","description"],canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:o.isTreeItemOfChildOfSchema})}if(!c.Nodes["compound_trigger"]){i.Browser.Nodes["compound_trigger"]=c.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"compound_trigger",label:l("Compound Trigger"),hasSQL:true,hasDepends:true,width:c.stdW.sm+"px",sqlAlterHelp:"sql-altertcompoundtrigger.html",sqlCreateHelp:"sql-createcompoundtrigger.html",dialogHelp:e("help.static",{filename:"compound_trigger_dialog.html"}),Init:function e(){if(this.initialized)return;this.initialized=true;c.add_menus([{name:"create_compound_trigger_on_coll",node:"coll-compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"create_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"create_compound_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"create_compound_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:true},enable:"canCreate"},{name:"enable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"enable_compound_trigger",category:"connect",priority:3,label:l("Enable compound trigger"),icon:"fa fa-check",enable:"canCreate_with_compound_trigger_enable"},{name:"disable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"disable_compound_trigger",category:"drop",priority:3,label:l("Disable compound trigger"),icon:"fa fa-times",enable:"canCreate_with_compound_trigger_disable"},{name:"create_compound_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:l("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:true},enable:"canCreate"}])},callbacks:{enable_compound_trigger:function e(t){var i=t||{},n=this,r=c.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;var s=a;d.ajax({url:n.generate_url(o,"enable",a,true),type:"PUT",data:{enable:true},dataType:"json"}).done(function(e){if(e.success==1){u.success(e.info);r.removeIcon(o);s.icon="icon-compound_trigger";r.addIcon(o,{icon:s.icon});r.unload(o);r.setInode(false);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){u.pgRespErrorNotify(e,i);r.unload(o)})},disable_compound_trigger:function e(t){var i=t||{},n=this,r=c.tree,o=i.item||r.selected(),a=o&&o.length==1?r.itemData(o):undefined;if(!a)return false;var s=a;d.ajax({url:n.generate_url(o,"enable",a,true),type:"PUT",data:{enable:false},dataType:"json"}).done(function(e){if(e.success==1){u.success(e.info);r.removeIcon(o);s.icon="icon-compound_trigger-bad";r.addIcon(o,{icon:s.icon});r.unload(o);r.setInode(false);r.deselect(o);setTimeout(function(){r.select(o)},10)}}).fail(function(e,t,i){u.pgRespErrorNotify(e,i,l("Disable compound trigger failed"));r.unload(o)})}},canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:o.isTreeItemOfChildOfSchema,model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:undefined},schema:[{id:"name",label:l("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:l("OID"),cell:"string",type:"int",disabled:true,mode:["properties"]},{id:"is_enable_trigger",label:l("Trigger enabled?"),type:"switch",mode:["edit","properties"],disabled:function e(){if(this.node_info&&("catalog"in this.node_info||"view"in this.node_info)){return true}return false}},{type:"nested",control:"fieldset",mode:["create","edit","properties"],label:l("FOR Events"),group:l("Events"),contentClass:"row",schema:[{id:"evnt_insert",label:l("INSERT"),type:"switch",mode:["create","edit","properties"],group:l("FOR Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_insert");if(!n.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"evnt_update",label:l("UPDATE"),type:"switch",mode:["create","edit","properties"],group:l("FOR Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_update");if(!n.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"evnt_delete",label:l("DELETE"),type:"switch",mode:["create","edit","properties"],group:l("FOR Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_delete");if(!n.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}},{id:"evnt_truncate",label:l("TRUNCATE"),type:"switch",mode:["create","edit","properties"],group:l("FOR Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function e(t){var i=t.get("evnt_truncate");if("view"in t.node_info)return true;if(!n.isUndefined(i)&&t.node_info["server"]["server_type"]=="ppas")return false;return t.inSchemaWithModelCheck.apply(this,[t])}}]},{id:"whenclause",label:l("When"),type:"text",disabled:"inSchemaWithModelCheck",mode:["create","edit","properties"],control:"sql-field",visible:true,group:l("Events")},{id:"columns",label:l("Columns"),url:"nodes",control:"node-list-by-name",cache_node:"column",type:"array",select2:{multiple:true},deps:["evnt_update"],node:"column",group:l("Events"),disabled:function e(t){if(this.node_info&&"catalog"in this.node_info){return true}if(!t.isNew()){return true}var i=t.get("evnt_update");if(!n.isUndefined(i)&&i){return false}return true}},{id:"prosrc",label:l("Code"),group:l("Code"),type:"text",mode:["create","edit"],tabPanelCodeClass:"sql-code-control",control:r.SqlCodeControl,disabled:function e(t){if(t.isNew()){var i=t.getCodeTemplate();setTimeout(function(){t.set("prosrc",i)},10)}return false}},{id:"is_sys_trigger",label:l("System trigger?"),cell:"string",type:"switch",disabled:"inSchemaWithModelCheck",mode:["properties"]},{id:"description",label:l("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],validate:function e(t){var i;this.errorModel.clear();if(t&&t.length==0){return null}if(n.isUndefined(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){i=l("Name cannot be empty.");this.errorModel.set("name",i);return i}if(!this.get("evnt_truncate")&&!this.get("evnt_delete")&&!this.get("evnt_update")&&!this.get("evnt_insert")){i=l("Specify at least one event.");this.errorModel.set("evnt_truncate"," ");this.errorModel.set("evnt_delete"," ");this.errorModel.set("evnt_update"," ");this.errorModel.set("evnt_insert",i);return i}if(n.isUndefined(this.get("prosrc"))||String(this.get("prosrc")).replace(/^\s+|\s+$/g,"")==""){i=l("Code cannot be empty.");this.errorModel.set("prosrc",i);return i}return null},getCodeTemplate:function e(){return l("-- Enter any global declarations below:\n\n"+"-- BEFORE STATEMENT block. Delete if not required.\n"+"BEFORE STATEMENT IS\n"+"    -- Enter any local declarations here\n"+"BEGIN\n"+"    -- Enter any required code here\n"+"END;\n\n"+"-- AFTER STATEMENT block. Delete if not required.\n"+"AFTER STATEMENT IS\n"+"    -- Enter any local declarations here\n"+"BEGIN\n"+"    -- Enter any required code here\n"+"END;\n\n"+"-- BEFORE EACH ROW block. Delete if not required.\n"+"BEFORE EACH ROW IS\n"+"    -- Enter any local declarations here\n"+"BEGIN\n"+"    -- Enter any required code here\n"+"END;\n\n"+"-- AFTER EACH ROW block. Delete if not required.\n"+"AFTER EACH ROW IS\n"+"    -- Enter any local declarations here\n"+"BEGIN\n"+"    -- Enter any required code here\n"+"END;\n\n"+"-- INSTEAD OF EACH ROW block. Delete if not required.\n"+"INSTEAD OF EACH ROW IS\n"+"    -- Enter any local declarations here\n"+"BEGIN\n"+"    -- Enter any required code here\n"+"END;")},inSchema:function e(){if(this.node_info&&"catalog"in this.node_info){return true}return false},inSchemaWithModelCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{return true}}return true},inSchemaWithColumnCheck:function e(t){if(this.node_info&&"schema"in this.node_info){if(t.isNew()){return false}else{if(!n.isUndefined(t.get("attnum"))&&t.get("attnum")>=1){return false}else{return true}}}return true}}),canCreate:function e(t,i,n){if(n&&n.check==false)return true;var r=this.getTreeNodeHierarchy(i),o=r["server"];if(o&&(o.server_type==="pg"||o.version<12e4))return false;if(r["catalog"]!=undefined)return false;return true},canCreate_with_compound_trigger_enable:function e(t,i,n){var r=this.getTreeNodeHierarchy(i);if("view"in r){return false}return t.icon==="icon-compound_trigger-bad"&&this.canCreate.apply(this,[t,i,n])},canCreate_with_compound_trigger_disable:function e(t,i,n){var r=this.getTreeNodeHierarchy(i);if("view"in r){return false}return t.icon==="icon-compound_trigger"&&this.canCreate.apply(this,[t,i,n])}})}return c.Nodes["compound_trigger"]}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.showDataGrid=o;t.retrieveNameSpaceName=d;t.generateDatagridTitle=C;var p=r(i(2));var m=r(i(4));var g=i(20);var a=i(36);var s=r(i(23));var l=n(i(24));var v=r(i(0));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function r(e){return e&&e.__esModule?e:{default:e}}function o(i,t,n,e,r,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null;var l=t.treeMenu.findNodeByDomElement(r);if(l===undefined||!l.getData()){n.alert((0,p.default)("Data Grid Error"),(0,p.default)("No object selected."));return}var d=g.getTreeNodeHierarchyFromIdentifier.call(t,r);if(w(d)||!x(d)){return}var c=_(o,e,l.getData(),d);var u=C(t,r);if(a){y(n,t,s);var f=b(l.getData(),d);var h=function e(t){i.launch_grid(o,c,false,u,null,t)};v.default.get((0,m.default)("datagrid.filter"),function(e){n.filterDialog("Data Filter - ".concat(u),e,f,s,h).resizeTo(t.stdW.sm,t.stdH.sm)})}else{i.launch_grid(o,c,false,u)}}function d(e){if(e.schema!==undefined){return e.schema.label}else if(e.view!==undefined){return e.view.label}else if(e.catalog!==undefined){return e.catalog.label}return""}function _(e,t,i,n){var r=(0,m.default)("datagrid.panel",{trans_id:e});r+="?is_query_tool=".concat(false)+"&cmd_type=".concat(t.mnuid)+"&obj_type=".concat(i._type)+"&obj_id=".concat(i._id)+"&sgid=".concat(n.server_group._id)+"&sid=".concat(n.server._id)+"&did=".concat(n.database._id)+"&server_type=".concat(n.server.server_type);return r}function b(e,t){var i={sid:t.server._id,did:t.database._id,obj_id:e._id};return(0,m.default)("datagrid.filter_validate",i)}function y(r,o){if(!r.filterDialog){r.dialog("filterDialog",function e(){return{main:function e(t,i,n,r,o){this.set("title",t);this.message=i;this.validateUrl=n;this.okCallback=o;this.preferences=r},setup:function e(){return{buttons:[{text:(0,p.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,p.default)("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button"}],options:{modal:0,resizable:true,maximizable:false,pinnable:false,autoReset:false}}},build:function e(){r.pgDialogBuild.apply(this)},prepare:function e(){var t=this,i=(0,v.default)(this.message),n=i.find("#sql_filter");(0,v.default)(this.elements.header).attr("data-title",this.get("title"));(0,v.default)(this.elements.body.childNodes[0]).addClass("dataview_filter_dialog");this.setContent(i.get(0));t.__internal.buttons[1].element.disabled=true;this.filter_obj=s.default.fromTextArea(n.get(0),{lineNumbers:true,mode:"text/x-pgsql",extraKeys:o.editor_shortcut_keys,indentWithTabs:!t.preferences.use_spaces,indentUnit:t.preferences.tab_size,tabSize:t.preferences.tab_size,lineWrapping:t.preferences.wrap_code,autoCloseBrackets:t.preferences.insert_pair_brackets,matchBrackets:t.preferences.brace_matching});var r=l.calcFontSize(t.preferences.sql_font_size);(0,v.default)(this.filter_obj.getWrapperElement()).css("font-size",r);setTimeout(function(){t.filter_obj.refresh();t.filter_obj.focus()},500);t.filter_obj.on("change",function(){if(t.filter_obj.getValue()!==""){t.__internal.buttons[1].element.disabled=false}else{t.__internal.buttons[1].element.disabled=true}})},callback:function e(t){if(t.button.text==(0,p.default)("OK")){var i=this.filter_obj.getValue();var n=this;t.cancel=true;v.default.ajax({url:n.validateUrl,method:"POST",async:false,contentType:"application/json",data:JSON.stringify(i)}).done(function(e){if(e.data.status){n.okCallback(i);n.close()}else{r.alert((0,p.default)("Validation Error"),e.data.result)}}).fail(function(e){r.alert((0,p.default)("Validation Error"),e)})}}}})}}function w(e){return e.server===undefined||e.database===undefined}function x(e){return e.schema!==undefined||e.view!==undefined||e.catalog!==undefined}function C(e,t){var i=(0,a.getPanelTitle)(e,t);var n=g.getTreeNodeHierarchyFromIdentifier.call(e,t);var r=d(n);var o=e.treeMenu.findNodeByDomElement(t);return"".concat(r,".").concat(o.getData().label,"/").concat(i)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.showQueryTool=s;var u=o(i(2));var r=o(i(4));var f=i(20);var n=i(36);function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.database}function h(e,t,i){var n=(0,r.default)("datagrid.panel",{trans_id:e});n+="?is_query_tool=".concat(true)+"&sgid=".concat(i.server_group._id)+"&sid=".concat(i.server._id)+"&server_type=".concat(i.server.server_type);if(a(i)){n+="&did=".concat(i.database._id)}return n}function p(e){return e.server===undefined}function m(e,t){var i=(0,n.getPanelTitle)(e,t);return i}function s(e,t,i,n,r,o){var a=n||"";var s=m(t,r);var l=t.treeMenu.findNodeByDomElement(r);if(l===undefined){i.alert((0,u.default)("Query Tool Error"),(0,u.default)("No object selected."));return}var d=f.getTreeNodeHierarchyFromIdentifier.call(t,r);if(p(d)){return}var c=h(o,s,d);e.launch_grid(o,c,true,s,a)}},function(e,t,i){"use strict";var n,r;!(n=[i(2),i(18)],r=function(r,o){var e={copyTextToClipboard:function e(n){var t=document.createElement("textarea");t.style.position="fixed";t.style.top=0;t.style.left=0;t.style.width="2em";t.style.height="2em";t.style.padding=0;t.style.border="none";t.style.outline="none";t.style.boxShadow="none";t.style.background="transparent";document.body.appendChild(t);t.select();var i=function e(t){document.removeEventListener("copy",e);var i=t.clipboardData||window.clipboardData;if(i){i.setData("text",n);t.preventDefault()}};document.addEventListener("copy",i);try{document.execCommand("copy")}catch(e){o.alert(r("Error"),r("Oops, unable to copy to clipboard"))}document.body.removeChild(t)}};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.httpResponseRequiresNewTransaction=a;t.handleLoginRequiredAndTransactionRequired=l;t.handleQueryToolAjaxError=r;var s=n(i(2));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e.responseJSON===undefined&&e.data!==undefined){return e.status===404&&e.data&&e.data.info&&e.data.info==="DATAGRID_TRANSACTION_REQUIRED"}return e.status===404&&e.responseJSON&&e.responseJSON.info&&e.responseJSON.info==="DATAGRID_TRANSACTION_REQUIRED"}function l(e,t,i,n,r,o){r=r&&r.length>0?r:[];if(e.Browser.UserManagement.isPgaLoginRequired(i)){if(n){t.saveState(n,r)}return e.Browser.UserManagement.pgaLogin()}if(o&&a(i)){if(n){t.saveState(n,r)}return t.initTransaction()}}function r(e,t,i,n,r,o){if(i.readyState===0){return(0,s.default)("Not connected to the server or the connection to the server has been closed.")}l(e,t,i,n,r,o);var a=i.responseText;if(i.responseJSON!==undefined){if(i.responseJSON.errormsg!==undefined){a=i.responseJSON.errormsg}if(i.status===503&&i.responseJSON.info!==undefined&&i.responseJSON.info=="CONNECTION_LOST"){setTimeout(function(){if(n){t.saveState(n,r)}t.handle_connection_lost(false,i)})}}return a}},function(e,t,i){e.exports=d;var n=i(45);var o=i(37);var a=i(31);var s=i(38);var l=i(39);function d(e,t){o.call(this);this.points=e||[];this.srid=t;if(this.points.length>0){this.hasZ=this.points[0].hasZ;this.hasM=this.points[0].hasM}}n.inherits(d,o);d.Z=function(e,t){var i=new d(e,t);i.hasZ=true;return i};d.M=function(e,t){var i=new d(e,t);i.hasM=true;return i};d.ZM=function(e,t){var i=new d(e,t);i.hasZ=true;i.hasM=true;return i};d._parseWkt=function(e,t){var i=new d;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();i.points.push.apply(i.points,e.matchCoordinates(t));e.expectGroupEnd();return i};d._parseWkb=function(e,t){var i=new d;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;var n=e.readUInt32();for(var r=0;r<n;r++)i.points.push(s._readWkbPoint(e,t));return i};d._parseTwkb=function(e,t){var i=new d;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;var n=new s(0,0,t.hasZ?0:undefined,t.hasM?0:undefined);var r=e.readVarInt();for(var o=0;o<r;o++)i.points.push(s._readTwkbPoint(e,t,n));return i};d._parseGeoJSON=function(e){var t=new d;if(e.coordinates.length>0)t.hasZ=e.coordinates[0].length>2;for(var i=0;i<e.coordinates.length;i++)t.points.push(s._readGeoJSONPoint(e.coordinates[i]));return t};d.prototype.toWkt=function(){if(this.points.length===0)return this._getWktType(a.wkt.LineString,true);return this._getWktType(a.wkt.LineString,false)+this._toInnerWkt()};d.prototype._toInnerWkt=function(){var e="(";for(var t=0;t<this.points.length;t++)e+=this._getWktCoordinate(this.points[t])+",";e=e.slice(0,-1);e+=")";return e};d.prototype.toWkb=function(e){var t=new l(this._getWkbSize());t.writeInt8(1);this._writeWkbType(t,a.wkb.LineString,e);t.writeUInt32LE(this.points.length);for(var i=0;i<this.points.length;i++)this.points[i]._writeWkbPoint(t);return t.buffer};d.prototype.toTwkb=function(){var e=new l(0,true);var t=o.getTwkbPrecision(5,0,0);var i=this.points.length===0;this._writeTwkbHeader(e,a.wkb.LineString,t,i);if(this.points.length>0){e.writeVarInt(this.points.length);var n=new s(0,0,0,0);for(var r=0;r<this.points.length;r++)this.points[r]._writeTwkbPoint(e,t,n)}return e.buffer};d.prototype._getWkbSize=function(){var e=16;if(this.hasZ)e+=8;if(this.hasM)e+=8;return 1+4+4+this.points.length*e};d.prototype.toGeoJSON=function(e){var t=o.prototype.toGeoJSON.call(this,e);t.type=a.geoJSON.LineString;t.coordinates=[];for(var i=0;i<this.points.length;i++){if(this.hasZ)t.coordinates.push([this.points[i].x,this.points[i].y,this.points[i].z]);else t.coordinates.push([this.points[i].x,this.points[i].y])}return t}},function(e,t,i){e.exports=u;var n=i(45);var s=i(37);var l=i(31);var c=i(38);var a=i(39);function u(e,t,i){s.call(this);this.exteriorRing=e||[];this.interiorRings=t||[];this.srid=i;if(this.exteriorRing.length>0){this.hasZ=this.exteriorRing[0].hasZ;this.hasM=this.exteriorRing[0].hasM}}n.inherits(u,s);u.Z=function(e,t,i){var n=new u(e,t,i);n.hasZ=true;return n};u.M=function(e,t,i){var n=new u(e,t,i);n.hasM=true;return n};u.ZM=function(e,t,i){var n=new u(e,t,i);n.hasZ=true;n.hasM=true;return n};u._parseWkt=function(e,t){var i=new u;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();e.expectGroupStart();i.exteriorRing.push.apply(i.exteriorRing,e.matchCoordinates(t));e.expectGroupEnd();while(e.isMatch([","])){e.expectGroupStart();i.interiorRings.push(e.matchCoordinates(t));e.expectGroupEnd()}e.expectGroupEnd();return i};u._parseWkb=function(e,t){var i=new u;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;var n=e.readUInt32();if(n>0){var r=e.readUInt32();for(var o=0;o<r;o++)i.exteriorRing.push(c._readWkbPoint(e,t));for(o=1;o<n;o++){var a=[];var s=e.readUInt32();for(var l=0;l<s;l++)a.push(c._readWkbPoint(e,t));i.interiorRings.push(a)}}return i};u._parseTwkb=function(e,t){var i=new u;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;var n=new c(0,0,t.hasZ?0:undefined,t.hasM?0:undefined);var r=e.readVarInt();var o=e.readVarInt();for(var a=0;a<o;a++)i.exteriorRing.push(c._readTwkbPoint(e,t,n));for(a=1;a<r;a++){var s=[];var l=e.readVarInt();for(var d=0;d<l;d++)s.push(c._readTwkbPoint(e,t,n));i.interiorRings.push(s)}return i};u._parseGeoJSON=function(e){var t=new u;if(e.coordinates.length>0&&e.coordinates[0].length>0)t.hasZ=e.coordinates[0][0].length>2;for(var i=0;i<e.coordinates.length;i++){if(i>0)t.interiorRings.push([]);for(var n=0;n<e.coordinates[i].length;n++){if(i===0)t.exteriorRing.push(c._readGeoJSONPoint(e.coordinates[i][n]));else t.interiorRings[i-1].push(c._readGeoJSONPoint(e.coordinates[i][n]))}}return t};u.prototype.toWkt=function(){if(this.exteriorRing.length===0)return this._getWktType(l.wkt.Polygon,true);return this._getWktType(l.wkt.Polygon,false)+this._toInnerWkt()};u.prototype._toInnerWkt=function(){var e="((";for(var t=0;t<this.exteriorRing.length;t++)e+=this._getWktCoordinate(this.exteriorRing[t])+",";e=e.slice(0,-1);e+=")";for(t=0;t<this.interiorRings.length;t++){e+=",(";for(var i=0;i<this.interiorRings[t].length;i++){e+=this._getWktCoordinate(this.interiorRings[t][i])+","}e=e.slice(0,-1);e+=")"}e+=")";return e};u.prototype.toWkb=function(e){var t=new a(this._getWkbSize());t.writeInt8(1);this._writeWkbType(t,l.wkb.Polygon,e);if(this.exteriorRing.length>0){t.writeUInt32LE(1+this.interiorRings.length);t.writeUInt32LE(this.exteriorRing.length)}else{t.writeUInt32LE(0)}for(var i=0;i<this.exteriorRing.length;i++)this.exteriorRing[i]._writeWkbPoint(t);for(i=0;i<this.interiorRings.length;i++){t.writeUInt32LE(this.interiorRings[i].length);for(var n=0;n<this.interiorRings[i].length;n++)this.interiorRings[i][n]._writeWkbPoint(t)}return t.buffer};u.prototype.toTwkb=function(){var e=new a(0,true);var t=s.getTwkbPrecision(5,0,0);var i=this.exteriorRing.length===0;this._writeTwkbHeader(e,l.wkb.Polygon,t,i);if(this.exteriorRing.length>0){e.writeVarInt(1+this.interiorRings.length);e.writeVarInt(this.exteriorRing.length);var n=new c(0,0,0,0);for(var r=0;r<this.exteriorRing.length;r++)this.exteriorRing[r]._writeTwkbPoint(e,t,n);for(r=0;r<this.interiorRings.length;r++){e.writeVarInt(this.interiorRings[r].length);for(var o=0;o<this.interiorRings[r].length;o++)this.interiorRings[r][o]._writeTwkbPoint(e,t,n)}}return e.buffer};u.prototype._getWkbSize=function(){var e=16;if(this.hasZ)e+=8;if(this.hasM)e+=8;var t=1+4+4;if(this.exteriorRing.length>0)t+=4+this.exteriorRing.length*e;for(var i=0;i<this.interiorRings.length;i++)t+=4+this.interiorRings[i].length*e;return t};u.prototype.toGeoJSON=function(e){var t=s.prototype.toGeoJSON.call(this,e);t.type=l.geoJSON.Polygon;t.coordinates=[];if(this.exteriorRing.length>0){var i=[];for(var n=0;n<this.exteriorRing.length;n++){if(this.hasZ)i.push([this.exteriorRing[n].x,this.exteriorRing[n].y,this.exteriorRing[n].z]);else i.push([this.exteriorRing[n].x,this.exteriorRing[n].y])}t.coordinates.push(i)}for(var r=0;r<this.interiorRings.length;r++){var o=[];for(var a=0;a<this.interiorRings[r].length;a++){if(this.hasZ)o.push([this.interiorRings[r][a].x,this.interiorRings[r][a].y,this.interiorRings[r][a].z]);else o.push([this.interiorRings[r][a].x,this.interiorRings[r][a].y])}t.coordinates.push(o)}return t}},,,,,,,,,,,,,,,,,,,,,,,,,function(i,e,r){"use strict";(function(n){var o=e(r(2));var a=e(r(4));var s=e(r(0));var t=e(r(10));var l=e(r(3));var d=r(57);function e(e){return e&&e.__esModule?e:{default:e}}i.exports=t.default.dialog("fileSelectionDlg",function(){return{main:function e(t){var i=this;if(n.isUndefined(t["dialog_title"])){t["dialog_title"]="Select file"}i.dialog_type=t["dialog_type"];this.set("title",t["dialog_title"]);this.params=JSON.stringify(t);this.elements.dialog.style.minWidth="630px";this.show()},settings:{label:undefined},settingUpdated:function e(t,i,n){switch(t){case"message":this.setMessage(n);break;case"label":if(this.__internal.buttons[0].element){this.__internal.buttons[0].element.innerHTML=n}break;default:break}},prepare:function e(){var t=this;t.$container.find(".storage_content").remove();t.$container.append("<div class='storage_content'></div>");var i=t.$container.find(".storage_content");i.empty();(0,s.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties");s.default.get((0,a.default)("file_manager.index"),function(e){i.append(e)});var n=(0,d.getTransId)(t.params);var r;if(n.readyState==4){r=JSON.parse(n.responseText)}t.trans_id=r.data.fileTransId;setTimeout(function(){(0,s.default)(t.$container.find(".file_manager")).on("enter-key",function(){(0,s.default)((0,s.default)(t.elements.footer).find(".file_manager_ok")).trigger("click")})},200);t.__internal.buttons[1].element.disabled=true},setup:function e(){return{buttons:[{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,o.default)("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"}],focus:{element:0},options:{closableByDimmer:false,maximizable:false,closable:false,movable:true,padding:!1,overflow:!1,model:0,resizable:true,pinnable:false,modal:false,autoReset:false}}},callback:function e(t){var i;if(t.button.text==(0,o.default)("Select")){var n=(0,s.default)(".storage_dialog #uploader .input-path").val(),r={path:(0,s.default)(".currentpath").val()};l.default.Browser.Events.trigger("pgadmin-storage:finish_btn:"+this.dialog_type,n);i=(0,s.default)(this.elements.body).find(".storage_content");(0,s.default)(i).find("*").off();i.remove();(0,d.removeTransId)(this.trans_id);(0,d.set_last_traversed_dir)(r,this.trans_id)}else if(t.button.text==(0,o.default)("Cancel")){i=(0,s.default)(this.elements.body).find(".storage_content");(0,s.default)(i).find("*").off();i.remove();(0,d.removeTransId)(this.trans_id);l.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:"+this.dialog_type)}},build:function e(){this.$container=(0,s.default)('<div class="storage_dialog file_selection_dlg"></div>');this.elements.content.appendChild(this.$container.get(0));t.default.pgDialogBuild.apply(this)},hooks:{onshow:function e(){}}}})}).call(this,r(1))},function(t,e,i){"use strict";(function(s){var l=e(i(2));var a=e(i(4));var d=e(i(0));var r=e(i(10));var c=e(i(3));var u=i(57);function e(e){return e&&e.__esModule?e:{default:e}}t.exports=r.default.dialog("createModeDlg",function(){return{setup:function e(){return{buttons:[{text:(0,l.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times file_manager_create_cancel pg-alertify-button"},{text:(0,l.default)("Create"),key:13,className:"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled"}],focus:{element:0},options:{closableByDimmer:false,maximizable:false,closable:false,movable:true,padding:!1,overflow:!1,model:0,resizable:true,pinnable:false,modal:false,autoReset:false}}},replace_file:function e(){var t=(0,d.default)(".replace_file .btn_yes"),i=(0,d.default)(".replace_file .btn_no");(0,d.default)(".storage_dialog #uploader .input-path").attr("disabled",true);(0,d.default)(".file_manager_ok").addClass("disabled");(0,d.default)(".replace_file, .fm_dimmer").show();t.on("click",function(){(0,d.default)(".replace_file, .fm_dimmer").hide();t.off();i.off();var e=(0,d.default)(".storage_dialog #uploader .input-path").val();c.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",e);(0,d.default)(".file_manager_create_cancel").trigger("click");(0,d.default)(".storage_dialog #uploader .input-path").attr("disabled",false);(0,d.default)(".file_manager_ok").removeClass("disabled")});i.on("click",function(){(0,d.default)(".replace_file, .fm_dimmer").hide();t.off();i.off();(0,d.default)(".storage_dialog #uploader .input-path").attr("disabled",false);(0,d.default)(".file_manager_ok").removeClass("disabled")})},is_file_exist:function e(){var t=(0,d.default)(".storage_dialog #uploader .input-path").val(),i=t.substr(0,t.lastIndexOf("/")+1),n=t.substr(t.lastIndexOf("/")+1),r=false;var o={path:i,name:n,mode:"is_file_exist"};d.default.ajax({type:"POST",data:JSON.stringify(o),url:(0,a.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/x-download; charset=utf-8",async:false}).done(function(e){var t=e.data.result;if(t["Code"]===1){r=true}else{r=false}});return r},check_permission:function e(t){var i=false,n={path:t,mode:"permission"};d.default.ajax({type:"POST",data:JSON.stringify(n),url:(0,a.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/json; charset=utf-8",async:false}).done(function(e){var t=e.data.result;if(t.Code===1){i=true}else{(0,d.default)(".file_manager_ok").addClass("disabled");r.default.error(t.Error)}}).fail(function(){(0,d.default)(".file_manager_ok").addClass("disabled");r.default.error((0,l.default)("Error occurred while checking access permission."))});return i},callback:function e(t){if(t.button.text==(0,l.default)("Create")){var i=(0,d.default)(".storage_dialog #uploader .input-path").val(),n={path:(0,d.default)(".currentpath").val()},r,o="/",a=(0,d.default)(".allowed_file_types select").val();if((0,d.default)(".file_manager").attr("data-platform")==="win32"){o="\\"}if((!i.includes(".")||i.split(".").pop().includes(o))&&a!="*"){i=i+"."+a;(0,d.default)(".storage_dialog #uploader .input-path").val(i)}if(!this.check_permission(i)){t.cancel=true;return}if(!s.isUndefined(i)&&i!==""&&this.is_file_exist()){this.replace_file();t.cancel=true}else{c.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",i);r=(0,d.default)(this.elements.body).find(".storage_content");(0,d.default)(r).find("*").off();r.remove();(0,u.removeTransId)(this.trans_id)}(0,u.set_last_traversed_dir)(n,this.trans_id)}else if(t.button.text==(0,l.default)("Cancel")){r=(0,d.default)(this.elements.body).find(".storage_content");(0,d.default)(r).find("*").off();r.remove();(0,u.removeTransId)(this.trans_id);c.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:create_file")}}}},true,"fileSelectionDlg")}).call(this,i(1))},,,,,,,,,,function(t,i,n){var r,o,a;
/*! jQuery UI - v1.11.3 - 2015-02-22
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, selectmenu.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
/*! jQuery UI - v1.11.3 - 2015-02-22
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, selectmenu.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
(function(e){if(true){!(o=[n(0)],r=e,a=typeof r==="function"?r.apply(i,o):r,a!==undefined&&(t.exports=a))}else{}})(function(D){
/*!
 * jQuery UI Core 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
D.ui=D.ui||{};D.extend(D.ui,{version:"1.11.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});D.fn.extend({scrollParent:function(e){var t=this.css("position"),i=t==="absolute",n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=D(this);if(i&&e.css("position")==="static"){return false}return n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return t==="fixed"||!r.length?D(this[0].ownerDocument||document):r},uniqueId:function(){var e=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++e}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){D(this).removeAttr("id")}})}});function n(e,t){var i,n,r,o=e.nodeName.toLowerCase();if("area"===o){i=e.parentNode;n=i.name;if(!e.href||!n||i.nodeName.toLowerCase()!=="map"){return false}r=D("img[usemap='#"+n+"']")[0];return!!r&&a(r)}return(/^(input|select|textarea|button|object)$/.test(o)?!e.disabled:"a"===o?e.href||t:t)&&a(e)}function a(e){return D.expr.filters.visible(e)&&!D(e).parents().addBack().filter(function(){return D.css(this,"visibility")==="hidden"}).length}D.extend(D.expr[":"],{data:D.expr.createPseudo?D.expr.createPseudo(function(t){return function(e){return!!D.data(e,t)}}):function(e,t,i){return!!D.data(e,i[3])},focusable:function(e){return n(e,!isNaN(D.attr(e,"tabindex")))},tabbable:function(e){var t=D.attr(e,"tabindex"),i=isNaN(t);return(i||t>=0)&&n(e,!i)}});if(!D("<a>").outerWidth(1).jquery){D.each(["Width","Height"],function(e,i){var r=i==="Width"?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),o={innerWidth:D.fn.innerWidth,innerHeight:D.fn.innerHeight,outerWidth:D.fn.outerWidth,outerHeight:D.fn.outerHeight};function a(e,t,i,n){D.each(r,function(){t-=parseFloat(D.css(e,"padding"+this))||0;if(i){t-=parseFloat(D.css(e,"border"+this+"Width"))||0}if(n){t-=parseFloat(D.css(e,"margin"+this))||0}});return t}D.fn["inner"+i]=function(e){if(e===undefined){return o["inner"+i].call(this)}return this.each(function(){D(this).css(n,a(this,e)+"px")})};D.fn["outer"+i]=function(e,t){if(typeof e!=="number"){return o["outer"+i].call(this,e)}return this.each(function(){D(this).css(n,a(this,e,true,t)+"px")})}})}if(!D.fn.addBack){D.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}if(D("<a>").data("a-b","a").removeData("a-b").data("a-b")){D.fn.removeData=function(t){return function(e){if(arguments.length){return t.call(this,D.camelCase(e))}else{return t.call(this)}}}(D.fn.removeData)}D.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());D.fn.extend({focus:function(e){return function(t,i){return typeof t==="number"?this.each(function(){var e=this;setTimeout(function(){D(e).focus();if(i){i.call(e)}},t)}):e.apply(this,arguments)}}(D.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(e!==undefined){return this.css("zIndex",e)}if(this.length){var t=D(this[0]),i,n;while(t.length&&t[0]!==document){i=t.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){n=parseInt(t.css("zIndex"),10);if(!isNaN(n)&&n!==0){return n}}t=t.parent()}}return 0}});D.ui.plugin={add:function(e,t,i){var n,r=D.ui[e].prototype;for(n in i){r.plugins[n]=r.plugins[n]||[];r.plugins[n].push([t,i[n]])}},call:function(e,t,i,n){var r,o=e.plugins[t];if(!o){return}if(!n&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)){return}for(r=0;r<o.length;r++){if(e.options[o[r][0]]){o[r][1].apply(e.element,i)}}}};
/*!
 * jQuery UI Widget 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */var i=0,s=Array.prototype.slice;D.cleanData=function(r){return function(e){var t,i,n;for(n=0;(i=e[n])!=null;n++){try{t=D._data(i,"events");if(t&&t.remove){D(i).triggerHandler("remove")}}catch(e){}}r(e)}}(D.cleanData);D.widget=function(e,i,t){var n,r,o,a,s={},l=e.split(".")[0];e=e.split(".")[1];n=l+"-"+e;if(!t){t=i;i=D.Widget}D.expr[":"][n.toLowerCase()]=function(e){return!!D.data(e,n)};D[l]=D[l]||{};r=D[l][e];o=D[l][e]=function(e,t){if(!this._createWidget){return new o(e,t)}if(arguments.length){this._createWidget(e,t)}};D.extend(o,r,{version:t.version,_proto:D.extend({},t),_childConstructors:[]});a=new i;a.options=D.widget.extend({},a.options);D.each(t,function(t,o){if(!D.isFunction(o)){s[t]=o;return}s[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var e=this._super,t=this._superApply,i;this._super=n;this._superApply=r;i=o.apply(this,arguments);this._super=e;this._superApply=t;return i}}()});o.prototype=D.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},s,{constructor:o,namespace:l,widgetName:e,widgetFullName:n});if(r){D.each(r._childConstructors,function(e,t){var i=t.prototype;D.widget(i.namespace+"."+i.widgetName,o,t._proto)});delete r._childConstructors}else{i._childConstructors.push(o)}D.widget.bridge(e,o);return o};D.widget.extend=function(e){var t=s.call(arguments,1),i=0,n=t.length,r,o;for(;i<n;i++){for(r in t[i]){o=t[i][r];if(t[i].hasOwnProperty(r)&&o!==undefined){if(D.isPlainObject(o)){e[r]=D.isPlainObject(e[r])?D.widget.extend({},e[r],o):D.widget.extend({},o)}else{e[r]=o}}}}return e};D.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;D.fn[o]=function(i){var e=typeof i==="string",n=s.call(arguments,1),r=this;if(e){this.each(function(){var e,t=D.data(this,a);if(i==="instance"){r=t;return false}if(!t){return D.error("cannot call methods on "+o+" prior to initialization; "+"attempted to call method '"+i+"'")}if(!D.isFunction(t[i])||i.charAt(0)==="_"){return D.error("no such method '"+i+"' for "+o+" widget instance")}e=t[i].apply(t,n);if(e!==t&&e!==undefined){r=e&&e.jquery?r.pushStack(e.get()):e;return false}})}else{if(n.length){i=D.widget.extend.apply(null,[i].concat(n))}this.each(function(){var e=D.data(this,a);if(e){e.option(i||{});if(e._init){e._init()}}else{D.data(this,a,new t(i,this))}})}return r}};D.Widget=function(){};D.Widget._childConstructors=[];D.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(e,t){t=D(t||this.defaultElement||this)[0];this.element=D(t);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=D();this.hoverable=D();this.focusable=D();if(t!==this){D.data(t,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){if(e.target===t){this.destroy()}}});this.document=D(t.style?t.ownerDocument:t.document||t);this.window=D(this.document[0].defaultView||this.document[0].parentWindow)}this.options=D.widget.extend({},this.options,this._getCreateOptions(),e);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:D.noop,_getCreateEventData:D.noop,_create:D.noop,_init:D.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(D.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:D.noop,widget:function(){return this.element},option:function(e,t){var i=e,n,r,o;if(arguments.length===0){return D.widget.extend({},this.options)}if(typeof e==="string"){i={};n=e.split(".");e=n.shift();if(n.length){r=i[e]=D.widget.extend({},this.options[e]);for(o=0;o<n.length-1;o++){r[n[o]]=r[n[o]]||{};r=r[n[o]]}e=n.pop();if(arguments.length===1){return r[e]===undefined?null:r[e]}r[e]=t}else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]}i[e]=t}}this._setOptions(i);return this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){this.options[e]=t;if(e==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!t);if(t){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(a,s,e){var l,d=this;if(typeof a!=="boolean"){e=s;s=a;a=false}if(!e){e=s;s=this.element;l=this.widget()}else{s=l=D(s);this.bindings=this.bindings.add(s)}D.each(e,function(e,t){function i(){if(!a&&(d.options.disabled===true||D(this).hasClass("ui-state-disabled"))){return}return(typeof t==="string"?d[t]:t).apply(d,arguments)}if(typeof t!=="string"){i.guid=t.guid=t.guid||i.guid||D.guid++}var n=e.match(/^([\w:-]*)\s*(.*)$/),r=n[1]+d.eventNamespace,o=n[2];if(o){l.delegate(o,r,i)}else{s.bind(r,i)}})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.unbind(t).undelegate(t);this.bindings=D(this.bindings.not(e).get());this.focusable=D(this.focusable.not(e).get());this.hoverable=D(this.hoverable.not(e).get())},_delay:function(e,t){function i(){return(typeof e==="string"?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){D(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){D(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){D(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){D(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,i){var n,r,o=this.options[e];i=i||{};t=D.Event(t);t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();t.target=this.element[0];r=t.originalEvent;if(r){for(n in r){if(!(n in t)){t[n]=r[n]}}}this.element.trigger(t,i);return!(D.isFunction(o)&&o.apply(this.element[0],[t].concat(i))===false||t.isDefaultPrevented())}};D.each({show:"fadeIn",hide:"fadeOut"},function(o,a){D.Widget.prototype["_"+o]=function(t,e,i){if(typeof e==="string"){e={effect:e}}var n,r=!e?o:e===true||typeof e==="number"?a:e.effect||a;e=e||{};if(typeof e==="number"){e={duration:e}}n=!D.isEmptyObject(e);e.complete=i;if(e.delay){t.delay(e.delay)}if(n&&D.effects&&D.effects.effect[r]){t[o](e)}else if(r!==o&&t[r]){t[r](e.duration,e.easing,i)}else{t.queue(function(e){D(this)[o]();if(i){i.call(t[0])}e()})}}});var e=D.widget;
/*!
 * jQuery UI Mouse 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */var r=false;D(document).mouseup(function(){r=false});var t=D.widget("ui.mouse",{version:"1.11.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(true===D.data(e.target,t.widgetName+".preventClickEvent")){D.removeData(e.target,t.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(e){if(r){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var t=this,i=e.which===1,n=typeof this.options.cancel==="string"&&e.target.nodeName?D(e.target).closest(this.options.cancel).length:false;if(!i||n||!this._mouseCapture(e)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}if(true===D.data(e.target,this.widgetName+".preventClickEvent")){D.removeData(e.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return t._mouseMove(e)};this._mouseUpDelegate=function(e){return t._mouseUp(e)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();r=true;return true},_mouseMove:function(e){if(this._mouseMoved){if(D.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}else if(!e.which){return this._mouseUp(e)}}if(e.which||e.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false;this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)}return!this._mouseStarted},_mouseUp:function(e){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(e.target===this._mouseDownEvent.target){D.data(e.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(e)}r=false;return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});
/*!
 * jQuery UI Position 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
/*!
 * jQuery UI Position 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(){D.ui=D.ui||{};var r,x,C=Math.max,k=Math.abs,S=Math.round,n=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,t=D.fn.position;function T(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function N(e,t){return parseInt(D.css(e,t),10)||0}function i(e){var t=e[0];if(t.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(D.isWindow(t)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(t.preventDefault){return{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}D.position={scrollbarWidth:function(){if(r!==undefined){return r}var e,t,i=D("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];D("body").append(i);e=n.offsetWidth;i.css("overflow","scroll");t=n.offsetWidth;if(e===t){t=i[0].clientWidth}i.remove();return r=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n=t==="scroll"||t==="auto"&&e.width<e.element[0].scrollWidth,r=i==="scroll"||i==="auto"&&e.height<e.element[0].scrollHeight;return{width:r?D.position.scrollbarWidth():0,height:n?D.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=D(e||window),i=D.isWindow(t[0]),n=!!t[0]&&t[0].nodeType===9;return{element:t,isWindow:i,isDocument:n,offset:t.offset()||{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:i||n?t.width():t.outerWidth(),height:i||n?t.height():t.outerHeight()}}};D.fn.position=function(u){if(!u||!u.of){return t.apply(this,arguments)}u=D.extend({},u);var f,h,p,m,g,e,v=D(u.of),_=D.position.getWithinInfo(u.within),b=D.position.getScrollInfo(_),y=(u.collision||"flip").split(" "),w={};e=i(v);if(v[0].preventDefault){u.at="left top"}h=e.width;p=e.height;m=e.offset;g=D.extend({},m);D.each(["my","at"],function(){var e=(u[this]||"").split(" "),t,i;if(e.length===1){e=n.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]}e[0]=n.test(e[0])?e[0]:"center";e[1]=o.test(e[1])?e[1]:"center";t=a.exec(e[0]);i=a.exec(e[1]);w[this]=[t?t[0]:0,i?i[0]:0];u[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]});if(y.length===1){y[1]=y[0]}if(u.at[0]==="right"){g.left+=h}else if(u.at[0]==="center"){g.left+=h/2}if(u.at[1]==="bottom"){g.top+=p}else if(u.at[1]==="center"){g.top+=p/2}f=T(w.at,h,p);g.left+=f[0];g.top+=f[1];return this.each(function(){var i,e,a=D(this),s=a.outerWidth(),l=a.outerHeight(),t=N(this,"marginLeft"),n=N(this,"marginTop"),r=s+t+N(this,"marginRight")+b.width,o=l+n+N(this,"marginBottom")+b.height,d=D.extend({},g),c=T(w.my,a.outerWidth(),a.outerHeight());if(u.my[0]==="right"){d.left-=s}else if(u.my[0]==="center"){d.left-=s/2}if(u.my[1]==="bottom"){d.top-=l}else if(u.my[1]==="center"){d.top-=l/2}d.left+=c[0];d.top+=c[1];if(!x){d.left=S(d.left);d.top=S(d.top)}i={marginLeft:t,marginTop:n};D.each(["left","top"],function(e,t){if(D.ui.position[y[e]]){D.ui.position[y[e]][t](d,{targetWidth:h,targetHeight:p,elemWidth:s,elemHeight:l,collisionPosition:i,collisionWidth:r,collisionHeight:o,offset:[f[0]+c[0],f[1]+c[1]],my:u.my,at:u.at,within:_,elem:a})}});if(u.using){e=function(e){var t=m.left-d.left,i=t+h-s,n=m.top-d.top,r=n+p-l,o={target:{element:v,left:m.left,top:m.top,width:h,height:p},element:{element:a,left:d.left,top:d.top,width:s,height:l},horizontal:i<0?"left":t>0?"right":"center",vertical:r<0?"top":n>0?"bottom":"middle"};if(h<s&&k(t+i)<h){o.horizontal="center"}if(p<l&&k(n+r)<p){o.vertical="middle"}if(C(k(t),k(i))>C(k(n),k(r))){o.important="horizontal"}else{o.important="vertical"}u.using.call(this,e,o)}}a.offset(D.extend(d,{using:e}))})};D.ui.position={fit:{left:function(e,t){var i=t.within,n=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,o=e.left-t.collisionPosition.marginLeft,a=n-o,s=o+t.collisionWidth-r-n,l;if(t.collisionWidth>r){if(a>0&&s<=0){l=e.left+a+t.collisionWidth-r-n;e.left+=a-l}else if(s>0&&a<=0){e.left=n}else{if(a>s){e.left=n+r-t.collisionWidth}else{e.left=n}}}else if(a>0){e.left+=a}else if(s>0){e.left-=s}else{e.left=C(e.left-o,e.left)}},top:function(e,t){var i=t.within,n=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,o=e.top-t.collisionPosition.marginTop,a=n-o,s=o+t.collisionHeight-r-n,l;if(t.collisionHeight>r){if(a>0&&s<=0){l=e.top+a+t.collisionHeight-r-n;e.top+=a-l}else if(s>0&&a<=0){e.top=n}else{if(a>s){e.top=n+r-t.collisionHeight}else{e.top=n}}}else if(a>0){e.top+=a}else if(s>0){e.top-=s}else{e.top=C(e.top-o,e.top)}}},flip:{left:function(e,t){var i=t.within,n=i.offset.left+i.scrollLeft,r=i.width,o=i.isWindow?i.scrollLeft:i.offset.left,a=e.left-t.collisionPosition.marginLeft,s=a-o,l=a+t.collisionWidth-r-o,d=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,u=-2*t.offset[0],f,h;if(s<0){f=e.left+d+c+u+t.collisionWidth-r-n;if(f<0||f<k(s)){e.left+=d+c+u}}else if(l>0){h=e.left-t.collisionPosition.marginLeft+d+c+u-o;if(h>0||k(h)<l){e.left+=d+c+u}}},top:function(e,t){var i=t.within,n=i.offset.top+i.scrollTop,r=i.height,o=i.isWindow?i.scrollTop:i.offset.top,a=e.top-t.collisionPosition.marginTop,s=a-o,l=a+t.collisionHeight-r-o,d=t.my[1]==="top",c=d?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,u=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,f=-2*t.offset[1],h,p;if(s<0){p=e.top+c+u+f+t.collisionHeight-r-n;if(p<0||p<k(s)){e.top+=c+u+f}}else if(l>0){h=e.top-t.collisionPosition.marginTop+c+u+f-o;if(h>0||k(h)<l){e.top+=c+u+f}}}},flipfit:{left:function(){D.ui.position.flip.left.apply(this,arguments);D.ui.position.fit.left.apply(this,arguments)},top:function(){D.ui.position.flip.top.apply(this,arguments);D.ui.position.fit.top.apply(this,arguments)}}};(function(){var e,t,i,n,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body");i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(o){D.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"})}for(r in i){e.style[r]=i[r]}e.appendChild(a);t=o||document.documentElement;t.insertBefore(e,t.firstChild);a.style.cssText="position: absolute; left: 10.7432222px;";n=D(a).offset().left;x=n>10&&n<11;e.innerHTML="";t.removeChild(e)})()})();var o=D.ui.position;
/*!
 * jQuery UI Draggable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */D.widget("ui.draggable",D.ui.mouse,{version:"1.11.3",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._setHandleClassName();this._mouseInit()},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var t=this.options;this._blurActiveElement(e);if(this.helper||t.disabled||D(e.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(e);if(!this.handle){return false}this._blockFrames(t.iframeFix===true?"iframe":t.iframeFix);return true},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=D(this);return D("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(e){var t=this.document[0];if(!this.handleElement.is(e.target)){return}try{if(t.activeElement&&t.activeElement.nodeName.toLowerCase()!=="body"){D(t.activeElement).blur()}}catch(e){}},_mouseStart:function(e){var t=this.options;this.helper=this._createHelper(e);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(D.ui.ddmanager){D.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return D(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(e);this.originalPosition=this.position=this._generatePosition(e,false);this.originalPageX=e.pageX;this.originalPageY=e.pageY;t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt);this._setContainment();if(this._trigger("start",e)===false){this._clear();return false}this._cacheHelperProportions();if(D.ui.ddmanager&&!t.dropBehaviour){D.ui.ddmanager.prepareOffsets(this,e)}this._normalizeRightBottom();this._mouseDrag(e,true);if(D.ui.ddmanager){D.ui.ddmanager.dragStart(this,e)}return true},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(e,true);this.positionAbs=this._convertPositionTo("absolute");if(!t){var i=this._uiHash();if(this._trigger("drag",e,i)===false){this._mouseUp({});return false}this.position=i.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(D.ui.ddmanager){D.ui.ddmanager.drag(this,e)}return false},_mouseStop:function(e){var t=this,i=false;if(D.ui.ddmanager&&!this.options.dropBehaviour){i=D.ui.ddmanager.drop(this,e)}if(this.dropped){i=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===true||D.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){D(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(t._trigger("stop",e)!==false){t._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(e){this._unblockFrames();if(D.ui.ddmanager){D.ui.ddmanager.dragStop(this,e)}if(this.handleElement.is(e.target)){this.element.focus()}return D.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(e){return this.options.handle?!!D(e.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var t=this.options,i=D.isFunction(t.helper),n=i?D(t.helper.apply(this.element[0],[e])):t.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!n.parents("body").length){n.appendTo(t.appendTo==="parent"?this.element[0].parentNode:t.appendTo)}if(i&&n[0]===this.element[0]){this._setPositionRelative()}if(n[0]!==this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))){n.css("position","absolute")}return n},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(D.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==t&&D.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(!t?this.scrollParent.scrollTop():0),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(!t?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,n=this.options,r=this.document[0];this.relativeContainer=null;if(!n.containment){this.containment=null;return}if(n.containment==="window"){this.containment=[D(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,D(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,D(window).scrollLeft()+D(window).width()-this.helperProportions.width-this.margins.left,D(window).scrollTop()+(D(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(n.containment==="document"){this.containment=[0,0,D(r).width()-this.helperProportions.width-this.margins.left,(D(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(n.containment.constructor===Array){this.containment=n.containment;return}if(n.containment==="parent"){n.containment=this.helper[0].parentNode}t=D(n.containment);i=t[0];if(!i){return}e=/(scroll|auto)/.test(t.css("overflow"));this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=t},_convertPositionTo:function(e,t){if(!t){t=this.position}var i=e==="absolute"?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,d=e.pageY;if(!s||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(t){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(e.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<i[1]){d=i[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>i[3]){d=i[3]+this.offset.click.top}}if(a.grid){r=a.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY;d=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-a.grid[1]:r+a.grid[1]:r;o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX;l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o}if(a.axis==="y"){l=this.originalPageX}if(a.axis==="x"){d=this.originalPageY}}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto")}if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto")}},_trigger:function(e,t,i){i=i||this._uiHash();D.ui.plugin.call(this,e,[t,i,this],true);if(/^(drag|start|stop)/.test(e)){this.positionAbs=this._convertPositionTo("absolute");i.offset=this.positionAbs}return D.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});D.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,i){var n=D.extend({},e,{item:i.element});i.sortables=[];D(i.options.connectToSortable).each(function(){var e=D(this).sortable("instance");if(e&&!e.options.disabled){i.sortables.push(e);e.refreshPositions();e._trigger("activate",t,n)}})},stop:function(t,e,i){var n=D.extend({},e,{item:i.element});i.cancelHelperRemoval=false;D.each(i.sortables,function(){var e=this;if(e.isOver){e.isOver=0;i.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,n)}})},drag:function(i,n,r){D.each(r.sortables,function(){var e=false,t=this;t.positionAbs=r.positionAbs;t.helperProportions=r.helperProportions;t.offset.click=r.offset.click;if(t._intersectsWith(t.containerCache)){e=true;D.each(r.sortables,function(){this.positionAbs=r.positionAbs;this.helperProportions=r.helperProportions;this.offset.click=r.offset.click;if(this!==t&&this._intersectsWith(this.containerCache)&&D.contains(t.element[0],this.element[0])){e=false}return e})}if(e){if(!t.isOver){t.isOver=1;t.currentItem=n.helper.appendTo(t.element).data("ui-sortable-item",true);t.options._helper=t.options.helper;t.options.helper=function(){return n.helper[0]};i.target=t.currentItem[0];t._mouseCapture(i,true);t._mouseStart(i,true,true);t.offset.click.top=r.offset.click.top;t.offset.click.left=r.offset.click.left;t.offset.parent.left-=r.offset.parent.left-t.offset.parent.left;t.offset.parent.top-=r.offset.parent.top-t.offset.parent.top;r._trigger("toSortable",i);r.dropped=t.element;D.each(r.sortables,function(){this.refreshPositions()});r.currentItem=r.element;t.fromOutside=r}if(t.currentItem){t._mouseDrag(i);n.position=t.position}}else{if(t.isOver){t.isOver=0;t.cancelHelperRemoval=true;t.options._revert=t.options.revert;t.options.revert=false;t._trigger("out",i,t._uiHash(t));t._mouseStop(i,true);t.options.revert=t.options._revert;t.options.helper=t.options._helper;if(t.placeholder){t.placeholder.remove()}r._refreshOffsets(i);n.position=r._generatePosition(i,true);r._trigger("fromSortable",i);r.dropped=false;D.each(r.sortables,function(){this.refreshPositions()})}}})}});D.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var n=D("body"),r=i.options;if(n.css("cursor")){r._cursor=n.css("cursor")}n.css("cursor",r.cursor)},stop:function(e,t,i){var n=i.options;if(n._cursor){D("body").css("cursor",n._cursor)}}});D.ui.plugin.add("draggable","opacity",{start:function(e,t,i){var n=D(t.helper),r=i.options;if(n.css("opacity")){r._opacity=n.css("opacity")}n.css("opacity",r.opacity)},stop:function(e,t,i){var n=i.options;if(n._opacity){D(t.helper).css("opacity",n._opacity)}}});D.ui.plugin.add("draggable","scroll",{start:function(e,t,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(e,t,i){var n=i.options,r=false,o=i.scrollParentNotHidden[0],a=i.document[0];if(o!==a&&o.tagName!=="HTML"){if(!n.axis||n.axis!=="x"){if(i.overflowOffset.top+o.offsetHeight-e.pageY<n.scrollSensitivity){o.scrollTop=r=o.scrollTop+n.scrollSpeed}else if(e.pageY-i.overflowOffset.top<n.scrollSensitivity){o.scrollTop=r=o.scrollTop-n.scrollSpeed}}if(!n.axis||n.axis!=="y"){if(i.overflowOffset.left+o.offsetWidth-e.pageX<n.scrollSensitivity){o.scrollLeft=r=o.scrollLeft+n.scrollSpeed}else if(e.pageX-i.overflowOffset.left<n.scrollSensitivity){o.scrollLeft=r=o.scrollLeft-n.scrollSpeed}}}else{if(!n.axis||n.axis!=="x"){if(e.pageY-D(a).scrollTop()<n.scrollSensitivity){r=D(a).scrollTop(D(a).scrollTop()-n.scrollSpeed)}else if(D(window).height()-(e.pageY-D(a).scrollTop())<n.scrollSensitivity){r=D(a).scrollTop(D(a).scrollTop()+n.scrollSpeed)}}if(!n.axis||n.axis!=="y"){if(e.pageX-D(a).scrollLeft()<n.scrollSensitivity){r=D(a).scrollLeft(D(a).scrollLeft()-n.scrollSpeed)}else if(D(window).width()-(e.pageX-D(a).scrollLeft())<n.scrollSensitivity){r=D(a).scrollLeft(D(a).scrollLeft()+n.scrollSpeed)}}}if(r!==false&&D.ui.ddmanager&&!n.dropBehaviour){D.ui.ddmanager.prepareOffsets(i,e)}}});D.ui.plugin.add("draggable","snap",{start:function(e,t,i){var n=i.options;i.snapElements=[];D(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=D(this),t=e.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})}})},drag:function(e,t,i){var n,r,o,a,s,l,d,c,u,f,h=i.options,p=h.snapTolerance,m=t.offset.left,g=m+i.helperProportions.width,v=t.offset.top,_=v+i.helperProportions.height;for(u=i.snapElements.length-1;u>=0;u--){s=i.snapElements[u].left-i.margins.left;l=s+i.snapElements[u].width;d=i.snapElements[u].top-i.margins.top;c=d+i.snapElements[u].height;if(g<s-p||m>l+p||_<d-p||v>c+p||!D.contains(i.snapElements[u].item.ownerDocument,i.snapElements[u].item)){if(i.snapElements[u].snapping){i.options.snap.release&&i.options.snap.release.call(i.element,e,D.extend(i._uiHash(),{snapItem:i.snapElements[u].item}))}i.snapElements[u].snapping=false;continue}if(h.snapMode!=="inner"){n=Math.abs(d-_)<=p;r=Math.abs(c-v)<=p;o=Math.abs(s-g)<=p;a=Math.abs(l-m)<=p;if(n){t.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top}if(r){t.position.top=i._convertPositionTo("relative",{top:c,left:0}).top}if(o){t.position.left=i._convertPositionTo("relative",{top:0,left:s-i.helperProportions.width}).left}if(a){t.position.left=i._convertPositionTo("relative",{top:0,left:l}).left}}f=n||r||o||a;if(h.snapMode!=="outer"){n=Math.abs(d-v)<=p;r=Math.abs(c-_)<=p;o=Math.abs(s-m)<=p;a=Math.abs(l-g)<=p;if(n){t.position.top=i._convertPositionTo("relative",{top:d,left:0}).top}if(r){t.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top}if(o){t.position.left=i._convertPositionTo("relative",{top:0,left:s}).left}if(a){t.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left}}if(!i.snapElements[u].snapping&&(n||r||o||a||f)){i.options.snap.snap&&i.options.snap.snap.call(i.element,e,D.extend(i._uiHash(),{snapItem:i.snapElements[u].item}))}i.snapElements[u].snapping=n||r||o||a||f}}});D.ui.plugin.add("draggable","stack",{start:function(e,t,i){var n,r=i.options,o=D.makeArray(D(r.stack)).sort(function(e,t){return(parseInt(D(e).css("zIndex"),10)||0)-(parseInt(D(t).css("zIndex"),10)||0)});if(!o.length){return}n=parseInt(D(o[0]).css("zIndex"),10)||0;D(o).each(function(e){D(this).css("zIndex",n+e)});this.css("zIndex",n+o.length)}});D.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){var n=D(t.helper),r=i.options;if(n.css("zIndex")){r._zIndex=n.css("zIndex")}n.css("zIndex",r.zIndex)},stop:function(e,t,i){var n=i.options;if(n._zIndex){D(t.helper).css("zIndex",n._zIndex)}}});var l=D.ui.draggable;
/*!
 * jQuery UI Droppable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */D.widget("ui.droppable",{version:"1.11.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=false;this.isout=true;this.accept=D.isFunction(i)?i:function(e){return e.is(i)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(t.scope);t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){D.ui.ddmanager.droppables[e]=D.ui.ddmanager.droppables[e]||[];D.ui.ddmanager.droppables[e].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++){if(e[t]===this){e.splice(t,1)}}},_destroy:function(){var e=D.ui.ddmanager.droppables[this.options.scope];this._splice(e);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,t){if(e==="accept"){this.accept=D.isFunction(t)?t:function(e){return e.is(t)}}else if(e==="scope"){var i=D.ui.ddmanager.droppables[this.options.scope];this._splice(i);this._addToManager(t)}this._super(e,t)},_activate:function(e){var t=D.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(t){this._trigger("activate",e,this.ui(t))}},_deactivate:function(e){var t=D.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(t){this._trigger("deactivate",e,this.ui(t))}},_over:function(e){var t=D.ui.ddmanager.current;if(!t||(t.currentItem||t.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],t.currentItem||t.element)){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",e,this.ui(t))}},_out:function(e){var t=D.ui.ddmanager.current;if(!t||(t.currentItem||t.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],t.currentItem||t.element)){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(t))}},_drop:function(t,e){var i=e||D.ui.ddmanager.current,n=false;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=D(this).droppable("instance");if(e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&D.ui.intersect(i,D.extend(e,{offset:e.element.offset()}),e.options.tolerance,t)){n=true;return false}});if(n){return false}if(this.accept.call(this.element[0],i.currentItem||i.element)){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",t,this.ui(i));return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}});D.ui.intersect=function(){function f(e,t,i){return e>=t&&e<t+i}return function(e,t,i,n){if(!t.offset){return false}var r=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,s=o+e.helperProportions.height,l=t.offset.left,d=t.offset.top,c=l+t.proportions().width,u=d+t.proportions().height;switch(i){case"fit":return l<=r&&a<=c&&d<=o&&s<=u;case"intersect":return l<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<c&&d<o+e.helperProportions.height/2&&s-e.helperProportions.height/2<u;case"pointer":return f(n.pageY,d,t.proportions().height)&&f(n.pageX,l,t.proportions().width);case"touch":return(o>=d&&o<=u||s>=d&&s<=u||o<d&&s>u)&&(r>=l&&r<=c||a>=l&&a<=c||r<l&&a>c);default:return false}}}();D.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var i,n,r=D.ui.ddmanager.droppables[e.options.scope]||[],o=t?t.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<r.length;i++){if(r[i].options.disabled||e&&!r[i].accept.call(r[i].element[0],e.currentItem||e.element)){continue}for(n=0;n<a.length;n++){if(a[n]===r[i].element[0]){r[i].proportions().height=0;continue e}}r[i].visible=r[i].element.css("display")!=="none";if(!r[i].visible){continue}if(o==="mousedown"){r[i]._activate.call(r[i],t)}r[i].offset=r[i].element.offset();r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight})}},drop:function(e,t){var i=false;D.each((D.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&D.ui.intersect(e,this,this.options.tolerance,t)){i=this._drop.call(this,t)||i}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=true;this.isover=false;this._deactivate.call(this,t)}});return i},dragStart:function(e,t){e.element.parentsUntil("body").bind("scroll.droppable",function(){if(!e.options.refreshPositions){D.ui.ddmanager.prepareOffsets(e,t)}})},drag:function(o,a){if(o.options.refreshPositions){D.ui.ddmanager.prepareOffsets(o,a)}D.each(D.ui.ddmanager.droppables[o.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var e,t,i,n=D.ui.intersect(o,this,this.options.tolerance,a),r=!n&&this.isover?"isout":n&&!this.isover?"isover":null;if(!r){return}if(this.options.greedy){t=this.options.scope;i=this.element.parents(":data(ui-droppable)").filter(function(){return D(this).droppable("instance").options.scope===t});if(i.length){e=D(i[0]).droppable("instance");e.greedyChild=r==="isover"}}if(e&&r==="isover"){e.isover=false;e.isout=true;e._out.call(e,a)}this[r]=true;this[r==="isout"?"isover":"isout"]=false;this[r==="isover"?"_over":"_out"].call(this,a);if(e&&r==="isout"){e.isout=false;e.isover=true;e._over.call(e,a)}})},dragStop:function(e,t){e.element.parentsUntil("body").unbind("scroll.droppable");if(!e.options.refreshPositions){D.ui.ddmanager.prepareOffsets(e,t)}}};var d=D.ui.droppable;
/*!
 * jQuery UI Resizable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */D.widget("ui.resizable",D.ui.mouse,{version:"1.11.3",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,t){if(D(e).css("overflow")==="hidden"){return false}var i=t&&t==="left"?"scrollLeft":"scrollTop",n=false;if(e[i]>0){return true}e[i]=1;n=e[i]>0;e[i]=0;return n},_create:function(){var e,t,i,n,r,o=this,a=this.options;this.element.addClass("ui-resizable");D.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(D("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=a.handles||(!D(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}e=this.handles.split(",");this.handles={};for(t=0;t<e.length;t++){i=D.trim(e[t]);r="ui-resizable-"+i;n=D("<div class='ui-resizable-handle "+r+"'></div>");n.css({zIndex:a.zIndex});if("se"===i){n.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[i]=".ui-resizable-"+i;this.element.append(n)}}this._renderAxis=function(e){var t,i,n,r;e=e||this.element;for(t in this.handles){if(this.handles[t].constructor===String){this.handles[t]=this.element.children(this.handles[t]).first().show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){i=D(this.handles[t],this.element);r=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth();n=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join("");e.css(n,r);this._proportionallyResize()}if(!D(this.handles[t]).length){continue}}};this._renderAxis(this.element);this._handles=D(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!o.resizing){if(this.className){n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}o.axis=n&&n[1]?n[1]:"se"}});if(a.autoHide){this._handles.hide();D(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(a.disabled){return}D(this).removeClass("ui-resizable-autohide");o._handles.show()}).mouseleave(function(){if(a.disabled){return}if(!o.resizing){D(this).addClass("ui-resizable-autohide");o._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,t=function(e){D(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}this.originalElement.css("resize",this.originalResizeStyle);t(this.originalElement);return this},_mouseCapture:function(e){var t,i,n=false;for(t in this.handles){i=D(this.handles[t])[0];if(i===e.target||D.contains(i,e.target)){n=true}}return!this.options.disabled&&n},_mouseStart:function(e){var t,i,n,r=this.options,o=this.element;this.resizing=true;this._renderProxy();t=this._num(this.helper.css("left"));i=this._num(this.helper.css("top"));if(r.containment){t+=D(r.containment).scrollLeft()||0;i+=D(r.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:t,top:i};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalPosition={left:t,top:i};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=typeof r.aspectRatio==="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;n=D(".ui-resizable-"+this.axis).css("cursor");D("body").css("cursor",n==="auto"?this.axis+"-resize":n);o.addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var t,i,n=this.originalMousePosition,r=this.axis,o=e.pageX-n.left||0,a=e.pageY-n.top||0,s=this._change[r];this._updatePrevProperties();if(!s){return false}t=s.apply(this,[e,o,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){t=this._updateRatio(t,e)}t=this._respectSize(t,e);this._updateCache(t);this._propagate("resize",e);i=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!D.isEmptyObject(i)){this._updatePrevProperties();this._trigger("resize",e,this.ui());this._applyChanges()}return false},_mouseStop:function(e){this.resizing=false;var t,i,n,r,o,a,s,l=this.options,d=this;if(this._helper){t=this._proportionallyResizeElements;i=t.length&&/textarea/i.test(t[0].nodeName);n=i&&this._hasScroll(t[0],"left")?0:d.sizeDiff.height;r=i?0:d.sizeDiff.width;o={width:d.helper.width()-r,height:d.helper.height()-n};a=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null;s=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;if(!l.animate){this.element.css(D.extend(o,{top:s,left:a}))}d.helper.height(d.size.height);d.helper.width(d.size.width);if(this._helper&&!l.animate){this._proportionallyResize()}}D("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",e);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};if(this.position.top!==this.prevPosition.top){e.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){e.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){e.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){e.height=this.size.height+"px"}this.helper.css(e);return e},_updateVirtualBoundaries:function(e){var t,i,n,r,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:Infinity,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||e){t=o.minHeight*this.aspectRatio;n=o.minWidth/this.aspectRatio;i=o.maxHeight*this.aspectRatio;r=o.maxWidth/this.aspectRatio;if(t>o.minWidth){o.minWidth=t}if(n>o.minHeight){o.minHeight=n}if(i<o.maxWidth){o.maxWidth=i}if(r<o.maxHeight){o.maxHeight=r}}this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset();if(this._isNumber(e.left)){this.position.left=e.left}if(this._isNumber(e.top)){this.position.top=e.top}if(this._isNumber(e.height)){this.size.height=e.height}if(this._isNumber(e.width)){this.size.width=e.width}},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;if(this._isNumber(e.height)){e.width=e.height*this.aspectRatio}else if(this._isNumber(e.width)){e.height=e.width/this.aspectRatio}if(n==="sw"){e.left=t.left+(i.width-e.width);e.top=null}if(n==="nw"){e.top=t.top+(i.height-e.height);e.left=t.left+(i.width-e.width)}return e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);if(o){e.width=t.minWidth}if(a){e.height=t.minHeight}if(n){e.width=t.maxWidth}if(r){e.height=t.maxHeight}if(o&&d){e.left=s-t.minWidth}if(n&&d){e.left=s-t.maxWidth}if(a&&c){e.top=l-t.minHeight}if(r&&c){e.top=l-t.maxHeight}if(!e.width&&!e.height&&!e.left&&e.top){e.top=null}else if(!e.width&&!e.height&&!e.top&&e.left){e.left=null}return e},_getPaddingPlusBorderDimensions:function(e){var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++){i[t]=parseInt(n[t],10)||0;i[t]+=parseInt(r[t],10)||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var e,t=0,i=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(e)}e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||D("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return D.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return D.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return D.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return D.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){D.ui.plugin.call(this,e,[t,this.ui()]);e!=="resize"&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});D.ui.plugin.add("resizable","animate",{stop:function(t){var i=D(this).resizable("instance"),e=i.options,n=i._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),o=r&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,s={width:i.size.width-a,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(D.extend(s,d&&l?{top:d,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};if(n&&n.length){D(n[0]).css({width:e.width,height:e.height})}i._updateCache(e);i._propagate("resize",t)}})}});D.ui.plugin.add("resizable","containment",{start:function(){var i,n,e,t,r,o,a,s=D(this).resizable("instance"),l=s.options,d=s.element,c=l.containment,u=c instanceof D?c.get(0):/parent/.test(c)?d.parent().get(0):c;if(!u){return}s.containerElement=D(u);if(/document/.test(c)||c===document){s.containerOffset={left:0,top:0};s.containerPosition={left:0,top:0};s.parentData={element:D(document),left:0,top:0,width:D(document).width(),height:D(document).height()||document.body.parentNode.scrollHeight}}else{i=D(u);n=[];D(["Top","Right","Left","Bottom"]).each(function(e,t){n[e]=s._num(i.css("padding"+t))});s.containerOffset=i.offset();s.containerPosition=i.position();s.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]};e=s.containerOffset;t=s.containerSize.height;r=s.containerSize.width;o=s._hasScroll(u,"left")?u.scrollWidth:r;a=s._hasScroll(u)?u.scrollHeight:t;s.parentData={element:u,left:e.left,top:e.top,width:o,height:a}}},resize:function(e){var t,i,n,r,o=D(this).resizable("instance"),a=o.options,s=o.containerOffset,l=o.position,d=o._aspectRatio||e.shiftKey,c={top:0,left:0},u=o.containerElement,f=true;if(u[0]!==document&&/static/.test(u.css("position"))){c=s}if(l.left<(o._helper?s.left:0)){o.size.width=o.size.width+(o._helper?o.position.left-s.left:o.position.left-c.left);if(d){o.size.height=o.size.width/o.aspectRatio;f=false}o.position.left=a.helper?s.left:0}if(l.top<(o._helper?s.top:0)){o.size.height=o.size.height+(o._helper?o.position.top-s.top:o.position.top);if(d){o.size.width=o.size.height*o.aspectRatio;f=false}o.position.top=o._helper?s.top:0}n=o.containerElement.get(0)===o.element.parent().get(0);r=/relative|absolute/.test(o.containerElement.css("position"));if(n&&r){o.offset.left=o.parentData.left+o.position.left;o.offset.top=o.parentData.top+o.position.top}else{o.offset.left=o.element.offset().left;o.offset.top=o.element.offset().top}t=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-s.left));i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-s.top));if(t+o.size.width>=o.parentData.width){o.size.width=o.parentData.width-t;if(d){o.size.height=o.size.width/o.aspectRatio;f=false}}if(i+o.size.height>=o.parentData.height){o.size.height=o.parentData.height-i;if(d){o.size.width=o.size.height*o.aspectRatio;f=false}}if(!f){o.position.left=o.prevPosition.left;o.position.top=o.prevPosition.top;o.size.width=o.prevSize.width;o.size.height=o.prevSize.height}},stop:function(){var e=D(this).resizable("instance"),t=e.options,i=e.containerOffset,n=e.containerPosition,r=e.containerElement,o=D(e.helper),a=o.offset(),s=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;if(e._helper&&!t.animate&&/relative/.test(r.css("position"))){D(this).css({left:a.left-n.left-i.left,width:s,height:l})}if(e._helper&&!t.animate&&/static/.test(r.css("position"))){D(this).css({left:a.left-n.left-i.left,width:s,height:l})}}});D.ui.plugin.add("resizable","alsoResize",{start:function(){var e=D(this).resizable("instance"),t=e.options,i=function(e){D(e).each(function(){var e=D(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};if(typeof t.alsoResize==="object"&&!t.alsoResize.parentNode){if(t.alsoResize.length){t.alsoResize=t.alsoResize[0];i(t.alsoResize)}else{D.each(t.alsoResize,function(e){i(e)})}}else{i(t.alsoResize)}},resize:function(e,o){var t=D(this).resizable("instance"),i=t.options,n=t.originalSize,r=t.originalPosition,a={height:t.size.height-n.height||0,width:t.size.width-n.width||0,top:t.position.top-r.top||0,left:t.position.left-r.left||0},s=function(e,i){D(e).each(function(){var e=D(this),n=D(this).data("ui-resizable-alsoresize"),r={},t=i&&i.length?i:e.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];D.each(t,function(e,t){var i=(n[t]||0)+(a[t]||0);if(i&&i>=0){r[t]=i||null}});e.css(r)})};if(typeof i.alsoResize==="object"&&!i.alsoResize.nodeType){D.each(i.alsoResize,function(e,t){s(e,t)})}else{s(i.alsoResize)}},stop:function(){D(this).removeData("resizable-alsoresize")}});D.ui.plugin.add("resizable","ghost",{start:function(){var e=D(this).resizable("instance"),t=e.options,i=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof t.ghost==="string"?t.ghost:"");e.ghost.appendTo(e.helper)},resize:function(){var e=D(this).resizable("instance");if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(){var e=D(this).resizable("instance");if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});D.ui.plugin.add("resizable","grid",{resize:function(){var e,t=D(this).resizable("instance"),i=t.options,n=t.size,r=t.originalSize,o=t.originalPosition,a=t.axis,s=typeof i.grid==="number"?[i.grid,i.grid]:i.grid,l=s[0]||1,d=s[1]||1,c=Math.round((n.width-r.width)/l)*l,u=Math.round((n.height-r.height)/d)*d,f=r.width+c,h=r.height+u,p=i.maxWidth&&i.maxWidth<f,m=i.maxHeight&&i.maxHeight<h,g=i.minWidth&&i.minWidth>f,v=i.minHeight&&i.minHeight>h;i.grid=s;if(g){f+=l}if(v){h+=d}if(p){f-=l}if(m){h-=d}if(/^(se|s|e)$/.test(a)){t.size.width=f;t.size.height=h}else if(/^(ne)$/.test(a)){t.size.width=f;t.size.height=h;t.position.top=o.top-u}else if(/^(sw)$/.test(a)){t.size.width=f;t.size.height=h;t.position.left=o.left-c}else{if(h-d<=0||f-l<=0){e=t._getPaddingPlusBorderDimensions(this)}if(h-d>0){t.size.height=h;t.position.top=o.top-u}else{h=d-e.height;t.size.height=h;t.position.top=o.top+r.height-h}if(f-l>0){t.size.width=f;t.position.left=o.left-c}else{f=l-e.width;t.size.width=f;t.position.left=o.left+r.width-f}}}});var c=D.ui.resizable;
/*!
 * jQuery UI Selectable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */var u=D.widget("ui.selectable",D.ui.mouse,{version:"1.11.3",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,t=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){e=D(t.options.filter,t.element[0]);e.addClass("ui-selectee");e.each(function(){var e=D(this),t=e.offset();D.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),startselected:false,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=D("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(i){var n=this,e=this.options;this.opos=[i.pageX,i.pageY];if(this.options.disabled){return}this.selectees=D(e.filter,this.element[0]);this._trigger("start",i);D(e.appendTo).append(this.helper);this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0});if(e.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var e=D.data(this,"selectable-item");e.startselected=true;if(!i.metaKey&&!i.ctrlKey){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;n._trigger("unselecting",i,{unselecting:e.element})}});D(i.target).parents().addBack().each(function(){var e,t=D.data(this,"selectable-item");if(t){e=!i.metaKey&&!i.ctrlKey||!t.$element.hasClass("ui-selected");t.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");t.unselecting=!e;t.selecting=e;t.selected=e;if(e){n._trigger("selecting",i,{selecting:t.element})}else{n._trigger("unselecting",i,{unselecting:t.element})}return false}})},_mouseDrag:function(i){this.dragged=true;if(this.options.disabled){return}var e,n=this,r=this.options,o=this.opos[0],a=this.opos[1],s=i.pageX,l=i.pageY;if(o>s){e=s;s=o;o=e}if(a>l){e=l;l=a;a=e}this.helper.css({left:o,top:a,width:s-o,height:l-a});this.selectees.each(function(){var e=D.data(this,"selectable-item"),t=false;if(!e||e.element===n.element[0]){return}if(r.tolerance==="touch"){t=!(e.left>s||e.right<o||e.top>l||e.bottom<a)}else if(r.tolerance==="fit"){t=e.left>o&&e.right<s&&e.top>a&&e.bottom<l}if(t){if(e.selected){e.$element.removeClass("ui-selected");e.selected=false}if(e.unselecting){e.$element.removeClass("ui-unselecting");e.unselecting=false}if(!e.selecting){e.$element.addClass("ui-selecting");e.selecting=true;n._trigger("selecting",i,{selecting:e.element})}}else{if(e.selecting){if((i.metaKey||i.ctrlKey)&&e.startselected){e.$element.removeClass("ui-selecting");e.selecting=false;e.$element.addClass("ui-selected");e.selected=true}else{e.$element.removeClass("ui-selecting");e.selecting=false;if(e.startselected){e.$element.addClass("ui-unselecting");e.unselecting=true}n._trigger("unselecting",i,{unselecting:e.element})}}if(e.selected){if(!i.metaKey&&!i.ctrlKey&&!e.startselected){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;n._trigger("unselecting",i,{unselecting:e.element})}}}});return false},_mouseStop:function(t){var i=this;this.dragged=false;D(".ui-unselecting",this.element[0]).each(function(){var e=D.data(this,"selectable-item");e.$element.removeClass("ui-unselecting");e.unselecting=false;e.startselected=false;i._trigger("unselected",t,{unselected:e.element})});D(".ui-selecting",this.element[0]).each(function(){var e=D.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected");e.selecting=false;e.selected=true;e.startselected=true;i._trigger("selected",t,{selected:e.element})});this._trigger("stop",t);this.helper.remove();return false}});
/*!
 * jQuery UI Sortable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */var f=D.widget("ui.sortable",D.ui.mouse,{version:"1.11.3",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?e.axis==="x"||this._isFloating(this.items[0].item):false;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");D.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(e,t){var i=null,n=false,r=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(e);D(e.target).parents().each(function(){if(D.data(this,r.widgetName+"-item")===r){i=D(this);return false}});if(D.data(e.target,r.widgetName+"-item")===r){i=D(e.target)}if(!i){return false}if(this.options.handle&&!t){D(this.options.handle,i).find("*").addBack().each(function(){if(this===e.target){n=true}});if(!n){return false}}this.currentItem=i;this._removeCurrentsFromItems();return true},_mouseStart:function(e,t,i){var n,r,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};D.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(o.containment){this._setContainment()}if(o.cursor&&o.cursor!=="auto"){r=this.document.find("body");this.storedCursor=r.css("cursor");r.css("cursor",o.cursor);this.storedStylesheet=D("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!i){for(n=this.containers.length-1;n>=0;n--){this.containers[n]._trigger("activate",e,this._uiHash(this))}}if(D.ui.ddmanager){D.ui.ddmanager.current=this}if(D.ui.ddmanager&&!o.dropBehaviour){D.ui.ddmanager.prepareOffsets(this,e)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(e){var t,i,n,r,o=this.options,a=false;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed}else if(e.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed}else if(e.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed}}else{if(e.pageY-this.document.scrollTop()<o.scrollSensitivity){a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed)}else if(this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity){a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)}if(e.pageX-this.document.scrollLeft()<o.scrollSensitivity){a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed)}else if(this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity){a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed)}}if(a!==false&&D.ui.ddmanager&&!o.dropBehaviour){D.ui.ddmanager.prepareOffsets(this,e)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(t=this.items.length-1;t>=0;t--){i=this.items[t];n=i.item[0];r=this._intersectsWithPointer(i);if(!r){continue}if(i.instance!==this.currentContainer){continue}if(n!==this.currentItem[0]&&this.placeholder[r===1?"next":"prev"]()[0]!==n&&!D.contains(this.placeholder[0],n)&&(this.options.type==="semi-dynamic"?!D.contains(this.element[0],n):true)){this.direction=r===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(i)){this._rearrange(e,i)}else{break}this._trigger("change",e,this._uiHash());break}}this._contactContainers(e);if(D.ui.ddmanager){D.ui.ddmanager.drag(this,e)}this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,t){if(!e){return}if(D.ui.ddmanager&&!this.options.dropBehaviour){D.ui.ddmanager.drop(this,e)}if(this.options.revert){var i=this,n=this.placeholder.offset(),r=this.options.axis,o={};if(!r||r==="x"){o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!r||r==="y"){o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;D(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else{this._clear(e,t)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}D.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){D(this.domPosition.prev).after(this.currentItem)}else{D(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];t=t||{};D(e).each(function(){var e=(D(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(e){i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}});if(!i.length&&t.key){i.push(t.key+"=")}return i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};t.each(function(){i.push(D(e.item||this).attr(e.attribute||"id")||"")});return i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,d=this.offset.click.top,c=this.offset.click.left,u=this.options.axis==="x"||n+d>s&&n+d<l,f=this.options.axis==="y"||t+c>o&&t+c<a,h=u&&f;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return h}else{return o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&s<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l}},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();if(!n){return false}return this.floating?o&&o==="right"||r==="down"?2:1:r&&(r==="down"?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();if(this.floating&&r){return r==="right"&&i||r==="left"&&!i}else{return n&&(n==="down"&&t||n==="up"&&!t)}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var t,i,n,r,o=[],a=[],s=this._connectWith();if(s&&e){for(t=s.length-1;t>=0;t--){n=D(s[t],this.document[0]);for(i=n.length-1;i>=0;i--){r=D.data(n[i],this.widgetFullName);if(r&&r!==this&&!r.options.disabled){a.push([D.isFunction(r.options.items)?r.options.items.call(r.element):D(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r])}}}}a.push([D.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):D(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function l(){o.push(this)}for(t=a.length-1;t>=0;t--){a[t][0].each(l)}return D(o)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=D.grep(this.items,function(e){for(var t=0;t<i.length;t++){if(i[t]===e.item[0]){return false}}return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var t,i,n,r,o,a,s,l,d=this.items,c=[[D.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):D(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready){for(t=u.length-1;t>=0;t--){n=D(u[t],this.document[0]);for(i=n.length-1;i>=0;i--){r=D.data(n[i],this.widgetFullName);if(r&&r!==this&&!r.options.disabled){c.push([D.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):D(r.options.items,r.element),r]);this.containers.push(r)}}}}for(t=c.length-1;t>=0;t--){o=c[t][1];a=c[t][0];for(i=0,l=a.length;i<l;i++){s=D(a[i]);s.data(this.widgetName+"-item",o);d.push({item:s,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var t,i,n,r;for(t=this.items.length-1;t>=0;t--){i=this.items[t];if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]){continue}n=this.options.toleranceElement?D(this.options.toleranceElement,i.item):i.item;if(!e){i.width=n.outerWidth();i.height=n.outerHeight()}r=n.offset();i.left=r.left;i.top=r.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(t=this.containers.length-1;t>=0;t--){r=this.containers[t].element.offset();this.containers[t].containerCache.left=r.left;this.containers[t].containerCache.top=r.top;this.containers[t].containerCache.width=this.containers[t].element.outerWidth();this.containers[t].containerCache.height=this.containers[t].element.outerHeight()}}return this},_createPlaceholder:function(i){i=i||this;var n,r=i.options;if(!r.placeholder||r.placeholder.constructor===String){n=r.placeholder;r.placeholder={element:function(){var e=i.currentItem[0].nodeName.toLowerCase(),t=D("<"+e+">",i.document[0]).addClass(n||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(e==="tr"){i.currentItem.children().each(function(){D("<td>&#160;</td>",i.document[0]).attr("colspan",D(this).attr("colspan")||1).appendTo(t)})}else if(e==="img"){t.attr("src",i.currentItem.attr("src"))}if(!n){t.css("visibility","hidden")}return t},update:function(e,t){if(n&&!r.forcePlaceholderSize){return}if(!t.height()){t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10))}if(!t.width()){t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10))}}}}i.placeholder=D(r.placeholder.element.call(i.element,i.currentItem));i.currentItem.after(i.placeholder);r.placeholder.update(i,i.placeholder)},_contactContainers:function(e){var t,i,n,r,o,a,s,l,d,c,u=null,f=null;for(t=this.containers.length-1;t>=0;t--){if(D.contains(this.currentItem[0],this.containers[t].element[0])){continue}if(this._intersectsWith(this.containers[t].containerCache)){if(u&&D.contains(this.containers[t].element[0],u.element[0])){continue}u=this.containers[t];f=t}else{if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",e,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(!u){return}if(this.containers.length===1){if(!this.containers[f].containerCache.over){this.containers[f]._trigger("over",e,this._uiHash(this));this.containers[f].containerCache.over=1}}else{n=1e4;r=null;d=u.floating||this._isFloating(this.currentItem);o=d?"left":"top";a=d?"width":"height";c=d?"clientX":"clientY";for(i=this.items.length-1;i>=0;i--){if(!D.contains(this.containers[f].element[0],this.items[i].item[0])){continue}if(this.items[i].item[0]===this.currentItem[0]){continue}s=this.items[i].item.offset()[o];l=false;if(e[c]-s>this.items[i][a]/2){l=true}if(Math.abs(e[c]-s)<n){n=Math.abs(e[c]-s);r=this.items[i];this.direction=l?"up":"down"}}if(!r&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[f]){if(!this.currentContainer.containerCache.over){this.containers[f]._trigger("over",e,this._uiHash());this.currentContainer.containerCache.over=1}return}r?this._rearrange(e,r,null,true):this._rearrange(e,null,this.containers[f].element,true);this._trigger("change",e,this._uiHash());this.containers[f]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[f];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",e,this._uiHash(this));this.containers[f].containerCache.over=1}},_createHelper:function(e){var t=this.options,i=D.isFunction(t.helper)?D(t.helper.apply(this.element[0],[e,this.currentItem])):t.helper==="clone"?this.currentItem.clone():this.currentItem;if(!i.parents("body").length){D(t.appendTo!=="parent"?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0])}if(i[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!i[0].style.width||t.forceHelperSize){i.width(this.currentItem.width())}if(!i[0].style.height||t.forceHelperSize){i.height(this.currentItem.height())}return i},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(D.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&D.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&D.ui.ie){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,n=this.options;if(n.containment==="parent"){n.containment=this.helper[0].parentNode}if(n.containment==="document"||n.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(n.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(n.containment)){e=D(n.containment)[0];t=D(n.containment).offset();i=D(e).css("overflow")!=="hidden";this.containment=[t.left+(parseInt(D(e).css("borderLeftWidth"),10)||0)+(parseInt(D(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(D(e).css("borderTopWidth"),10)||0)+(parseInt(D(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(D(e).css("borderLeftWidth"),10)||0)-(parseInt(D(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(D(e).css("borderTopWidth"),10)||0)-(parseInt(D(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,t){if(!t){t=this.position}var i=e==="absolute"?1:-1,n=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&D.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,r=/(html|body)/i.test(n[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():r?0:n.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())*i}},_generatePosition:function(e){var t,i,n=this.options,r=e.pageX,o=e.pageY,a=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&D.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(a[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){r=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){o=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){r=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){o=this.containment[3]+this.offset.click.top}}if(n.grid){t=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-n.grid[1]:t+n.grid[1]:t;i=this.originalPageX+Math.round((r-this.originalPageX)/n.grid[0])*n.grid[0];r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){if(r===this.counter){this.refreshPositions(!n)}})},_clear:function(e,t){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){n.push(function(e){this._trigger("update",e,this._uiHash())})}if(this!==this.currentContainer){if(!t){n.push(function(e){this._trigger("remove",e,this._uiHash())});n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}}function r(t,i,n){return function(e){n._trigger(t,e,i._uiHash(i))}}for(i=this.containers.length-1;i>=0;i--){if(!t){n.push(r("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(r("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(i=0;i<n.length;i++){n[i].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(D.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||D([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}});
/*!
 * jQuery UI Accordion 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 */var h=D.widget("ui.accordion",{version:"1.11.3",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=D();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!e.collapsible&&(e.active===false||e.active==null)){e.active=0}this._processPanels();if(e.active<0){e.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?D():this.active.next()}},_createIcons:function(){var e=this.options.icons;if(e){D("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader);this.headers.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default "+"ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom "+"ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){e.css("height","")}},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(t)}this._super(e,t);if(e==="collapsible"&&!t&&this.options.active===false){this._activate(0)}if(e==="icons"){this._destroyIcons();if(t){this._createIcons()}}if(e==="disabled"){this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t);this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)}},_keydown:function(e){if(e.altKey||e.ctrlKey){return}var t=D.ui.keyCode,i=this.headers.length,n=this.headers.index(e.target),r=false;switch(e.keyCode){case t.RIGHT:case t.DOWN:r=this.headers[(n+1)%i];break;case t.LEFT:case t.UP:r=this.headers[(n-1+i)%i];break;case t.SPACE:case t.ENTER:this._eventHandler(e);break;case t.HOME:r=this.headers[0];break;case t.END:r=this.headers[i-1];break}if(r){D(e.target).attr("tabIndex",-1);D(r).attr("tabIndex",0);r.focus();e.preventDefault()}},_panelKeyDown:function(e){if(e.keyCode===D.ui.keyCode.UP&&e.ctrlKey){D(e.currentTarget).prev().focus()}},refresh:function(){var e=this.options;this._processPanels();if(e.active===false&&e.collapsible===true||!this.headers.length){e.active=false;this.active=D()}else if(e.active===false){this._activate(0)}else if(this.active.length&&!D.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){e.active=false;this.active=D()}else{this._activate(Math.max(0,e.active-1))}}else{e.active=this.headers.index(this.active)}this._destroyIcons();this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();if(t){this._off(e.not(this.headers));this._off(t.not(this.panels))}},_refresh:function(){var i,e=this.options,t=e.heightStyle,n=this.element.parent();this.active=this._findActive(e.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var e=D(this),t=e.uniqueId().attr("id"),i=e.next(),n=i.uniqueId().attr("id");e.attr("aria-controls",n);i.attr("aria-labelledby",t)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(e.event);if(t==="fill"){i=n.height();this.element.siblings(":visible").each(function(){var e=D(this),t=e.css("position");if(t==="absolute"||t==="fixed"){return}i-=e.outerHeight(true)});this.headers.each(function(){i-=D(this).outerHeight(true)});this.headers.next().each(function(){D(this).height(Math.max(0,i-D(this).innerHeight()+D(this).height()))}).css("overflow","auto")}else if(t==="auto"){i=0;this.headers.next().each(function(){i=Math.max(i,D(this).css("height","").height())}).height(i)}},_activate:function(e){var t=this._findActive(e)[0];if(t===this.active[0]){return}t=t||this.active[0];this._eventHandler({target:t,currentTarget:t,preventDefault:D.noop})},_findActive:function(e){return typeof e==="number"?this.headers.eq(e):D()},_setupEvents:function(e){var i={keydown:"_keydown"};if(e){D.each(e.split(" "),function(e,t){i[t]="_eventHandler"})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(e){var t=this.options,i=this.active,n=D(e.currentTarget),r=n[0]===i[0],o=r&&t.collapsible,a=o?D():n.next(),s=i.next(),l={oldHeader:i,oldPanel:s,newHeader:o?D():n,newPanel:a};e.preventDefault();if(r&&!t.collapsible||this._trigger("beforeActivate",e,l)===false){return}t.active=o?false:this.headers.index(n);this.active=r?D():n;this._toggle(l);i.removeClass("ui-accordion-header-active ui-state-active");if(t.icons){i.children(".ui-accordion-header-icon").removeClass(t.icons.activeHeader).addClass(t.icons.header)}if(!r){n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(t.icons){n.children(".ui-accordion-header-icon").removeClass(t.icons.header).addClass(t.icons.activeHeader)}n.next().addClass("ui-accordion-content-active")}},_toggle:function(e){var t=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=t;this.prevHide=i;if(this.options.animate){this._animate(t,i,e)}else{i.hide();t.show();this._toggleComplete(e)}i.attr({"aria-hidden":"true"});i.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(t.length&&i.length){i.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else if(t.length){this.headers.filter(function(){return parseInt(D(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1)}t.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,i,t){var n,r,o,a=this,s=0,l=e.length&&(!i.length||e.index()<i.index()),d=this.options.animate||{},c=l&&d.down||d,u=function(){a._toggleComplete(t)};if(typeof c==="number"){o=c}if(typeof c==="string"){r=c}r=r||c.easing||d.easing;o=o||c.duration||d.duration;if(!i.length){return e.animate(this.showProps,o,r,u)}if(!e.length){return i.animate(this.hideProps,o,r,u)}n=e.show().outerHeight();i.animate(this.hideProps,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}});e.hide().animate(this.showProps,{duration:o,easing:r,complete:u,step:function(e,t){t.now=Math.round(e);if(t.prop!=="height"){s+=t.now}else if(a.options.heightStyle!=="content"){t.now=Math.round(n-i.outerHeight()-s);s=0}}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(t.length){t.parent()[0].className=t.parent()[0].className}this._trigger("activate",null,e)}});
/*!
 * jQuery UI Menu 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */var p=D.widget("ui.menu",{version:"1.11.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(e){var t=D(e.target);if(!this.mouseHandled&&t.not(".ui-state-disabled").length){this.select(e);if(!e.isPropagationStopped()){this.mouseHandled=true}if(t.has(".ui-menu").length){this.expand(e)}else if(!this.element.is(":focus")&&D(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":function(e){if(this.previousFilter){return}var t=D(e.currentTarget);t.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(e,t)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);if(!t){this.focus(e,i)}},blur:function(e){this._delay(function(){if(!D.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(e)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(e){if(this._closeOnDocumentClick(e)){this.collapseAll(e)}this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=D(this);if(e.data("ui-menu-submenu-carat")){e.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var t,i,n,r,o=true;switch(e.keyCode){case D.ui.keyCode.PAGE_UP:this.previousPage(e);break;case D.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case D.ui.keyCode.HOME:this._move("first","first",e);break;case D.ui.keyCode.END:this._move("last","last",e);break;case D.ui.keyCode.UP:this.previous(e);break;case D.ui.keyCode.DOWN:this.next(e);break;case D.ui.keyCode.LEFT:this.collapse(e);break;case D.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(e)}break;case D.ui.keyCode.ENTER:case D.ui.keyCode.SPACE:this._activate(e);break;case D.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=false;i=this.previousFilter||"";n=String.fromCharCode(e.keyCode);r=false;clearTimeout(this.filterTimer);if(n===i){r=true}else{n=i+n}t=this._filterMenuItems(n);t=r&&t.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):t;if(!t.length){n=String.fromCharCode(e.keyCode);t=this._filterMenuItems(n)}if(t.length){this.focus(e,t);this.previousFilter=n;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else{delete this.previousFilter}}if(o){e.preventDefault()}},_activate:function(e){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(e)}else{this.select(e)}}},refresh:function(){var e,t,i=this,n=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=D(this),t=e.parent(),i=D("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",true);t.attr("aria-haspopup","true").prepend(i);e.attr("aria-labelledby",t.attr("id"))});e=r.add(this.element);t=e.find(this.options.items);t.not(".ui-menu-item").each(function(){var e=D(this);if(i._isDivider(e)){e.addClass("ui-widget-content ui-menu-divider")}});t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});t.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!D.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if(e==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu)}if(e==="disabled"){this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t)}this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&e.type==="focus");this._scrollIntoView(t);this.active=t.first();n=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",n.attr("id"))}this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(e&&e.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}i=t.children(".ui-menu");if(i.length&&e&&/^mouse/.test(e.type)){this._startOpening(i)}this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,i,n,r,o,a;if(this._hasScroll()){t=parseFloat(D.css(this.activeMenu[0],"borderTopWidth"))||0;i=parseFloat(D.css(this.activeMenu[0],"paddingTop"))||0;n=e.offset().top-this.activeMenu.offset().top-t-i;r=this.activeMenu.scrollTop();o=this.activeMenu.height();a=e.outerHeight();if(n<0){this.activeMenu.scrollTop(r+n)}else if(n+a>o){this.activeMenu.scrollTop(r+n-o+a)}}},blur:function(e,t){if(!t){clearTimeout(this.timer)}if(!this.active){return}this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(e)},this.delay)},_open:function(e){var t=D.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true");e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var e=i?this.element:D(t&&t.target).closest(this.element.find(".ui-menu"));if(!e.length){e=this.element}this._close(e);this.blur(t);this.activeMenu=e},this.delay)},_close:function(e){if(!e){e=this.active?this.active.parent():this.element}e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!D(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(t&&t.length){this._open(t.parent());this._delay(function(){this.focus(e,t)})}},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;if(this.active){if(e==="first"||e==="last"){n=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{n=this.active[e+"All"](".ui-menu-item").eq(0)}}if(!n||!n.length||!this.active){n=this.activeMenu.find(this.options.items)[t]()}this.focus(i,n)},nextPage:function(e){var t,i,n;if(!this.active){this.next(e);return}if(this.isLastItem()){return}if(this._hasScroll()){i=this.active.offset().top;n=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){t=D(this);return t.offset().top-i-n<0});this.focus(e,t)}else{this.focus(e,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function(e){var t,i,n;if(!this.active){this.next(e);return}if(this.isFirstItem()){return}if(this._hasScroll()){i=this.active.offset().top;n=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){t=D(this);return t.offset().top-i+n>0});this.focus(e,t)}else{this.focus(e,this.activeMenu.find(this.options.items).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||D(e.target).closest(".ui-menu-item");var t={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(e,true)}this._trigger("select",e,t)},_filterMenuItems:function(e){var t=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+t,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(D.trim(D(this).text()))})}});
/*!
 * jQuery UI Autocomplete 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */D.widget("ui.autocomplete",{version:"1.11.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,r,e=this.element[0].nodeName.toLowerCase(),t=e==="textarea",o=e==="input";this.isMultiLine=t?true:o?false:this.element.prop("isContentEditable");this.valueMethod=this.element[t||o?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly")){i=true;r=true;n=true;return}i=false;r=false;n=false;var t=D.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:i=true;this._move("previousPage",e);break;case t.PAGE_DOWN:i=true;this._move("nextPage",e);break;case t.UP:i=true;this._keyEvent("previous",e);break;case t.DOWN:i=true;this._keyEvent("next",e);break;case t.ENTER:if(this.menu.active){i=true;e.preventDefault();this.menu.select(e)}break;case t.TAB:if(this.menu.active){this.menu.select(e)}break;case t.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(e);e.preventDefault()}break;default:n=true;this._searchTimeout(e);break}},keypress:function(e){if(i){i=false;if(!this.isMultiLine||this.menu.element.is(":visible")){e.preventDefault()}return}if(n){return}var t=D.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e);break}},input:function(e){if(r){r=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=D("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(e){e.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];if(!D(e.target).closest(".ui-menu-item").length){this._delay(function(){var t=this;this.document.one("mousedown",function(e){if(e.target!==t.element[0]&&e.target!==i&&!D.contains(i,e.target)){t.close()}})})}},menufocus:function(e,t){var i,n;if(this.isNewMenu){this.isNewMenu=false;if(e.originalEvent&&/^mouse/.test(e.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){D(e.target).trigger(e.originalEvent)});return}}n=t.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",e,{item:n})){if(e.originalEvent&&/^key/.test(e.originalEvent.type)){this._value(n.value)}}i=t.item.attr("aria-label")||n.value;if(i&&D.trim(i).length){this.liveRegion.children().hide();D("<div>").text(i).appendTo(this.liveRegion)}},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=n;this._delay(function(){this.previous=n;this.selectedItem=i})}if(false!==this._trigger("select",e,{item:i})){this._value(i.value)}this.term=this._value();this.close(e);this.selectedItem=i}});this.liveRegion=D("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);if(e==="source"){this._initSource()}if(e==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(e==="disabled"&&t&&this.xhr){this.xhr.abort()}},_appendTo:function(){var e=this.options.appendTo;if(e){e=e.jquery||e.nodeType?D(e):this.document.find(e).eq(0)}if(!e||!e[0]){e=this.element.closest(".ui-front")}if(!e.length){e=this.document[0].body}return e},_initSource:function(){var i,n,r=this;if(D.isArray(this.options.source)){i=this.options.source;this.source=function(e,t){t(D.ui.autocomplete.filter(i,e.term))}}else if(typeof this.options.source==="string"){n=this.options.source;this.source=function(e,t){if(r.xhr){r.xhr.abort()}r.xhr=D.ajax({url:n,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}}else{this.source=this.options.source}},_searchTimeout:function(n){clearTimeout(this.searching);this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;if(!e||e&&!t&&!i){this.selectedItem=null;this.search(null,n)}},this.options.delay)},search:function(e,t){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===false){return}return this._search(e)},_search:function(e){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return D.proxy(function(e){if(t===this.requestIndex){this.__response(e)}this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading")}},this)},__response:function(e){if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},close:function(e){this.cancelSearch=true;this._close(e)},_close:function(e){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function(e){if(e.length&&e[0].label&&e[0].value){return e}return D.map(e,function(e){if(typeof e==="string"){return{label:e,value:e}}return D.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e);this.isNewMenu=true;this.menu.refresh();t.show();this._resizeMenu();t.position(D.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,e){var n=this;D.each(e,function(e,t){n._renderItemData(i,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return D("<li>").text(t.label).appendTo(e)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}}});D.extend(D.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(D.ui.autocomplete.escapeRegex(t),"i");return D.grep(e,function(e){return i.test(e.label||e.value||e)})}});D.widget("ui.autocomplete",D.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(e&&e.length){t=this.options.messages.results(e.length)}else{t=this.options.messages.noResults}this.liveRegion.children().hide();D("<div>").text(t).appendTo(this.liveRegion)}});var m=D.ui.autocomplete;
/*!
 * jQuery UI Button 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */var g,v="ui-button ui-widget ui-state-default ui-corner-all",_="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",b=function(){var e=D(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},y=function(e){var t=e.name,i=e.form,n=D([]);if(t){t=t.replace(/'/g,"\\'");if(i){n=D(i).find("[name='"+t+"'][type=radio]")}else{n=D("[name='"+t+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})}}return n};D.widget("ui.button",{version:"1.11.3",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,b);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,e=this.type==="checkbox"||this.type==="radio",n=!e?"ui-state-active":"";if(i.label===null){i.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()}this._hoverable(this.buttonElement);this.buttonElement.addClass(v).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(i.disabled){return}if(this===g){D(this).addClass("ui-state-active")}}).bind("mouseleave"+this.eventNamespace,function(){if(i.disabled){return}D(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){if(i.disabled){e.preventDefault();e.stopImmediatePropagation()}});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});if(e){this.element.bind("change"+this.eventNamespace,function(){t.refresh()})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return false}})}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return false}D(this).addClass("ui-state-active");t.buttonElement.attr("aria-pressed","true");var e=t.element[0];y(e).not(e).map(function(){return D(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled){return false}D(this).addClass("ui-state-active");g=this;t.document.one("mouseup",function(){g=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled){return false}D(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(i.disabled){return false}if(e.keyCode===D.ui.keyCode.SPACE||e.keyCode===D.ui.keyCode.ENTER){D(this).addClass("ui-state-active")}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){D(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(e){if(e.keyCode===D.ui.keyCode.SPACE){D(this).click()}})}}this._setOption("disabled",i.disabled);this._resetButton()},_determineButtonType:function(){var e,t,i;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else if(this.element.is("[type=radio]")){this.type="radio"}else if(this.element.is("input")){this.type="input"}else{this.type="button"}if(this.type==="checkbox"||this.type==="radio"){e=this.element.parents().last();t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t);if(!this.buttonElement.length){e=e.length?e.siblings():this.element.siblings();this.buttonElement=e.filter(t);if(!this.buttonElement.length){this.buttonElement=e.find(t)}}this.element.addClass("ui-helper-hidden-accessible");i=this.element.is(":checked");if(i){this.buttonElement.addClass("ui-state-active")}this.buttonElement.prop("aria-pressed",i)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(v+" ui-state-active "+_).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){this.widget().toggleClass("ui-state-disabled",!!t);this.element.prop("disabled",!!t);if(t){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("ui-state-focus")}else{this.buttonElement.removeClass("ui-state-focus ui-state-active")}}return}this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(e!==this.options.disabled){this._setOption("disabled",e)}if(this.type==="radio"){y(this.element[0]).each(function(){if(D(this).is(":checked")){D(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{D(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var e=this.buttonElement.removeClass(_),t=D("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,n=i.primary&&i.secondary,r=[];if(i.primary||i.secondary){if(this.options.text){r.push("ui-button-text-icon"+(n?"s":i.primary?"-primary":"-secondary"))}if(i.primary){e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>")}if(i.secondary){e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>")}if(!this.options.text){r.push(n?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){e.attr("title",D.trim(t))}}}else{r.push("ui-button-text-only")}e.addClass(r.join(" "))}});D.widget("ui.buttonset",{version:"1.11.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){if(e==="disabled"){this.buttons.button("option",e,t)}this._super(e,t)},refresh:function(){var e=this.element.css("direction")==="rtl",t=this.element.find(this.options.items),i=t.filter(":ui-button");t.not(":ui-button").button();i.button("refresh");this.buttons=t.map(function(){return D(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return D(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});var w=D.ui.button;
/*!
 * jQuery UI Datepicker 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */D.extend(D.ui,{datepicker:{version:"1.11.3"}});var x;function C(e){var t,i;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){i=parseInt(e.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}e=e.parent()}return 0}function k(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};D.extend(this._defaults,this.regional[""]);this.regional.en=D.extend(true,{},this.regional[""]);this.regional["en-US"]=D.extend(true,{},this.regional.en);this.dpDiv=S(D("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}D.extend(k.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){N(this._defaults,e||{});return this},_attachDatepicker:function(e,t){var i,n,r;i=e.nodeName.toLowerCase();n=i==="div"||i==="span";if(!e.id){this.uuid+=1;e.id="dp"+this.uuid}r=this._newInst(D(e),n);r.settings=D.extend({},t||{});if(i==="input"){this._connectDatepicker(e,r)}else if(n){this._inlineDatepicker(e,r)}},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:!t?this.dpDiv:S(D("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(e,t){var i=D(e);t.append=D([]);t.trigger=D([]);if(i.hasClass(this.markerClassName)){return}this._attachments(i,t);i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(t);D.data(e,"datepicker",t);if(t.settings.disabled){this._disableDatepicker(e)}},_attachments:function(e,t){var i,n,r,o=this._get(t,"appendText"),a=this._get(t,"isRTL");if(t.append){t.append.remove()}if(o){t.append=D("<span class='"+this._appendClass+"'>"+o+"</span>");e[a?"before":"after"](t.append)}e.unbind("focus",this._showDatepicker);if(t.trigger){t.trigger.remove()}i=this._get(t,"showOn");if(i==="focus"||i==="both"){e.focus(this._showDatepicker)}if(i==="button"||i==="both"){n=this._get(t,"buttonText");r=this._get(t,"buttonImage");t.trigger=D(this._get(t,"buttonImageOnly")?D("<img/>").addClass(this._triggerClass).attr({src:r,alt:n,title:n}):D("<button type='button'></button>").addClass(this._triggerClass).html(!r?n:D("<img/>").attr({src:r,alt:n,title:n})));e[a?"before":"after"](t.trigger);t.trigger.click(function(){if(D.datepicker._datepickerShowing&&D.datepicker._lastInput===e[0]){D.datepicker._hideDatepicker()}else if(D.datepicker._datepickerShowing&&D.datepicker._lastInput!==e[0]){D.datepicker._hideDatepicker();D.datepicker._showDatepicker(e[0])}else{D.datepicker._showDatepicker(e[0])}return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,o=new Date(2009,12-1,20),a=this._get(e,"dateFormat");if(a.match(/[DM]/)){t=function(e){i=0;n=0;for(r=0;r<e.length;r++){if(e[r].length>i){i=e[r].length;n=r}}return n};o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort")));o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())}e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(e,t){var i=D(e);if(i.hasClass(this.markerClassName)){return}i.addClass(this.markerClassName).append(t.dpDiv);D.data(e,"datepicker",t);this._setDate(t,this._getDefaultDate(t),true);this._updateDatepicker(t);this._updateAlternate(t);if(t.settings.disabled){this._disableDatepicker(e)}t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,i,n,r){var o,a,s,l,d,c=this._dialogInst;if(!c){this.uuid+=1;o="dp"+this.uuid;this._dialogInput=D("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);D("body").append(this._dialogInput);c=this._dialogInst=this._newInst(this._dialogInput,false);c.settings={};D.data(this._dialogInput[0],"datepicker",c)}N(c.settings,n||{});t=t&&t.constructor===Date?this._formatDate(c,t):t;this._dialogInput.val(t);this._pos=r?r.length?r:[r.pageX,r.pageY]:null;if(!this._pos){a=document.documentElement.clientWidth;s=document.documentElement.clientHeight;l=document.documentElement.scrollLeft||document.body.scrollLeft;d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+l,s/2-150+d]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=i;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(D.blockUI){D.blockUI(this.dpDiv)}D.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(e){var t,i=D(e),n=D.data(e,"datepicker");if(!i.hasClass(this.markerClassName)){return}t=e.nodeName.toLowerCase();D.removeData(e,"datepicker");if(t==="input"){n.append.remove();n.trigger.remove();i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(t==="div"||t==="span"){i.removeClass(this.markerClassName).empty()}if(x===n){x=null}},_enableDatepicker:function(t){var e,i,n=D(t),r=D.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}e=t.nodeName.toLowerCase();if(e==="input"){t.disabled=false;r.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e==="div"||e==="span"){i=n.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=D.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var e,i,n=D(t),r=D.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}e=t.nodeName.toLowerCase();if(e==="input"){t.disabled=true;r.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e==="div"||e==="span"){i=n.children("."+this._inlineClass);i.children().addClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=D.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return true}}return false},_getInst:function(e){try{return D.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n,r,o,a,s=this._getInst(e);if(arguments.length===2&&typeof t==="string"){return t==="defaults"?D.extend({},D.datepicker._defaults):s?t==="all"?D.extend({},s.settings):this._get(s,t):null}n=t||{};if(typeof t==="string"){n={};n[t]=i}if(s){if(this._curInst===s){this._hideDatepicker()}r=this._getDateDatepicker(e,true);o=this._getMinMaxDate(s,"min");a=this._getMinMaxDate(s,"max");N(s.settings,n);if(o!==null&&n.dateFormat!==undefined&&n.minDate===undefined){s.settings.minDate=this._formatDate(s,o)}if(a!==null&&n.dateFormat!==undefined&&n.maxDate===undefined){s.settings.maxDate=this._formatDate(s,a)}if("disabled"in n){if(n.disabled){this._disableDatepicker(e)}else{this._enableDatepicker(e)}}this._attachments(D(e),s);this._autoSize(s);this._setDate(s,r);this._updateAlternate(s);this._updateDatepicker(s)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var i=this._getInst(e);if(i){this._setDate(i,t);this._updateDatepicker(i);this._updateAlternate(i)}},_getDateDatepicker:function(e,t){var i=this._getInst(e);if(i&&!i.inline){this._setDateFromField(i,t)}return i?this._getDate(i):null},_doKeyDown:function(e){var t,i,n,r=D.datepicker._getInst(e.target),o=true,a=r.dpDiv.is(".ui-datepicker-rtl");r._keyEvent=true;if(D.datepicker._datepickerShowing){switch(e.keyCode){case 9:D.datepicker._hideDatepicker();o=false;break;case 13:n=D("td."+D.datepicker._dayOverClass+":not(."+D.datepicker._currentClass+")",r.dpDiv);if(n[0]){D.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,n[0])}t=D.datepicker._get(r,"onSelect");if(t){i=D.datepicker._formatDate(r);t.apply(r.input?r.input[0]:null,[i,r])}else{D.datepicker._hideDatepicker()}return false;case 27:D.datepicker._hideDatepicker();break;case 33:D.datepicker._adjustDate(e.target,e.ctrlKey?-D.datepicker._get(r,"stepBigMonths"):-D.datepicker._get(r,"stepMonths"),"M");break;case 34:D.datepicker._adjustDate(e.target,e.ctrlKey?+D.datepicker._get(r,"stepBigMonths"):+D.datepicker._get(r,"stepMonths"),"M");break;case 35:if(e.ctrlKey||e.metaKey){D.datepicker._clearDate(e.target)}o=e.ctrlKey||e.metaKey;break;case 36:if(e.ctrlKey||e.metaKey){D.datepicker._gotoToday(e.target)}o=e.ctrlKey||e.metaKey;break;case 37:if(e.ctrlKey||e.metaKey){D.datepicker._adjustDate(e.target,a?+1:-1,"D")}o=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey){D.datepicker._adjustDate(e.target,e.ctrlKey?-D.datepicker._get(r,"stepBigMonths"):-D.datepicker._get(r,"stepMonths"),"M")}break;case 38:if(e.ctrlKey||e.metaKey){D.datepicker._adjustDate(e.target,-7,"D")}o=e.ctrlKey||e.metaKey;break;case 39:if(e.ctrlKey||e.metaKey){D.datepicker._adjustDate(e.target,a?-1:+1,"D")}o=e.ctrlKey||e.metaKey;if(e.originalEvent.altKey){D.datepicker._adjustDate(e.target,e.ctrlKey?+D.datepicker._get(r,"stepBigMonths"):+D.datepicker._get(r,"stepMonths"),"M")}break;case 40:if(e.ctrlKey||e.metaKey){D.datepicker._adjustDate(e.target,+7,"D")}o=e.ctrlKey||e.metaKey;break;default:o=false}}else if(e.keyCode===36&&e.ctrlKey){D.datepicker._showDatepicker(this)}else{o=false}if(o){e.preventDefault();e.stopPropagation()}},_doKeyPress:function(e){var t,i,n=D.datepicker._getInst(e.target);if(D.datepicker._get(n,"constrainInput")){t=D.datepicker._possibleChars(D.datepicker._get(n,"dateFormat"));i=String.fromCharCode(e.charCode==null?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||(i<" "||!t||t.indexOf(i)>-1)}},_doKeyUp:function(e){var t,i=D.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal){try{t=D.datepicker.parseDate(D.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,D.datepicker._getFormatConfig(i));if(t){D.datepicker._setDateFromField(i);D.datepicker._updateAlternate(i);D.datepicker._updateDatepicker(i)}}catch(e){}}return true},_showDatepicker:function(e){e=e.target||e;if(e.nodeName.toLowerCase()!=="input"){e=D("input",e.parentNode)[0]}if(D.datepicker._isDisabledDatepicker(e)||D.datepicker._lastInput===e){return}var t,i,n,r,o,a,s;t=D.datepicker._getInst(e);if(D.datepicker._curInst&&D.datepicker._curInst!==t){D.datepicker._curInst.dpDiv.stop(true,true);if(t&&D.datepicker._datepickerShowing){D.datepicker._hideDatepicker(D.datepicker._curInst.input[0])}}i=D.datepicker._get(t,"beforeShow");n=i?i.apply(e,[e,t]):{};if(n===false){return}N(t.settings,n);t.lastVal=null;D.datepicker._lastInput=e;D.datepicker._setDateFromField(t);if(D.datepicker._inDialog){e.value=""}if(!D.datepicker._pos){D.datepicker._pos=D.datepicker._findPos(e);D.datepicker._pos[1]+=e.offsetHeight}r=false;D(e).parents().each(function(){r|=D(this).css("position")==="fixed";return!r});o={left:D.datepicker._pos[0],top:D.datepicker._pos[1]};D.datepicker._pos=null;t.dpDiv.empty();t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});D.datepicker._updateDatepicker(t);o=D.datepicker._checkOffset(t,o,r);t.dpDiv.css({position:D.datepicker._inDialog&&D.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"});if(!t.inline){a=D.datepicker._get(t,"showAnim");s=D.datepicker._get(t,"duration");t.dpDiv.css("z-index",C(D(e))+1);D.datepicker._datepickerShowing=true;if(D.effects&&D.effects.effect[a]){t.dpDiv.show(a,D.datepicker._get(t,"showOptions"),s)}else{t.dpDiv[a||"show"](a?s:null)}if(D.datepicker._shouldFocusInput(t)){t.input.focus()}D.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;x=e;e.dpDiv.empty().append(this._generateHTML(e));this._attachHandlers(e);var t,i=this._getNumberOfMonths(e),n=i[1],r=17,o=e.dpDiv.find("."+this._dayOverClass+" a");if(o.length>0){T.apply(o.get(0))}e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(n>1){e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",r*n+"em")}e.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(e===D.datepicker._curInst&&D.datepicker._datepickerShowing&&D.datepicker._shouldFocusInput(e)){e.input.focus()}if(e.yearshtml){t=e.yearshtml;setTimeout(function(){if(t===e.yearshtml&&e.yearshtml){e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml)}t=e.yearshtml=null},0)}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(i?0:D(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:D(document).scrollTop());t.left-=this._get(e,"isRTL")?n-o:0;t.left-=i&&t.left===e.input.offset().left?D(document).scrollLeft():0;t.top-=i&&t.top===e.input.offset().top+a?D(document).scrollTop():0;t.left-=Math.min(t.left,t.left+n>s&&s>n?Math.abs(t.left+n-s):0);t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+a):0);return t},_findPos:function(e){var t,i=this._getInst(e),n=this._get(i,"isRTL");while(e&&(e.type==="hidden"||e.nodeType!==1||D.expr.filters.hidden(e))){e=e[n?"previousSibling":"nextSibling"]}t=D(e).offset();return[t.left,t.top]},_hideDatepicker:function(e){var t,i,n,r,o=this._curInst;if(!o||e&&o!==D.data(e,"datepicker")){return}if(this._datepickerShowing){t=this._get(o,"showAnim");i=this._get(o,"duration");n=function(){D.datepicker._tidyDialog(o)};if(D.effects&&(D.effects.effect[t]||D.effects[t])){o.dpDiv.hide(t,D.datepicker._get(o,"showOptions"),i,n)}else{o.dpDiv[t==="slideDown"?"slideUp":t==="fadeIn"?"fadeOut":"hide"](t?i:null,n)}if(!t){n()}this._datepickerShowing=false;r=this._get(o,"onClose");if(r){r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(D.blockUI){D.unblockUI();D("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!D.datepicker._curInst){return}var t=D(e.target),i=D.datepicker._getInst(t[0]);if(t[0].id!==D.datepicker._mainDivId&&t.parents("#"+D.datepicker._mainDivId).length===0&&!t.hasClass(D.datepicker.markerClassName)&&!t.closest("."+D.datepicker._triggerClass).length&&D.datepicker._datepickerShowing&&!(D.datepicker._inDialog&&D.blockUI)||t.hasClass(D.datepicker.markerClassName)&&D.datepicker._curInst!==i){D.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=D(e),r=this._getInst(n[0]);if(this._isDisabledDatepicker(n[0])){return}this._adjustInstDate(r,t+(i==="M"?this._get(r,"showCurrentAtPos"):0),i);this._updateDatepicker(r)},_gotoToday:function(e){var t,i=D(e),n=this._getInst(i[0]);if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay;n.drawMonth=n.selectedMonth=n.currentMonth;n.drawYear=n.selectedYear=n.currentYear}else{t=new Date;n.selectedDay=t.getDate();n.drawMonth=n.selectedMonth=t.getMonth();n.drawYear=n.selectedYear=t.getFullYear()}this._notifyChange(n);this._adjustDate(i)},_selectMonthYear:function(e,t,i){var n=D(e),r=this._getInst(n[0]);r["selected"+(i==="M"?"Month":"Year")]=r["draw"+(i==="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10);this._notifyChange(r);this._adjustDate(n)},_selectDay:function(e,t,i,n){var r,o=D(e);if(D(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])){return}r=this._getInst(o[0]);r.selectedDay=r.currentDay=D("a",n).html();r.selectedMonth=r.currentMonth=t;r.selectedYear=r.currentYear=i;this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear))},_clearDate:function(e){var t=D(e);this._selectDate(t,"")},_selectDate:function(e,t){var i,n=D(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r);if(r.input){r.input.val(t)}this._updateAlternate(r);i=this._get(r,"onSelect");if(i){i.apply(r.input?r.input[0]:null,[t,r])}else if(r.input){r.input.trigger("change")}if(r.inline){this._updateDatepicker(r)}else{this._hideDatepicker();this._lastInput=r.input[0];if(typeof r.input[0]!=="object"){r.input.focus()}this._lastInput=null}},_updateAlternate:function(e){var t,i,n,r=this._get(e,"altField");if(r){t=this._get(e,"altFormat")||this._get(e,"dateFormat");i=this._getDate(e);n=this.formatDate(t,i,this._getFormatConfig(e));D(r).each(function(){D(this).val(n)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));t=i.getTime();i.setMonth(0);i.setDate(1);return Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,a,e){if(i==null||a==null){throw"Invalid arguments"}a=typeof a==="object"?a.toString():a+"";if(a===""){return null}var n,t,r,s=0,o=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l=typeof o!=="string"?o:(new Date).getFullYear()%100+parseInt(o,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,c=(e?e.dayNames:null)||this._defaults.dayNames,u=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,f=(e?e.monthNames:null)||this._defaults.monthNames,h=-1,p=-1,m=-1,g=-1,v=false,_,b=function(e){var t=n+1<i.length&&i.charAt(n+1)===e;if(t){n++}return t},y=function(e){var t=b(e),i=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,n=e==="y"?i:1,r=new RegExp("^\\d{"+n+","+i+"}"),o=a.substring(s).match(r);if(!o){throw"Missing number at position "+s}s+=o[0].length;return parseInt(o[0],10)},w=function(e,t,i){var n=-1,r=D.map(b(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});D.each(r,function(e,t){var i=t[1];if(a.substr(s,i.length).toLowerCase()===i.toLowerCase()){n=t[0];s+=i.length;return false}});if(n!==-1){return n+1}else{throw"Unknown name at position "+s}},x=function(){if(a.charAt(s)!==i.charAt(n)){throw"Unexpected literal at position "+s}s++};for(n=0;n<i.length;n++){if(v){if(i.charAt(n)==="'"&&!b("'")){v=false}else{x()}}else{switch(i.charAt(n)){case"d":m=y("d");break;case"D":w("D",d,c);break;case"o":g=y("o");break;case"m":p=y("m");break;case"M":p=w("M",u,f);break;case"y":h=y("y");break;case"@":_=new Date(y("@"));h=_.getFullYear();p=_.getMonth()+1;m=_.getDate();break;case"!":_=new Date((y("!")-this._ticksTo1970)/1e4);h=_.getFullYear();p=_.getMonth()+1;m=_.getDate();break;case"'":if(b("'")){x()}else{v=true}break;default:x()}}}if(s<a.length){r=a.substr(s);if(!/^\s+/.test(r)){throw"Extra/unparsed characters found in date: "+r}}if(h===-1){h=(new Date).getFullYear()}else if(h<100){h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=l?0:-100)}if(g>-1){p=1;m=g;do{t=this._getDaysInMonth(h,p-1);if(m<=t){break}p++;m-=t}while(true)}_=this._daylightSavingAdjust(new Date(h,p-1,m));if(_.getFullYear()!==h||_.getMonth()+1!==p||_.getDate()!==m){throw"Invalid date"}return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(i,e,t){if(!e){return""}var n,r=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,o=(t?t.dayNames:null)||this._defaults.dayNames,a=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,s=(t?t.monthNames:null)||this._defaults.monthNames,l=function(e){var t=n+1<i.length&&i.charAt(n+1)===e;if(t){n++}return t},d=function(e,t,i){var n=""+t;if(l(e)){while(n.length<i){n="0"+n}}return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",f=false;if(e){for(n=0;n<i.length;n++){if(f){if(i.charAt(n)==="'"&&!l("'")){f=false}else{u+=i.charAt(n)}}else{switch(i.charAt(n)){case"d":u+=d("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),r,o);break;case"o":u+=d("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=d("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,s);break;case"y":u+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=e.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){u+="'"}else{f=true}break;default:u+=i.charAt(n)}}}}return u},_possibleChars:function(i){var n,e="",t=false,r=function(e){var t=n+1<i.length&&i.charAt(n+1)===e;if(t){n++}return t};for(n=0;n<i.length;n++){if(t){if(i.charAt(n)==="'"&&!r("'")){t=false}else{e+=i.charAt(n)}}else{switch(i.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":if(r("'")){e+="'"}else{t=true}break;default:e+=i.charAt(n)}}}return e},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal){return}var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,a=this._getFormatConfig(e);try{o=this.parseDate(i,n,a)||r}catch(e){n=t?"":n}e.selectedDay=o.getDate();e.drawMonth=e.selectedMonth=o.getMonth();e.drawYear=e.selectedYear=o.getFullYear();e.currentDay=n?o.getDate():0;e.currentMonth=n?o.getMonth():0;e.currentYear=n?o.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(s,e,t){var i=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},n=function(e){try{return D.datepicker.parseDate(D.datepicker._get(s,"dateFormat"),e,D.datepicker._getFormatConfig(s))}catch(e){}var t=(e.toLowerCase().match(/^c/)?D.datepicker._getDate(s):null)||new Date,i=t.getFullYear(),n=t.getMonth(),r=t.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(e);while(a){switch(a[2]||"d"){case"d":case"D":r+=parseInt(a[1],10);break;case"w":case"W":r+=parseInt(a[1],10)*7;break;case"m":case"M":n+=parseInt(a[1],10);r=Math.min(r,D.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(a[1],10);r=Math.min(r,D.datepicker._getDaysInMonth(i,n));break}a=o.exec(e)}return new Date(i,n,r)},r=e==null||e===""?t:typeof e==="string"?n(e):typeof e==="number"?isNaN(e)?t:i(e):new Date(e.getTime());r=r&&r.toString()==="Invalid Date"?t:r;if(r){r.setHours(0);r.setMinutes(0);r.setSeconds(0);r.setMilliseconds(0)}return this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){if(!e){return null}e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth();e.drawYear=e.selectedYear=e.currentYear=a.getFullYear();if((r!==e.selectedMonth||o!==e.selectedYear)&&!i){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(n?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){D.datepicker._adjustDate(i,-t,"M")},next:function(){D.datepicker._adjustDate(i,+t,"M")},hide:function(){D.datepicker._hideDatepicker()},today:function(){D.datepicker._gotoToday(i)},selectDay:function(){D.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){D.datepicker._selectMonthYear(i,this,"M");return false},selectYear:function(){D.datepicker._selectMonthYear(i,this,"Y");return false}};D(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,o,a,s,l,d,c,u,f,h,p,m,g,v,_,b,y,w,x,C,k,S,T,N,D,P,E,M,I,O,A,R,L,z,j,B,q=new Date,F=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),H=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),$=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),Z=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Y=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay)),J=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),X=e.drawMonth-G,ee=e.drawYear;if(X<0){X+=12;ee--}if(Q){t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-V[0]*V[1]+1,Q.getDate()));t=J&&t<J?J:t;while(this._daylightSavingAdjust(new Date(ee,X,1))>t){X--;if(X<0){X=11;ee--}}}e.drawMonth=X;e.drawYear=ee;i=this._get(e,"prevText");i=!$?i:this.formatDate(i,this._daylightSavingAdjust(new Date(ee,X-Z,1)),this._getFormatConfig(e));n=this._canAdjustMonth(e,-1,ee,X)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>";r=this._get(e,"nextText");r=!$?r:this.formatDate(r,this._daylightSavingAdjust(new Date(ee,X+Z,1)),this._getFormatConfig(e));o=this._canAdjustMonth(e,+1,ee,X)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>";a=this._get(e,"currentText");s=this._get(e,"gotoCurrent")&&e.currentDay?Y:F;a=!$?a:this.formatDate(a,s,this._getFormatConfig(e));l=!e.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>":"";d=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+a+"</button>":"")+(U?"":l)+"</div>":"";c=parseInt(this._get(e,"firstDay"),10);c=isNaN(c)?0:c;u=this._get(e,"showWeek");f=this._get(e,"dayNames");h=this._get(e,"dayNamesMin");p=this._get(e,"monthNames");m=this._get(e,"monthNamesShort");g=this._get(e,"beforeShowDay");v=this._get(e,"showOtherMonths");_=this._get(e,"selectOtherMonths");b=this._getDefaultDate(e);y="";w;for(x=0;x<V[0];x++){C="";this.maxRows=4;for(k=0;k<V[1];k++){S=this._daylightSavingAdjust(new Date(ee,X,e.selectedDay));T=" ui-corner-all";N="";if(K){N+="<div class='ui-datepicker-group";if(V[1]>1){switch(k){case 0:N+=" ui-datepicker-group-first";T=" ui-corner-"+(U?"right":"left");break;case V[1]-1:N+=" ui-datepicker-group-last";T=" ui-corner-"+(U?"left":"right");break;default:N+=" ui-datepicker-group-middle";T="";break}}N+="'>"}N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&x===0?U?o:n:"")+(/all|right/.test(T)&&x===0?U?n:o:"")+this._generateMonthYearHeader(e,X,ee,J,Q,x>0||k>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";D=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(w=0;w<7;w++){P=(w+c)%7;D+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+f[P]+"'>"+h[P]+"</span></th>"}N+=D+"</tr></thead><tbody>";E=this._getDaysInMonth(ee,X);if(ee===e.selectedYear&&X===e.selectedMonth){e.selectedDay=Math.min(e.selectedDay,E)}M=(this._getFirstDayOfMonth(ee,X)-c+7)%7;I=Math.ceil((M+E)/7);O=K?this.maxRows>I?this.maxRows:I:I;this.maxRows=O;A=this._daylightSavingAdjust(new Date(ee,X,1-M));for(R=0;R<O;R++){N+="<tr>";L=!u?"":"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(A)+"</td>";for(w=0;w<7;w++){z=g?g.apply(e.input?e.input[0]:null,[A]):[true,""];j=A.getMonth()!==X;B=j&&!_||!z[0]||J&&A<J||Q&&A>Q;L+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(A.getTime()===S.getTime()&&X===e.selectedMonth&&e._keyEvent||b.getTime()===A.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+z[1]+(A.getTime()===Y.getTime()?" "+this._currentClass:"")+(A.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+((!j||v)&&z[2]?" title='"+z[2].replace(/'/g,"&#39;")+"'":"")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":B?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===F.getTime()?" ui-state-highlight":"")+(A.getTime()===Y.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>";A.setDate(A.getDate()+1);A=this._daylightSavingAdjust(A)}N+=L+"</tr>"}X++;if(X>11){X=0;ee++}N+="</tbody></table>"+(K?"</div>"+(V[0]>0&&k===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");C+=N}y+=C}y+=d;e._keyEvent=false;return y},_generateMonthYearHeader:function(e,t,i,n,r,o,a,s){var l,d,c,u,f,h,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!g){y+="<span class='ui-datepicker-month'>"+a[t]+"</span>"}else{l=n&&n.getFullYear()===i;d=r&&r.getFullYear()===i;y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(c=0;c<12;c++){if((!l||c>=n.getMonth())&&(!d||c<=r.getMonth())){y+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>"}}y+="</select>"}if(!_){b+=y+(o||!(g&&v)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(o||!v){b+="<span class='ui-datepicker-year'>"+i+"</span>"}else{u=this._get(e,"yearRange").split(":");f=(new Date).getFullYear();h=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(t)?f:t};p=h(u[0]);m=Math.max(p,h(u[1]||""));p=n?Math.max(p,n.getFullYear()):p;m=r?Math.min(m,r.getFullYear()):m;e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;p<=m;p++){e.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>"}e.yearshtml+="</select>";b+=e.yearshtml;e.yearshtml=null}}b+=this._get(e,"yearSuffix");if(_){b+=(o||!(g&&v)?"&#xa0;":"")+y}b+="</div>";return b},_adjustInstDate:function(e,t,i){var n=e.drawYear+(i==="Y"?t:0),r=e.drawMonth+(i==="M"?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+(i==="D"?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,o)));e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();if(i==="M"||i==="Y"){this._notifyChange(e)}},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t==="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));if(t<0){o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth()))}return this._isInRange(e,o)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");if(l){i=l.split(":");n=(new Date).getFullYear();a=parseInt(i[0],10);s=parseInt(i[1],10);if(i[0].match(/[+\-].*/)){a+=n}if(i[1].match(/[+\-].*/)){s+=n}}return(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!=="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var r=t?typeof t==="object"?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}});function S(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){D(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){D(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){D(this).removeClass("ui-datepicker-next-hover")}}).delegate(t,"mouseover",T)}function T(){if(!D.datepicker._isDisabledDatepicker(x.inline?x.dpDiv.parent()[0]:x.input[0])){D(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");D(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){D(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){D(this).addClass("ui-datepicker-next-hover")}}}function N(e,t){D.extend(e,t);for(var i in t){if(t[i]==null){e[i]=t[i]}}return e}D.fn.datepicker=function(e){if(!this.length){return this}if(!D.datepicker.initialized){D(document).mousedown(D.datepicker._checkExternalClick);D.datepicker.initialized=true}if(D("#"+D.datepicker._mainDivId).length===0){D("body").append(D.datepicker.dpDiv)}var t=Array.prototype.slice.call(arguments,1);if(typeof e==="string"&&(e==="isDisabled"||e==="getDate"||e==="widget")){return D.datepicker["_"+e+"Datepicker"].apply(D.datepicker,[this[0]].concat(t))}if(e==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return D.datepicker["_"+e+"Datepicker"].apply(D.datepicker,[this[0]].concat(t))}return this.each(function(){typeof e==="string"?D.datepicker["_"+e+"Datepicker"].apply(D.datepicker,[this].concat(t)):D.datepicker._attachDatepicker(this,e)})};D.datepicker=new k;D.datepicker.initialized=false;D.datepicker.uuid=(new Date).getTime();D.datepicker.version="1.11.3";var P=D.datepicker;
/*!
 * jQuery UI Dialog 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */var E=D.widget("ui.dialog",{version:"1.11.3",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"Close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=D(this).css(e).offset().top;if(t<0){D(this).css("top",e.top-t)}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&D.fn.draggable){this._makeDraggable()}if(this.options.resizable&&D.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var e=this.options.appendTo;if(e&&(e.jquery||e.nodeType)){return D(e)}return this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}e=t.parent.children().eq(t.index);if(e.length&&e[0]!==this.element[0]){e.before(this.element)}else{t.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:D.noop,enable:D.noop,close:function(e){var t,i=this;if(!this._isOpen||this._trigger("beforeClose",e)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length){try{t=this.document[0].activeElement;if(t&&t.nodeName.toLowerCase()!=="body"){D(t).blur()}}catch(e){}}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=false,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+D(this).css("z-index")}).get(),r=Math.max.apply(null,n);if(r>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",r+1);i=true}if(i&&!t){this._trigger("focus",e)}return i},open:function(){var e=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=D(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,function(){e._focusTabbable();e._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var e=this._focusedElement;if(!e){e=this.element.find("[autofocus]")}if(!e.length){e=this.element.find(":tabbable")}if(!e.length){e=this.uiDialogButtonPane.find(":tabbable")}if(!e.length){e=this.uiDialogTitlebarClose.filter(":tabbable")}if(!e.length){e=this.uiDialog}e.eq(0).focus()},_keepFocus:function(e){function t(){var e=this.document[0].activeElement,t=this.uiDialog[0]===e||D.contains(this.uiDialog[0],e);if(!t){this._focusTabbable()}}e.preventDefault();t.call(this);this._delay(t)},_createWrapper:function(){this.uiDialog=D("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===D.ui.keyCode.ESCAPE){e.preventDefault();this.close(e);return}if(e.keyCode!==D.ui.keyCode.TAB||e.isDefaultPrevented()){return}var t=this.uiDialog.find(":tabbable"),i=t.filter(":first"),n=t.filter(":last");if((e.target===n[0]||e.target===this.uiDialog[0])&&!e.shiftKey){this._delay(function(){i.focus()});e.preventDefault()}else if((e.target===i[0]||e.target===this.uiDialog[0])&&e.shiftKey){this._delay(function(){n.focus()});e.preventDefault()}},mousedown:function(e){if(this._moveToTop(e)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var e;this.uiDialogTitlebar=D("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(e){if(!D(e.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus()}}});this.uiDialogTitlebarClose=D("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault();this.close(e)}});e=D("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(e);this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){if(!this.options.title){e.html("&#160;")}e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=D("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=D("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var r=this,e=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(D.isEmptyObject(e)||D.isArray(e)&&!e.length){this.uiDialog.removeClass("ui-dialog-buttons");return}D.each(e,function(e,t){var i,n;t=D.isFunction(t)?{click:t,text:e}:t;t=D.extend({type:"button"},t);i=t.click;t.click=function(){i.apply(r.element[0],arguments)};n={icons:t.icons,text:t.showText};delete t.icons;delete t.showText;D("<button></button>",t).button(n).appendTo(r.uiButtonSet)});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var r=this,o=this.options;function a(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){D(this).addClass("ui-dialog-dragging");r._blockFrames();r._trigger("dragStart",e,a(t))},drag:function(e,t){r._trigger("drag",e,a(t))},stop:function(e,t){var i=t.offset.left-r.document.scrollLeft(),n=t.offset.top-r.document.scrollTop();o.position={my:"left top",at:"left"+(i>=0?"+":"")+i+" "+"top"+(n>=0?"+":"")+n,of:r.window};D(this).removeClass("ui-dialog-dragging");r._unblockFrames();r._trigger("dragStop",e,a(t))}})},_makeResizable:function(){var o=this,a=this.options,e=a.resizable,t=this.uiDialog.css("position"),i=typeof e==="string"?e:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:i,start:function(e,t){D(this).addClass("ui-dialog-resizing");o._blockFrames();o._trigger("resizeStart",e,s(t))},resize:function(e,t){o._trigger("resize",e,s(t))},stop:function(e,t){var i=o.uiDialog.offset(),n=i.left-o.document.scrollLeft(),r=i.top-o.document.scrollTop();a.height=o.uiDialog.height();a.width=o.uiDialog.width();a.position={my:"left top",at:"left"+(n>=0?"+":"")+n+" "+"top"+(r>=0?"+":"")+r,of:o.window};D(this).removeClass("ui-dialog-resizing");o._unblockFrames();o._trigger("resizeStop",e,s(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget();this._focusedElement=D(e.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=D.inArray(this,e);if(t!==-1){e.splice(t,1)}},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");if(!e){e=[];this.document.data("ui-dialog-instances",e)}return e},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!e){this.uiDialog.hide()}},_setOptions:function(e){var i=this,n=false,r={};D.each(e,function(e,t){i._setOption(e,t);if(e in i.sizeRelatedOptions){n=true}if(e in i.resizableRelatedOptions){r[e]=t}});if(n){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",r)}},_setOption:function(e,t){var i,n,r=this.uiDialog;if(e==="dialogClass"){r.removeClass(this.options.dialogClass).addClass(t)}if(e==="disabled"){return}this._super(e,t);if(e==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(e==="buttons"){this._createButtons()}if(e==="closeText"){this.uiDialogTitlebarClose.button({label:""+t})}if(e==="draggable"){i=r.is(":data(ui-draggable)");if(i&&!t){r.draggable("destroy")}if(!i&&t){this._makeDraggable()}}if(e==="position"){this._position()}if(e==="resizable"){n=r.is(":data(ui-resizable)");if(n&&!t){r.resizable("destroy")}if(n&&typeof t==="string"){r.resizable("option","handles",t)}if(!n&&t!==false){this._makeResizable()}}if(e==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(n.minWidth>n.width){n.width=n.minWidth}e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();t=Math.max(0,n.minHeight-e);i=typeof n.maxHeight==="number"?Math.max(0,n.maxHeight-e):"none";if(n.height==="auto"){this.element.css({minHeight:t,maxHeight:i,height:"auto"})}else{this.element.height(Math.max(0,n.height-e))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=D(this);return D("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(e){if(D(e.target).closest(".ui-dialog").length){return true}return!!D(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var t=true;this._delay(function(){t=false});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(e){if(t){return}if(!this._allowInteraction(e)){e.preventDefault();this._trackingInstances()[0]._focusTabbable()}}})}this.overlay=D("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;if(!e){this.document.unbind("focusin").removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",e)}this.overlay.remove();this.overlay=null}}});
/*!
 * jQuery UI Progressbar 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */var M=D.widget("ui.progressbar",{version:"1.11.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=D("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(e){if(e===undefined){return this.options.value}this.options.value=this._constrainedValue(e);this._refreshValue()},_constrainedValue:function(e){if(e===undefined){e=this.options.value}this.indeterminate=e===false;if(typeof e!=="number"){e=0}return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value;this._super(e);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(e,t){if(e==="max"){t=Math.max(this.min,t)}if(e==="disabled"){this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t)}this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,t=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=D("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv)}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==e){this.oldValue=e;this._trigger("change")}if(e===this.options.max){this._trigger("complete")}}});
/*!
 * jQuery UI Selectmenu 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */var I=D.widget("ui.selectmenu",{version:"1.11.3",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable()}},_drawButton:function(){var e=this;this.label=D("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(e){this.button.focus();e.preventDefault()}});this.element.hide();this.button=D("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);D("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=D("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!e.menuItems){e._refreshMenu()}});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var n=this;this.menu=D("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=D("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(e,t){e.preventDefault();n._setSelection();n._select(t.item.data("ui-selectmenu-item"),e)},focus:function(e,t){var i=t.item.data("ui-selectmenu-item");if(n.focusIndex!=null&&i.index!==n.focusIndex){n._trigger("focus",e,{item:i});if(!n.isOpen){n._select(i,e)}}n.focusIndex=i.index;n.button.attr("aria-activedescendant",n.menuItems.eq(i.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton()}},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");if(!t.length){return}this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");e=this._getSelectedItem();this.menuInstance.focus(null,e);this._setAria(e.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(e){if(this.options.disabled){return}if(!this.menuItems){this._refreshMenu()}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem())}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",e)},_position:function(){this.menuWrap.position(D.extend({of:this.button},this.options.position))},close:function(e){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",e)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(i,e){var n=this,r="";D.each(e,function(e,t){if(t.optgroup!==r){D("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(t.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:t.optgroup}).appendTo(i);r=t.optgroup}n._renderItemData(i,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(e,t){var i=D("<li>");if(t.disabled){i.addClass("ui-state-disabled")}this._setText(i,t.label);return i.appendTo(e)},_setText:function(e,t){if(t){e.text(t)}else{e.html("&#160;")}},_move:function(e,t){var i,n,r=".ui-menu-item";if(this.isOpen){i=this.menuItems.eq(this.focusIndex)}else{i=this.menuItems.eq(this.element[0].selectedIndex);r+=":not(.ui-state-disabled)"}if(e==="first"||e==="last"){n=i[e==="first"?"prevAll":"nextAll"](r).eq(-1)}else{n=i[e+"All"](r).eq(0)}if(n.length){this.menuInstance.focus(t,n)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;if(!this.range){return}if(window.getSelection){e=window.getSelection();e.removeAllRanges();e.addRange(this.range)}else{this.range.select()}this.button.focus()},_documentClick:{mousedown:function(e){if(!this.isOpen){return}if(!D(e.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(e)}}},_buttonEvents:{mousedown:function(){var e;if(window.getSelection){e=window.getSelection();if(e.rangeCount){this.range=e.getRangeAt(0)}}else{this.range=document.selection.createRange()}},click:function(e){this._setSelection();this._toggle(e)},keydown:function(e){var t=true;switch(e.keyCode){case D.ui.keyCode.TAB:case D.ui.keyCode.ESCAPE:this.close(e);t=false;break;case D.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(e)}break;case D.ui.keyCode.UP:if(e.altKey){this._toggle(e)}else{this._move("prev",e)}break;case D.ui.keyCode.DOWN:if(e.altKey){this._toggle(e)}else{this._move("next",e)}break;case D.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(e)}else{this._toggle(e)}break;case D.ui.keyCode.LEFT:this._move("prev",e);break;case D.ui.keyCode.RIGHT:this._move("next",e);break;case D.ui.keyCode.HOME:case D.ui.keyCode.PAGE_UP:this._move("first",e);break;case D.ui.keyCode.END:case D.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e);t=false}if(t){e.preventDefault()}}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);if(!t.hasClass("ui-state-disabled")){this._select(t.data("ui-selectmenu-item"),e)}},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index;this._setText(this.buttonText,e.label);this._setAria(e);this._trigger("select",t,{item:e});if(e.index!==i){this._trigger("change",t,{item:e})}this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if(e==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button)}this._super(e,t);if(e==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(e==="disabled"){this.menuInstance.option("disabled",t);this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t);this.element.prop("disabled",t);if(t){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}}if(e==="width"){this._resizeButton()}},_appendTo:function(){var e=this.options.appendTo;if(e){e=e.jquery||e.nodeType?D(e):this.document.find(e).eq(0)}if(!e||!e[0]){e=this.element.closest(".ui-front")}if(!e.length){e=this.document[0].body}return e},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;if(!e){e=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(e){var r=[];e.each(function(e,t){var i=D(t),n=i.parent("optgroup");r.push({element:i,index:e,value:i.val(),label:i.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||i.prop("disabled")})});this.items=r},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}});
/*!
 * jQuery UI Slider 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */var O=D.widget("ui.slider",D.ui.mouse,{version:"1.11.3",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var e,t,i=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];t=i.values&&i.values.length||1;if(n.length>t){n.slice(t).remove();n=n.slice(0,t)}for(e=n.length;e<t;e++){o.push(r)}this.handles=n.add(D(o.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(e){D(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,t="";if(e.range){if(e.range===true){if(!e.values){e.values=[this._valueMin(),this._valueMin()]}else if(e.values.length&&e.values.length!==2){e.values=[e.values[0],e.values[0]]}else if(D.isArray(e.values)){e.values=e.values.slice(0)}}if(!this.range||!this.range.length){this.range=D("<div></div>").appendTo(this.element);t="ui-slider-range"+" ui-widget-header ui-corner-all"}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""})}this.range.addClass(t+(e.range==="min"||e.range==="max"?" ui-slider-range-"+e.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy()},_mouseCapture:function(e){var t,i,n,r,o,a,s,l,d=this,c=this.options;if(c.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();t={x:e.pageX,y:e.pageY};i=this._normValueFromMouse(t);n=this._valueMax()-this._valueMin()+1;this.handles.each(function(e){var t=Math.abs(i-d.values(e));if(n>t||n===t&&(e===d._lastChangedValue||d.values(e)===c.min)){n=t;r=D(this);o=e}});a=this._start(e,o);if(a===false){return false}this._mouseSliding=true;this._handleIndex=o;r.addClass("ui-state-active").focus();s=r.offset();l=!D(e.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=l?{left:0,top:0}:{left:e.pageX-s.left-r.width()/2,top:e.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(e,o,i)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);this._slide(e,this._handleIndex,i);return false},_mouseStop:function(e){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,o;if(this.orientation==="horizontal"){t=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}n=i/t;if(n>1){n=1}if(n<0){n=0}if(this.orientation==="vertical"){n=1-n}r=this._valueMax()-this._valueMin();o=this._valueMin()+n*r;return this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){i.value=this.values(t);i.values=this.values()}return this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,o;if(this.options.values&&this.options.values.length){n=this.values(t?0:1);if(this.options.values.length===2&&this.options.range===true&&(t===0&&i>n||t===1&&i<n)){i=n}if(i!==this.values(t)){r=this.values();r[t]=i;o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r});n=this.values(t?0:1);if(o!==false){this.values(t,i)}}}else{if(i!==this.value()){o=this._trigger("slide",e,{handle:this.handles[t],value:i});if(o!==false){this.value(i)}}}},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){i.value=this.values(t);i.values=this.values()}this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){i.value=this.values(t);i.values=this.values()}this._lastChangedValue=t;this._trigger("change",e,i)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,t){var i,n,r;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(t);this._refreshValue();this._change(null,e);return}if(arguments.length){if(D.isArray(arguments[0])){i=this.options.values;n=arguments[0];for(r=0;r<i.length;r+=1){i[r]=this._trimAlignValue(n[r]);this._change(null,r)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,t){var i,n=0;if(e==="range"&&this.options.range===true){if(t==="min"){this.options.value=this._values(0);this.options.values=null}else if(t==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(D.isArray(this.options.values)){n=this.options.values.length}if(e==="disabled"){this.element.toggleClass("ui-state-disabled",!!t)}this._super(e,t);switch(e){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(t==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<n;i+=1){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,i,n;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}else if(this.options.values&&this.options.values.length){i=this.options.values.slice();for(n=0;n<i.length;n+=1){i[n]=this._trimAlignValue(i[n])}return i}else{return[]}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;if(Math.abs(i)*2>=t){n+=i>0?t:-t}return parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.floor((e-t)/i)*i;e=n+t;this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,e,n,r,o=this.options.range,a=this.options,s=this,l=!this._animateOff?a.animate:false,d={};if(this.options.values&&this.options.values.length){this.handles.each(function(e){i=(s.values(e)-s._valueMin())/(s._valueMax()-s._valueMin())*100;d[s.orientation==="horizontal"?"left":"bottom"]=i+"%";D(this).stop(1,1)[l?"animate":"css"](d,a.animate);if(s.options.range===true){if(s.orientation==="horizontal"){if(e===0){s.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate)}if(e===1){s.range[l?"animate":"css"]({width:i-t+"%"},{queue:false,duration:a.animate})}}else{if(e===0){s.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate)}if(e===1){s.range[l?"animate":"css"]({height:i-t+"%"},{queue:false,duration:a.animate})}}}t=i})}else{e=this.value();n=this._valueMin();r=this._valueMax();i=r!==n?(e-n)/(r-n)*100:0;d[this.orientation==="horizontal"?"left":"bottom"]=i+"%";this.handle.stop(1,1)[l?"animate":"css"](d,a.animate);if(o==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate)}if(o==="max"&&this.orientation==="horizontal"){this.range[l?"animate":"css"]({width:100-i+"%"},{queue:false,duration:a.animate})}if(o==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate)}if(o==="max"&&this.orientation==="vertical"){this.range[l?"animate":"css"]({height:100-i+"%"},{queue:false,duration:a.animate})}}},_handleEvents:{keydown:function(e){var t,i,n,r,o=D(e.target).data("ui-slider-handle-index");switch(e.keyCode){case D.ui.keyCode.HOME:case D.ui.keyCode.END:case D.ui.keyCode.PAGE_UP:case D.ui.keyCode.PAGE_DOWN:case D.ui.keyCode.UP:case D.ui.keyCode.RIGHT:case D.ui.keyCode.DOWN:case D.ui.keyCode.LEFT:e.preventDefault();if(!this._keySliding){this._keySliding=true;D(e.target).addClass("ui-state-active");t=this._start(e,o);if(t===false){return}}break}r=this.options.step;if(this.options.values&&this.options.values.length){i=n=this.values(o)}else{i=n=this.value()}switch(e.keyCode){case D.ui.keyCode.HOME:n=this._valueMin();break;case D.ui.keyCode.END:n=this._valueMax();break;case D.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case D.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case D.ui.keyCode.UP:case D.ui.keyCode.RIGHT:if(i===this._valueMax()){return}n=this._trimAlignValue(i+r);break;case D.ui.keyCode.DOWN:case D.ui.keyCode.LEFT:if(i===this._valueMin()){return}n=this._trimAlignValue(i-r);break}this._slide(e,o,n)},keyup:function(e){var t=D(e.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(e,t);this._change(e,t);D(e.target).removeClass("ui-state-active")}}}});
/*!
 * jQuery UI Spinner 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */function A(t){return function(){var e=this.element.val();t.apply(this,arguments);this._refresh();if(e!==this.element.val()){this._trigger("change")}}}var R=D.widget("ui.spinner",{version:"1.11.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var n={},r=this.element;D.each(["min","max","step"],function(e,t){var i=r.attr(t);if(i!==undefined&&i.length){n[t]=i}});return n},_events:{keydown:function(e){if(this._start(e)&&this._keydown(e)){e.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",e)}},mousewheel:function(e,t){if(!t){return}if(!this.spinning&&!this._start(e)){return false}this._spin((t>0?1:-1)*this.options.step,e);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(e)}},100);e.preventDefault()},"mousedown .ui-spinner-button":function(e){var t;t=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function i(){var e=this.element[0]===this.document[0].activeElement;if(!e){this.element.focus();this.previous=t;this._delay(function(){this.previous=t})}}e.preventDefault();i.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;i.call(this)});if(this._start(e)===false){return}this._repeat(null,D(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(!D(e.currentTarget).hasClass("ui-state-active")){return}if(this._start(e)===false){return false}this._repeat(null,D(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0){e.height(e.height())}if(this.options.disabled){this.disable()}},_keydown:function(e){var t=this.options,i=D.ui.keyCode;switch(e.keyCode){case i.UP:this._repeat(null,1,e);return true;case i.DOWN:this._repeat(null,-1,e);return true;case i.PAGE_UP:this._repeat(null,t.page,e);return true;case i.PAGE_DOWN:this._repeat(null,-t.page,e);return true}return false},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return""+"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){if(!this.spinning&&this._trigger("start",e)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(e,t,i){e=e||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},e);this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;if(!this.counter){this.counter=1}i=this._adjustValue(i+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:i})!==false){this._value(i);this.counter++}},_increment:function(e){var t=this.options.incremental;if(t){return D.isFunction(t)?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1)}return 1},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;t=n.min!==null?n.min:0;i=e-t;i=Math.round(i/n.step)*n.step;e=t+i;e=parseFloat(e.toFixed(this._precision()));if(n.max!==null&&e>n.max){return n.max}if(n.min!==null&&e<n.min){return n.min}return e},_stop:function(e){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var i=this._parse(this.element.val());this.options[e]=t;this.element.val(this._format(i));return}if(e==="max"||e==="min"||e==="step"){if(typeof t==="string"){t=this._parse(t)}}if(e==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)}this._super(e,t);if(e==="disabled"){this.widget().toggleClass("ui-state-disabled",!!t);this.element.prop("disabled",!!t);this.buttons.button(t?"disable":"enable")}},_setOptions:A(function(e){this._super(e)}),_parse:function(e){if(typeof e==="string"&&e!==""){e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e}return e===""||isNaN(e)?null:e},_format:function(e){if(e===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();if(e===null){return false}return e===this._adjustValue(e)},_value:function(e,t){var i;if(e!==""){i=this._parse(e);if(i!==null){if(!t){i=this._adjustValue(i)}e=this._format(i)}}this.element.val(e);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:A(function(e){this._stepUp(e)}),_stepUp:function(e){if(this._start()){this._spin((e||1)*this.options.step);this._stop()}},stepDown:A(function(e){this._stepDown(e)}),_stepDown:function(e){if(this._start()){this._spin((e||1)*-this.options.step);this._stop()}},pageUp:A(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:A(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length){return this._parse(this.element.val())}A(this._value).call(this,e)},widget:function(){return this.uiSpinner}});
/*!
 * jQuery UI Tabs 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */var L=D.widget("ui.tabs",{version:"1.11.3",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var n=/#.*$/;return function(e){var t,i;e=e.cloneNode(false);t=e.href.replace(n,"");i=location.href.replace(n,"");try{t=decodeURIComponent(t)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return e.hash.length>1&&t===i}}(),_create:function(){var t=this,e=this.options;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible);this._processTabs();e.active=this._initialActive();if(D.isArray(e.disabled)){e.disabled=D.unique(e.disabled.concat(D.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(e.active)}else{this.active=D()}this._refresh();if(this.active.length){this.load(e.active)}},_initialActive:function(){var i=this.options.active,e=this.options.collapsible,n=location.hash.substring(1);if(i===null){if(n){this.tabs.each(function(e,t){if(D(t).attr("aria-controls")===n){i=e;return false}})}if(i===null){i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(i===null||i===-1){i=this.tabs.length?0:false}}if(i!==false){i=this.tabs.index(this.tabs.eq(i));if(i===-1){i=e?false:0}}if(!e&&i===false&&this.anchors.length){i=0}return i},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?D():this._getPanelForTab(this.active)}},_tabKeydown:function(e){var t=D(this.document[0].activeElement).closest("li"),i=this.tabs.index(t),n=true;if(this._handlePageNav(e)){return}switch(e.keyCode){case D.ui.keyCode.RIGHT:case D.ui.keyCode.DOWN:i++;break;case D.ui.keyCode.UP:case D.ui.keyCode.LEFT:n=false;i--;break;case D.ui.keyCode.END:i=this.anchors.length-1;break;case D.ui.keyCode.HOME:i=0;break;case D.ui.keyCode.SPACE:e.preventDefault();clearTimeout(this.activating);this._activate(i);return;case D.ui.keyCode.ENTER:e.preventDefault();clearTimeout(this.activating);this._activate(i===this.options.active?false:i);return;default:return}e.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,n);if(!e.ctrlKey&&!e.metaKey){t.attr("aria-selected","false");this.tabs.eq(i).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",i)},this.delay)}},_panelKeydown:function(e){if(this._handlePageNav(e)){return}if(e.ctrlKey&&e.keyCode===D.ui.keyCode.UP){e.preventDefault();this.active.focus()}},_handlePageNav:function(e){if(e.altKey&&e.keyCode===D.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(e.altKey&&e.keyCode===D.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(e,t){var i=this.tabs.length-1;function n(){if(e>i){e=0}if(e<0){e=i}return e}while(D.inArray(n(),this.options.disabled)!==-1){e=t?e+1:e-1}return e},_focusNextTab:function(e,t){e=this._findNextTab(e,t);this.tabs.eq(e).focus();return e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t);if(e==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",t);if(!t&&this.options.active===false){this._activate(0)}}if(e==="event"){this._setupEvents(t)}if(e==="heightStyle"){this._setupHeightStyle(t)}},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,t=this.tablist.children(":has(a[href])");e.disabled=D.map(t.filter(".ui-state-disabled"),function(e){return t.index(e)});this._processTabs();if(e.active===false||!this.anchors.length){e.active=false;this.active=D()}else if(this.active.length&&!D.contains(this.tablist[0],this.active[0])){if(this.tabs.length===e.disabled.length){e.active=false;this.active=D()}else{this._activate(this._findNextTab(Math.max(0,e.active-1),false))}}else{e.active=this.tabs.index(this.active)}this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function(){var l=this,e=this.tabs,t=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(e){if(D(this).is(".ui-state-disabled")){e.preventDefault()}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if(D(this).closest("li").is(".ui-state-disabled")){this.blur()}});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return D("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=D();this.anchors.each(function(e,t){var i,n,r,o=D(t).uniqueId().attr("id"),a=D(t).closest("li"),s=a.attr("aria-controls");if(l._isLocal(t)){i=t.hash;r=i.substring(1);n=l.element.find(l._sanitizeSelector(i))}else{r=a.attr("aria-controls")||D({}).uniqueId()[0].id;i="#"+r;n=l.element.find(i);if(!n.length){n=l._createPanel(r);n.insertAfter(l.panels[e-1]||l.tablist)}n.attr("aria-live","polite")}if(n.length){l.panels=l.panels.add(n)}if(s){a.data("ui-tabs-aria-controls",s)}a.attr({"aria-controls":r,"aria-labelledby":o});n.attr("aria-labelledby",o)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");if(e){this._off(e.not(this.tabs));this._off(t.not(this.anchors));this._off(i.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return D("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)},_setupDisabled:function(e){if(D.isArray(e)){if(!e.length){e=false}else if(e.length===this.anchors.length){e=true}}for(var t=0,i;i=this.tabs[t];t++){if(e===true||D.inArray(t,e)!==-1){D(i).addClass("ui-state-disabled").attr("aria-disabled","true")}else{D(i).removeClass("ui-state-disabled").removeAttr("aria-disabled")}}this.options.disabled=e},_setupEvents:function(e){var i={};if(e){D.each(e.split(" "),function(e,t){i[t]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(e){e.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,t=this.element.parent();if(e==="fill"){i=t.height();i-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var e=D(this),t=e.css("position");if(t==="absolute"||t==="fixed"){return}i-=e.outerHeight(true)});this.element.children().not(this.panels).each(function(){i-=D(this).outerHeight(true)});this.panels.each(function(){D(this).height(Math.max(0,i-D(this).innerHeight()+D(this).height()))}).css("overflow","auto")}else if(e==="auto"){i=0;this.panels.each(function(){i=Math.max(i,D(this).height("").height())}).height(i)}},_eventHandler:function(e){var t=this.options,i=this.active,n=D(e.currentTarget),r=n.closest("li"),o=r[0]===i[0],a=o&&t.collapsible,s=a?D():this._getPanelForTab(r),l=!i.length?D():this._getPanelForTab(i),d={oldTab:i,oldPanel:l,newTab:a?D():r,newPanel:s};e.preventDefault();if(r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!t.collapsible||this._trigger("beforeActivate",e,d)===false){return}t.active=a?false:this.tabs.index(r);this.active=o?D():r;if(this.xhr){this.xhr.abort()}if(!l.length&&!s.length){D.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(s.length){this.load(this.tabs.index(r),e)}this._toggle(e,d)},_toggle:function(e,t){var i=this,n=t.newPanel,r=t.oldPanel;this.running=true;function o(){i.running=false;i._trigger("activate",e,t)}function a(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(n.length&&i.options.show){i._show(n,i.options.show,o)}else{n.show();o()}}if(r.length&&this.options.hide){this._hide(r,this.options.hide,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");a()})}else{t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");r.hide();a()}r.attr("aria-hidden","true");t.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(n.length&&r.length){t.oldTab.attr("tabIndex",-1)}else if(n.length){this.tabs.filter(function(){return D(this).attr("tabIndex")===0}).attr("tabIndex",-1)}n.attr("aria-hidden","false");t.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var t,i=this._findActive(e);if(i[0]===this.active[0]){return}if(!i.length){i=this.active}t=i.find(".ui-tabs-anchor")[0];this._eventHandler({target:t,currentTarget:t,preventDefault:D.noop})},_findActive:function(e){return e===false?D():this.tabs.eq(e)},_getIndex:function(e){if(typeof e==="string"){e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))}return e},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){if(D.data(this,"ui-tabs-destroy")){D(this).remove()}else{D(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}});this.tabs.each(function(){var e=D(this),t=e.data("ui-tabs-aria-controls");if(t){e.attr("aria-controls",t).removeData("ui-tabs-aria-controls")}else{e.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(i){var e=this.options.disabled;if(e===false){return}if(i===undefined){e=false}else{i=this._getIndex(i);if(D.isArray(e)){e=D.map(e,function(e){return e!==i?e:null})}else{e=D.map(this.tabs,function(e,t){return t!==i?t:null})}}this._setupDisabled(e)},disable:function(e){var t=this.options.disabled;if(t===true){return}if(e===undefined){t=true}else{e=this._getIndex(e);if(D.inArray(e,t)!==-1){return}if(D.isArray(t)){t=D.merge([e],t).sort()}else{t=[e]}}this._setupDisabled(t)},load:function(e,t){e=this._getIndex(e);var i=this,n=this.tabs.eq(e),r=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),a={tab:n,panel:o};if(this._isLocal(r[0])){return}this.xhr=D.ajax(this._ajaxSettings(r,t,a));if(this.xhr&&this.xhr.statusText!=="canceled"){n.addClass("ui-tabs-loading");o.attr("aria-busy","true");this.xhr.success(function(e){setTimeout(function(){o.html(e);i._trigger("load",t,a)},1)}).complete(function(e,t){setTimeout(function(){if(t==="abort"){i.panels.stop(false,true)}n.removeClass("ui-tabs-loading");o.removeAttr("aria-busy");if(e===i.xhr){delete i.xhr}},1)})}},_ajaxSettings:function(e,i,n){var r=this;return{url:e.attr("href"),beforeSend:function(e,t){return r._trigger("beforeLoad",i,D.extend({jqXHR:e,ajaxSettings:t},n))}}},_getPanelForTab:function(e){var t=D(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+t))}});
/*!
 * jQuery UI Tooltip 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 */var z=D.widget("ui.tooltip",{version:"1.11.3",options:{content:function(){var e=D(this).attr("title")||"";return D("<a>").text(e).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t);e.data("ui-tooltip-id",t).attr("aria-describedby",D.trim(i.join(" ")))},_removeDescribedBy:function(e){var t=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),n=D.inArray(t,i);if(n!==-1){i.splice(n,1)}e.removeData("ui-tooltip-id");i=D.trim(i.join(" "));if(i){e.attr("aria-describedby",i)}else{e.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable()}this.liveRegion=D("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(e,t){var i=this;if(e==="disabled"){this[t?"_disable":"_enable"]();this.options[e]=t;return}this._super(e,t);if(e==="content"){D.each(this.tooltips,function(e,t){i._updateContent(t.element)})}},_disable:function(){var n=this;D.each(this.tooltips,function(e,t){var i=D.Event("blur");i.target=i.currentTarget=t.element[0];n.close(i,true)});this.element.find(this.options.items).addBack().each(function(){var e=D(this);if(e.is("[title]")){e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=D(this);if(e.data("ui-tooltip-title")){e.attr("title",e.data("ui-tooltip-title"))}})},open:function(e){var i=this,t=D(e?e.target:this.element).closest(this.options.items);if(!t.length||t.data("ui-tooltip-id")){return}if(t.attr("title")){t.data("ui-tooltip-title",t.attr("title"))}t.data("ui-tooltip-open",true);if(e&&e.type==="mouseover"){t.parents().each(function(){var e=D(this),t;if(e.data("ui-tooltip-open")){t=D.Event("blur");t.target=t.currentTarget=this;i.close(t,true)}if(e.attr("title")){e.uniqueId();i.parents[this.id]={element:this,title:e.attr("title")};e.attr("title","")}})}this._updateContent(t,e)},_updateContent:function(t,i){var e,n=this.options.content,r=this,o=i?i.type:null;if(typeof n==="string"){return this._open(i,t,n)}e=n.call(t[0],function(e){if(!t.data("ui-tooltip-open")){return}r._delay(function(){if(i){i.type=o}this._open(i,t,e)})});if(e){this._open(i,t,e)}},_open:function(e,i,t){var n,r,o,a,s,l=D.extend({},this.options.position);if(!t){return}n=this._find(i);if(n){n.tooltip.find(".ui-tooltip-content").html(t);return}if(i.is("[title]")){if(e&&e.type==="mouseover"){i.attr("title","")}else{i.removeAttr("title")}}n=this._tooltip(i);r=n.tooltip;this._addDescribedBy(i,r.attr("id"));r.find(".ui-tooltip-content").html(t);this.liveRegion.children().hide();if(t.clone){s=t.clone();s.removeAttr("id").find("[id]").removeAttr("id")}else{s=t}D("<div>").html(s).appendTo(this.liveRegion);function d(e){l.of=e;if(r.is(":hidden")){return}r.position(l)}if(this.options.track&&e&&/^mouse/.test(e.type)){this._on(this.document,{mousemove:d});d(e)}else{r.position(D.extend({of:i},this.options.position))}r.hide();this._show(r,this.options.show);if(this.options.show&&this.options.show.delay){a=this.delayedShow=setInterval(function(){if(r.is(":visible")){d(l.of);clearInterval(a)}},D.fx.interval)}this._trigger("open",e,{tooltip:r});o={keyup:function(e){if(e.keyCode===D.ui.keyCode.ESCAPE){var t=D.Event(e);t.currentTarget=i[0];this.close(t,true)}}};if(i[0]!==this.element[0]){o.remove=function(){this._removeTooltip(r)}}if(!e||e.type==="mouseover"){o.mouseleave="close"}if(!e||e.type==="focusin"){o.focusout="close"}this._on(true,i,o)},close:function(e){var t,i=this,n=D(e?e.currentTarget:this.element),r=this._find(n);if(!r){return}t=r.tooltip;if(r.closing){return}clearInterval(this.delayedShow);if(n.data("ui-tooltip-title")&&!n.attr("title")){n.attr("title",n.data("ui-tooltip-title"))}this._removeDescribedBy(n);r.hiding=true;t.stop(true);this._hide(t,this.options.hide,function(){i._removeTooltip(D(this))});n.removeData("ui-tooltip-open");this._off(n,"mouseleave focusout keyup");if(n[0]!==this.element[0]){this._off(n,"remove")}this._off(this.document,"mousemove");if(e&&e.type==="mouseleave"){D.each(this.parents,function(e,t){D(t.element).attr("title",t.title);delete i.parents[e]})}r.closing=true;this._trigger("close",e,{tooltip:t});if(!r.hiding){r.closing=false}},_tooltip:function(e){var t=D("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),i=t.uniqueId().attr("id");D("<div>").addClass("ui-tooltip-content").appendTo(t);t.appendTo(this.document[0].body);return this.tooltips[i]={element:e,tooltip:t}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove();delete this.tooltips[e.attr("id")]},_destroy:function(){var r=this;D.each(this.tooltips,function(e,t){var i=D.Event("blur"),n=t.element;i.target=i.currentTarget=n[0];r.close(i,true);D("#"+e).remove();if(n.data("ui-tooltip-title")){if(!n.attr("title")){n.attr("title",n.data("ui-tooltip-title"))}n.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});
/*!
 * jQuery UI Effects 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */var j="ui-effects-",B=D;D.effects={effect:{}};
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function(c,u){var e="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",f=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],h=c.Color=function(e,t,i,n){return new c.Color.fn.parse(e,t,i,n)},p={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},m={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},a=h.support={},i=c("<p>")[0],d,g=c.each;i.style.cssText="background-color:rgba(1,1,1,.5)";a.rgba=i.style.backgroundColor.indexOf("rgba")>-1;g(p,function(e,t){t.cache="_"+e;t.props.alpha={idx:3,type:"percent",def:1}});function v(e,t,i){var n=m[t.type]||{};if(e==null){return i||!t.def?null:t.def}e=n.floor?~~e:parseFloat(e);if(isNaN(e)){return t.def}if(n.mod){return(e+n.mod)%n.mod}return 0>e?0:n.max<e?n.max:e}function s(a){var s=h(),l=s._rgba=[];a=a.toLowerCase();g(t,function(e,t){var i,n=t.re.exec(a),r=n&&t.parse(n),o=t.space||"rgba";if(r){i=s[o](r);s[p[o].cache]=i[p[o].cache];l=s._rgba=i._rgba;return false}});if(l.length){if(l.join()==="0,0,0,0"){c.extend(l,d.transparent)}return s}return d[a]}h.fn=c.extend(h.prototype,{parse:function(r,e,t,i){if(r===u){this._rgba=[null,null,null,null];return this}if(r.jquery||r.nodeType){r=c(r).css(e);e=u}var o=this,n=c.type(r),a=this._rgba=[];if(e!==u){r=[r,e,t,i];n="array"}if(n==="string"){return this.parse(s(r)||d._default)}if(n==="array"){g(p.rgba.props,function(e,t){a[t.idx]=v(r[t.idx],t)});return this}if(n==="object"){if(r instanceof h){g(p,function(e,t){if(r[t.cache]){o[t.cache]=r[t.cache].slice()}})}else{g(p,function(e,i){var n=i.cache;g(i.props,function(e,t){if(!o[n]&&i.to){if(e==="alpha"||r[e]==null){return}o[n]=i.to(o._rgba)}o[n][t.idx]=v(r[e],t,true)});if(o[n]&&c.inArray(null,o[n].slice(0,3))<0){o[n][3]=1;if(i.from){o._rgba=i.from(o[n])}}})}return this}},is:function(e){var r=h(e),o=true,a=this;g(p,function(e,t){var i,n=r[t.cache];if(n){i=a[t.cache]||t.to&&t.to(a._rgba)||[];g(t.props,function(e,t){if(n[t.idx]!=null){o=n[t.idx]===i[t.idx];return o}})}return o});return o},_space:function(){var i=[],n=this;g(p,function(e,t){if(n[t.cache]){i.push(e)}});return i.pop()},transition:function(e,a){var s=h(e),t=s._space(),i=p[t],n=this.alpha()===0?h("transparent"):this,l=n[i.cache]||i.to(n._rgba),d=l.slice();s=s[i.cache];g(i.props,function(e,t){var i=t.idx,n=l[i],r=s[i],o=m[t.type]||{};if(r===null){return}if(n===null){d[i]=r}else{if(o.mod){if(r-n>o.mod/2){n+=o.mod}else if(n-r>o.mod/2){n-=o.mod}}d[i]=v((r-n)*a+n,t)}});return this[t](d)},blend:function(e){if(this._rgba[3]===1){return this}var t=this._rgba.slice(),i=t.pop(),n=h(e)._rgba;return h(c.map(t,function(e,t){return(1-i)*n[t]+i*e}))},toRgbaString:function(){var e="rgba(",t=c.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});if(t[3]===1){t.pop();e="rgb("}return e+t.join()+")"},toHslaString:function(){var e="hsla(",t=c.map(this.hsla(),function(e,t){if(e==null){e=t>2?1:0}if(t&&t<3){e=Math.round(e*100)+"%"}return e});if(t[3]===1){t.pop();e="hsl("}return e+t.join()+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();if(e){t.push(~~(i*255))}return"#"+c.map(t,function(e){e=(e||0).toString(16);return e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});h.fn.parse.prototype=h.fn;function l(e,t,i){i=(i+1)%1;if(i*6<1){return e+(t-e)*i*6}if(i*2<1){return t}if(i*3<2){return e+(t-e)*(2/3-i)*6}return e}p.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(t,i,n),a=Math.min(t,i,n),s=o-a,l=o+a,d=l*.5,c,u;if(a===o){c=0}else if(t===o){c=60*(i-n)/s+360}else if(i===o){c=60*(n-t)/s+120}else{c=60*(t-i)/s+240}if(s===0){u=0}else if(d<=.5){u=s/l}else{u=s/(2-l)}return[Math.round(c)%360,u,d,r==null?1:r]};p.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=n<=.5?n*(1+i):n+i-n*i,a=2*n-o;return[Math.round(l(a,o,t+1/3)*255),Math.round(l(a,o,t)*255),Math.round(l(a,o,t-1/3)*255),r]};g(p,function(l,e){var i=e.props,a=e.cache,s=e.to,d=e.from;h.fn[l]=function(e){if(s&&!this[a]){this[a]=s(this._rgba)}if(e===u){return this[a].slice()}var t,n=c.type(e),r=n==="array"||n==="object"?e:arguments,o=this[a].slice();g(i,function(e,t){var i=r[n==="object"?e:t.idx];if(i==null){i=o[t.idx]}o[t.idx]=v(i,t)});if(d){t=h(d(o));t[a]=o;return t}else{return h(o)}};g(i,function(a,s){if(h.fn[a]){return}h.fn[a]=function(e){var t=c.type(e),i=a==="alpha"?this._hsla?"hsla":"rgba":l,n=this[i](),r=n[s.idx],o;if(t==="undefined"){return r}if(t==="function"){e=e.call(this,r);t=c.type(e)}if(e==null&&s.empty){return this}if(t==="string"){o=f.exec(e);if(o){e=r+parseFloat(o[2])*(o[1]==="+"?1:-1)}}n[s.idx]=e;return this[i](n)}})});h.hook=function(e){var t=e.split(" ");g(t,function(e,o){c.cssHooks[o]={set:function(e,t){var i,n,r="";if(t!=="transparent"&&(c.type(t)!=="string"||(i=s(t)))){t=h(i||t);if(!a.rgba&&t._rgba[3]!==1){n=o==="backgroundColor"?e.parentNode:e;while((r===""||r==="transparent")&&n&&n.style){try{r=c.css(n,"backgroundColor");n=n.parentNode}catch(e){}}t=t.blend(r&&r!=="transparent"?r:"_default")}t=t.toRgbaString()}try{e.style[o]=t}catch(e){}}};c.fx.step[o]=function(e){if(!e.colorInit){e.start=h(e.elem,o);e.end=h(e.end);e.colorInit=true}c.cssHooks[o].set(e.elem,e.start.transition(e.end,e.pos))}})};h.hook(e);c.cssHooks.borderColor={expand:function(i){var n={};g(["Top","Right","Bottom","Left"],function(e,t){n["border"+t+"Color"]=i});return n}};d=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(B);(function(){var a=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};D.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,t){D.fx.step[t]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr){B.style(e.elem,t,e.end);e.setAttr=true}}});function s(e){var t,i,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(n&&n.length&&n[0]&&n[n[0]]){i=n.length;while(i--){t=n[i];if(typeof n[t]==="string"){r[D.camelCase(t)]=n[t]}}}else{for(t in n){if(typeof n[t]==="string"){r[t]=n[t]}}}return r}function l(e,t){var i={},n,r;for(n in t){r=t[n];if(e[n]!==r){if(!o[n]){if(D.fx.step[n]||!isNaN(parseFloat(r))){i[n]=r}}}}return i}if(!D.fn.addBack){D.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}D.effects.animateClass=function(r,e,t,i){var o=D.speed(e,t,i);return this.queue(function(){var i=D(this),e=i.attr("class")||"",t,n=o.children?i.find("*").addBack():i;n=n.map(function(){var e=D(this);return{el:e,start:s(this)}});t=function(){D.each(a,function(e,t){if(r[t]){i[t+"Class"](r[t])}})};t();n=n.map(function(){this.end=s(this.el[0]);this.diff=l(this.start,this.end);return this});i.attr("class",e);n=n.map(function(){var e=this,t=D.Deferred(),i=D.extend({},o,{queue:false,complete:function(){t.resolve(e)}});this.el.animate(this.diff,i);return t.promise()});D.when.apply(D,n.get()).done(function(){t();D.each(arguments,function(){var t=this.el;D.each(this.diff,function(e){t.css(e,"")})});o.complete.call(i[0])})})};D.fn.extend({addClass:function(r){return function(e,t,i,n){return t?D.effects.animateClass.call(this,{add:e},t,i,n):r.apply(this,arguments)}}(D.fn.addClass),removeClass:function(r){return function(e,t,i,n){return arguments.length>1?D.effects.animateClass.call(this,{remove:e},t,i,n):r.apply(this,arguments)}}(D.fn.removeClass),toggleClass:function(o){return function(e,t,i,n,r){if(typeof t==="boolean"||t===undefined){if(!i){return o.apply(this,arguments)}else{return D.effects.animateClass.call(this,t?{add:e}:{remove:e},i,n,r)}}else{return D.effects.animateClass.call(this,{toggle:e},t,i,n)}}}(D.fn.toggleClass),switchClass:function(e,t,i,n,r){return D.effects.animateClass.call(this,{add:t,remove:e},i,n,r)}})})();(function(){D.extend(D.effects,{version:"1.11.3",save:function(e,t){for(var i=0;i<t.length;i++){if(t[i]!==null){e.data(j+t[i],e[0].style[t[i]])}}},restore:function(e,t){var i,n;for(n=0;n<t.length;n++){if(t[n]!==null){i=e.data(j+t[n]);if(i===undefined){i=""}e.css(t[n],i)}}},setMode:function(e,t){if(t==="toggle"){t=e.is(":hidden")?"show":"hide"}return t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper")){return i.parent()}var n={width:i.outerWidth(true),height:i.outerHeight(true),float:i.css("float")},e=D("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),t={width:i.width(),height:i.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}i.wrap(e);if(i[0]===r||D.contains(i[0],r)){D(r).focus()}e=i.parent();if(i.css("position")==="static"){e.css({position:"relative"});i.css({position:"relative"})}else{D.extend(n,{position:i.css("position"),zIndex:i.css("z-index")});D.each(["top","left","bottom","right"],function(e,t){n[t]=i.css(t);if(isNaN(parseInt(n[t],10))){n[t]="auto"}});i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}i.css(t);return e.css(n).show()},removeWrapper:function(e){var t=document.activeElement;if(e.parent().is(".ui-effects-wrapper")){e.parent().replaceWith(e);if(e[0]===t||D.contains(e[0],t)){D(t).focus()}}return e},setTransition:function(n,e,r,o){o=o||{};D.each(e,function(e,t){var i=n.cssUnit(t);if(i[0]>0){o[t]=i[0]*r+i[1]}});return o}});function n(e,t,i,n){if(D.isPlainObject(e)){t=e;e=e.effect}e={effect:e};if(t==null){t={}}if(D.isFunction(t)){n=t;i=null;t={}}if(typeof t==="number"||D.fx.speeds[t]){n=i;i=t;t={}}if(D.isFunction(i)){n=i;i=null}if(t){D.extend(e,t)}i=i||t.duration;e.duration=D.fx.off?0:typeof i==="number"?i:i in D.fx.speeds?D.fx.speeds[i]:D.fx.speeds._default;e.complete=n||t.complete;return e}function r(e){if(!e||typeof e==="number"||D.fx.speeds[e]){return true}if(typeof e==="string"&&!D.effects.effect[e]){return true}if(D.isFunction(e)){return true}if(typeof e==="object"&&!e.effect){return true}return false}D.fn.extend({effect:function(){var o=n.apply(this,arguments),e=o.mode,t=o.queue,a=D.effects.effect[o.effect];if(D.fx.off||!a){if(e){return this[e](o.duration,o.complete)}else{return this.each(function(){if(o.complete){o.complete.call(this)}})}}function i(e){var t=D(this),i=o.complete,n=o.mode;function r(){if(D.isFunction(i)){i.call(t[0])}if(D.isFunction(e)){e()}}if(t.is(":hidden")?n==="hide":n==="show"){t[n]();r()}else{a.call(t[0],o,r)}}return t===false?this.each(i):this.queue(t||"fx",i)},show:function(i){return function(e){if(r(e)){return i.apply(this,arguments)}else{var t=n.apply(this,arguments);t.mode="show";return this.effect.call(this,t)}}}(D.fn.show),hide:function(i){return function(e){if(r(e)){return i.apply(this,arguments)}else{var t=n.apply(this,arguments);t.mode="hide";return this.effect.call(this,t)}}}(D.fn.hide),toggle:function(i){return function(e){if(r(e)||typeof e==="boolean"){return i.apply(this,arguments)}else{var t=n.apply(this,arguments);t.mode="toggle";return this.effect.call(this,t)}}}(D.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];D.each(["em","px","%","pt"],function(e,t){if(i.indexOf(t)>0){n=[parseFloat(i),t]}});return n}})})();(function(){var i={};D.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,e){i[e]=function(e){return Math.pow(e,t+2)}});D.extend(i,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,i=4;while(e<((t=Math.pow(2,--i))-1)/11){}return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-e,2)}});D.each(i,function(e,t){D.easing["easeIn"+e]=t;D.easing["easeOut"+e]=function(e){return 1-t(1-e)};D.easing["easeInOut"+e]=function(e){return e<.5?t(e*2)/2:1-t(e*-2+2)/2}})})();var q=D.effects;
/*!
 * jQuery UI Effects Blind 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 */var F=D.effects.effect.blind=function(e,t){var i=D(this),n=/up|down|vertical/,r=/up|left|vertical|horizontal/,o=["position","top","bottom","left","right","height","width"],a=D.effects.setMode(i,e.mode||"hide"),s=e.direction||"up",l=n.test(s),d=l?"height":"width",c=l?"top":"left",u=r.test(s),f={},h=a==="show",p,m,g;if(i.parent().is(".ui-effects-wrapper")){D.effects.save(i.parent(),o)}else{D.effects.save(i,o)}i.show();p=D.effects.createWrapper(i).css({overflow:"hidden"});m=p[d]();g=parseFloat(p.css(c))||0;f[d]=h?m:0;if(!u){i.css(l?"bottom":"right",0).css(l?"top":"left","auto").css({position:"absolute"});f[c]=h?g:m+g}if(h){p.css(d,0);if(!u){p.css(c,g+m)}}p.animate(f,{duration:e.duration,easing:e.easing,queue:false,complete:function(){if(a==="hide"){i.hide()}D.effects.restore(i,o);D.effects.removeWrapper(i);t()}})};
/*!
 * jQuery UI Effects Bounce 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 */var U=D.effects.effect.bounce=function(e,t){var i=D(this),n=["position","top","bottom","left","right","height","width"],r=D.effects.setMode(i,e.mode||"effect"),o=r==="hide",a=r==="show",s=e.direction||"up",l=e.distance,d=e.times||5,c=d*2+(a||o?1:0),u=e.duration/c,f=e.easing,h=s==="up"||s==="down"?"top":"left",p=s==="up"||s==="left",m,g,v,_=i.queue(),b=_.length;if(a||o){n.push("opacity")}D.effects.save(i,n);i.show();D.effects.createWrapper(i);if(!l){l=i[h==="top"?"outerHeight":"outerWidth"]()/3}if(a){v={opacity:1};v[h]=0;i.css("opacity",0).css(h,p?-l*2:l*2).animate(v,u,f)}if(o){l=l/Math.pow(2,d-1)}v={};v[h]=0;for(m=0;m<d;m++){g={};g[h]=(p?"-=":"+=")+l;i.animate(g,u,f).animate(v,u,f);l=o?l*2:l/2}if(o){g={opacity:0};g[h]=(p?"-=":"+=")+l;i.animate(g,u,f)}i.queue(function(){if(o){i.hide()}D.effects.restore(i,n);D.effects.removeWrapper(i);t()});if(b>1){_.splice.apply(_,[1,0].concat(_.splice(b,c+1)))}i.dequeue()};
/*!
 * jQuery UI Effects Clip 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 */var H=D.effects.effect.clip=function(e,t){var i=D(this),n=["position","top","bottom","left","right","height","width"],r=D.effects.setMode(i,e.mode||"hide"),o=r==="show",a=e.direction||"vertical",s=a==="vertical",l=s?"height":"width",d=s?"top":"left",c={},u,f,h;D.effects.save(i,n);i.show();u=D.effects.createWrapper(i).css({overflow:"hidden"});f=i[0].tagName==="IMG"?u:i;h=f[l]();if(o){f.css(l,0);f.css(d,h/2)}c[l]=o?h:0;c[d]=o?0:h/2;f.animate(c,{queue:false,duration:e.duration,easing:e.easing,complete:function(){if(!o){i.hide()}D.effects.restore(i,n);D.effects.removeWrapper(i);t()}})};
/*!
 * jQuery UI Effects Drop 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 */var W=D.effects.effect.drop=function(e,t){var i=D(this),n=["position","top","bottom","left","right","opacity","height","width"],r=D.effects.setMode(i,e.mode||"hide"),o=r==="show",a=e.direction||"left",s=a==="up"||a==="down"?"top":"left",l=a==="up"||a==="left"?"pos":"neg",d={opacity:o?1:0},c;D.effects.save(i,n);i.show();D.effects.createWrapper(i);c=e.distance||i[s==="top"?"outerHeight":"outerWidth"](true)/2;if(o){i.css("opacity",0).css(s,l==="pos"?-c:c)}d[s]=(o?l==="pos"?"+=":"-=":l==="pos"?"-=":"+=")+c;i.animate(d,{queue:false,duration:e.duration,easing:e.easing,complete:function(){if(r==="hide"){i.hide()}D.effects.restore(i,n);D.effects.removeWrapper(i);t()}})};
/*!
 * jQuery UI Effects Explode 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 */var $=D.effects.effect.explode=function(e,t){var i=e.pieces?Math.round(Math.sqrt(e.pieces)):3,n=i,r=D(this),o=D.effects.setMode(r,e.mode||"hide"),a=o==="show",s=r.show().css("visibility","hidden").offset(),l=Math.ceil(r.outerWidth()/n),d=Math.ceil(r.outerHeight()/i),c=[],u,f,h,p,m,g;function v(){c.push(this);if(c.length===i*n){_()}}for(u=0;u<i;u++){p=s.top+u*d;g=u-(i-1)/2;for(f=0;f<n;f++){h=s.left+f*l;m=f-(n-1)/2;r.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-f*l,top:-u*d}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:l,height:d,left:h+(a?m*l:0),top:p+(a?g*d:0),opacity:a?0:1}).animate({left:h+(a?0:m*l),top:p+(a?0:g*d),opacity:a?1:0},e.duration||500,e.easing,v)}}function _(){r.css({visibility:"visible"});D(c).remove();if(!a){r.hide()}t()}};
/*!
 * jQuery UI Effects Fade 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 */var V=D.effects.effect.fade=function(e,t){var i=D(this),n=D.effects.setMode(i,e.mode||"toggle");i.animate({opacity:n},{queue:false,duration:e.duration,easing:e.easing,complete:t})};
/*!
 * jQuery UI Effects Fold 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 */var G=D.effects.effect.fold=function(e,t){var i=D(this),n=["position","top","bottom","left","right","height","width"],r=D.effects.setMode(i,e.mode||"hide"),o=r==="show",a=r==="hide",s=e.size||15,l=/([0-9]+)%/.exec(s),d=!!e.horizFirst,c=o!==d,u=c?["width","height"]:["height","width"],f=e.duration/2,h,p,m={},g={};D.effects.save(i,n);i.show();h=D.effects.createWrapper(i).css({overflow:"hidden"});p=c?[h.width(),h.height()]:[h.height(),h.width()];if(l){s=parseInt(l[1],10)/100*p[a?0:1]}if(o){h.css(d?{height:0,width:s}:{height:s,width:0})}m[u[0]]=o?p[0]:s;g[u[1]]=o?p[1]:0;h.animate(m,f,e.easing).animate(g,f,e.easing,function(){if(a){i.hide()}D.effects.restore(i,n);D.effects.removeWrapper(i);t()})};
/*!
 * jQuery UI Effects Highlight 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 */var Z=D.effects.effect.highlight=function(e,t){var i=D(this),n=["backgroundImage","backgroundColor","opacity"],r=D.effects.setMode(i,e.mode||"show"),o={backgroundColor:i.css("backgroundColor")};if(r==="hide"){o.opacity=0}D.effects.save(i,n);i.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:false,duration:e.duration,easing:e.easing,complete:function(){if(r==="hide"){i.hide()}D.effects.restore(i,n);t()}})};
/*!
 * jQuery UI Effects Size 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/size-effect/
 */var K=D.effects.effect.size=function(i,e){var t,n,r,o=D(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],s=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],d=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=D.effects.setMode(o,i.mode||"effect"),h=i.restore||f!=="effect",p=i.scale||"both",m=i.origin||["middle","center"],g=o.css("position"),v=h?a:s,_={height:0,width:0,outerHeight:0,outerWidth:0};if(f==="show"){o.show()}t={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()};if(i.mode==="toggle"&&f==="show"){o.from=i.to||_;o.to=i.from||t}else{o.from=i.from||(f==="show"?_:t);o.to=i.to||(f==="hide"?_:t)}r={from:{y:o.from.height/t.height,x:o.from.width/t.width},to:{y:o.to.height/t.height,x:o.to.width/t.width}};if(p==="box"||p==="both"){if(r.from.y!==r.to.y){v=v.concat(c);o.from=D.effects.setTransition(o,c,r.from.y,o.from);o.to=D.effects.setTransition(o,c,r.to.y,o.to)}if(r.from.x!==r.to.x){v=v.concat(u);o.from=D.effects.setTransition(o,u,r.from.x,o.from);o.to=D.effects.setTransition(o,u,r.to.x,o.to)}}if(p==="content"||p==="both"){if(r.from.y!==r.to.y){v=v.concat(d).concat(l);o.from=D.effects.setTransition(o,d,r.from.y,o.from);o.to=D.effects.setTransition(o,d,r.to.y,o.to)}}D.effects.save(o,v);o.show();D.effects.createWrapper(o);o.css("overflow","hidden").css(o.from);if(m){n=D.effects.getBaseline(m,t);o.from.top=(t.outerHeight-o.outerHeight())*n.y;o.from.left=(t.outerWidth-o.outerWidth())*n.x;o.to.top=(t.outerHeight-o.to.outerHeight)*n.y;o.to.left=(t.outerWidth-o.to.outerWidth)*n.x}o.css(o.from);if(p==="content"||p==="both"){c=c.concat(["marginTop","marginBottom"]).concat(d);u=u.concat(["marginLeft","marginRight"]);l=a.concat(c).concat(u);o.find("*[width]").each(function(){var e=D(this),t={height:e.height(),width:e.width(),outerHeight:e.outerHeight(),outerWidth:e.outerWidth()};if(h){D.effects.save(e,l)}e.from={height:t.height*r.from.y,width:t.width*r.from.x,outerHeight:t.outerHeight*r.from.y,outerWidth:t.outerWidth*r.from.x};e.to={height:t.height*r.to.y,width:t.width*r.to.x,outerHeight:t.height*r.to.y,outerWidth:t.width*r.to.x};if(r.from.y!==r.to.y){e.from=D.effects.setTransition(e,c,r.from.y,e.from);e.to=D.effects.setTransition(e,c,r.to.y,e.to)}if(r.from.x!==r.to.x){e.from=D.effects.setTransition(e,u,r.from.x,e.from);e.to=D.effects.setTransition(e,u,r.to.x,e.to)}e.css(e.from);e.animate(e.to,i.duration,i.easing,function(){if(h){D.effects.restore(e,l)}})})}o.animate(o.to,{queue:false,duration:i.duration,easing:i.easing,complete:function(){if(o.to.opacity===0){o.css("opacity",o.from.opacity)}if(f==="hide"){o.hide()}D.effects.restore(o,v);if(!h){if(g==="static"){o.css({position:"relative",top:o.to.top,left:o.to.left})}else{D.each(["top","left"],function(r,e){o.css(e,function(e,t){var i=parseInt(t,10),n=r?o.to.left:o.to.top;if(t==="auto"){return n+"px"}return i+n+"px"})})}}D.effects.removeWrapper(o);e()}})};
/*!
 * jQuery UI Effects Scale 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 */var Y=D.effects.effect.scale=function(e,t){var i=D(this),n=D.extend(true,{},e),r=D.effects.setMode(i,e.mode||"effect"),o=parseInt(e.percent,10)||(parseInt(e.percent,10)===0?0:r==="hide"?0:100),a=e.direction||"both",s=e.origin,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},d={y:a!=="horizontal"?o/100:1,x:a!=="vertical"?o/100:1};n.effect="size";n.queue=false;n.complete=t;if(r!=="effect"){n.origin=s||["middle","center"];n.restore=true}n.from=e.from||(r==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:l);n.to={height:l.height*d.y,width:l.width*d.x,outerHeight:l.outerHeight*d.y,outerWidth:l.outerWidth*d.x};if(n.fade){if(r==="show"){n.from.opacity=0;n.to.opacity=1}if(r==="hide"){n.from.opacity=1;n.to.opacity=0}}i.effect(n)};
/*!
 * jQuery UI Effects Puff 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/puff-effect/
 */var J=D.effects.effect.puff=function(e,t){var i=D(this),n=D.effects.setMode(i,e.mode||"hide"),r=n==="hide",o=parseInt(e.percent,10)||150,a=o/100,s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};D.extend(e,{effect:"scale",queue:false,fade:true,mode:n,complete:t,percent:r?o:100,from:r?s:{height:s.height*a,width:s.width*a,outerHeight:s.outerHeight*a,outerWidth:s.outerWidth*a}});i.effect(e)};
/*!
 * jQuery UI Effects Pulsate 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 */var Q=D.effects.effect.pulsate=function(e,t){var i=D(this),n=D.effects.setMode(i,e.mode||"show"),r=n==="show",o=n==="hide",a=r||n==="hide",s=(e.times||5)*2+(a?1:0),l=e.duration/s,d=0,c=i.queue(),u=c.length,f;if(r||!i.is(":visible")){i.css("opacity",0).show();d=1}for(f=1;f<s;f++){i.animate({opacity:d},l,e.easing);d=1-d}i.animate({opacity:d},l,e.easing);i.queue(function(){if(o){i.hide()}t()});if(u>1){c.splice.apply(c,[1,0].concat(c.splice(u,s+1)))}i.dequeue()};
/*!
 * jQuery UI Effects Shake 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 */var X=D.effects.effect.shake=function(e,t){var i=D(this),n=["position","top","bottom","left","right","height","width"],r=D.effects.setMode(i,e.mode||"effect"),o=e.direction||"left",a=e.distance||20,s=e.times||3,l=s*2+1,d=Math.round(e.duration/l),c=o==="up"||o==="down"?"top":"left",u=o==="up"||o==="left",f={},h={},p={},m,g=i.queue(),v=g.length;D.effects.save(i,n);i.show();D.effects.createWrapper(i);f[c]=(u?"-=":"+=")+a;h[c]=(u?"+=":"-=")+a*2;p[c]=(u?"-=":"+=")+a*2;i.animate(f,d,e.easing);for(m=1;m<s;m++){i.animate(h,d,e.easing).animate(p,d,e.easing)}i.animate(h,d,e.easing).animate(f,d/2,e.easing).queue(function(){if(r==="hide"){i.hide()}D.effects.restore(i,n);D.effects.removeWrapper(i);t()});if(v>1){g.splice.apply(g,[1,0].concat(g.splice(v,l+1)))}i.dequeue()};
/*!
 * jQuery UI Effects Slide 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 */var ee=D.effects.effect.slide=function(e,t){var i=D(this),n=["position","top","bottom","left","right","width","height"],r=D.effects.setMode(i,e.mode||"show"),o=r==="show",a=e.direction||"left",s=a==="up"||a==="down"?"top":"left",l=a==="up"||a==="left",d,c={};D.effects.save(i,n);i.show();d=e.distance||i[s==="top"?"outerHeight":"outerWidth"](true);D.effects.createWrapper(i).css({overflow:"hidden"});if(o){i.css(s,l?isNaN(d)?"-"+d:-d:d)}c[s]=(o?l?"+=":"-=":l?"-=":"+=")+d;i.animate(c,{queue:false,duration:e.duration,easing:e.easing,complete:function(){if(r==="hide"){i.hide()}D.effects.restore(i,n);D.effects.removeWrapper(i);t()}})};
/*!
 * jQuery UI Effects Transfer 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 */var te=D.effects.effect.transfer=function(e,t){var i=D(this),n=D(e.to),r=n.css("position")==="fixed",o=D("body"),a=r?o.scrollTop():0,s=r?o.scrollLeft():0,l=n.offset(),d={top:l.top-a,left:l.left-s,height:n.innerHeight(),width:n.innerWidth()},c=i.offset(),u=D("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:c.top-a,left:c.left-s,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(d,e.duration,e.easing,function(){u.remove();t()})}})},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(1),i(167),i(30),i(337)],r=function(n,e,d,c,u){var t=function e(){var t=this||window;var i=t.slickgrid;var n=i.getColumns();var r=i.getSelectionModel().getSelectedRanges();var o=i.getData();var a=i.getSelectedRows();var s=i.CSVOptions;if(c.areAllRangesCompleteRows(i,r)){t.copied_rows=a.map(function(e){return i.getDataItem(e)});f(t.can_edit,true)}else{t.copied_rows=[];f(t.can_edit,false)}var l=u.rangesToCsv(o.getItems(),n,r,s);if(l){d.copyTextToClipboard(l)}};var f=function e(t,i){if(t){n("#btn-paste-row").prop("disabled",!i)}};return t}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n=r(i(0));function r(e){return e&&e.__esModule?e:{default:e}}var o={_verbose:function e(){return!(0,n.default)(".explain-verbose").hasClass("visibility-hidden")},_costsEnabled:function e(){return!(0,n.default)(".explain-costs").hasClass("visibility-hidden")},_buffers:function e(){return!(0,n.default)(".explain-buffers").hasClass("visibility-hidden")},_timing:function e(){return!(0,n.default)(".explain-timing").hasClass("visibility-hidden")},_summary:function e(){return!(0,n.default)(".explain-summary").hasClass("visibility-hidden")},_settings:function e(){return!(0,n.default)(".explain-settings").hasClass("visibility-hidden")},_clearMessageTab:function e(){(0,n.default)(".sql-editor-message").html("")},executeQuery:function e(t){this._clearMessageTab();t.check_data_changes_to_execute_query()},explainAnalyze:function e(t){var i={format:"json",analyze:true,verbose:this._verbose(),costs:this._costsEnabled(),buffers:this._buffers(),timing:this._timing(),summary:this._summary(),settings:this._settings()};this._clearMessageTab();t.check_data_changes_to_execute_query(i)},explain:function e(t){var i={format:"json",analyze:false,verbose:this._verbose(),costs:this._costsEnabled(),buffers:false,timing:false,summary:this._summary(),settings:this._settings()};this._clearMessageTab();t.check_data_changes_to_execute_query(i)},download:function e(t){var i=t.gridView.query_tool_obj.getSelection();if(!i){i=t.gridView.query_tool_obj.getValue()}if(!i)return;var n="data-"+(new Date).getTime()+".csv";if(!t.is_query_tool){n=t.table_name+".csv"}t.trigger_csv_download(i,n)},commentBlockCode:function e(t){var i=t.gridView.query_tool_obj;if(!i.getValue())return;i.toggleComment(i.getCursor(true),i.getCursor(false))},commentLineCode:function e(t){var i=t.gridView.query_tool_obj;if(!i.getValue())return;i.lineComment(i.getCursor(true),i.getCursor(false),{lineComment:"--"})},uncommentLineCode:function e(t){var i=t.gridView.query_tool_obj;if(!i.getValue())return;i.uncomment(i.getCursor(true),i.getCursor(false),{lineComment:"--"})},focusOut:function e(){document.activeElement.blur();window.top.document.activeElement.blur()},toggleCaseOfSelectedText:function e(t){var i=t.gridView.query_tool_obj;var n=i.getSelection();if(!n)return;if(n===n.toUpperCase()){i.replaceSelection(n.toLowerCase())}else{i.replaceSelection(n.toUpperCase())}},executeCommit:function e(t){var i=this;t.special_sql="COMMIT;";i.executeQuery(t)},executeRollback:function e(t){var i=this;t.special_sql="ROLLBACK;";i.executeQuery(t)},saveDataChanges:function e(t){t.close_on_save=false;t.save_data()}};e.exports=o},function(e,t){e.exports={encode:function(e){return e<<1^e>>31},decode:function(e){return e>>1^-(e&1)}}},function(e,t,i){e.exports=d;var n=i(45);var o=i(31);var a=i(37);var s=i(38);var l=i(39);function d(e,t){a.call(this);this.points=e||[];this.srid=t;if(this.points.length>0){this.hasZ=this.points[0].hasZ;this.hasM=this.points[0].hasM}}n.inherits(d,a);d.Z=function(e,t){var i=new d(e,t);i.hasZ=true;return i};d.M=function(e,t){var i=new d(e,t);i.hasM=true;return i};d.ZM=function(e,t){var i=new d(e,t);i.hasZ=true;i.hasM=true;return i};d._parseWkt=function(e,t){var i=new d;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();i.points.push.apply(i.points,e.matchCoordinates(t));e.expectGroupEnd();return i};d._parseWkb=function(e,t){var i=new d;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;var n=e.readUInt32();for(var r=0;r<n;r++)i.points.push(a.parse(e,t));return i};d._parseTwkb=function(e,t){var i=new d;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;var n=new s(0,0,t.hasZ?0:undefined,t.hasM?0:undefined);var r=e.readVarInt();for(var o=0;o<r;o++)i.points.push(s._readTwkbPoint(e,t,n));return i};d._parseGeoJSON=function(e){var t=new d;if(e.coordinates.length>0)t.hasZ=e.coordinates[0].length>2;for(var i=0;i<e.coordinates.length;i++)t.points.push(s._parseGeoJSON({coordinates:e.coordinates[i]}));return t};d.prototype.toWkt=function(){if(this.points.length===0)return this._getWktType(o.wkt.MultiPoint,true);var e=this._getWktType(o.wkt.MultiPoint,false)+"(";for(var t=0;t<this.points.length;t++)e+=this._getWktCoordinate(this.points[t])+",";e=e.slice(0,-1);e+=")";return e};d.prototype.toWkb=function(){var e=new l(this._getWkbSize());e.writeInt8(1);this._writeWkbType(e,o.wkb.MultiPoint);e.writeUInt32LE(this.points.length);for(var t=0;t<this.points.length;t++)e.writeBuffer(this.points[t].toWkb({srid:this.srid}));return e.buffer};d.prototype.toTwkb=function(){var e=new l(0,true);var t=a.getTwkbPrecision(5,0,0);var i=this.points.length===0;this._writeTwkbHeader(e,o.wkb.MultiPoint,t,i);if(this.points.length>0){e.writeVarInt(this.points.length);var n=new s(0,0,0,0);for(var r=0;r<this.points.length;r++)this.points[r]._writeTwkbPoint(e,t,n)}return e.buffer};d.prototype._getWkbSize=function(){var e=16;if(this.hasZ)e+=8;if(this.hasM)e+=8;e+=5;return 1+4+4+this.points.length*e};d.prototype.toGeoJSON=function(e){var t=a.prototype.toGeoJSON.call(this,e);t.type=o.geoJSON.MultiPoint;t.coordinates=[];for(var i=0;i<this.points.length;i++)t.coordinates.push(this.points[i].toGeoJSON().coordinates);return t}},function(e,t,i){e.exports=u;var n=i(45);var a=i(31);var s=i(37);var d=i(38);var c=i(169);var l=i(39);function u(e,t){s.call(this);this.lineStrings=e||[];this.srid=t;if(this.lineStrings.length>0){this.hasZ=this.lineStrings[0].hasZ;this.hasM=this.lineStrings[0].hasM}}n.inherits(u,s);u.Z=function(e,t){var i=new u(e,t);i.hasZ=true;return i};u.M=function(e,t){var i=new u(e,t);i.hasM=true;return i};u.ZM=function(e,t){var i=new u(e,t);i.hasZ=true;i.hasM=true;return i};u._parseWkt=function(e,t){var i=new u;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();do{e.expectGroupStart();i.lineStrings.push(new c(e.matchCoordinates(t)));e.expectGroupEnd()}while(e.isMatch([","]));e.expectGroupEnd();return i};u._parseWkb=function(e,t){var i=new u;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;var n=e.readUInt32();for(var r=0;r<n;r++)i.lineStrings.push(s.parse(e,t));return i};u._parseTwkb=function(e,t){var i=new u;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;var n=new d(0,0,t.hasZ?0:undefined,t.hasM?0:undefined);var r=e.readVarInt();for(var o=0;o<r;o++){var a=new c;a.hasZ=t.hasZ;a.hasM=t.hasM;var s=e.readVarInt();for(var l=0;l<s;l++)a.points.push(d._readTwkbPoint(e,t,n));i.lineStrings.push(a)}return i};u._parseGeoJSON=function(e){var t=new u;if(e.coordinates.length>0&&e.coordinates[0].length>0)t.hasZ=e.coordinates[0][0].length>2;for(var i=0;i<e.coordinates.length;i++)t.lineStrings.push(c._parseGeoJSON({coordinates:e.coordinates[i]}));return t};u.prototype.toWkt=function(){if(this.lineStrings.length===0)return this._getWktType(a.wkt.MultiLineString,true);var e=this._getWktType(a.wkt.MultiLineString,false)+"(";for(var t=0;t<this.lineStrings.length;t++)e+=this.lineStrings[t]._toInnerWkt()+",";e=e.slice(0,-1);e+=")";return e};u.prototype.toWkb=function(){var e=new l(this._getWkbSize());e.writeInt8(1);this._writeWkbType(e,a.wkb.MultiLineString);e.writeUInt32LE(this.lineStrings.length);for(var t=0;t<this.lineStrings.length;t++)e.writeBuffer(this.lineStrings[t].toWkb({srid:this.srid}));return e.buffer};u.prototype.toTwkb=function(){var e=new l(0,true);var t=s.getTwkbPrecision(5,0,0);var i=this.lineStrings.length===0;this._writeTwkbHeader(e,a.wkb.MultiLineString,t,i);if(this.lineStrings.length>0){e.writeVarInt(this.lineStrings.length);var n=new d(0,0,0,0);for(var r=0;r<this.lineStrings.length;r++){e.writeVarInt(this.lineStrings[r].points.length);for(var o=0;o<this.lineStrings[r].points.length;o++)this.lineStrings[r].points[o]._writeTwkbPoint(e,t,n)}}return e.buffer};u.prototype._getWkbSize=function(){var e=1+4+4;for(var t=0;t<this.lineStrings.length;t++)e+=this.lineStrings[t]._getWkbSize();return e};u.prototype.toGeoJSON=function(e){var t=s.prototype.toGeoJSON.call(this,e);t.type=a.geoJSON.MultiLineString;t.coordinates=[];for(var i=0;i<this.lineStrings.length;i++)t.coordinates.push(this.lineStrings[i].toGeoJSON().coordinates);return t}},function(e,t,i){e.exports=m;var n=i(45);var s=i(31);var l=i(37);var h=i(38);var p=i(170);var d=i(39);function m(e,t){l.call(this);this.polygons=e||[];this.srid=t;if(this.polygons.length>0){this.hasZ=this.polygons[0].hasZ;this.hasM=this.polygons[0].hasM}}n.inherits(m,l);m.Z=function(e,t){var i=new m(e,t);i.hasZ=true;return i};m.M=function(e,t){var i=new m(e,t);i.hasM=true;return i};m.ZM=function(e,t){var i=new m(e,t);i.hasZ=true;i.hasM=true;return i};m._parseWkt=function(e,t){var i=new m;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();do{e.expectGroupStart();var n=[];var r=[];e.expectGroupStart();n.push.apply(n,e.matchCoordinates(t));e.expectGroupEnd();while(e.isMatch([","])){e.expectGroupStart();r.push(e.matchCoordinates(t));e.expectGroupEnd()}i.polygons.push(new p(n,r));e.expectGroupEnd()}while(e.isMatch([","]));e.expectGroupEnd();return i};m._parseWkb=function(e,t){var i=new m;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;var n=e.readUInt32();for(var r=0;r<n;r++)i.polygons.push(l.parse(e,t));return i};m._parseTwkb=function(e,t){var i=new m;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;var n=new h(0,0,t.hasZ?0:undefined,t.hasM?0:undefined);var r=e.readVarInt();for(var o=0;o<r;o++){var a=new p;a.hasZ=t.hasZ;a.hasM=t.hasM;var s=e.readVarInt();var l=e.readVarInt();for(var d=0;d<l;d++)a.exteriorRing.push(h._readTwkbPoint(e,t,n));for(d=1;d<s;d++){var c=[];var u=e.readVarInt();for(var f=0;f<u;f++)c.push(h._readTwkbPoint(e,t,n));a.interiorRings.push(c)}i.polygons.push(a)}return i};m._parseGeoJSON=function(e){var t=new m;if(e.coordinates.length>0&&e.coordinates[0].length>0&&e.coordinates[0][0].length>0)t.hasZ=e.coordinates[0][0][0].length>2;for(var i=0;i<e.coordinates.length;i++)t.polygons.push(p._parseGeoJSON({coordinates:e.coordinates[i]}));return t};m.prototype.toWkt=function(){if(this.polygons.length===0)return this._getWktType(s.wkt.MultiPolygon,true);var e=this._getWktType(s.wkt.MultiPolygon,false)+"(";for(var t=0;t<this.polygons.length;t++)e+=this.polygons[t]._toInnerWkt()+",";e=e.slice(0,-1);e+=")";return e};m.prototype.toWkb=function(){var e=new d(this._getWkbSize());e.writeInt8(1);this._writeWkbType(e,s.wkb.MultiPolygon);e.writeUInt32LE(this.polygons.length);for(var t=0;t<this.polygons.length;t++)e.writeBuffer(this.polygons[t].toWkb({srid:this.srid}));return e.buffer};m.prototype.toTwkb=function(){var e=new d(0,true);var t=l.getTwkbPrecision(5,0,0);var i=this.polygons.length===0;this._writeTwkbHeader(e,s.wkb.MultiPolygon,t,i);if(this.polygons.length>0){e.writeVarInt(this.polygons.length);var n=new h(0,0,0,0);for(var r=0;r<this.polygons.length;r++){e.writeVarInt(1+this.polygons[r].interiorRings.length);e.writeVarInt(this.polygons[r].exteriorRing.length);for(var o=0;o<this.polygons[r].exteriorRing.length;o++)this.polygons[r].exteriorRing[o]._writeTwkbPoint(e,t,n);for(o=0;o<this.polygons[r].interiorRings.length;o++){e.writeVarInt(this.polygons[r].interiorRings[o].length);for(var a=0;a<this.polygons[r].interiorRings[o].length;a++)this.polygons[r].interiorRings[o][a]._writeTwkbPoint(e,t,n)}}}return e.buffer};m.prototype._getWkbSize=function(){var e=1+4+4;for(var t=0;t<this.polygons.length;t++)e+=this.polygons[t]._getWkbSize();return e};m.prototype.toGeoJSON=function(e){var t=l.prototype.toGeoJSON.call(this,e);t.type=s.geoJSON.MultiPolygon;t.coordinates=[];for(var i=0;i<this.polygons.length;i++)t.coordinates.push(this.polygons[i].toGeoJSON().coordinates);return t}},function(e,t,i){e.exports=s;var n=i(45);var r=i(31);var o=i(37);var a=i(39);function s(e,t){o.call(this);this.geometries=e||[];this.srid=t;if(this.geometries.length>0){this.hasZ=this.geometries[0].hasZ;this.hasM=this.geometries[0].hasM}}n.inherits(s,o);s.Z=function(e,t){var i=new s(e,t);i.hasZ=true;return i};s.M=function(e,t){var i=new s(e,t);i.hasM=true;return i};s.ZM=function(e,t){var i=new s(e,t);i.hasZ=true;i.hasM=true;return i};s._parseWkt=function(e,t){var i=new s;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;if(e.isMatch(["EMPTY"]))return i;e.expectGroupStart();do{i.geometries.push(o.parse(e))}while(e.isMatch([","]));e.expectGroupEnd();return i};s._parseWkb=function(e,t){var i=new s;i.srid=t.srid;i.hasZ=t.hasZ;i.hasM=t.hasM;var n=e.readUInt32();for(var r=0;r<n;r++)i.geometries.push(o.parse(e,t));return i};s._parseTwkb=function(e,t){var i=new s;i.hasZ=t.hasZ;i.hasM=t.hasM;if(t.isEmpty)return i;var n=e.readVarInt();for(var r=0;r<n;r++)i.geometries.push(o.parseTwkb(e));return i};s._parseGeoJSON=function(e){var t=new s;for(var i=0;i<e.geometries.length;i++)t.geometries.push(o._parseGeoJSON(e.geometries[i],true));if(t.geometries.length>0)t.hasZ=t.geometries[0].hasZ;return t};s.prototype.toWkt=function(){if(this.geometries.length===0)return this._getWktType(r.wkt.GeometryCollection,true);var e=this._getWktType(r.wkt.GeometryCollection,false)+"(";for(var t=0;t<this.geometries.length;t++)e+=this.geometries[t].toWkt()+",";e=e.slice(0,-1);e+=")";return e};s.prototype.toWkb=function(){var e=new a(this._getWkbSize());e.writeInt8(1);this._writeWkbType(e,r.wkb.GeometryCollection);e.writeUInt32LE(this.geometries.length);for(var t=0;t<this.geometries.length;t++)e.writeBuffer(this.geometries[t].toWkb({srid:this.srid}));return e.buffer};s.prototype.toTwkb=function(){var e=new a(0,true);var t=o.getTwkbPrecision(5,0,0);var i=this.geometries.length===0;this._writeTwkbHeader(e,r.wkb.GeometryCollection,t,i);if(this.geometries.length>0){e.writeVarInt(this.geometries.length);for(var n=0;n<this.geometries.length;n++)e.writeBuffer(this.geometries[n].toTwkb())}return e.buffer};s.prototype._getWkbSize=function(){var e=1+4+4;for(var t=0;t<this.geometries.length;t++)e+=this.geometries[t]._getWkbSize();return e};s.prototype.toGeoJSON=function(e){var t=o.prototype.toGeoJSON.call(this,e);t.type=r.geoJSON.GeometryCollection;t.geometries=[];for(var i=0;i<this.geometries.length;i++)t.geometries.push(this.geometries[i].toGeoJSON());return t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.calculateQueryRunTime=r;var s=n(i(50));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=(0,s.default)(t).diff(e);var n="";var r,o,a;r=parseInt(i/1e3);i=i%1e3;o=parseInt(r/60);r=r%60;a=parseInt(o/60);o=o%60;n=(a>0?a+" hr ":"")+(o>0?o+" min ":"")+(a<=0&&r>0?r+" secs ":"")+(a<=0&&o<=0?i+" msec ":"");return n.trim()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n,r;function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,n)}return i}function K(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){o(i,true).forEach(function(e){Y(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{o(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function Y(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}!(n=[i(171),i(2),i(4),i(0),i(206),i(327),i(1),i(8),i(10),i(3),i(9),i(23),i(328),i(333),i(336),i(167),i(207),i(30),i(338),i(339),i(340),i(24),i(341),i(168),i(342),i(344),i(354),i(355),i(359),i(28),i(208),i(360),i(105),i(44),i(214),i(361),i(362),i(47),i(36),i(363),i(194),i(373),i(374),i(375),i(378),i(5),i(87)],r=function(e,C,f,k,t,i,S,w,T,h,n,r,l,N,D,o,a,s,P,E,M,I,d,p,c,O,u,m,g,v,_,b,y,x,A,R,L,z,j){if(h.SqlEditor)return h.SqlEditor;var B=window.wcDocker,q=h.Browser,F=r.default,U=window.Slick,H=u.default,W=m.default,$=g.QuerySources;z.setPGCSRFToken(h.csrf_token_header,h.csrf_token);var V=false;var G=n.View.extend({initialize:function e(t){this.$el=t.el;this.handler=t.handler;this.handler["col_size"]={};var i=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;this.preferences=i.get_preferences_for_module("sqleditor");this.handler.preferences=this.preferences;this.connIntervalId=null;this.layout=t.layout},events:{"click .btn-load-file":"on_file_load","click #btn-save-file":"on_save_file","click #btn-file-menu-save":"on_save_file","click #btn-file-menu-save-as":"on_save_as","click #btn-find":"on_find","click #btn-find-menu-find":"on_find","click #btn-find-menu-find-next":"on_find_next","click #btn-find-menu-find-previous":"on_find_previous","click #btn-find-menu-replace":"on_replace","click #btn-find-menu-replace-all":"on_replace_all","click #btn-find-menu-find-persistent":"on_find_persistent","click #btn-find-menu-jump":"on_jump","click #btn-delete-row":"on_delete","click #btn-save-data":"on_save_data","click #btn-filter":"on_show_filter","click #btn-filter-menu":"on_show_filter","click #btn-include-filter":"on_include_filter","click #btn-exclude-filter":"on_exclude_filter","click #btn-remove-filter":"on_remove_filter","click #btn-cancel":"on_cancel","click #btn-copy-row":"on_copy_row","click #btn-paste-row":"on_paste_row","click #btn-flash":"on_flash","click #btn-flash-menu":"on_flash","click #btn-cancel-query":"on_cancel_query","click #btn-download":"on_download","click #btn-clear":"on_clear","click #btn-auto-commit":"on_auto_commit","click #btn-auto-rollback":"on_auto_rollback","click #btn-clear-history":"on_clear_history","click .noclose":"do_not_close_menu","click #btn-explain":"on_explain","click #btn-explain-analyze":"on_explain_analyze","click #btn-explain-verbose":"on_explain_verbose","click #btn-explain-costs":"on_explain_costs","click #btn-explain-buffers":"on_explain_buffers","click #btn-explain-timing":"on_explain_timing","click #btn-explain-summary":"on_explain_summary","click #btn-explain-settings":"on_explain_settings","change .limit":"on_limit_change",keydown:"keyAction","click #btn-comment-code":"on_toggle_comment_block_code","click #btn-toggle-comment-block":"on_toggle_comment_block_code","click #btn-comment-line":"on_comment_line_code","click #btn-uncomment-line":"on_uncomment_line_code","click #btn-indent-code":"on_indent_code","click #btn-unindent-code":"on_unindent_code","click #btn-commit":"on_commit_transaction","click #btn-rollback":"on_rollback_transaction"},reflectPreferences:function e(){var t=this,i=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;if(q.preference_version()<i.preference_version()){q.preference_version(i.preference_version());t.preferences=i.get_preferences_for_module("sqleditor");t.handler.preferences=t.preferences;L.updateUIPreferences(t)}},buildDefaultLayout:function e(t){var i=t.addPanel("sql_panel",B.DOCK.TOP);t.addPanel("scratch",B.DOCK.RIGHT,i);t.addPanel("history",B.DOCK.STACKED,i);var n=t.addPanel("data_output",B.DOCK.BOTTOM);t.addPanel("explain",B.DOCK.STACKED,n);t.addPanel("messages",B.DOCK.STACKED,n);t.addPanel("notifications",B.DOCK.STACKED,n)},set_server_version:function e(t){var i=this;i.server_ver=t;this.$el.find("*[data-min-ver]").map(function(){var e=0,t=k(this);e=parseInt(t.attr("data-min-ver"));if(e>i.server_ver){t.addClass("d-none")}else{t.removeClass("d-none")}})},set_editor_title:function e(t){this.$el.find(".editor-title").text(t)},render:function e(){var o=this;o.gain_focus=function(){setTimeout(function(){I.updateConnectionStatusFlag("visible")},100)};o.lost_focus=function(){setTimeout(function(){I.updateConnectionStatusFlag("hidden")},100)};o.docker=new B("#editor-panel",{allowContextMenu:true,allowCollapse:false,loadingClass:"pg-sp-icon",themePath:f("static",{filename:"css"}),theme:"webcabin.overrides.css"});var t=new h.Browser.Panel({name:"sql_panel",title:C("Query Editor"),width:"75%",height:"33%",isCloseable:false,isPrivate:true});var i=new h.Browser.Panel({name:"data_output",title:C("Data Output"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,extraClasses:"hide-vertical-scrollbar",content:'<div id ="datagrid" class="sql-editor-grid-container text-12" tabindex="0"></div>'});var n=new h.Browser.Panel({name:"explain",title:C("Explain"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div class="sql-editor-explain" tabindex="0"></div>'});var r=new h.Browser.Panel({name:"messages",title:C("Messages"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div class="sql-editor-message" tabindex="0"></div>'});var a=new h.Browser.Panel({name:"history",title:C("Query History"),width:"100%",height:"33%",isCloseable:false,isPrivate:true,content:'<div id ="history_grid" class="sql-editor-history-container" tabindex="0"></div>'});var s=new h.Browser.Panel({name:"scratch",title:C("Scratch Pad"),width:"25%",height:"33%",isCloseable:true,isPrivate:false,content:'<div class="sql-scratch"><textarea wrap="off" tabindex="0"></textarea></div>'});var l=new h.Browser.Panel({name:"notifications",title:C("Notifications"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div id ="notification_grid" class="sql-editor-notifications" tabindex="0"></div>'});var d=new h.Browser.Panel({name:"geometry_viewer",title:C("Geometry Viewer"),width:"100%",height:"100%",isCloseable:true,isPrivate:true,isLayoutMember:false,content:'<div id ="geometry_viewer_panel" class="sql-editor-geometry-viewer" tabindex="0"></div>'});t.load(o.docker);i.load(o.docker);n.load(o.docker);r.load(o.docker);a.load(o.docker);s.load(o.docker);l.load(o.docker);d.load(o.docker);q.restore_layout(o.docker,this.layout,this.buildDefaultLayout.bind(this));o.docker.on(B.EVENT.LAYOUT_CHANGED,function(){q.save_current_layout("SQLEditor/Layout",o.docker)});o.sql_panel_obj=o.docker.findPanels("sql_panel")[0];o.history_panel=o.docker.findPanels("history")[0];o.data_output_panel=o.docker.findPanels("data_output")[0];o.explain_panel=o.docker.findPanels("explain")[0];o.messages_panel=o.docker.findPanels("messages")[0];o.notifications_panel=o.docker.findPanels("notifications")[0];o.sql_panel_obj.on(B.EVENT.RESIZE_ENDED,function(){setTimeout(function(){if(o&&o.query_tool_obj){o.query_tool_obj.refresh()}},200)});o.render_history_grid();q.Events.on("pgadmin:query_tool:connected:"+o.handler.transId,function(){o.fetch_query_history()});b.renderNotificationsGrid(o.notifications_panel);var c=k('<textarea id="sql_query_tool" tabindex="-1"></textarea>');var u=k('<div id="output-panel" tabindex="0"></div>').append(c);o.sql_panel_obj.$container.find(".pg-panel-content").append(u);o.query_tool_obj=F.fromTextArea(c.get(0),{tabindex:"0",lineNumbers:true,styleSelectedText:true,mode:o.handler.server_type==="gpdb"?"text/x-gpsql":"text/x-pgsql",foldOptions:{widget:"…"},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:q.editor_shortcut_keys,scrollbarStyle:"simple",dragDrop:false});if(o.handler.is_query_tool){o.query_tool_obj.setOption("dragDrop",true);o.query_tool_obj.on("drop",function(e,t){var i=null;try{i=JSON.parse(t.dataTransfer.getData("text"));if(t.preventDefault){t.preventDefault()}if(t.stopPropagation){t.stopPropagation()}}catch(e){return}var n=e.coordsChar({left:t.x,top:t.y});e.replaceRange(i.text,n);e.focus();e.setSelection(K({},n,{ch:n.ch+i.cur.from}),K({},n,{ch:n.ch+i.cur.to}))})}q.Events.on("pgadmin:query_tool:sql_panel:focus",function(){o.query_tool_obj.focus()});if(!o.preferences.new_browser_tab){S.each(window.top.pgAdmin.Browser.docker.findPanels("frm_datagrid"),function(e){if(e.isVisible()){e.on(B.EVENT.CLOSING,function(){return o.handler.check_needed_confirmations_before_closing_panel(true)});e.on(B.EVENT.GAIN_FOCUS,function(){var e=k(this.$container),t=o.handler.transId;if(!e.hasClass("wcPanelTabContentHidden")){setTimeout(function(){o.handler.gridView.query_tool_obj.focus()},200);q.Events.trigger("pgadmin:query_tool:panel:gain_focus:"+t)}});e.on(B.EVENT.LOST_FOCUS,function(){var e=k(this.$container),t=o.handler.transId;if(e.hasClass("wcPanelTabContentHidden")){q.Events.trigger("pgadmin:query_tool:panel:lost_focus:"+t)}})}});q.Events.on("pgadmin:query_tool:panel:gain_focus:"+o.handler.transId,o.gain_focus,o);q.Events.on("pgadmin:query_tool:panel:lost_focus:"+o.handler.transId,o.lost_focus,o)}setTimeout(function(){o.query_tool_obj.focus()},500);F.registerHelper("hint","sql",function(e){var t=[],i=e.getDoc(),l=i.getCursor(),n=l.ch,r={editor:e,url:f("sqleditor.autocomplete",{trans_id:o.transId}),data:t,current_line:l.line,hint_render:function e(t,i,n){var r=document.createElement("span");switch(n.type){case"database":r.className="sqleditor-hint pg-icon-"+n.type;break;case"datatype":r.className="sqleditor-hint icon-type";break;case"keyword":r.className="fa fa-key";break;case"table alias":r.className="fa fa-at";break;default:r.className="sqleditor-hint icon-"+n.type}r.appendChild(document.createTextNode(n.text));t.appendChild(r)}};t.push(i.getValue());t.push(i.getRange({line:0,ch:0},{line:r.current_line,ch:n}));return{then:function(a){var s=this;k.ajax({url:s.url,method:"POST",contentType:"application/json",data:JSON.stringify(s.data)}).done(function(e){var i=[];S.each(e.data.result,function(e,t){i.push({text:t,type:e.object_type,render:s.hint_render})});i.sort(function(e,t){var i=e.text.toLowerCase(),n=t.text.toLowerCase();if(i<n)return-1;if(i>n)return 1;return 0});var t=s.editor.getTokenAt(l),n,r,o;if(t.end>l.ch){t.end=l.ch;t.string=t.string.slice(0,l.ch-t.start)}if(t.string.match(/^[.`\w@]\w*$/)){o=t.string;n=t.start;r=t.end}else{n=r=l.ch;o=""}if(o.charAt(0)=="."||o.charAt(0)=="``")n+=1;a({list:i,from:{line:s.current_line,ch:n},to:{line:s.current_line,ch:r}})}).fail(function(e){return p.handleLoginRequiredAndTransactionRequired(h,s,e,null,[],false)})}.bind(r)}});k(".dropdown-submenu").on("mouseenter",function(){var e=k(this).find("ul.dropdown-menu");var t=k(e).offset();if(t.left+e.width()>k(window).width()){var i=-k(e).width();e.css("left",i)}}).on("mouseleave",function(){var e=k(this).find("ul.dropdown-menu");e.css("left","")});o.reflectPreferences();if(o.preferences.auto_commit){k(".auto-commit").removeClass("visibility-hidden")}else{k(".auto-commit").addClass("visibility-hidden")}if(o.preferences.auto_rollback){k(".auto-rollback").removeClass("visibility-hidden")}else{k(".auto-rollback").addClass("visibility-hidden")}q.onPreferencesChange("sqleditor",function(){o.reflectPreferences()});if(o.preferences.new_browser_tab){q.bind_beforeunload();setInterval(function(){if(window.opener.pgAdmin){o.reflectPreferences()}},1e3)}},render_grid:function e(t,i,n,r,o){var c=this;c.handler.numberOfModifiedCells=0;c.handler.reset_data_store();c.handler.rows_to_disable=new Array;c.handler.temp_new_rows=new Array;c.handler.primary_keys_data={};c.client_primary_key=r;c.client_primary_key_counter=0;if(c.handler.slickgrid){c.handler.slickgrid.destroy()}if(!S.isArray(t)||!S.size(t)){t=[]}var a=[],s;var l=c.handler["col_size"],d=c.handler.query,u=d.match(/select.*from\s+\w+\.*(\w+)/i);if(!u){s=I.getHash(d)}else{s=u[1]}c.handler["table_name"]=s;l[s]=l[s]||{};S.each(i,function(e){e.display_name=S.escape(e.display_name);e.column_type=S.escape(e.column_type);var t={id:e.name,pos:e.pos,field:e.name,name:e.label,display_name:e.display_name,column_type:e.column_type,column_type_internal:e.column_type_internal,not_null:e.not_null,has_default_val:e.has_default_val,is_array:e.is_array,can_edit:e.can_edit};var i=e.column_type.trim();var n=e.name.length>i.length?S.escape(e.display_name):i;if(S.isUndefined(l[s][e.name])){t["width"]=I.calculateColumnWidth(n);l[s][e.name]=t["width"]}else{t["width"]=l[s][e.name]}if(e.cell=="oid"&&e.name=="oid"){t["editor"]=null}else if(e.cell=="Json"){t["editor"]=e.can_edit?U.Editors.JsonText:U.Editors.ReadOnlyJsonText;t["formatter"]=U.Formatters.JsonString}else if(e.cell=="number"||e.cell=="oid"||k.inArray(e.type,["xid","real"])!==-1){t["editor"]=e.can_edit?U.Editors.CustomNumber:U.Editors.ReadOnlyText;t["formatter"]=U.Formatters.Numbers}else if(e.cell=="boolean"){t["editor"]=e.can_edit?U.Editors.Checkbox:U.Editors.ReadOnlyCheckbox;t["formatter"]=U.Formatters.Checkmark}else if(e.cell=="binary"){t["formatter"]=U.Formatters.Binary}else if(e.cell=="geometry"||e.cell=="geography"){t["width"]+=28;t["can_edit"]=false}else{t["editor"]=e.can_edit?U.Editors.pgText:U.Editors.ReadOnlypgText;t["formatter"]=U.Formatters.Text}if(!S.isUndefined(e.can_edit)){t["width"]+=12;var r="";if(e.can_edit)r=C("Editable column");else r=C("Read-only column");t["toolTip"]=r}a.push(t)});var f=new N;a=c.grid_columns=f.getColumnDefinitions(a);S.each(a,function(e){if(e.column_type_internal=="geometry"||e.column_type_internal=="geography"){O.add_header_button(e)}if(!S.isUndefined(e.can_edit)){I.addEditableIcon(e,e.can_edit)}});if(o){a[0]["width"]=I.calculateColumnWidth(o)}var h={editable:true,enableAddRow:n,enableCellNavigation:true,enableColumnReorder:false,asyncEditorLoading:false,autoEdit:false};var p=k("#datagrid");var m=k(this.data_output_panel.$container.parent().parent()).height()-35;p.height(m);var g=c.dataView=new U.Data.DataView,v=c.grid=new U.Grid(p,g,a,h);g.getItemMetadata=function(e){var t="",i=c.handler.data_store;if(S.has(c.handler,"data_store")){if(e in i.added_index&&i.added_index[e]in i.added){t="new_row";if(i.added[i.added_index[e]].err){t+=" error"}}else if(e in i.updated_index&&e in i.updated){t="updated_row";if(i.updated[i.updated_index[e]].err){t+=" error"}}}if(!S.isUndefined(c.handler.rows_to_disable)&&c.handler.rows_to_disable.length>0&&S.indexOf(c.handler.rows_to_disable,e)!==-1){t+=" disabled_row"}return{cssClasses:t}};v.registerPlugin(new U.AutoTooltips({enableForHeaderCells:false}));v.registerPlugin(new D);v.setSelectionModel(new E);v.registerPlugin(f);v.registerPlugin(new U.AutoColumnSize);var _=new U.Plugins.HeaderButtons;_.onCommand.subscribe(function(e,t){var i=t.command;if(i==="view-geometries"){var n=t.grid.getColumns();var r=n.indexOf(t.column);var o=t.grid.getSelectedRows();if(o.length===0){if(c.handler.has_more_rows){c.fetch_next_all(function(){f.onGridSelectAll.notify(t,new U.EventData);var e=t.grid.getData().getItems();O.render_geometries(c.handler,e,n,r)})}else{f.onGridSelectAll.notify(t,new U.EventData);var a=t.grid.getData().getItems();O.render_geometries(c.handler,a,n,r)}}else{var s=t.grid.getData().getItems();var l=S.map(o,function(e){return s[e]});O.render_geometries(c.handler,l,n,r)}}});v.registerPlugin(_);var b={keys:S.isEmpty(c.handler.primary_keys)&&c.handler.has_oids?c.handler.oids:c.handler.primary_keys,vals:t,columns:i,grid:v,selection:v.getSelectionModel(),editor:c,client_primary_key:c.client_primary_key,has_oids:c.handler.has_oids};c.handler.slickgrid=v;c.handler.slickgrid.CSVOptions={quoting:c.preferences.results_grid_quoting,quote_char:c.preferences.results_grid_quote_char,field_separator:c.preferences.results_grid_field_separator};if(b.selection){b.selection.onSelectedRangesChanged.subscribe(M.bind(b))}v.onColumnsResized.subscribe(function(){var e=this.getColumns();S.each(e,function(e){var t=c.handler["col_size"];t[c.handler["table_name"]][e["id"]]=e["width"]})}.bind(v));f.onBeforeGridSelectAll.subscribe(function(e,t){if(c.handler.has_more_rows){e.stopImmediatePropagation();c.fetch_next_all(function(){f.onGridSelectAll.notify(t,new U.EventData)})}});f.onBeforeGridColumnSelectAll.subscribe(function(e,t){if(c.handler.has_more_rows){e.stopImmediatePropagation();c.fetch_next_all(function(){f.onGridColumnSelectAll.notify(t,new U.EventData)})}});g.onRowCountChanged.subscribe(function(){v.updateRowCount();v.render()});g.onRowsChanged.subscribe(function(e,t){v.invalidateRows(t.rows);v.render()});v.onBeforeEditCell.subscribe(function(e,t){if(t.column.column_type_internal=="bytea"||t.column.column_type_internal=="bytea[]"){return false}var i=t.item;if(c.handler.rows_to_disable&&S.contains(c.handler.rows_to_disable,t.row)){return false}if(c.handler.can_edit&&i&&c.client_primary_key in i){var n=i[c.client_primary_key],r=c.handler.primary_keys,o={};if(n in c.handler.primary_keys_data){return}S.each(r,function(e,t){o[t]=i[t]});c.handler.primary_keys_data[n]=o}});v.onKeyDown.subscribe(function(e,t){var i=65;var n=e.keyCode;var r=e.ctrlKey||e.metaKey;if(r&&n==i&&c.handler.has_more_rows){c.fetch_next_all(function(){P(e,t)})}else{P(e,t)}});v.onCellChange.subscribe(function(e,t){var i=t.grid.getColumns()[t.cell].field,n=t.item[i],r=t.item[c.client_primary_key]||null,o={};c.handler.numberOfModifiedCells++;t.grid.addCellCssStyles(c.handler.numberOfModifiedCells,Y({},t.row,Y({},i,"highlighted_grid_cells")));var a=t.grid,s=a.getDataItem(t.row),l=c.primary_keys&&S.all(S.values(S.pick(s,c.primary_keys)),function(e){return e!=undefined});if(l&&c.handler.temp_new_rows){var d=c.handler.temp_new_rows.indexOf(t.row);if(d>-1){c.handler.temp_new_rows.splice(d,1)}}o[i]=n;if(r){if(r in c.handler.data_store.added){S.extend(c.handler.data_store.added[r]["data"],o);c.handler.data_store.added[r]["err"]=false}else if(r in c.handler.data_store.updated){S.extend(c.handler.data_store.updated[r]["data"],o);c.handler.data_store.updated[r]["err"]=false}else{c.handler.data_store.updated[r]={err:false,data:o,primary_keys:c.handler.primary_keys_data[r]};c.handler.data_store.updated_index[t.row]=r}}k("#btn-save-data").prop("disabled",false)}.bind(b));v.onAddNewRow.subscribe(function(e,t){var i=t.column,n=t.item,r=this.grid.getDataLength(),o=(c.client_primary_key_counter++).toString(),a=this.grid.getData();if(S.isUndefined(n[0])){c.handler.temp_new_rows.push(r)}if(n){n[c.client_primary_key]=o}a.addItem(n);c.handler.data_store.added[o]={err:false,data:n};c.handler.data_store.added_index[r]=o;var s={};s[i.name]=S.where(this.columns,{pos:i.pos})[0]["type"];v.updateRowCount();v.render();var l=a.getRowByItem(n);c.handler.numberOfModifiedCells++;t.grid.addCellCssStyles(c.handler.numberOfModifiedCells,Y({},l,Y({},i.field,"highlighted_grid_cells")));k("#btn-save-data").prop("disabled",false)}.bind(b));v.onViewportChanged.subscribe(function(e,t){var i=t.grid.getRenderedRange(),n=t.grid.getDataLength();if(c.handler.has_more_rows&&!c.handler.fetching_rows&&i.bottom>n-100){setTimeout(c.fetch_next.bind(c))}});v.onValidationError.subscribe(function(e,t){T.error(t.validationResults.msg)});k(window).resize(function(){if(c.data_output_panel.isVisible()){c.grid_resize(v)}});c.data_output_panel.on(B.EVENT.RESIZE_ENDED,function(){if(c.data_output_panel.isVisible()){c.grid_resize(v)}});c.data_output_panel.on(B.EVENT.VISIBILITY_CHANGED,function(){if(c.data_output_panel.isVisible())c.grid_resize(v)});for(var y=0;y<t.length;y++){var w={};for(var x=1;x<a.length;x++){w[a[x]["field"]]=t[y][a[x]["pos"]]}w[c.client_primary_key]=(c.client_primary_key_counter++).toString();t[y]=w}g.setItems(t,c.client_primary_key)},fetch_next_all:function e(t){this.fetch_next(true,t)},fetch_next:function e(t,i){var n=this,r="";n.handler.fetching_rows=true;k("#btn-flash").prop("disabled",true);k("#btn-download").prop("disabled",true);if(t){n.handler.trigger("pgadmin-sqleditor:loading-icon:show",C("Fetching all records..."));r=f("sqleditor.fetch_all",{trans_id:n.transId,fetch_all:1})}else{r=f("sqleditor.fetch",{trans_id:n.transId})}k.ajax({url:r,method:"GET"}).done(function(e){n.handler.has_more_rows=e.data.has_more_rows;k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false);n.handler.trigger("pgadmin-sqleditor:loading-icon:hide");n.update_grid_data(e.data.result);n.handler.fetching_rows=false;if(typeof i=="function"){i()}}).fail(function(e){k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false);n.handler.trigger("pgadmin-sqleditor:loading-icon:hide");n.handler.has_more_rows=false;n.handler.fetching_rows=false;if(typeof i=="function"){i()}var t=p.handleQueryToolAjaxError(h,n,e,null,[],false);n.update_msg_history(false,t)})},update_grid_data:function e(t){this.dataView.beginUpdate();for(var i=0;i<t.length;i++){var n={};for(var r=1;r<this.grid_columns.length;r++){n[this.grid_columns[r]["field"]]=t[i][this.grid_columns[r]["pos"]]}n[this.client_primary_key]=(this.client_primary_key_counter++).toString();this.dataView.addItem(n)}this.dataView.endUpdate()},grid_resize:function e(t){var i=k("#datagrid").height(),n=k(this.data_output_panel.$container.parent().parent()).height()-35,r=t.getViewport(),o=t.getRenderedRange(),a=t.getActiveCell();if(i!=n){k("#datagrid").css({height:n+"px"})}t.resizeCanvas();if(a){t.scrollCellIntoView(a.row,a.cell)}if(r.top==o.top){return}else if(r.bottom-2==o.bottom){t.scrollRowIntoView(r.bottom)}else{t.scrollRowIntoView(r.bottom-2)}},fetch_query_history:function e(){var i=this;k.ajax({url:f("sqleditor.get_query_history",{trans_id:i.handler.transId}),method:"GET",contentType:"application/json"}).done(function(e){e.data.result.map(function(e){var t=JSON.parse(e);t.start_time=new Date(t.start_time);i.history_collection.add(t)})}).fail(function(){})},render_history_grid:function e(){var t=this;if(!t.history_collection){t.history_collection=new H([])}if(!t.historyComponent){t.historyComponent=new W(k("#history_grid"),t.history_collection);t.historyComponent.onCopyToEditorClick(function(e){t.query_tool_obj.setValue(e);t.sql_panel_obj.focus();setTimeout(function(){t.query_tool_obj.focus();t.query_tool_obj.setCursor(t.query_tool_obj.lineCount(),0)},100)});t.historyComponent.render();t.history_panel.off(B.EVENT.VISIBILITY_CHANGED);t.history_panel.on(B.EVENT.VISIBILITY_CHANGED,function(){if(t.history_panel.isVisible()){setTimeout(function(){t.historyComponent.focus()},100)}})}if(!t.handler.is_query_tool){t.historyComponent.setEditorPref({copy_to_editor:false})}},on_delete:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:button:deleterow",t,t.handler)},_stopEventPropogation:function e(t){t=t||window.event;t.cancelBubble=true;t.stopPropagation();t.stopImmediatePropagation();t.preventDefault()},_closeDropDown:function e(t){var i=t&&(t.currentTarget||t.target);if(i){k(i).closest(".editor-toolbar").find(".show").removeClass("show")}},on_save_file:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.handler.close_on_save=false;i.handler.trigger("pgadmin-sqleditor:button:save_file")},on_save_as:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.handler.close_on_save=false;i.handler.trigger("pgadmin-sqleditor:button:save_file",i,i.handler,true)},on_find:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("find")},on_find_next:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("findNext")},on_find_previous:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("findPrev")},on_replace:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("replace")},on_replace_all:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("replaceAll")},on_find_persistent:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("findPersistent")},on_jump:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.query_tool_obj.execCommand("jumpToLine")},on_show_filter:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:button:show_filter",t,t.handler)},on_include_filter:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.handler.trigger("pgadmin-sqleditor:button:include_filter",i,i.handler)},on_exclude_filter:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.handler.trigger("pgadmin-sqleditor:button:exclude_filter",i,i.handler)},on_remove_filter:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.handler.trigger("pgadmin-sqleditor:button:remove_filter",i,i.handler)},on_cancel:function e(){k("#filter").addClass("d-none");k("#editor-panel").removeClass("sql-editor-busy-fetching")},on_copy_row:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:button:copy_row",t,t.handler)},on_paste_row:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:button:paste_row",t,t.handler)},on_limit_change:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:button:limit",t,t.handler)},on_save_data:function e(){this.handler.history_query_source=$.SAVE_DATA;_.saveDataChanges(this.handler)},on_flash:function e(){this.handler.history_query_source=$.EXECUTE;_.executeQuery(this.handler)},on_cancel_query:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:button:cancel-query",t,t.handler)},on_comment_line_code:function e(){_.commentLineCode(this.handler)},on_uncomment_line_code:function e(){_.uncommentLineCode(this.handler)},on_toggle_comment_block_code:function e(){_.commentBlockCode(this.handler)},on_indent_code:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:indent_selected_code",t,t.handler)},on_unindent_code:function e(){var t=this;t.handler.trigger("pgadmin-sqleditor:unindent_selected_code",t,t.handler)},on_clear:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);if(i.handler.is_query_changed){T.confirm(C("Unsaved changes"),C("Are you sure you wish to discard the current changes?"),function(){i.query_tool_obj.setValue("");setTimeout(function(){i.query_tool_obj.focus()},200)},function(){return true}).set("labels",{ok:C("Yes"),cancel:C("No")})}else{i.query_tool_obj.setValue("")}},on_clear_history:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);if(!i.history_collection.length()){return}T.confirm(C("Clear history"),C("Are you sure you wish to clear the history?")+"</br>"+C("This will remove all of your query history from this and other sessions for this database."),function(){if(i.history_collection){i.history_collection.reset()}if(i.handler.is_query_tool){k.ajax({url:f("sqleditor.clear_query_history",{trans_id:i.handler.transId}),method:"DELETE",contentType:"application/json"}).done(function(){}).fail(function(){})}setTimeout(function(){i.query_tool_obj.focus()},200)},function(){return true}).set("labels",{ok:C("Yes"),cancel:C("No")})},on_auto_commit:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:auto_commit",i,i.handler)},on_auto_rollback:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:auto_rollback",i,i.handler)},on_explain:function e(t){this._stopEventPropogation(t);this._closeDropDown(t);this.handler.history_query_source=$.EXPLAIN;_.explain(this.handler)},on_explain_analyze:function e(t){this._stopEventPropogation(t);this._closeDropDown(t);this.handler.history_query_source=$.EXPLAIN_ANALYZE;_.explainAnalyze(this.handler)},on_explain_verbose:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:explain-verbose",i,i.handler)},on_explain_costs:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:explain-costs",i,i.handler)},on_explain_buffers:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:explain-buffers",i,i.handler)},on_explain_timing:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:explain-timing",i,i.handler)},on_explain_summary:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:explain-summary",i,i.handler)},on_explain_settings:function e(t){var i=this;this._stopEventPropogation(t);i.handler.trigger("pgadmin-sqleditor:button:explain-settings",i,i.handler)},do_not_close_menu:function e(t){t.stopPropagation()},on_file_load:function e(t){var i=this;this._stopEventPropogation(t);this._closeDropDown(t);i.handler.trigger("pgadmin-sqleditor:button:load_file",i,i.handler)},on_download:function e(){_.download(this.handler)},keyAction:function e(t){var i="";i=v.processEventQueryTool(this.handler,_,t,this.docker);if(!S.isNull(i)&&!S.isUndefined(i)&&i!=""){setTimeout(function(){q.Events.trigger("pgadmin:query_tool:".concat(i,":focus"))},100)}},on_commit_transaction:function e(){this.handler.close_on_idle_transaction=false;this.handler.history_query_source=$.COMMIT;_.executeCommit(this.handler)},on_rollback_transaction:function e(){this.handler.close_on_idle_transaction=false;this.handler.history_query_source=$.ROLLBACK;_.executeRollback(this.handler)}});var Z=function e(){this.initialize.apply(this,arguments)};S.extend(Z.prototype,n.Events,{initialize:function e(t){var n=this;this.container=t;this.state={};this.csrf_token=h.csrf_token;x.modifyAlertifyAnimation();if(!T.dlgGetServerPass){T.dialog("dlgGetServerPass",function e(){return{main:function e(t,i){this.set("title",t);this.setting("message",i)},setup:function e(){return{buttons:[{text:C("OK"),key:13,className:"btn btn-primary"},{text:C("Cancel"),key:27,className:"btn btn-danger"}],focus:{element:"#password",select:true},options:{modal:0,resizable:false,maximizable:false,pinnable:false}}},build:function e(){},settings:{message:null},prepare:function e(){this.setContent(this.setting("message"))},callback:function e(t){if(t.button.text==C("OK")){var i=k(this.elements.content).find("#frmPassword").serialize();n.init_connection(false,i)}}}})}this.on("pgadmin-datagrid:transaction:created",function(e){n.transId=e.gridTransId;n.warn_before_continue()});q.Events.on("pgadmin:user:logged-in",function(){n.initTransaction()})},saveState:function e(t,i){if(t){this.state={fn:t,args:i}}else{this.state={}}},initTransaction:function e(){var n=this,t;if(n.is_query_tool){t="datagrid.initialize_query_tool";if(n.url_params.did){t="datagrid.initialize_query_tool_with_did"}}else{t="datagrid.initialize_datagrid"}var i=f(t,K({},n.url_params,{trans_id:n.transId}));k.ajax({url:i,type:"POST",data:n.is_query_tool?null:JSON.stringify(n.url_params.sql_filter),contentType:"application/json"}).done(function(e){q.Events.trigger("pgadmin:query_tool:connected:"+n.transId,e.data)}).fail(function(e,t,i){q.Events.trigger("pgadmin:query_tool:connected_fail:"+n.transId,e,i)})},handle_connection_lost:function e(t,i){if(i.responseJSON!==undefined&&i.responseJSON.data&&!i.responseJSON.data.conn_id){this.init_connection(t)}else if(i.data!==undefined&&i.data.data&&!i.data.data.conn_id){this.init_connection(t)}else{this.warn_before_continue()}},handle_cryptkey_missing:function e(){var t=this;q.set_master_password("",function(){t.warn_before_continue()})},warn_before_continue:function e(){var i=this;T.confirm(C("Connection Warning"),'<p style="float:left">'+'<span class="fa fa-exclamation-triangle warn-icon" aria-hidden="true">'+"</span>"+"</p>"+'<p style="display: inline-block;">'+'<span class="warn-header">'+C("The application has lost the database connection:")+"</span>"+"<br>"+'<span class="warn-body">'+C("⁃ If the connection was idle it may have been forcibly disconnected.")+"<br>"+C("⁃ The application server or database server may have been restarted.")+"<br>"+C("⁃ The user session may have timed out.")+"</span>"+"<br>"+'<span class="warn-footer">'+C("Do you want to continue and establish a new session?")+"</span>"+"</p>",function(){if("fn"in i.state){var e=i.state["fn"],t=i.state["args"];i.saveState();if(t.indexOf("connect")==-1){t.push("connect")}i[e].apply(i,t)}},function(){i.saveState()}).set({labels:{ok:C("Continue"),cancel:C("Cancel")}})},init_connection:function e(n,t){var r=this;k.post(f("NODE-server.connect_id",{gid:this.url_params.sgid,sid:this.url_params.sid}),t).done(function(e){if(e.success==1){T.success(e.info);if(n){r.initTransaction()}else if("fn"in r.state){var t=r.state["fn"],i=r.state["args"];r.saveState();r[t].apply(r,i)}}}).fail(function(e){var t=p.handleQueryToolAjaxError(h,r,e,null,[],false);T.dlgGetServerPass(C("Connect to Server"),t)})},start:function e(t,i,n){var r=this;r.is_query_tool=i.is_query_tool==="true"?true:false;r.rows_affected=0;r.marked_line_no=0;r.has_more_rows=false;r.fetching_rows=false;r.close_on_save=false;r.close_on_idle_transaction=false;r.last_transaction_status=-1;r.server_type=i.server_type;r.url_params=i;r.is_transaction_buttons_disabled=true;if(r.gridView)return;r.gridView=new G({el:r.container,handler:r,layout:n});r.transId=r.gridView.transId=t;r.gridView.current_file=undefined;r.gridView.render();r.trigger("pgadmin-sqleditor:loading-icon:hide");r.gridView.set_editor_title("(".concat(C("Obtaining connection...")," ").concat(S.unescape(i.title)));var o=function e(){var t=[];if(r.is_query_tool){t=["#btn-flash","#btn-explain","#btn-explain-analyze"]}else{t=["#btn-flash"]}t.forEach(function(e){k(e).prop("disabled",false)});k("#btn-conn-status i").removeClass("obtaining-conn");r.gridView.set_editor_title(S.unescape(i.title))};q.Events.on("pgadmin:query_tool:connected:"+t,o);q.Events.on("pgadmin:query_tool:connected_fail:"+t,o);q.Events.on("pgadmin:query_tool:connected:"+t,function(e){r.gridView.set_server_version(e.serverVersion)});q.Events.on("pgadmin:query_tool:connected_fail:"+t,function(e,t){T.pgRespErrorNotify(e,t)});r.initTransaction();k(window).on("keydown",function(e){if(r.gridView.keyAction){r.gridView.keyAction(e)}});if(r.is_query_tool){if(i.query_url){k.ajax({url:i.query_url,type:"GET"}).done(function(e){r.gridView.query_tool_obj.refresh();if(e&&e!==""){r.gridView.query_tool_obj.setValue(e)}r.init_events()}).fail(function(e){var t="";r.init_events();t=p.handleQueryToolAjaxError(h,r,e,null,[],false);q.report_error(w(C("Error fetching SQL for script: %s.")).sprintf(t).value())})}else{r.init_events()}}else{r.init_events();r.gridView.query_tool_obj.setOption("readOnly",true);var a=r.gridView.query_tool_obj.getWrapperElement();if(a){a.className+=" bg-gray-lighter opacity-5 hide-cursor-workaround"}r.disable_tool_buttons(true);q.Events.on("pgadmin:query_tool:connected:"+t,function(){r.check_data_changes_to_execute_query()})}},init_events:function e(){var t=this;h.Browser.Events.on("pgadmin-storage:finish_btn:select_file",t._select_file_handler,t);h.Browser.Events.on("pgadmin-storage:finish_btn:create_file",t._save_file_handler,t);if(t.is_query_tool){t.gridView.query_tool_obj.on("change",t._on_query_change.bind(t))}t.on("pgadmin-sqleditor:button:load_file",t._load_file,t);t.on("pgadmin-sqleditor:button:save_file",t._save_file,t);t.on("pgadmin-sqleditor:button:deleterow",t._delete,t);t.on("pgadmin-sqleditor:button:show_filter",t._show_filter,t);t.on("pgadmin-sqleditor:button:include_filter",t._include_filter,t);t.on("pgadmin-sqleditor:button:exclude_filter",t._exclude_filter,t);t.on("pgadmin-sqleditor:button:remove_filter",t._remove_filter,t);t.on("pgadmin-sqleditor:button:copy_row",t._copy_row,t);t.on("pgadmin-sqleditor:button:paste_row",t._paste_row,t);t.on("pgadmin-sqleditor:button:limit",t._set_limit,t);t.on("pgadmin-sqleditor:button:cancel-query",t._cancel_query,t);t.on("pgadmin-sqleditor:button:auto_rollback",t._auto_rollback,t);t.on("pgadmin-sqleditor:button:auto_commit",t._auto_commit,t);t.on("pgadmin-sqleditor:button:explain-verbose",t._explain_verbose,t);t.on("pgadmin-sqleditor:button:explain-costs",t._explain_costs,t);t.on("pgadmin-sqleditor:button:explain-buffers",t._explain_buffers,t);t.on("pgadmin-sqleditor:button:explain-timing",t._explain_timing,t);t.on("pgadmin-sqleditor:button:explain-summary",t._explain_summary,t);t.on("pgadmin-sqleditor:button:explain-settings",t._explain_settings,t);t.on("pgadmin-sqleditor:indent_selected_code",t._indent_selected_code,t);t.on("pgadmin-sqleditor:unindent_selected_code",t._unindent_selected_code,t)},check_data_changes_to_execute_query:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this;if(S.has(n,"data_store")&&(S.size(n.data_store.added)||S.size(n.data_store.updated)||S.size(n.data_store.deleted))){T.confirm(C("Unsaved changes"),C("The data has been modified, but not saved. Are you sure you wish to discard the changes?"),function(){if(n.is_query_tool){n._execute_sql_query(t,i)}else{n._execute_view_data_query()}},function(){return true}).set("labels",{ok:C("Yes"),cancel:C("No")})}else{if(n.is_query_tool){n._execute_sql_query(t,i)}else{n._execute_view_data_query()}}},_execute_view_data_query:function e(){var i=this,t=f("sqleditor.view_data_start",{trans_id:i.transId});i.query_start_time=new Date;i.rows_affected=0;i._init_polling_flags();i.has_more_rows=false;i.fetching_rows=false;i.trigger("pgadmin-sqleditor:loading-icon:show",C("Running query..."));k("#btn-flash").prop("disabled",true);k("#btn-download").prop("disabled",true);i.trigger("pgadmin-sqleditor:loading-icon:message",C("Waiting for the query to complete..."));if(arguments.length>0&&arguments[arguments.length-1]=="connect"){t+="?connect=1"}k.ajax({url:t,method:"GET"}).done(function(e){if(e.data.status){i.can_edit=e.data.can_edit;i.can_filter=e.data.can_filter;i.info_notifier_timeout=e.data.info_notifier_timeout;i.gridView.query_tool_obj.setValue(e.data.sql);i.query=e.data.sql;if(i.can_filter&&e.data.filter_applied){k("#btn-filter").removeClass("btn-secondary");k("#btn-filter-dropdown").removeClass("btn-secondary");k("#btn-filter").addClass("btn-primary");k("#btn-filter-dropdown").addClass("btn-primary")}else{k("#btn-filter").removeClass("btn-primary");k("#btn-filter-dropdown").removeClass("btn-primary");k("#btn-filter").addClass("btn-secondary");k("#btn-filter-dropdown").addClass("btn-secondary")}k("#btn-copy-row").prop("disabled",true);k("#btn-paste-row").prop("disabled",true);k(".limit").val(e.data.limit);i._poll()}else{i.trigger("pgadmin-sqleditor:loading-icon:hide");i.update_msg_history(false,e.data.result)}}).fail(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");var t=p.handleQueryToolAjaxError(h,i,e,"_execute_view_data_query",[],true);i.update_msg_history(false,t)})},_execute_sql_query:function e(t,i){var n=this,r="";n.has_more_rows=false;n.fetching_rows=false;if(!S.isUndefined(n.special_sql)){r=n.special_sql}else{var o=n.gridView.query_tool_obj.getSelection();if(o.length>0)r=o;else r=n.gridView.query_tool_obj.getValue()}var a=new d.ExecuteQuery(this,h.Browser.UserManagement);a.execute(r,t,i)},call_render_after_poll:function e(t){R.callRenderAfterPoll(this,T,t)},_poll:function e(){var t=new d.ExecuteQuery(this,h.Browser.UserManagement);t.delayedPoll(this)},_render:function e(s){var t=this;t.colinfo=s.colinfo;t.primary_keys=S.isEmpty(s.primary_keys)&&s.has_oids?s.oids:s.primary_keys;t.client_primary_key=s.client_primary_key;t.cell_selected=false;t.selected_model=null;t.changedModels=[];t.has_oids=s.has_oids;t.oids=s.oids;k(".sql-editor-explain").empty();t.explain_plan=false;if((t.primary_keys===null||t.primary_keys===undefined||S.size(t.primary_keys)===0)&&t.has_oids==false)t.can_edit=false;else t.can_edit=true;if(t.can_filter){k(".limit").prop("disabled",false);k(".limit").addClass("limit-enabled");k("#btn-filter").prop("disabled",false);k("#btn-filter-dropdown").prop("disabled",false)}k("#btn-save-data").prop("disabled",true);k("#btn-delete-row").prop("disabled",true);if(!t.can_edit){k("#btn-delete-row").prop("disabled",true);k("#btn-copy-row").prop("disabled",true);k("#btn-paste-row").prop("disabled",true)}t._fetch_column_metadata.call(t,s,function(){var e=this;e.trigger("pgadmin-sqleditor:loading-icon:message",C("Loading data from the database server and rendering..."),e);e.total_time=A.calculateQueryRunTime(e.query_start_time,e.query_end_time);var t=w(C("Successfully run. Total query runtime: %s.")).sprintf(e.total_time).value();var i=w(C("%s rows affected.")).sprintf(e.rows_affected).value();if(e.info_notifier_timeout>=0){T.success(t+" "+i,e.info_notifier_timeout)}var n=t+"\n"+i;if(!S.isNull(s.additional_messages)&&!S.isUndefined(s.additional_messages)){n=s.additional_messages+"\n"+n}e.update_msg_history(true,n,false);var r=[],o=null;if(s.result&&!S.isEmpty(e.colinfo)&&e.colinfo[0].name=="QUERY PLAN"&&!S.isEmpty(s.types)&&s.types[0]&&s.types[0].typname==="json"){o=JSON.parse(s.result[0][0])}if(o&&o[0]&&o[0].hasOwnProperty("Plan")&&S.isObject(o[0]["Plan"])){var a=[JSON.stringify(o,null,2)];r.push(a);e.gridView.data_output_panel.focus();setTimeout(function(){e.gridView.render_grid(r,e.columns,e.can_edit,e.client_primary_key,0);e.gridView.explain_panel.focus();l.DrawJSONPlan(k(".sql-editor-explain"),o)},10)}else{e.gridView.data_output_panel.focus();setTimeout(function(){e.gridView.render_grid(s.result,e.columns,e.can_edit,e.client_primary_key,s.rows_affected)},10)}e.trigger("pgadmin-sqleditor:loading-icon:hide");k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false)}.bind(t))},_fetch_column_metadata:function e(t,i){var n=t.colinfo,d=t.primary_keys,c=[],u=this;var f=new Array;S.each(t.types,function(e){f[e.oid]=[e.typname]});S.each(n,function(i){var n=false,e=u.can_edit&&(!u.is_query_tool||i.is_editable);if(e&&S.size(d)>0){S.each(d,function(e,t){if(t===i.name)n=true})}var t="",r="",o;var a=f[i.type_code]?f[i.type_code][0]:f[f.length-1][0]?f[f.length-1][0]:"unknown";if(!n)t+=a;else t+="[PK] "+a;if(i.precision&&i.precision>=0&&i.precision!=65535){t+=" ("+i.precision;t+=i.scale&&i.scale!=65535?","+i.scale+")":")"}switch(a){case"oid":o="oid";break;case"json":case"json[]":case"jsonb":case"jsonb[]":o="Json";break;case"smallint":case"smallint[]":case"integer":case"integer[]":case"bigint":case"bigint[]":case"decimal":case"decimal[]":case"numeric":case"numeric[]":case"real":case"real[]":case"double precision":case"double precision[]":o="number";break;case"boolean":o="boolean";break;case"character":case"character[]":case'"char"':case'"char"[]':case"character varying":case"character varying[]":if(i.internal_size&&i.internal_size>=0&&i.internal_size!=65535){t+=" ("+i.internal_size+")"}o="string";break;case"bytea":case"bytea[]":o="binary";break;case"geometry":o="geometry";break;case"geography":o="geography";break;default:o="string"}r=i.display_name+"<br>"+t;var s=a.lastIndexOf("[]"),l={name:i.name,display_name:i.display_name,column_type:t,column_type_internal:a,pos:i.pos,label:r,cell:o,can_edit:i.name=="oid"?false:e,type:a,not_null:i.not_null,has_default_val:i.has_default_val,is_array:s>-1&&s+2==a.length};c.push(l)});u.columns=c;if(i&&typeof i=="function"){i()}},resetQueryHistoryObject:function e(t){t.total_time="-"},set_sql_message:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(i){k(".sql-editor-message").append(t)}else{k(".sql-editor-message").text(t)}setTimeout(function(){k(".sql-editor-message").scrollTop(k(".sql-editor-message")[0].scrollHeight)},10)},update_msg_history:function e(t,i,n){var r=this;if(n===undefined)n=true;r.gridView.messages_panel.focus();if(n){if(r.gridView.handler.slickgrid){r.gridView.handler.slickgrid.destroy()}r.columns=undefined;r.collection=undefined;r.set_sql_message(i)}else{r.set_sql_message(S.escape(i),true)}if(t!="Busy"){k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false);r.trigger("pgadmin-sqleditor:loading-icon:hide");if(!r.total_time){r.total_time=A.calculateQueryRunTime(r.query_start_time,new Date)}if(S.isUndefined(r.history_query_source)){r.history_query_source=$.VIEW_DATA}var o={status:t,start_time:r.query_start_time,query:r.query,row_affected:r.rows_affected,total_time:r.total_time,message:i,query_source:r.history_query_source,is_pgadmin_query:!r.is_query_tool};if(!r.is_query_tool){var a=C('This query was generated by pgAdmin as part of a "View/Edit Data" operation');o.info=a}r.add_to_history(o)}},add_to_history:function e(t){var i=this;k.ajax({url:f("sqleditor.add_query_history",{trans_id:i.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(){}).fail(function(){});i.gridView.history_collection.add(t)},is_editable:function e(t){var i=this;if(t instanceof n.Collection)return false;return i.get("can_edit")},rows_to_delete:function e(t){var r=this;var o=r.primary_keys;r.temp_new_rows=[];t.forEach(function(e,t){var i=S.pick(e,S.keys(o));var n=Object.keys(i).length>0;if(!n){r.temp_new_rows.push(t)}});r.rows_to_disable=S.clone(r.temp_new_rows)},_delete:function e(){var i=this,n=[],t=S.size(i.data_store.added),r=S.size(i.data_store.updated);if(t){S.each(i.data_store.added,function(e,t){if(t in i.data_store.staged_rows){n.push(t)}})}if(S.size(i.data_store.staged_rows)>0&&S.size(i.data_store.staged_rows)===S.size(n)){var o=i.slickgrid,a=o.getData();o.resetActiveCell();a.beginUpdate();for(var s=0;s<n.length;s++){delete i.data_store.staged_rows[n[s]];delete i.data_store.added[n[s]];delete i.data_store.added_index[n[s]];a.deleteItem(n[s])}a.endUpdate();i.rows_to_delete.apply(i,[a.getItems()]);o.resetActiveCell();o.setSelectedRows([]);o.invalidate();k("#btn-delete-row").prop("disabled",true);k("#btn-copy-row").prop("disabled",true);if(S.size(i.data_store.added)||r){k("#btn-save-data").prop("disabled",false)}else{k("#btn-save-data").prop("disabled",true)}T.success(C("Row(s) deleted."))}else{var l=true;S.each(S.keys(i.data_store.staged_rows),function(e){if(e in i.data_store.deleted){l=false;return}});if(!l){k(i.gridView.grid.getCanvasNode()).find("div.selected").removeClass("strikeout");S.each(S.keys(i.data_store.staged_rows),function(e){if(e in i.data_store.deleted){delete i.data_store.deleted[e]}})}else{i.data_store.deleted=Object.assign({},i.data_store.deleted,i.data_store.staged_rows);k(i.gridView.grid.getCanvasNode()).find("div.selected").addClass("strikeout")}if(S.size(i.data_store.added)||r||S.size(i.data_store.deleted)){k("#btn-save-data").prop("disabled",false)}else{k("#btn-save-data").prop("disabled",true)}}},_save_file:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var i=this;var n=i.gridView.current_file;if(!S.isUndefined(n)&&!t){i._save_file_handler(n)}else{var r={supported_types:["*","sql"],dialog_type:"create_file",dialog_title:"Save File",btn_primary:"Save"};h.FileManager.init();h.FileManager.show_dialog(r)}},save_data:function e(){var m=this;if(!m.can_edit)return;var g=S.size(m.data_store.added),t=S.size(m.data_store.updated),v=S.size(m.data_store.deleted);if(!g&&!t&&!v){return}m.trigger("pgadmin-sqleditor:loading-icon:show",C("Saving the updated data..."));if(m.is_query_tool)m.disable_tool_buttons(true,true);var _=m.data_store,n=m.gridView;_.columns=n?n.handler.columns:m.columns;var b=false,y=new Date;k.ajax({url:f("sqleditor.save",{trans_id:m.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(_)}).done(function(e){var o=m.slickgrid,t=o.getData(),i=t.getLength(),n=[];var r=e.data.transaction_status;m.last_transaction_status=r;var a=r>0;if(a){m.disable_transaction_buttons(false)}else{m.disable_transaction_buttons(true)}if(m.is_query_tool)m.disable_tool_buttons(false);if(e.data.status){k("#btn-save-data").prop("disabled",true);b=true;for(var s=1;s<=m.numberOfModifiedCells;s++){o.removeCellCssStyles(s)}m.numberOfModifiedCells=0;if(g){t.beginUpdate();S.each(e.data.query_results,function(n){if(!S.isNull(n.row_added)){var r=Object.keys(n.row_added)[0];S.each(_.added_index,function(e,t){if(e==r){var i=o.getDataItem(t);S.extend(i,n.row_added[r])}})}});t.endUpdate()}S.each(n,function(e){if(e.is_row_copied){delete e.is_row_copied}});if(o.copied_rows){delete o.copied_rows}if(v){var l=S.keys(m.data_store.deleted);if(i==l.length){n=[];t.setItems(n,m.client_primary_key)}else{t.beginUpdate();for(var d=0;d<l.length;d++){var c=o.getDataItem(l[d]);n.push(c);t.deleteItem(c[m.client_primary_key])}t.endUpdate()}m.rows_to_delete.apply(m,[n])}o.setSelectedRows([]);m.reset_data_store();m.primary_keys_data={};m.set_sql_message("");T.success(C("Data saved successfully."));if(a)T.info(C("Auto-commit is off. You still need to commit changes to the database."))}else{m.set_sql_message(e.data.result);var u=w(C("%s.")).sprintf(e.data.result).value();T.error(u,20);if(r!=0)T.info(C("Saving data changes was rolled back but the current transaction is "+"still active; previous queries are unaffected."));o.setSelectedRows([]);if(S.has(e.data,"_rowid")&&(!S.isUndefined(e.data._rowid)||!S.isNull(e.data._rowid))){var f=m._find_rowindex(e.data._rowid);if(f in m.data_store.added_index){var h=m.handler.temp_new_rows.indexOf(e.data._rowid);if(h>-1){m.handler.temp_new_rows.splice(h,1)}m.data_store.added[m.data_store.added_index[f]].err=true}else if(f in m.data_store.updated_index){m.data_store.updated[m.data_store.updated_index[f]].err=true}}o.gotoCell(f,1)}var p=C('This query was generated by pgAdmin as part of a "Save Data" operation');S.each(e.data.query_results,function(e){var t={status:e.status,start_time:y,query:e.sql,row_affected:e.rows_affected,total_time:null,message:e.result,query_source:$.SAVE_DATA,is_pgadmin_query:true,info:p};m.add_to_history(t)});m.trigger("pgadmin-sqleditor:loading-icon:hide");o.invalidate();if(m.close_on_save){if(b){m.check_needed_confirmations_before_closing_panel()}else{m.close_on_save=false}}}).fail(function(e){var t=[n];var i=p.handleQueryToolAjaxError(h,m,e,"save_data",t,true);if(m.is_query_tool)m.disable_tool_buttons(false);m.update_msg_history(false,i)})},reset_data_store:function e(){var t=this;t.data_store={updated:{},added:{},staged_rows:{},deleted:{},updated_index:{},added_index:{}}},_find_rowindex:function e(t){var i=this,n=i.slickgrid,r=n.getData(),o=r.getItems(),a,s=0,l=-1;if(S.isObject(t)){a=t}else if(S.isString(t)){t={};t[i.client_primary_key]=t;a=t}else{return l}S.find(o,function(e){var t=[];t.push(e);if(S.findWhere(t,a)){l=s;return true}s++});return l},_save_as:function e(){return this._save_file(true)},setTitle:function e(t,i){var n=this;if(n.preferences.new_browser_tab){window.document.title=t}else{S.each(window.top.pgAdmin.Browser.docker.findPanels("frm_datagrid"),function(e){if(e.isVisible()){j.setQueryToolDockerTitle(e,n.is_query_tool,t,i)}})}},_load_file:function e(){var t=this;if(t.is_query_changed){T.confirm(C("Unsaved changes"),C("Are you sure you wish to discard the current changes?"),function(){t._open_select_file_manager()},function(){return true}).set("labels",{ok:"Yes",cancel:"No"})}else{t._open_select_file_manager()}},_open_select_file_manager:function e(){var t={supported_types:["sql"],dialog_type:"select_file"};h.FileManager.init();h.FileManager.show_dialog(t)},_select_file_handler:function e(t){var n=this,r=t,i={file_name:decodeURI(t)};n.trigger("pgadmin-sqleditor:loading-icon:show",C("Loading the file..."));var o=k(".sql-editor-busy-fetching");o.addClass("show_progress");k.ajax({url:f("sqleditor.load_file"),method:"POST",contentType:"application/json",data:JSON.stringify(i)}).done(function(e){n.gridView.query_tool_obj.setValue(e);n.gridView.current_file=t;n.setTitle(n.gridView.current_file.split("\\").pop().split("/").pop(),true);n.trigger("pgadmin-sqleditor:loading-icon:hide");o.removeClass("show_progress");k("#btn-save-file").prop("disabled",true);k("#btn-file-menu-save").css("display","none");n.is_query_changed=false;setTimeout(function(){n.gridView.query_tool_obj.focus()},200)}).fail(function(e){n.trigger("pgadmin-sqleditor:loading-icon:hide");var t=[r];var i=p.handleQueryToolAjaxError(h,n,e,"_select_file_handler",t,false);T.error(i);o.removeClass("show_progress")})},_save_file_handler:function e(t){var n=this,r=t,i={file_name:decodeURI(t),file_content:n.gridView.query_tool_obj.getValue()};n.trigger("pgadmin-sqleditor:loading-icon:show",C("Saving the queries in the file..."));k.ajax({url:f("sqleditor.save_file"),method:"POST",contentType:"application/json",data:JSON.stringify(i)}).done(function(e){if(e.data.status){T.success(C("File saved successfully."));n.gridView.current_file=t;n.setTitle(n.gridView.current_file.replace(/^.*[\\\/]/g,""),true);k("#btn-save-file").prop("disabled",true);k("#btn-file-menu-save").css("display","none");n.is_query_changed=false;setTimeout(function(){n.gridView.query_tool_obj.focus()},200)}n.trigger("pgadmin-sqleditor:loading-icon:hide");if(n.close_on_save){n.check_needed_confirmations_before_closing_panel()}}).fail(function(e){n.trigger("pgadmin-sqleditor:loading-icon:hide");var t=[r];var i=p.handleQueryToolAjaxError(h,n,e,"_save_file_handler",t,false);T.error(i)})},_on_query_change:function e(){var t=this;if(!t.is_query_changed){t.is_query_changed=true;if(t.gridView.current_file){var i=t.gridView.current_file.replace(/^.*[\\\/]/g,"")+" *";t.setTitle(i,true)}else{if(t.preferences.new_browser_tab){i=window.document.title+" *"}else{S.each(window.top.pgAdmin.Browser.docker.findPanels("frm_datagrid"),function(e){if(e.isVisible()){t.gridView.panel_title=k(e._title).text()}});i=t.gridView.panel_title+" *"}t.setTitle(i)}k("#btn-save-file").prop("disabled",false);k("#btn-file-menu-save").css("display","block");k("#btn-file-menu-dropdown").prop("disabled",false)}},_init_polling_flags:function e(){var t=this;t.POLL_FALLBACK_TIME=function(){var e=parseInt((Date.now()-t.query_start_time.getTime())/1e3);if(e>=10&&e<30){return 500}else if(e>=30&&e<60){return 1e3}else if(e>=60&&e<90){return 2e3}else if(e>=90){return 5e3}else return 1}},_show_filter:function e(){var t=this,i=false;if(arguments.length>0&&arguments[arguments.length-1]=="connect"){i=true}c.dialog(t,i)},_include_filter:function e(){var i=this,t={},n,r,o,a;n=i.slickgrid;r=n.getActiveCell();if(S.isNull(r)||S.isUndefined(r))return;o=n.getColumns()[r.cell];a=n.getDataItem(r.row,r.cell);if(S.isNull(a)||S.isUndefined(a))return;t[o.field]=a[o.field]||"";i.trigger("pgadmin-sqleditor:loading-icon:show",C("Applying the new filter..."));k.ajax({url:f("sqleditor.inclusive_filter",{trans_id:i.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");setTimeout(function(){if(e.data.status){_.executeQuery(i)}else{T.alert(C("Filter By Selection Error"),e.data.result)}})}).fail(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");var t=p.handleQueryToolAjaxError(h,i,e,"_include_filter",[],true);T.alert(C("Filter By Selection Error"),t)})},_exclude_filter:function e(){var i=this,t={},n,r,o,a;n=i.slickgrid;r=n.getActiveCell();if(S.isNull(r)||S.isUndefined(r))return;o=n.getColumns()[r.cell];a=n.getDataItem(r.row,r.cell);if(S.isNull(a)||S.isUndefined(a))return;t[o.field]=a[o.field]||"";i.trigger("pgadmin-sqleditor:loading-icon:show",C("Applying the new filter..."));k.ajax({url:f("sqleditor.exclusive_filter",{trans_id:i.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");setTimeout(function(){if(e.data.status){_.executeQuery(i)}else{T.alert(C("Filter Exclude Selection Error"),e.data.result)}},10)}).fail(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");var t=p.handleQueryToolAjaxError(h,i,e,"_exclude_filter",[],true);T.alert(C("Filter Exclude Selection Error"),t)})},_remove_filter:function e(){var i=this;i.trigger("pgadmin-sqleditor:loading-icon:show",C("Removing the filter..."));k.ajax({url:f("sqleditor.remove_filter",{trans_id:i.transId}),method:"POST"}).done(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");setTimeout(function(){if(e.data.status){_.executeQuery(i)}else{T.alert(C("Remove Filter Error"),e.data.result)}})}).fail(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");var t=p.handleQueryToolAjaxError(h,i,e,"_remove_filter",[],true);T.alert(C("Remove Filter Error"),t)})},_copy_row:a,_paste_row:function e(){var n=this,t=n.slickgrid,r=t.getData(),i=r.getItems(),o=r.getLength(),a=t.getSelectedRows().sort(function(e,t){return e-t}),s=a.map(function(e){return i[e]}),l=[];for(var d in n.columns){if(n.columns[d].is_array){l.push(n.columns[d].name)}}a=a.length==0?n.last_copied_rows:a;n.last_copied_rows=a;if(s.length>0){k("#btn-save-data").prop("disabled",false);var c=function e(i){var n={};S.each(i,function(e,t){if(i[t]!==undefined){if(S.isObject(i[t])&&l.indexOf(t)==-1){n[String(t)]=JSON.stringify(i[t])}else{n[String(t)]=i[t]}}});return n};r.beginUpdate();S.each(s,function(e){var t=c(e),i=(n.gridView.client_primary_key_counter++).toString();t.is_row_copied=true;n.temp_new_rows.push(o);t[n.client_primary_key]=i;if(n.has_oids&&t.oid){t.oid=null}r.addItem(t);n.data_store.added[i]={err:false,data:t};n.data_store.added_index[o]=i;o++});r.endUpdate();t.updateRowCount();t.scrollRowIntoView(r.getLength());t.setSelectedRows([])}},_set_limit:function e(){var i=this,t=parseInt(k(".limit").val());i.trigger("pgadmin-sqleditor:loading-icon:show",C("Setting the limit on the result..."));k.ajax({url:f("sqleditor.set_limit",{trans_id:i.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");setTimeout(function(){if(e.data.status){_.executeQuery(i)}else T.alert(C("Change limit Error"),e.data.result)},10)}).fail(function(e){i.trigger("pgadmin-sqleditor:loading-icon:hide");var t=p.handleQueryToolAjaxError(h,i,e,"_set_limit",[],true);T.alert(C("Change limit Error"),t)})},disable_tool_buttons:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t;if(!this.is_query_tool){n=true}k("#btn-explain").prop("disabled",n);k("#btn-explain-analyze").prop("disabled",n);k("#btn-explain-options-dropdown").prop("disabled",n);k("#btn-edit-dropdown").prop("disabled",n);k("#btn-load-file").prop("disabled",n);k("#btn-save-file").prop("disabled",n);k("#btn-file-menu-dropdown").prop("disabled",n);k("#btn-find").prop("disabled",n);k("#btn-find-menu-dropdown").prop("disabled",n);if(this.is_query_tool){if(i!==null)k("#btn-cancel-query").prop("disabled",i);else k("#btn-cancel-query").prop("disabled",!t);if(this.is_transaction_buttons_disabled){k("#btn-query-dropdown").prop("disabled",t)}else{k("#btn-query-dropdown").prop("disabled",true)}}else{k("#btn-query-dropdown").prop("disabled",n)}},disable_transaction_buttons:function e(t){this.is_transaction_buttons_disabled=t;if(this.is_query_tool){k("#btn-commit").prop("disabled",t);k("#btn-rollback").prop("disabled",t)}},_highlight_error:function e(t){var i=this,n=0,r=0,o=0,a=0;i.gridView.query_tool_obj.removeLineClass(i.marked_line_no,"wrap","CodeMirror-activeline-background");if(i.gridView.query_tool_obj.getSelection().length>0)a=i.gridView.query_tool_obj.getCursor(true).line;var s=/LINE (\d+)/.exec(t),l=/Character: (\d+)/.exec(t);if(s!=null&&l!=null){n=i.marked_line_no=parseInt(s[1])-1+a;var d=parseInt(l[1])-1;var c=0;var u=a>0?a:0;for(var f=u;f<n;f++){c+=i.gridView.query_tool_obj.getLine(f).length+1}r=d-c;var h=i.gridView.query_tool_obj.getLine(n);o=h.indexOf(" ",r);if(o<0)o=h.length;i.gridView.marker=i.gridView.query_tool_obj.markText({line:n,ch:r},{line:n,ch:o},{className:"sql-editor-mark"});i.gridView.query_tool_obj.addLineClass(i.marked_line_no,"wrap","CodeMirror-activeline-background")}},_cancel_query:function e(){var i=this;k.ajax({url:f("sqleditor.cancel_transaction",{trans_id:i.transId}),method:"POST",contentType:"application/json"}).done(function(e){if(!e.data.status){T.alert(C("Cancel Query Error"),e.data.result)}i.disable_tool_buttons(false);V=false;if(!S.isUndefined(i.download_csv_obj)){i.download_csv_obj.abort();k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false);i.trigger("pgadmin-sqleditor:loading-icon:hide")}setTimeout(function(){i.gridView.query_tool_obj.focus()},200)}).fail(function(e){i.disable_tool_buttons(false);var t=p.handleQueryToolAjaxError(h,i,e,"_cancel_query",[],false);T.alert(C("Cancel Query Error"),t)})},trigger_csv_download:function e(t,a){var s=this,i=f("sqleditor.query_tool_download",{trans_id:s.transId}),n={query:t,filename:a};k("#btn-flash").prop("disabled",true);k("#btn-download").prop("disabled",true);s.disable_tool_buttons(true);s.set_sql_message("");s.trigger("pgadmin-sqleditor:loading-icon:show",C("Downloading CSV..."));s.download_csv_obj=k.ajax({type:"POST",url:i,data:n,cache:false}).done(function(e){if(!S.isUndefined(e.data)){if(!e.status){s._highlight_error(e.data.result);s.set_sql_message(e.data.result)}}else{var t=new Blob([e],{type:"text/csv"}),i=window.URL||window.webkitURL,n=i.createObjectURL(t),r=h.Browser.get_browser(),o=document.createElement("a");document.body.appendChild(o);if(r.name==="IE"&&window.navigator.msSaveBlob){window.navigator.msSaveBlob(t,a)}else{o.setAttribute("href",n);o.setAttribute("download",a);o.click()}document.body.removeChild(o);s.download_csv_obj=undefined}k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false);s.disable_tool_buttons(false);s.trigger("pgadmin-sqleditor:loading-icon:hide")}).fail(function(e){var t="";k("#btn-flash").prop("disabled",false);k("#btn-download").prop("disabled",false);s.disable_tool_buttons(false);s.trigger("pgadmin-sqleditor:loading-icon:hide");if(e.statusText=="abort"){t=C("CSV Download cancelled.")}else{t=p.handleQueryToolAjaxError(h,s,e,C("Download CSV"),[],true)}T.alert(C("Download CSV error"),t)})},call_cache_preferences:function e(){var t=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;t.cache_preferences("sqleditor");q.preference_version(q.generate_preference_version())},_auto_rollback:function e(){var i=this,t=true;if(k(".auto-rollback").hasClass("visibility-hidden")===true)k(".auto-rollback").removeClass("visibility-hidden");else{k(".auto-rollback").addClass("visibility-hidden");t=false}k.ajax({url:f("sqleditor.auto_rollback",{trans_id:i.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(e){if(!e.data.status)T.alert(C("Auto Rollback Error"),e.data.result)}).fail(function(e){var t=p.handleQueryToolAjaxError(h,i,e,"_auto_rollback",[],true);T.alert(C("Auto Rollback Error"),t)})},_auto_commit:function e(){var i=this,t=true;if(k(".auto-commit").hasClass("visibility-hidden")===true)k(".auto-commit").removeClass("visibility-hidden");else{k(".auto-commit").addClass("visibility-hidden");t=false}k.ajax({url:f("sqleditor.auto_commit",{trans_id:i.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(e){if(!e.data.status)T.alert(C("Auto Commit Error"),e.data.result)}).fail(function(e){var t=p.handleQueryToolAjaxError(h,i,e,"_auto_commit",[],true);T.alert(C("Auto Commit Error"),t)})},_toggle_explain_option:function e(t){var i=".explain-".concat(t);k(i).toggleClass("visibility-hidden")},_explain_verbose:function e(){this._toggle_explain_option("verbose")},_explain_costs:function e(){this._toggle_explain_option("costs")},_explain_buffers:function e(){this._toggle_explain_option("buffers")},_explain_timing:function e(){this._toggle_explain_option("timing")},_explain_summary:function e(){this._toggle_explain_option("summary")},_explain_settings:function e(){this._toggle_explain_option("settings")},_indent_selected_code:function e(){var t=this,i=t.gridView.query_tool_obj;i.execCommand("indentMore")},_unindent_selected_code:function e(){var t=this,i=t.gridView.query_tool_obj;i.execCommand("indentLess")},isQueryRunning:function e(){return V},setIsQueryRunning:function e(t){V=t},check_needed_confirmations_before_closing_panel:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var i=this,n;if(!i.ignore_on_close||t)i.ignore_on_close={unsaved_data:false,unsaved_query:false};var r=i.ignore_on_close.unsaved_data,o=i.ignore_on_close.unsaved_query;if(!r&&i.can_edit&&i.preferences.prompt_save_data_changes&&i.data_store&&(S.size(i.data_store.added)||S.size(i.data_store.updated)||S.size(i.data_store.deleted))){n=C("The data has changed. Do you want to save changes?");i.unsaved_changes_user_confirmation(n,true)}else if(!o&&i.is_query_tool&&i.is_query_changed&&i.preferences.prompt_save_query_changes){n=C("The text has changed. Do you want to save changes?");i.unsaved_changes_user_confirmation(n,false)}else if(i.preferences.prompt_commit_transaction&&i.last_transaction_status>0){var a=i.last_transaction_status==3;i.uncommitted_transaction_user_confirmation(a)}else{i.ignore_on_close=undefined;i.close()}return false},uncommitted_transaction_user_confirmation:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var i=this;T.confirmCommit||T.dialog("confirmCommit",function(){return{main:function e(t,i,n){this.is_commit_disabled=n;this.setHeader(t);this.setContent(i)},setup:function e(){return{buttons:[{text:C("Cancel"),key:27,invokeOnClose:true,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:C("Rollback"),className:"btn btn-primary fa fa-lg pg-alertify-button"},{text:C("Commit"),className:"btn btn-primary fa fa-lg pg-alertify-button"}],focus:{element:0,select:false},options:{maximizable:false,resizable:false}}},prepare:function e(){if(this.is_commit_disabled)this.__internal.buttons[2].element.disabled=true;else this.__internal.buttons[2].element.disabled=false},callback:function e(t){switch(t.index){case 0:break;case 1:i.close_on_idle_transaction=true;_.executeRollback(i);break;case 2:i.close_on_idle_transaction=true;_.executeCommit(i);break}}}});var n=C("The current transaction is not commited to the database."+"Do you want to commit or rollback the transaction?");T.confirmCommit(C("Commit transaction?"),n,t)},unsaved_changes_user_confirmation:function e(t,i){var n=this;T.confirmSave||T.dialog("confirmSave",function(){return{main:function e(t,i,n){this.is_unsaved_data=n;this.setHeader(t);this.setContent(i)},setup:function e(){return{buttons:[{text:C("Cancel"),key:27,invokeOnClose:true,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:C("Don't save"),className:"btn btn-secondary fa fa-lg fa-trash-o pg-alertify-button"},{text:C("Save"),className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0,select:false},options:{maximizable:false,resizable:false}}},callback:function e(t){switch(t.index){case 0:break;case 1:n.close_on_save=false;if(this.is_unsaved_data)n.ignore_on_close.unsaved_data=true;else n.ignore_on_close.unsaved_query=true;n.check_needed_confirmations_before_closing_panel();break;case 2:n.close_on_save=true;if(this.is_unsaved_data){n.save_data()}else{n._save_file()}break}}}});T.confirmSave(C("Save changes?"),t,i)},close:function e(){var t=this;q.Events.off("pgadmin:user:logged-in",this.initTransaction);S.each(window.top.pgAdmin.Browser.docker.findPanels("frm_datagrid"),function(e){if(e.isVisible()){window.onbeforeunload=null;e.off(B.EVENT.CLOSING);if(!S.isUndefined(t.col_size)){delete t.col_size}window.top.pgAdmin.Browser.docker.removePanel(e)}})},update_notifications:function e(t){b.updateNotifications(t)}});h.SqlEditor={create:function e(t){return new Z(t)},jquery:k,S:w};return h.SqlEditor}.apply(t,n),r!==undefined&&(e.exports=r))},function(t,i,n){var r,o,a;
/*! jQuery UI - v1.12.1 - 2016-09-16
 * http://jqueryui.com
 * Includes: position.js
 * Copyright jQuery Foundation and other contributors; Licensed MIT */
/*! jQuery UI - v1.12.1 - 2016-09-16
 * http://jqueryui.com
 * Includes: position.js
 * Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(e){if(true){!(o=[n(0)],r=e,a=typeof r==="function"?r.apply(i,o):r,a!==undefined&&(t.exports=a))}else{}})(function(T){T.ui=T.ui||{};var e=T.ui.version="1.12.1";
/*!
     * jQuery UI Position 1.12.1
     * http://jqueryui.com
     *
     * Copyright jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     *
     * http://api.jqueryui.com/position/
     */
/*!
     * jQuery UI Position 1.12.1
     * http://jqueryui.com
     *
     * Copyright jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     *
     * http://api.jqueryui.com/position/
     */
(function(){var r,x=Math.max,C=Math.abs,n=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,t=T.fn.position;function k(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function S(e,t){return parseInt(T.css(e,t),10)||0}function i(e){var t=e[0];if(t.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(T.isWindow(t)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(t.preventDefault){return{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}T.position={scrollbarWidth:function(){if(r!==undefined){return r}var e,t,i=T("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];T("body").append(i);e=n.offsetWidth;i.css("overflow","scroll");t=n.offsetWidth;if(e===t){t=i[0].clientWidth}i.remove();return r=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n=t==="scroll"||t==="auto"&&e.width<e.element[0].scrollWidth,r=i==="scroll"||i==="auto"&&e.height<e.element[0].scrollHeight;return{width:r?T.position.scrollbarWidth():0,height:n?T.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=T(e||window),i=T.isWindow(t[0]),n=!!t[0]&&t[0].nodeType===9,r=!i&&!n;return{element:t,isWindow:i,isDocument:n,offset:r?T(e).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}};T.fn.position=function(u){if(!u||!u.of){return t.apply(this,arguments)}u=T.extend({},u);var f,h,p,m,g,e,v=T(u.of),_=T.position.getWithinInfo(u.within),b=T.position.getScrollInfo(_),y=(u.collision||"flip").split(" "),w={};e=i(v);if(v[0].preventDefault){u.at="left top"}h=e.width;p=e.height;m=e.offset;g=T.extend({},m);T.each(["my","at"],function(){var e=(u[this]||"").split(" "),t,i;if(e.length===1){e=n.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]}e[0]=n.test(e[0])?e[0]:"center";e[1]=o.test(e[1])?e[1]:"center";t=a.exec(e[0]);i=a.exec(e[1]);w[this]=[t?t[0]:0,i?i[0]:0];u[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]});if(y.length===1){y[1]=y[0]}if(u.at[0]==="right"){g.left+=h}else if(u.at[0]==="center"){g.left+=h/2}if(u.at[1]==="bottom"){g.top+=p}else if(u.at[1]==="center"){g.top+=p/2}f=k(w.at,h,p);g.left+=f[0];g.top+=f[1];return this.each(function(){var i,e,a=T(this),s=a.outerWidth(),l=a.outerHeight(),t=S(this,"marginLeft"),n=S(this,"marginTop"),r=s+t+S(this,"marginRight")+b.width,o=l+n+S(this,"marginBottom")+b.height,d=T.extend({},g),c=k(w.my,a.outerWidth(),a.outerHeight());if(u.my[0]==="right"){d.left-=s}else if(u.my[0]==="center"){d.left-=s/2}if(u.my[1]==="bottom"){d.top-=l}else if(u.my[1]==="center"){d.top-=l/2}d.left+=c[0];d.top+=c[1];i={marginLeft:t,marginTop:n};T.each(["left","top"],function(e,t){if(T.ui.position[y[e]]){T.ui.position[y[e]][t](d,{targetWidth:h,targetHeight:p,elemWidth:s,elemHeight:l,collisionPosition:i,collisionWidth:r,collisionHeight:o,offset:[f[0]+c[0],f[1]+c[1]],my:u.my,at:u.at,within:_,elem:a})}});if(u.using){e=function(e){var t=m.left-d.left,i=t+h-s,n=m.top-d.top,r=n+p-l,o={target:{element:v,left:m.left,top:m.top,width:h,height:p},element:{element:a,left:d.left,top:d.top,width:s,height:l},horizontal:i<0?"left":t>0?"right":"center",vertical:r<0?"top":n>0?"bottom":"middle"};if(h<s&&C(t+i)<h){o.horizontal="center"}if(p<l&&C(n+r)<p){o.vertical="middle"}if(x(C(t),C(i))>x(C(n),C(r))){o.important="horizontal"}else{o.important="vertical"}u.using.call(this,e,o)}}a.offset(T.extend(d,{using:e}))})};T.ui.position={fit:{left:function(e,t){var i=t.within,n=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,o=e.left-t.collisionPosition.marginLeft,a=n-o,s=o+t.collisionWidth-r-n,l;if(t.collisionWidth>r){if(a>0&&s<=0){l=e.left+a+t.collisionWidth-r-n;e.left+=a-l}else if(s>0&&a<=0){e.left=n}else{if(a>s){e.left=n+r-t.collisionWidth}else{e.left=n}}}else if(a>0){e.left+=a}else if(s>0){e.left-=s}else{e.left=x(e.left-o,e.left)}},top:function(e,t){var i=t.within,n=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,o=e.top-t.collisionPosition.marginTop,a=n-o,s=o+t.collisionHeight-r-n,l;if(t.collisionHeight>r){if(a>0&&s<=0){l=e.top+a+t.collisionHeight-r-n;e.top+=a-l}else if(s>0&&a<=0){e.top=n}else{if(a>s){e.top=n+r-t.collisionHeight}else{e.top=n}}}else if(a>0){e.top+=a}else if(s>0){e.top-=s}else{e.top=x(e.top-o,e.top)}}},flip:{left:function(e,t){var i=t.within,n=i.offset.left+i.scrollLeft,r=i.width,o=i.isWindow?i.scrollLeft:i.offset.left,a=e.left-t.collisionPosition.marginLeft,s=a-o,l=a+t.collisionWidth-r-o,d=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,u=-2*t.offset[0],f,h;if(s<0){f=e.left+d+c+u+t.collisionWidth-r-n;if(f<0||f<C(s)){e.left+=d+c+u}}else if(l>0){h=e.left-t.collisionPosition.marginLeft+d+c+u-o;if(h>0||C(h)<l){e.left+=d+c+u}}},top:function(e,t){var i=t.within,n=i.offset.top+i.scrollTop,r=i.height,o=i.isWindow?i.scrollTop:i.offset.top,a=e.top-t.collisionPosition.marginTop,s=a-o,l=a+t.collisionHeight-r-o,d=t.my[1]==="top",c=d?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,u=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,f=-2*t.offset[1],h,p;if(s<0){p=e.top+c+u+f+t.collisionHeight-r-n;if(p<0||p<C(s)){e.top+=c+u+f}}else if(l>0){h=e.top-t.collisionPosition.marginTop+c+u+f-o;if(h>0||C(h)<l){e.top+=c+u+f}}}},flipfit:{left:function(){T.ui.position.flip.left.apply(this,arguments);T.ui.position.fit.left.apply(this,arguments)},top:function(){T.ui.position.flip.top.apply(this,arguments);T.ui.position.fit.top.apply(this,arguments)}}}})();var t=T.ui.position})},function(e,t,i){"use strict";var n,r;!(n=[i(4),i(0),i(1),i(8),i(3),i(9),i(329),i(330),i(331),i(332)],r=function(e,y,P,u,E,r,M,w,x,f){E=E||window.pgAdmin||{};x=x.default;var I=E.Browser;M.plugin(function(_,e,t){t.prototype.multitext=function(e,t,i,a,n){var r=_(),o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=r.text(0,0,o);s.attr(n);var l=s.getBBox().width/o.length,d=Math.round(a/l)-1;r.remove();var c=i.split(" "),u=0,f=[],h="",p=function e(t,i,n){var r=n.length,o=[];if(r==0)return o;if(i&&i+r*l>a){o.push(t);o=o.concat(e("",0,n))}else if(i){o.push(t+" "+n)}else{if(t)o.push(t);if(n.length>d+1)o.push(n.slice(0,d)+"-");else o.push(n);o=o.concat(e("",0,n.slice(d)))}return o};for(var m=0;m<c.length;m++){var g=p(h,u,c[m]);if(h){f=f.slice(0,f.length-1)}f=f.concat(g);h=f[f.length-1];u=h.length*l}var v=this.text(e,t,f).attr(n);v.selectAll("tspan:nth-child(n+2)").attr({dy:"1.2em",x:e});return v}});if(E.Explain)return E.Explain;var O=E.Explain={prefix:e("misc.index")+"static/explain/img/",totalNodes:0,totalDownloadedNodes:0,isDownloaded:false};var A=100;var R=100;var c=50;var h=50;var p=200,m=60;var L=10,z=10,j=2;var B=5,q="15px";var F=25,U=25;var C=.01,k=2,S=1;var T=.05;var g=r.Model.extend({defaults:{Plans:[],level:[],image:undefined,image_text:undefined,xpos:undefined,ypos:undefined,width:A,height:R},parse:function e(r){var o=1,a=r.level=r.level||[o],s=[],t=r["Node Type"],l=r.xpos=r.xpos-A,d=r.ypos,c=0;r["width"]=A;r["height"]=R;if(r["Parent Relationship"]==="SubPlan"){r["width"]+=F*2+F/2;r["height"]+=U*2;r["ypos"]+=U;l-=F;d+=U}if(u.startsWith(t,"(slice"))t=t.substring(0,7);var i=f.default;var n=P.isFunction(i[t])&&i[t].apply(undefined,[r])||i[t]||{image:"ex_unknown.svg",image_text:t};r["image"]=n["image"];r["image_text"]=n["image_text"];if("Plans"in r){r["width"]+=p;P.each(r["Plans"],function(e){var t=P.clone(a),i=new g;t.push(o);i.set(i.parse(P.extend(e,{level:t,xpos:l-p,ypos:d})));if(c<i.get("width")){c=i.get("width")}var n=i.get("height");if(o!==1){r["height"]=r["height"]+n+m}else if(n>r["height"]){r["height"]=n}d+=n+m;s.push(i);o++})}r["width"]+=c;r["Plans"]=s;return r},toJSON:function e(t){var i=r.Model.prototype.toJSON.apply(this,arguments);if(t){delete i["Plans"]}else{var n=[];P.each(i["Plans"],function(e){n.push(e.toJSON())});i["Plans"]=n}return i},drawPolyLine:function e(t,i,n,r,o,a,s){var l=i+(r-i)/3,d=i+2*((r-i)/3);var c=t.polygon([0,z,L/2,z,z/4,0,0,L]).transform("r90");var u=c.marker(0,0,L,z,0,L/2).attr(s);t.line(i,n,l,n).attr(a);t.line(l-1,n,d,o).attr(a);var f=t.line(d,o,r,o).attr(a);f.attr({markerEnd:u})},draw:function e(t,i,n,r,o,a,s){var l=t.g();var d=i+this.get("xpos"),c=n+this.get("ypos"),u=this.get("Parent Relationship")==="SubPlan";if(u){l.rect(d-this.get("width")+A+F,c-this.get("height")+R+U-B,this.get("width")-F,this.get("height")+(c-U),5).attr({stroke:"#444444",strokeWidth:1.2,fill:"gray",fillOpacity:.2});l.text(d+A-this.get("width")/2-F,c+R-this.get("height")/2-U,this.get("Subplan Name")).attr({fontSize:q,"text-anchor":"start",fill:"red"})}this.draw_image(l,O.prefix+this.get("image"),d,c,a,s);var f=this.get("Schema")==undefined?this.get("image_text"):this.get("Schema")+"."+this.get("image_text");l.multitext(d+A/2+B,c+R-B,f,150,{"font-size":q,"text-anchor":"middle"});if(!P.isUndefined(o)){var h=d+A;var p=c+R/2;var m=r-L;var g=o+R/2;var v=this.get("Startup Cost"),_=this.get("Total Cost");var b=j;if(v!=undefined&&_!=undefined){b=Math.round(Math.log((v+_)/2+v));b=b<1?1:b>10?10:b}var y=[0,0,2*L,2*z];var w={stroke:"#000000",strokeWidth:b+2},x={stroke:"#866486",strokeWidth:b+2},C={viewBox:y.join(" ")};this.drawPolyLine(l,h,p,m,g,u?x:w,C)}var k=this.get("Plans");P.each(k,function(e){e.draw(t,i,n,d,c,a,s)})},draw_image:function e(t,i,r,o,a,s){var l=t.image(i,r+(A-c)/2,o+(R-h)/2,c,h);var d=this.toJSON();var n="<title>";P.each(d,function(e,t){if(t!=="image"&&t!=="Plans"&&t!=="level"&&t!=="image"&&t!=="image_text"&&t!=="xpos"&&t!=="ypos"&&t!=="width"&&t!=="height"){n+="".concat(t,": ").concat(e,"\n")}});n+="</title>";l.append(M.parse(n));l.mouseover(function(){s.empty();l.node.textContent="";var i=y("<table></table>",{class:"pgadmin-tooltip-table"}).appendTo(s);P.each(d,function(e,t){if(t!=="image"&&t!=="Plans"&&t!=="level"&&t!=="image"&&t!=="image_text"&&t!=="xpos"&&t!=="ypos"&&t!=="width"&&t!=="height"){t=P.escape(t);e=P.escape(e);i.append('\n              <tr>\n                <td class="label explain-tooltip">'.concat(t,'</td>\n                <td class="label explain-tooltip-val">').concat(e,"</td>\n              </tr>\n            "))}});var e=a.data("zoom-factor");var t=(r+A)*e-a.scrollLeft();var n=o*e-a.scrollTop();t=t<0?0:t;n=n<0?0:n;s.css({opacity:"0.8"});s.css("left",t);s.css("top",n);y(".pgadmin-explain-tooltip").css("padding","5px");y(".pgadmin-explain-tooltip").css("border","1px solid white")});l.mouseout(function(){l.append(M.parse(n));s.empty();s.css({opacity:"0"});s.css("left",0);s.css("top",0)})}});var N=g.extend({parse:function e(r){var o=1,a=r.level=r.level||[o],s=[],t=r["Node Type"],l=r.xpos=r.xpos-A,d=r.ypos,c=0;r["width"]=A;r["height"]=R;if(r["Parent Relationship"]==="SubPlan"){r["width"]+=F*2+F/2;r["height"]+=U*2;r["ypos"]+=U;l-=F;d+=U}if(u.startsWith(t,"(slice"))t=t.substring(0,7);var i=f.default;var n=P.isFunction(i[t])&&i[t].apply(undefined,[r])||i[t]||{image:"ex_unknown.svg",image_text:t};r["image"]=n["image"];r["image_text"]=n["image_text"];O.totalNodes++;if("Plans"in r){r["width"]+=p;P.each(r["Plans"],function(e){var t=P.clone(a),i=new N({parse:true});t.push(o);i.set(i.parse(P.extend(e,{level:t,xpos:l-p,ypos:d})));if(c<i.get("width")){c=i.get("width")}var n=i.get("height");if(o!==1){r["height"]=r["height"]+n+m}else if(n>r["height"]){r["height"]=n}d+=n+m;s.push(i);o++})}r["width"]+=c;r["Plans"]=s;return r},draw:function e(n,t,i,r,o,a,s){var l=n.g();var d=t+this.get("xpos"),c=i+this.get("ypos"),u=this.get("Parent Relationship")==="SubPlan";if(u){l.rect(d-this.get("width")+A+F,c-this.get("height")+R+U-B,this.get("width")-F,this.get("height")+(c-U),5).attr({stroke:"#444444",strokeWidth:1.2,fill:"gray",fillOpacity:.2});l.text(d+A-this.get("width")/2-F,c+R-this.get("height")/2-U,this.get("Subplan Name")).attr({fontSize:q,"text-anchor":"start",fill:"red"})}var f=E.Browser.get_browser();if(f.name==="IE"||f.name==="Safari"&&parseInt(f.version)<10){this.draw_image(l,O.prefix+this.get("image"),d,c,a,s)}else{var h=this;var p=function e(t){var i=M();i.append(t);h.draw_image(l,i.toDataURL(),d,c,a,s);O.totalDownloadedNodes++;n.parent().attr({"xmlns:xlink":"http://www.w3.org/1999/xlink"});setTimeout(function(){I.Events.trigger("pga:explain_plan:node_icon:fetched")},100)};var m=O.prefix+this.get("image");M.load(m,p)}var g=this.get("Schema")==undefined?this.get("image_text"):this.get("Schema")+"."+this.get("image_text");l.multitext(d+A/2+B,c+R-B,g,150,{"font-size":q,"text-anchor":"middle"});if(!P.isUndefined(o)){var v=d+A;var _=c+R/2;var b=r-L;var y=o+R/2;var w=this.get("Startup Cost"),x=this.get("Total Cost");var C=j;if(w!=undefined&&x!=undefined){C=Math.round(Math.log((w+x)/2+w));C=C<1?1:C>10?10:C}var k=[0,0,2*L,2*z];var S={stroke:"#000000",strokeWidth:C+2},T={stroke:"#866486",strokeWidth:C+2},N={viewBox:k.join(" ")};this.drawPolyLine(l,v,_,b,y,u?T:S,N)}var D=this.get("Plans");P.each(D,function(e){e.draw(n,t,i,d,c,a,s)})}});var D=r.Model.extend({defaults:{Plan:undefined,xpos:0,ypos:0},initialize:function e(){this.set("Plan",new g);this.set("Statistics",new w)},parse:function e(t){if(t&&"Plan"in t){var i=this.get("Plan");i.set(i.parse(P.extend(t["Plan"],{xpos:0,ypos:0})));t["xpos"]=0;t["ypos"]=0;t["width"]=i.get("width")+F*2;t["height"]=i.get("height")+U*4;delete t["Plan"]}var n=this.get("Statistics");if(t&&"JIT"in t){n.set("JIT",t["JIT"]);delete t["JIT"]}if(t&&"Triggers"in t){n.set("Triggers",t["Triggers"]);delete t["Triggers"]}if(t){var r=["Planning Time","Execution Time"],o={};r.forEach(function(e){if(e in t){o[e]=t[e]}});n.set("Summary",o)}return t},toJSON:function e(){var t=r.Model.prototype.toJSON.apply(this,arguments);if(t.Plan){t.Plan=t.Plan.toJSON()}return t},draw:function e(t,i,n,r,o){var a=t.g();a.rect(0,0,this.get("width")-10,this.get("height")-10,5).attr({fill:"#FFF"});var s=this.get("Plan");s.draw(a,i,n,undefined,undefined,r,o);var l=this.get("Statistics");l.set_statistics(o)}});P.extend(O,{DrawJSONPlan:function e(l,t,d){O.totalNodes=0;O.totalDownloadedNodes=0;O.isDownloaded=false;l.empty();var c=y.extend(true,[],t);var u=1;var i=y("<div></div>",{class:"pg-explain-zoom-area btn-group",role:"group"}).appendTo(l),f=y("<button></button>",{class:"btn btn-secondary pg-explain-zoom-btn badge",title:"Zoom in",tabindex:0}).appendTo(i).append(y("<i></i>",{class:"fa fa-search-plus"})),h=y("<button></button>",{class:"btn btn-secondary pg-explain-zoom-btn badge",title:"Zoom to original",tabindex:0}).appendTo(i).append(y("<i></i>",{class:"fa fa-arrows-alt"})),p=y("<button></button>",{class:"btn btn-secondary pg-explain-zoom-btn badge",title:"Zoom out",tabindex:0}).appendTo(i).append(y("<i></i>",{class:"fa fa-search-minus"}));var n=y("<div></div>",{class:"pg-explain-download-area btn-group",role:"group"}).appendTo(l),m=y("<button></button>",{id:"btn-explain-download",class:"btn btn-secondary pg-explain-download-btn badge",title:"Download",tabindex:0,disabled:function e(){var t=E.Browser.get_browser();if(t.name==="IE"){this.title="Not supported for Internet Explorer";return true}if(t.name==="Safari"&&parseInt(t.version)<10){this.title="Not supported for Safari version less than 10.1";return true}return false}}).appendTo(n).append(y("<i></i>",{class:"fa fa-download"}));var r=y("<div></div>",{class:"pg-explain-stats-area d-none",role:"group"}).appendTo(l);y("<button></button>",{id:"btn-explain-stats",class:"btn btn-secondary pg-explain-stats-btn badge",title:"Statistics",tabindex:0}).appendTo(r).append(y("<i></i>",{class:"fa fa-line-chart"}));var g=y("<div></div>",{class:"pgadmin-explain-container"}).appendTo(l),v=y("<div></div>",{id:"toolTip",class:"pgadmin-explain-tooltip"}).appendTo(l);v.empty();g.data("zoom-factor",u);var _=0,b=U;P.each(t,function(e){var t;if(d){var i=D.extend({initialize:function e(){this.set("Plan",new N({parse:true}));this.set("Statistics",new w)}});t=new i({parse:true})}else{t=new D}t.set(t.parse(e));_=t.get("width");b=t.get("height");var n=M(_,b),r=y(n.node).detach();g.append(r);t.draw(n,_-F,U,g,v);var o=g.width();if(o<_){var a=o/_;u=a;u=u<C?C:u;u=u>S?S:u;var s=new M.matrix;s.scale(u,u);r.find("g").first().attr({transform:s});r.attr({width:_*u,height:b*u});g.data("zoom-factor",u)}f.on("click",function(){u=u+T>k?k:u+T;var e=new M.matrix;e.scale(u,u);r.find("g").first().attr({transform:e});r.attr({width:_*u,height:b*u});g.data("zoom-factor",u);f.trigger("blur")});p.on("click",function(){u=u-T<C?C:u-T;var e=new M.matrix;e.scale(u,u);r.find("g").first().attr({transform:e});r.attr({width:_*u,height:b*u});g.data("zoom-factor",u);p.trigger("blur")});h.on("click",function(){u=S;var e=new M.matrix;e.scale(u,u);r.find("g").first().attr({transform:e});r.attr({width:_*u,height:b*u});g.data("zoom-factor",u);h.trigger("blur")});m.on("click",function(){O.DrawJSONPlan(l,c,true);I.Events.on("pga:explain_plan:node_icon:fetched",function(){if(!O.isDownloaded&&O.totalNodes===O.totalDownloadedNodes){O.isDownloaded=true;var e=M(".pgadmin-explain-container svg");var t=new Date;var i="explain_plan_"+t.getTime()+".svg";x.downloadSVG(e.toString(),i);m.trigger("blur")}})})})}});return O}.apply(t,n),r!==undefined&&(e.exports=r))},function(r,o,e){var a,s;var a,n;(function(){var e=r.exports=0;(function(e){var t="0.5.0",h="hasOwnProperty",p=/[\.\/]/,m=/\s*,\s*/,g="*",i=function(){},v=function(e,t){return e-t},_,b,y={n:{}},w=function(){for(var e=0,t=this.length;e<t;e++){if(typeof this[e]!="undefined"){return this[e]}}},x=function(){var e=this.length;while(--e){if(typeof this[e]!="undefined"){return this[e]}}},n=Object.prototype.toString,C=String,k=Array.isArray||function(e){return e instanceof Array||n.call(e)=="[object Array]"};eve=function(e,t){var i=y,n=b,r=Array.prototype.slice.call(arguments,2),o=eve.listeners(e),a=0,s=false,l,d=[],c={},u=[],f=_,h=[];u.firstDefined=w;u.lastDefined=x;_=e;b=0;for(var p=0,m=o.length;p<m;p++)if("zIndex"in o[p]){d.push(o[p].zIndex);if(o[p].zIndex<0){c[o[p].zIndex]=o[p]}}d.sort(v);while(d[a]<0){l=c[d[a++]];u.push(l.apply(t,r));if(b){b=n;return u}}for(p=0;p<m;p++){l=o[p];if("zIndex"in l){if(l.zIndex==d[a]){u.push(l.apply(t,r));if(b){break}do{a++;l=c[d[a]];l&&u.push(l.apply(t,r));if(b){break}}while(l)}else{c[l.zIndex]=l}}else{u.push(l.apply(t,r));if(b){break}}}b=n;_=f;return u};eve._events=y;eve.listeners=function(e){var t=k(e)?e:e.split(p),i=y,n,r,o,a,s,l,d,c,u=[i],f=[];for(a=0,s=t.length;a<s;a++){c=[];for(l=0,d=u.length;l<d;l++){i=u[l].n;r=[i[t[a]],i[g]];o=2;while(o--){n=r[o];if(n){c.push(n);f=f.concat(n.f||[])}}}u=c}return f};eve.separator=function(e){if(e){e=C(e).replace(/(?=[\.\^\]\[\-])/g,"\\");e="["+e+"]";p=new RegExp(e)}else{p=/[\.\/]/}};eve.on=function(e,a){if(typeof a!="function"){return function(){}}var t=k(e)?k(e[0])?e:[e]:C(e).split(m);for(var i=0,n=t.length;i<n;i++){(function(e){var t=k(e)?e:C(e).split(p),i=y,n;for(var r=0,o=t.length;r<o;r++){i=i.n;i=i.hasOwnProperty(t[r])&&i[t[r]]||(i[t[r]]={n:{}})}i.f=i.f||[];for(r=0,o=i.f.length;r<o;r++)if(i.f[r]==a){n=true;break}!n&&i.f.push(a)})(t[i])}return function(e){if(+e==+e){a.zIndex=+e}}};eve.f=function(e){var t=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}};eve.stop=function(){b=1};eve.nt=function(e){var t=k(_)?_.join("."):_;if(e){return new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t)}return t};eve.nts=function(){return k(_)?_:_.split(p)};eve.off=eve.unbind=function(e,t){if(!e){eve._events=y={n:{}};return}var i=k(e)?k(e[0])?e:[e]:C(e).split(m);if(i.length>1){for(var n=0,r=i.length;n<r;n++){eve.off(i[n],t)}return}i=k(e)?e:C(e).split(p);var o,a,s,n,r,l,d,c=[y],u=[];for(n=0,r=i.length;n<r;n++){for(l=0;l<c.length;l+=s.length-2){s=[l,1];o=c[l].n;if(i[n]!=g){if(o[i[n]]){s.push(o[i[n]]);u.unshift({n:o,name:i[n]})}}else{for(a in o)if(o[h](a)){s.push(o[a]);u.unshift({n:o,name:a})}}c.splice.apply(c,s)}}for(n=0,r=c.length;n<r;n++){o=c[n];while(o.n){if(t){if(o.f){for(l=0,d=o.f.length;l<d;l++)if(o.f[l]==t){o.f.splice(l,1);break}!o.f.length&&delete o.f}for(a in o.n)if(o.n[h](a)&&o.n[a].f){var f=o.n[a].f;for(l=0,d=f.length;l<d;l++)if(f[l]==t){f.splice(l,1);break}!f.length&&delete o.n[a].f}}else{delete o.f;for(a in o.n)if(o.n[h](a)&&o.n[a].f){delete o.n[a].f}}o=o.n}}e:for(n=0,r=u.length;n<r;n++){o=u[n];for(a in o.n[o.name].f){continue e}for(a in o.n[o.name].n){continue e}delete o.n[o.name]}};eve.once=function(e,t){var i=function(){eve.off(e,i);return t.apply(this,arguments)};return eve.on(e,i)};eve.version=t;eve.toString=function(){return"You are running Eve "+t};true&&r.exports?r.exports=eve:true?!(a=[],s=function(){return eve}.apply(o,a)):undefined})(this);(function(t,i){if(true){!(a=[s],n=function(e){return i(t,e)}.apply(o,a),n!==undefined&&(r.exports=n))}else{var e}})(window||this,function(k,pe){var w=function(a){var c={},s=k.requestAnimationFrame||k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.oRequestAnimationFrame||k.msRequestAnimationFrame||function(e){setTimeout(e,16,(new Date).getTime());return true},l,d=Array.isArray||function(e){return e instanceof Array||Object.prototype.toString.call(e)=="[object Array]"},e=0,t="M"+(+new Date).toString(36),u=function(){return t+(e++).toString(36)},f=function(t,i,e,n){if(d(t)){res=[];for(var r=0,o=t.length;r<o;r++){res[r]=f(t[r],i,e[r],n)}return res}var a=(e-t)/(n-i);return function(e){return t+a*(e-i)}},i=Date.now||function(){return+new Date},h=function(e){var t=this;if(e==null){return t.s}var i=t.s-e;t.b+=t.dur*i;t.B+=t.dur*i;t.s=e},p=function(e){var t=this;if(e==null){return t.spd}t.spd=e},m=function(e){var t=this;if(e==null){return t.dur}t.s=t.s*e/t.dur;t.dur=e},g=function(){var e=this;delete c[e.id];e.update();a("mina.stop."+e.id,e)},v=function(){var e=this;if(e.pdif){return}delete c[e.id];e.update();e.pdif=e.get()-e.b},_=function(){var e=this;if(!e.pdif){return}e.b=e.get()-e.pdif;delete e.pdif;c[e.id]=e;y()},b=function(){var e=this,t;if(d(e.start)){t=[];for(var i=0,n=e.start.length;i<n;i++){t[i]=+e.start[i]+(e.end[i]-e.start[i])*e.easing(e.s)}}else{t=+e.start+(e.end-e.start)*e.easing(e.s)}e.set(t)},y=function(e){if(!e){if(!l){l=s(y)}return}var t=0;for(var i in c)if(c.hasOwnProperty(i)){var n=c[i],r=n.get(),o;t++;n.s=(r-n.b)/(n.dur/n.spd);if(n.s>=1){delete c[i];n.s=1;t--;(function(e){setTimeout(function(){a("mina.finish."+e.id,e)})})(n)}n.update()}l=t?s(y):false},w=function(e,t,i,n,r,o,a){var s={id:u(),start:e,end:t,b:i,s:0,dur:n-i,spd:1,get:r,set:o,easing:a||w.linear,status:h,speed:p,duration:m,stop:g,pause:v,resume:_,update:b};c[s.id]=s;var l=0,d;for(d in c)if(c.hasOwnProperty(d)){l++;if(l==2){break}}l==1&&y();return s};w.time=i;w.getById=function(e){return c[e]||null};w.linear=function(e){return e};w.easeout=function(e){return Math.pow(e,1.7)};w.easein=function(e){return Math.pow(e,.48)};w.easeinout=function(e){if(e==1){return 1}if(e==0){return 0}var t=.48-e/1.04,i=Math.sqrt(.1734+t*t),n=i-t,r=Math.pow(Math.abs(n),1/3)*(n<0?-1:1),o=-i-t,a=Math.pow(Math.abs(o),1/3)*(o<0?-1:1),s=r+a+.5;return(1-s)*3*s*s+s*s*s};w.backin=function(e){if(e==1){return 1}var t=1.70158;return e*e*((t+1)*e-t)};w.backout=function(e){if(e==0){return 0}e=e-1;var t=1.70158;return e*e*((t+1)*e+t)+1};w.elastic=function(e){if(e==!!e){return e}return Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1};w.bounce=function(e){var t=7.5625,i=2.75,n;if(e<1/i){n=t*e*e}else{if(e<2/i){e-=1.5/i;n=t*e*e+.75}else{if(e<2.5/i){e-=2.25/i;n=t*e*e+.9375}else{e-=2.625/i;n=t*e*e+.984375}}}return n};k.mina=w;return w}(typeof pe=="undefined"?function(){}:pe);var e=function(e){v.version="0.5.1";function v(e,t){if(e){if(e.nodeType){return ce(e)}if(z(e,"array")&&v.set){return v.set.apply(v,e)}if(e instanceof ae){return e}if(t==null){e=l.doc.querySelector(String(e));return ce(e)}}e=e==null?"100%":e;t=t==null?"100%":t;return new de(e,t)}v.toString=function(){return"Snap v"+this.version};v._={};var l={win:e.window,doc:e.window.document};v._.glob=l;var c="hasOwnProperty",_=String,d=parseFloat,u=parseInt,f=Math,h=f.max,p=f.min,m=f.abs,t=f.pow,b=f.PI,i=f.round,y="",n=" ",r=Object.prototype.toString,o=/^url\(['"]?([^\)]+?)['"]?\)$/i,w=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,a=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,s=v._.separator=/[,\s]+/,x=/[\s]/g,C=/[\s]*,[\s]*/,k={hs:1,rg:1},S=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,T=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,N=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,D=0,P="S"+(+new Date).toString(36),E=function(e){return(e&&e.type?e.type:y)+P+(D++).toString(36)},M="http://www.w3.org/1999/xlink",I="http://www.w3.org/2000/svg",O={},A=v.url=function(e){return"url('#"+e+"')"};function R(e,t){if(t){if(e=="#text"){e=l.doc.createTextNode(t.text||t["#text"]||"")}if(e=="#comment"){e=l.doc.createComment(t.text||t["#text"]||"")}if(typeof e=="string"){e=R(e)}if(typeof t=="string"){if(e.nodeType==1){if(t.substring(0,6)=="xlink:"){return e.getAttributeNS(M,t.substring(6))}if(t.substring(0,4)=="xml:"){return e.getAttributeNS(I,t.substring(4))}return e.getAttribute(t)}else if(t=="text"){return e.nodeValue}else{return null}}if(e.nodeType==1){for(var i in t)if(t[c](i)){var n=_(t[i]);if(n){if(i.substring(0,6)=="xlink:"){e.setAttributeNS(M,i.substring(6),n)}else if(i.substring(0,4)=="xml:"){e.setAttributeNS(I,i.substring(4),n)}else{e.setAttribute(i,n)}}else{e.removeAttribute(i)}}}else if("text"in t){e.nodeValue=t.text}}else{e=l.doc.createElementNS(I,e)}return e}v._.$=R;v._.id=E;function L(e){var t=e.attributes,i,n={};for(var r=0;r<t.length;r++){if(t[r].namespaceURI==M){i="xlink:"}else{i=""}i+=t[r].name;n[i]=t[r].textContent}return n}function z(e,t){t=_.prototype.toLowerCase.call(t);if(t=="finite"){return isFinite(e)}if(t=="array"&&(e instanceof Array||Array.isArray&&Array.isArray(e))){return true}return t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||r.call(e).slice(8,-1).toLowerCase()==t}v.format=function(){var t=/\{([^\}]+)\}/g,n=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,t,i){var o=i;t.replace(n,function(e,t,i,n,r){t=t||n;if(o){if(t in o){o=o[t]}typeof o=="function"&&r&&(o=o())}});o=(o==null||o==i?e:o)+"";return o};return function(e,i){return _(e).replace(t,function(e,t){return r(e,t,i)})}}();function j(e){if(typeof e=="function"||Object(e)!==e){return e}var t=new e.constructor;for(var i in e)if(e[c](i)){t[i]=j(e[i])}return t}v._.clone=j;function B(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t){return e.push(e.splice(i,1)[0])}}function q(r,o,a){function s(){var e=Array.prototype.slice.call(arguments,0),t=e.join("␀"),i=s.cache=s.cache||{},n=s.count=s.count||[];if(i[c](t)){B(n,t);return a?a(i[t]):i[t]}n.length>=1e3&&delete i[n.shift()];n.push(t);i[t]=r.apply(o,e);return a?a(i[t]):i[t]}return s}v._.cacher=q;function F(e,t,i,n,r,o){if(r==null){var a=e-i,s=t-n;if(!a&&!s){return 0}return(180+f.atan2(-s,-a)*180/b+360)%360}else{return F(e,t,r,o)-F(i,n,r,o)}}function U(e){return e%360*b/180}function H(e){return e*180/b%360}function W(){return this.x+n+this.y}function $(){return this.x+n+this.y+n+this.width+" × "+this.height}v.rad=U;v.deg=H;v.sin=function(e){return f.sin(v.rad(e))};v.tan=function(e){return f.tan(v.rad(e))};v.cos=function(e){return f.cos(v.rad(e))};v.asin=function(e){return v.deg(f.asin(e))};v.acos=function(e){return v.deg(f.acos(e))};v.atan=function(e){return v.deg(f.atan(e))};v.atan2=function(e){return v.deg(f.atan2(e))};v.angle=F;v.len=function(e,t,i,n){return Math.sqrt(v.len2(e,t,i,n))};v.len2=function(e,t,i,n){return(e-i)*(e-i)+(t-n)*(t-n)};v.closestPoint=function(e,n,r){function t(e){var t=e.x-n,i=e.y-r;return t*t+i*i}var i=e.node,o=i.getTotalLength(),a=o/i.pathSegList.numberOfItems*.125,s,l,d=Infinity;for(var c,u=0,f;u<=o;u+=a){if((f=t(c=i.getPointAtLength(u)))<d){s=c;l=u;d=f}}a*=.5;while(a>.5){var h,p,m,g,v,_;if((m=l-a)>=0&&(v=t(h=i.getPointAtLength(m)))<d){s=h;l=m;d=v}else if((g=l+a)<=o&&(_=t(p=i.getPointAtLength(g)))<d){s=p;l=g;d=_}else{a*=.5}}s={x:s.x,y:s.y,length:l,distance:Math.sqrt(d)};return s};v.is=z;v.snapTo=function(e,t,i){i=z(i,"finite")?i:10;if(z(e,"array")){var n=e.length;while(n--)if(m(e[n]-t)<=i){return e[n]}}else{e=+e;var r=t%e;if(r<i){return t-r}if(r>e-i){return t-r+e}}return t};v.getRGB=q(function(e){if(!e||!!((e=_(e)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:K}}if(e=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:K}}!(k[c](e.toLowerCase().substring(0,2))||e.charAt()=="#")&&(e=V(e));if(!e){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:K}}var t,i,n,r,o,a,s,l=e.match(w);if(l){if(l[2]){r=u(l[2].substring(5),16);n=u(l[2].substring(3,5),16);i=u(l[2].substring(1,3),16)}if(l[3]){r=u((a=l[3].charAt(3))+a,16);n=u((a=l[3].charAt(2))+a,16);i=u((a=l[3].charAt(1))+a,16)}if(l[4]){s=l[4].split(C);i=d(s[0]);s[0].slice(-1)=="%"&&(i*=2.55);n=d(s[1]);s[1].slice(-1)=="%"&&(n*=2.55);r=d(s[2]);s[2].slice(-1)=="%"&&(r*=2.55);l[1].toLowerCase().slice(0,4)=="rgba"&&(o=d(s[3]));s[3]&&s[3].slice(-1)=="%"&&(o/=100)}if(l[5]){s=l[5].split(C);i=d(s[0]);s[0].slice(-1)=="%"&&(i/=100);n=d(s[1]);s[1].slice(-1)=="%"&&(n/=100);r=d(s[2]);s[2].slice(-1)=="%"&&(r/=100);(s[0].slice(-3)=="deg"||s[0].slice(-1)=="°")&&(i/=360);l[1].toLowerCase().slice(0,4)=="hsba"&&(o=d(s[3]));s[3]&&s[3].slice(-1)=="%"&&(o/=100);return v.hsb2rgb(i,n,r,o)}if(l[6]){s=l[6].split(C);i=d(s[0]);s[0].slice(-1)=="%"&&(i/=100);n=d(s[1]);s[1].slice(-1)=="%"&&(n/=100);r=d(s[2]);s[2].slice(-1)=="%"&&(r/=100);(s[0].slice(-3)=="deg"||s[0].slice(-1)=="°")&&(i/=360);l[1].toLowerCase().slice(0,4)=="hsla"&&(o=d(s[3]));s[3]&&s[3].slice(-1)=="%"&&(o/=100);return v.hsl2rgb(i,n,r,o)}i=p(f.round(i),255);n=p(f.round(n),255);r=p(f.round(r),255);o=p(h(o,0),1);l={r:i,g:n,b:r,toString:K};l.hex="#"+(16777216|r|n<<8|i<<16).toString(16).slice(1);l.opacity=z(o,"finite")?o:1;return l}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:K}},v);v.hsb=q(function(e,t,i){return v.hsb2rgb(e,t,i).hex});v.hsl=q(function(e,t,i){return v.hsl2rgb(e,t,i).hex});v.rgb=q(function(e,t,i,n){if(z(n,"finite")){var r=f.round;return"rgba("+[r(e),r(t),r(i),+n.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)});var V=function(e){var i=l.doc.getElementsByTagName("head")[0]||l.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";V=q(function(e){if(e.toLowerCase()=="red"){return n}i.style.color=n;i.style.color=e;var t=l.doc.defaultView.getComputedStyle(i,y).getPropertyValue("color");return t==n?null:t});return V(e)},G=function(){return"hsb("+[this.h,this.s,this.b]+")"},Z=function(){return"hsl("+[this.h,this.s,this.l]+")"},K=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Y=function(e,t,i){if(t==null&&z(e,"object")&&"r"in e&&"g"in e&&"b"in e){i=e.b;t=e.g;e=e.r}if(t==null&&z(e,string)){var n=v.getRGB(e);e=n.r;t=n.g;i=n.b}if(e>1||t>1||i>1){e/=255;t/=255;i/=255}return[e,t,i]},J=function(e,t,i,n){e=f.round(e*255);t=f.round(t*255);i=f.round(i*255);var r={r:e,g:t,b:i,opacity:z(n,"finite")?n:1,hex:v.rgb(e,t,i),toString:K};z(n,"finite")&&(r.opacity=n);return r};v.color=function(e){var t;if(z(e,"object")&&"h"in e&&"s"in e&&"b"in e){t=v.hsb2rgb(e);e.r=t.r;e.g=t.g;e.b=t.b;e.opacity=1;e.hex=t.hex}else if(z(e,"object")&&"h"in e&&"s"in e&&"l"in e){t=v.hsl2rgb(e);e.r=t.r;e.g=t.g;e.b=t.b;e.opacity=1;e.hex=t.hex}else{if(z(e,"string")){e=v.getRGB(e)}if(z(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)){t=v.rgb2hsl(e);e.h=t.h;e.s=t.s;e.l=t.l;t=v.rgb2hsb(e);e.v=t.b}else{e={hex:"none"};e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1;e.error=1}}e.toString=K;return e};v.hsb2rgb=function(e,t,i,n){if(z(e,"object")&&"h"in e&&"s"in e&&"b"in e){i=e.b;t=e.s;n=e.o;e=e.h}e*=360;var r,o,a,s,l;e=e%360/60;l=i*t;s=l*(1-m(e%2-1));r=o=a=i-l;e=~~e;r+=[l,s,0,0,s,l][e];o+=[s,l,l,s,0,0][e];a+=[0,0,s,l,l,s][e];return J(r,o,a,n)};v.hsl2rgb=function(e,t,i,n){if(z(e,"object")&&"h"in e&&"s"in e&&"l"in e){i=e.l;t=e.s;e=e.h}if(e>1||t>1||i>1){e/=360;t/=100;i/=100}e*=360;var r,o,a,s,l;e=e%360/60;l=2*t*(i<.5?i:1-i);s=l*(1-m(e%2-1));r=o=a=i-l/2;e=~~e;r+=[l,s,0,0,s,l][e];o+=[s,l,l,s,0,0][e];a+=[0,0,s,l,l,s][e];return J(r,o,a,n)};v.rgb2hsb=function(e,t,i){i=Y(e,t,i);e=i[0];t=i[1];i=i[2];var n,r,o,a;o=h(e,t,i);a=o-p(e,t,i);n=a==0?null:o==e?(t-i)/a:o==t?(i-e)/a+2:(e-t)/a+4;n=(n+360)%6*60/360;r=a==0?0:a/o;return{h:n,s:r,b:o,toString:G}};v.rgb2hsl=function(e,t,i){i=Y(e,t,i);e=i[0];t=i[1];i=i[2];var n,r,o,a,s,l;a=h(e,t,i);s=p(e,t,i);l=a-s;n=l==0?null:a==e?(t-i)/l:a==t?(i-e)/l+2:(e-t)/l+4;n=(n+360)%6*60/360;o=(a+s)/2;r=l==0?0:o<.5?l/(2*o):l/(2-2*o);return{h:n,s:r,l:o,toString:Z}};v.parsePathString=function(e){if(!e){return null}var t=v.path(e);if(t.arr){return v.path.clone(t.arr)}var o={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];if(z(e,"array")&&z(e[0],"array")){a=v.path.clone(e)}if(!a.length){_(e).replace(S,function(e,t,i){var n=[],r=t.toLowerCase();i.replace(N,function(e,t){t&&n.push(+t)});if(r=="m"&&n.length>2){a.push([t].concat(n.splice(0,2)));r="l";t=t=="m"?"l":"L"}if(r=="o"&&n.length==1){a.push([t,n[0]])}if(r=="r"){a.push([t].concat(n))}else while(n.length>=o[r]){a.push([t].concat(n.splice(0,o[r])));if(!o[r]){break}}})}a.toString=v.path.toString;t.arr=v.path.clone(a);return a};var Q=v.parseTransformString=function(e){if(!e){return null}var t={r:3,s:4,t:2,m:6},o=[];if(z(e,"array")&&z(e[0],"array")){o=v.path.clone(e)}if(!o.length){_(e).replace(T,function(e,t,i){var n=[],r=t.toLowerCase();i.replace(N,function(e,t){t&&n.push(+t)});o.push([t].concat(n))})}o.toString=v.path.toString;return o};function X(e){var n=[];e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,t,i){i=i.split(/\s*,\s*|\s+/);if(t=="rotate"&&i.length==1){i.push(0,0)}if(t=="scale"){if(i.length>2){i=i.slice(0,2)}else if(i.length==2){i.push(0,0)}if(i.length==1){i.push(i[0],0,0)}}if(t=="skewX"){n.push(["m",1,0,f.tan(U(i[0])),1,0,0])}else if(t=="skewY"){n.push(["m",1,f.tan(U(i[0])),0,1,0,0])}else{n.push([t.charAt(0)].concat(i))}return e});return n}v._.svgTransform2string=X;v._.rgTransform=/^[a-z][\s]*-?\.?\d/i;function ee(e,t){var i=Q(e),n=new v.Matrix;if(i){for(var r=0,o=i.length;r<o;r++){var a=i[r],s=a.length,l=_(a[0]).toLowerCase(),d=a[0]!=l,c=d?n.invert():0,u,f,h,p,m;if(l=="t"&&s==2){n.translate(a[1],0)}else if(l=="t"&&s==3){if(d){u=c.x(0,0);f=c.y(0,0);h=c.x(a[1],a[2]);p=c.y(a[1],a[2]);n.translate(h-u,p-f)}else{n.translate(a[1],a[2])}}else if(l=="r"){if(s==2){m=m||t;n.rotate(a[1],m.x+m.width/2,m.y+m.height/2)}else if(s==4){if(d){h=c.x(a[2],a[3]);p=c.y(a[2],a[3]);n.rotate(a[1],h,p)}else{n.rotate(a[1],a[2],a[3])}}}else if(l=="s"){if(s==2||s==3){m=m||t;n.scale(a[1],a[s-1],m.x+m.width/2,m.y+m.height/2)}else if(s==4){if(d){h=c.x(a[2],a[3]);p=c.y(a[2],a[3]);n.scale(a[1],a[1],h,p)}else{n.scale(a[1],a[1],a[2],a[3])}}else if(s==5){if(d){h=c.x(a[3],a[4]);p=c.y(a[3],a[4]);n.scale(a[1],a[2],h,p)}else{n.scale(a[1],a[2],a[3],a[4])}}}else if(l=="m"&&s==7){n.add(a[1],a[2],a[3],a[4],a[5],a[6])}}}return n}v._.transform2matrix=ee;v._unit2px=re;var te=l.doc.contains||l.doc.compareDocumentPosition?function(e,t){var i=e.nodeType==9?e.documentElement:e,n=t&&t.parentNode;return e==n||!!(n&&n.nodeType==1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t){t=t.parentNode;if(t==e){return true}}}return false};function ie(e){var t=e.node.ownerSVGElement&&ce(e.node.ownerSVGElement)||e.node.parentNode&&ce(e.node.parentNode)||v.select("svg")||v(0,0),i=t.select("defs"),n=i==null?false:i.node;if(!n){n=le("defs",t.node).node}return n}function ne(e){return e.node.ownerSVGElement&&ce(e.node.ownerSVGElement)||v.select("svg")}v._.getSomeDefs=ie;v._.getSomeSVG=ne;function re(i,n,r){var e=ne(i).node,o={},t=e.querySelector(".svg---mgr");if(!t){t=R("rect");R(t,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"});e.appendChild(t)}function a(e){if(e==null){return y}if(e==+e){return e}R(t,{width:e});try{return t.getBBox().width}catch(e){return 0}}function s(e){if(e==null){return y}if(e==+e){return e}R(t,{height:e});try{return t.getBBox().height}catch(e){return 0}}function l(e,t){if(n==null){o[e]=t(i.attr(e)||0)}else if(e==n){o=t(r==null?i.attr(e)||0:r)}}switch(i.type){case"rect":l("rx",a);l("ry",s);case"image":l("width",a);l("height",s);case"text":l("x",a);l("y",s);break;case"circle":l("cx",a);l("cy",s);l("r",a);break;case"ellipse":l("cx",a);l("cy",s);l("rx",a);l("ry",s);break;case"line":l("x1",a);l("x2",a);l("y1",s);l("y2",s);break;case"marker":l("refX",a);l("markerWidth",a);l("refY",s);l("markerHeight",s);break;case"radialGradient":l("fx",a);l("fy",s);break;case"tspan":l("dx",a);l("dy",s);break;default:l(n,a)}e.removeChild(t);return o}v.select=function(e){e=_(e).replace(/([^\\]):/g,"$1\\:");return ce(l.doc.querySelector(e))};v.selectAll=function(e){var t=l.doc.querySelectorAll(e),i=(v.set||Array)();for(var n=0;n<t.length;n++){i.push(ce(t[n]))}return i};function oe(e){if(!z(e,"array")){e=Array.prototype.slice.call(arguments,0)}var t=0,i=0,n=this.node;while(this[t])delete this[t++];for(t=0;t<e.length;t++){if(e[t].type=="set"){e[t].forEach(function(e){n.appendChild(e.node)})}else{n.appendChild(e[t].node)}}var r=n.childNodes;for(t=0;t<r.length;t++){this[i++]=ce(r[t])}return this}setInterval(function(){for(var e in O)if(O[c](e)){var t=O[e],i=t.node;if(t.type!="svg"&&!i.ownerSVGElement||t.type=="svg"&&(!i.parentNode||"ownerSVGElement"in i.parentNode&&!i.ownerSVGElement)){delete O[e]}}},1e4);function ae(e){if(e.snap in O){return O[e.snap]}var t;try{t=e.ownerSVGElement}catch(e){}this.node=e;if(t){this.paper=new de(t)}this.type=e.tagName||e.nodeName;var i=this.id=E(this);this.anims={};this._={transform:[]};e.snap=i;O[i]=this;if(this.type=="g"){this.add=oe}if(this.type in{g:1,mask:1,pattern:1,symbol:1}){for(var n in de.prototype)if(de.prototype[c](n)){this[n]=de.prototype[n]}}}ae.prototype.attr=function(e,t){var i=this,n=i.node;if(!e){if(n.nodeType!=1){return{text:n.nodeValue}}var r=n.attributes,o={};for(var a=0,s=r.length;a<s;a++){o[r[a].nodeName]=r[a].nodeValue}return o}if(z(e,"string")){if(arguments.length>1){var l={};l[e]=t;e=l}else{return pe("snap.util.getattr."+e,i).firstDefined()}}for(var d in e){if(e[c](d)){pe("snap.util.attr."+d,i,e[d])}}return i};v.parse=function(e){var t=l.doc.createDocumentFragment(),i=true,n=l.doc.createElement("div");e=_(e);if(!e.match(/^\s*<\s*svg(?:\s|>)/)){e="<svg>"+e+"</svg>";i=false}n.innerHTML=e;e=n.getElementsByTagName("svg")[0];if(e){if(i){t=e}else{while(e.firstChild){t.appendChild(e.firstChild)}}}return new se(t)};function se(e){this.node=e}v.fragment=function(){var e=Array.prototype.slice.call(arguments,0),t=l.doc.createDocumentFragment();for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.node&&r.node.nodeType){t.appendChild(r.node)}if(r.nodeType){t.appendChild(r)}if(typeof r=="string"){t.appendChild(v.parse(r).node)}}return new se(t)};function le(e,t){var i=R(e);t.appendChild(i);var n=ce(i);return n}function de(e,t){var i,n,r,o=de.prototype;if(e&&e.tagName&&e.tagName.toLowerCase()=="svg"){if(e.snap in O){return O[e.snap]}var a=e.ownerDocument;i=new ae(e);n=e.getElementsByTagName("desc")[0];r=e.getElementsByTagName("defs")[0];if(!n){n=R("desc");n.appendChild(a.createTextNode("Created with Snap"));i.node.appendChild(n)}if(!r){r=R("defs");i.node.appendChild(r)}i.defs=r;for(var s in o)if(o[c](s)){i[s]=o[s]}i.paper=i.root=i}else{i=le("svg",l.doc.body);R(i.node,{height:t,version:1.1,width:e,xmlns:I})}return i}function ce(e){if(!e){return e}if(e instanceof ae||e instanceof se){return e}if(e.tagName&&e.tagName.toLowerCase()=="svg"){return new de(e)}if(e.tagName&&e.tagName.toLowerCase()=="object"&&e.type=="image/svg+xml"){return new de(e.contentDocument.getElementsByTagName("svg")[0])}return new ae(e)}v._.make=le;v._.wrap=ce;de.prototype.el=function(e,t){var i=le(e,this.node);t&&i.attr(t);return i};ae.prototype.children=function(){var e=[],t=this.node.childNodes;for(var i=0,n=t.length;i<n;i++){e[i]=v(t[i])}return e};function ue(e,t){for(var i=0,n=e.length;i<n;i++){var r={type:e[i].type,attr:e[i].attr()},o=e[i].children();t.push(r);if(o.length){ue(o,r.childNodes=[])}}}ae.prototype.toJSON=function(){var e=[];ue([this],e);return e[0]};pe.on("snap.util.getattr",function(){var e=pe.nt();e=e.substring(e.lastIndexOf(".")+1);var t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});if(fe[c](t)){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(t)}else{return R(this.node,e)}});var fe={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};pe.on("snap.util.attr",function(e){var t=pe.nt(),i={};t=t.substring(t.lastIndexOf(".")+1);i[t]=e;var n=t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),r=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});if(fe[c](r)){this.node.style[n]=e==null?y:e}else{R(this.node,i)}});(function(e){})(de.prototype);v.ajax=function(e,t,i,n){var r=new XMLHttpRequest,o=E();if(r){if(z(t,"function")){n=i;i=t;t=null}else if(z(t,"object")){var a=[];for(var s in t)if(t.hasOwnProperty(s)){a.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]))}t=a.join("&")}r.open(t?"POST":"GET",e,true);if(t){r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.setRequestHeader("Content-type","application/x-www-form-urlencoded")}if(i){pe.once("snap.ajax."+o+".0",i);pe.once("snap.ajax."+o+".200",i);pe.once("snap.ajax."+o+".304",i)}r.onreadystatechange=function(){if(r.readyState!=4)return;pe("snap.ajax."+o+"."+r.status,n,r)};if(r.readyState==4){return r}r.send(t);return r}};v.load=function(e,i,n){v.ajax(e,function(e){var t=v.parse(e.responseText);n?i.call(n,t):i(t)})};var he=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,r=i.documentElement,o=r.clientTop||n.clientTop||0,a=r.clientLeft||n.clientLeft||0,s=t.top+(g.win.pageYOffset||r.scrollTop||n.scrollTop)-o,l=t.left+(g.win.pageXOffset||r.scrollLeft||n.scrollLeft)-a;return{y:s,x:l}};v.getElementByPoint=function(e,t){var i=this,n=i.canvas,r=l.doc.elementFromPoint(e,t);if(l.win.opera&&r.tagName=="svg"){var o=he(r),a=r.createSVGRect();a.x=e-o.x;a.y=t-o.y;a.width=a.height=1;var s=r.getIntersectionList(a,null);if(s.length){r=s[s.length-1]}}if(!r){return null}return ce(r)};v.plugin=function(e){e(v,ae,de,l,se)};l.win.Snap=v;return v}(k||this);e.plugin(function(p,e,t,i,n){var r=e.prototype,s=p.is,c=String,o=p._unit2px,m=p._.$,l=p._.make,d=p._.getSomeDefs,a="hasOwnProperty",u=p._.wrap;r.getBBox=function(e){if(this.type=="tspan"){return p._.box(this.node.getClientRects().item(0))}if(!p.Matrix||!p.path){return this.node.getBBox()}var t=this,i=new p.Matrix;if(t.removed){return p._.box()}while(t.type=="use"){if(!e){i=i.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))}if(t.original){t=t.original}else{var n=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(n.substring(n.indexOf("#")+1))}}var r=t._,o=p.path.get[t.type]||p.path.get.deflt;try{if(e){r.bboxwt=o?p.path.getBBox(t.realPath=o(t)):p._.box(t.node.getBBox());return p._.box(r.bboxwt)}else{t.realPath=o(t);t.matrix=t.transform().localMatrix;r.bbox=p.path.getBBox(p.path.map(t.realPath,i.add(t.matrix)));return p._.box(r.bbox)}}catch(e){return p._.box()}};var f=function(){return this.string};function h(e,t){if(t==null){var i=true;if(e.type=="linearGradient"||e.type=="radialGradient"){t=e.node.getAttribute("gradientTransform")}else if(e.type=="pattern"){t=e.node.getAttribute("patternTransform")}else{t=e.node.getAttribute("transform")}if(!t){return new p.Matrix}t=p._.svgTransform2string(t)}else{if(!p._.rgTransform.test(t)){t=p._.svgTransform2string(t)}else{t=c(t).replace(/\.{3}|\u2026/g,e._.transform||"")}if(s(t,"array")){t=p.path?p.path.toString.call(t):c(t)}e._.transform=t}var n=p._.transform2matrix(t,e.getBBox(1));if(i){return n}else{e.matrix=n}}r.transform=function(e){var t=this._;if(e==null){var i=this,n=new p.Matrix(this.node.getCTM()),r=h(this),o=[r],a=new p.Matrix,s,l=r.toTransformString(),d=c(r)==c(this.matrix)?c(t.transform):l;while(i.type!="svg"&&(i=i.parent())){o.push(h(i))}s=o.length;while(s--){a.add(o[s])}return{string:d,globalMatrix:n,totalMatrix:a,localMatrix:r,diffMatrix:n.clone().add(r.invert()),global:n.toTransformString(),total:a.toTransformString(),local:l,toString:f}}if(e instanceof p.Matrix){this.matrix=e;this._.transform=e.toTransformString()}else{h(this,e)}if(this.node){if(this.type=="linearGradient"||this.type=="radialGradient"){m(this.node,{gradientTransform:this.matrix})}else if(this.type=="pattern"){m(this.node,{patternTransform:this.matrix})}else{m(this.node,{transform:this.matrix})}}return this};r.parent=function(){return u(this.node.parentNode)};r.append=r.add=function(e){if(e){if(e.type=="set"){var t=this;e.forEach(function(e){t.add(e)});return this}e=u(e);this.node.appendChild(e.node);e.paper=this.paper}return this};r.appendTo=function(e){if(e){e=u(e);e.append(this)}return this};r.prepend=function(e){if(e){if(e.type=="set"){var t=this,i;e.forEach(function(e){if(i){i.after(e)}else{t.prepend(e)}i=e});return this}e=u(e);var n=e.parent();this.node.insertBefore(e.node,this.node.firstChild);this.add&&this.add();e.paper=this.paper;this.parent()&&this.parent().add();n&&n.add()}return this};r.prependTo=function(e){e=u(e);e.prepend(this);return this};r.before=function(e){if(e.type=="set"){var i=this;e.forEach(function(e){var t=e.parent();i.node.parentNode.insertBefore(e.node,i.node);t&&t.add()});this.parent().add();return this}e=u(e);var t=e.parent();this.node.parentNode.insertBefore(e.node,this.node);this.parent()&&this.parent().add();t&&t.add();e.paper=this.paper;return this};r.after=function(e){e=u(e);var t=e.parent();if(this.node.nextSibling){this.node.parentNode.insertBefore(e.node,this.node.nextSibling)}else{this.node.parentNode.appendChild(e.node)}this.parent()&&this.parent().add();t&&t.add();e.paper=this.paper;return this};r.insertBefore=function(e){e=u(e);var t=this.parent();e.node.parentNode.insertBefore(this.node,e.node);this.paper=e.paper;t&&t.add();e.parent()&&e.parent().add();return this};r.insertAfter=function(e){e=u(e);var t=this.parent();e.node.parentNode.insertBefore(this.node,e.node.nextSibling);this.paper=e.paper;t&&t.add();e.parent()&&e.parent().add();return this};r.remove=function(){var e=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=true;e&&e.add();return this};r.select=function(e){return u(this.node.querySelector(e))};r.selectAll=function(e){var t=this.node.querySelectorAll(e),i=(p.set||Array)();for(var n=0;n<t.length;n++){i.push(u(t[n]))}return i};r.asPX=function(e,t){if(t==null){t=this.attr(e)}return+o(this,e,t)};r.use=function(){var e,t=this.node.id;if(!t){t=this.id;m(this.node,{id:t})}if(this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"){e=l(this.type,this.node.parentNode)}else{e=l("use",this.node.parentNode)}m(e.node,{"xlink:href":"#"+t});e.original=this;return e};function g(e){var t=e.selectAll("*"),i,r=/^\s*url\(("|'|)(.*)\1\)\s*$/,n=[],o={};function a(i,n){var e=m(i.node,n);e=e&&e.match(r);e=e&&e[2];if(e&&e.charAt()=="#"){e=e.substring(1)}else{return}if(e){o[e]=(o[e]||[]).concat(function(e){var t={};t[n]=p.url(e);m(i.node,t)})}}function s(t){var e=m(t.node,"xlink:href");if(e&&e.charAt()=="#"){e=e.substring(1)}else{return}if(e){o[e]=(o[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)})}}for(var l=0,d=t.length;l<d;l++){i=t[l];a(i,"fill");a(i,"stroke");a(i,"filter");a(i,"mask");a(i,"clip-path");s(i);var c=m(i.node,"id");if(c){m(i.node,{id:i.id});n.push({old:c,id:i.id})}}for(l=0,d=n.length;l<d;l++){var u=o[n[l].old];if(u){for(var f=0,h=u.length;f<h;f++){u[f](n[l].id)}}}}r.clone=function(){var e=u(this.node.cloneNode(true));if(m(e.node,"id")){m(e.node,{id:e.id})}g(e);e.insertAfter(this);return e};r.toDefs=function(){var e=d(this);e.appendChild(this.node);return this};r.pattern=r.toPattern=function(e,t,i,n){var r=l("pattern",d(this));if(e==null){e=this.getBBox()}if(s(e,"object")&&"x"in e){t=e.y;i=e.width;n=e.height;e=e.x}m(r.node,{x:e,y:t,width:i,height:n,patternUnits:"userSpaceOnUse",id:r.id,viewBox:[e,t,i,n].join(" ")});r.node.appendChild(this.node);return r};r.marker=function(e,t,i,n,r,o){var a=l("marker",d(this));if(e==null){e=this.getBBox()}if(s(e,"object")&&"x"in e){t=e.y;i=e.width;n=e.height;r=e.refX||e.cx;o=e.refY||e.cy;e=e.x}m(a.node,{viewBox:[e,t,i,n].join(" "),markerWidth:i,markerHeight:n,orient:"auto",refX:r||0,refY:o||0,id:a.id});a.node.appendChild(this.node);return a};var v={};r.data=function(e,t){var i=v[this.id]=v[this.id]||{};if(arguments.length==0){pe("snap.data.get."+this.id,this,i,null);return i}if(arguments.length==1){if(p.is(e,"object")){for(var n in e)if(e[a](n)){this.data(n,e[n])}return this}pe("snap.data.get."+this.id,this,i[e],e);return i[e]}i[e]=t;pe("snap.data.set."+this.id,this,t,e);return this};r.removeData=function(e){if(e==null){v[this.id]={}}else{v[this.id]&&delete v[this.id][e]}return this};r.outerSVG=r.toString=_(1);r.innerSVG=_();function _(o){return function(){var e=o?"<"+this.type:"",t=this.node.attributes,i=this.node.childNodes;if(o){for(var n=0,r=t.length;n<r;n++){e+=" "+t[n].name+'="'+t[n].value.replace(/"/g,'\\"')+'"'}}if(i.length){o&&(e+=">");for(n=0,r=i.length;n<r;n++){if(i[n].nodeType==3){e+=i[n].nodeValue}else if(i[n].nodeType==1){e+=u(i[n]).toString()}}o&&(e+="</"+this.type+">")}else{o&&(e+="/>")}return e}}r.toDataURL=function(){if(k&&k.btoa){var e=this.getBBox(),t=p.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t)))}};n.prototype.select=r.select;n.prototype.selectAll=r.selectAll});e.plugin(function(e,t,i,n,r){var o=t.prototype,g=e.is,v=String,_="hasOwnProperty";function b(i,n,r){return function(e){var t=e.slice(i,n);if(t.length==1){t=t[0]}return r?r(t):t}}var y=function(e,t,i,n){if(typeof i=="function"&&!i.length){n=i;i=w.linear}this.attr=e;this.dur=t;i&&(this.easing=i);n&&(this.callback=n)};e._.Animation=y;e.animation=function(e,t,i,n){return new y(e,t,i,n)};o.inAnim=function(){var e=this,i=[];for(var t in e.anims)if(e.anims[_](t)){(function(t){i.push({anim:new y(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})})(e.anims[t])}return i};e.animate=function(e,t,i,n,r,o){if(typeof r=="function"&&!r.length){o=r;r=w.linear}var a=w.time(),s=w(e,t,a,a+n,w.time,i,r);o&&pe.once("mina.finish."+s.id,o);return s};o.stop=function(){var e=this.inAnim();for(var t=0,i=e.length;t<i;t++){e[t].stop()}return this};o.animate=function(e,t,i,n){if(typeof i=="function"&&!i.length){n=i;i=w.linear}if(e instanceof y){n=e.callback;i=e.easing;t=e.dur;e=e.attr}var r=[],o=[],a={},s,l,d,c,u=this;for(var f in e)if(e[_](f)){if(u.equal){c=u.equal(f,v(e[f]));s=c.from;l=c.to;d=c.f}else{s=+u.attr(f);l=+e[f]}var h=g(s,"array")?s.length:1;a[f]=b(r.length,r.length+h,d);r=r.concat(s);o=o.concat(l)}var p=w.time(),m=w(r,o,p,p+t,w.time,function(e){var t={};for(var i in a)if(a[_](i)){t[i]=a[i](e)}u.attr(t)},i);u.anims[m.id]=m;m._attrs=e;m._callback=n;pe("snap.animcreated."+u.id,m);pe.once("mina.finish."+m.id,function(){pe.off("mina.*."+m.id);delete u.anims[m.id];n&&n.call(u)});pe.once("mina.stop."+m.id,function(){pe.off("mina.*."+m.id);delete u.anims[m.id]});return u}});e.plugin(function(a,e,t,i,n){var s=Object.prototype.toString,l=String,d=Math,c="";function u(e,t,i,n,r,o){if(t==null&&s.call(e)=="[object SVGMatrix]"){this.a=e.a;this.b=e.b;this.c=e.c;this.d=e.d;this.e=e.e;this.f=e.f;return}if(e!=null){this.a=+e;this.b=+t;this.c=+i;this.d=+n;this.e=+r;this.f=+o}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(e){e.add=function(e,t,i,n,r,o){if(e&&e instanceof u){return this.add(e.a,e.b,e.c,e.d,e.e,e.f)}var a=e*this.a+t*this.c,s=e*this.b+t*this.d;this.e+=r*this.a+o*this.c;this.f+=r*this.b+o*this.d;this.c=i*this.a+n*this.c;this.d=i*this.b+n*this.d;this.a=a;this.b=s;return this};u.prototype.multLeft=function(e,t,i,n,r,o){if(e&&e instanceof u){return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f)}var a=e*this.a+i*this.b,s=e*this.c+i*this.d,l=e*this.e+i*this.f+r;this.b=t*this.a+n*this.b;this.d=t*this.c+n*this.d;this.f=t*this.e+n*this.f+o;this.a=a;this.c=s;this.e=l;return this};e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new u(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)};e.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)};e.translate=function(e,t){this.e+=e*this.a+t*this.c;this.f+=e*this.b+t*this.d;return this};e.scale=function(e,t,i,n){t==null&&(t=e);(i||n)&&this.translate(i,n);this.a*=e;this.b*=e;this.c*=t;this.d*=t;(i||n)&&this.translate(-i,-n);return this};e.rotate=function(e,t,i){e=a.rad(e);t=t||0;i=i||0;var n=+d.cos(e).toFixed(9),r=+d.sin(e).toFixed(9);this.add(n,r,-r,n,t,i);return this.add(1,0,0,1,-t,-i)};e.skewX=function(e){return this.skew(e,0)};e.skewY=function(e){return this.skew(0,e)};e.skew=function(e,t){e=e||0;t=t||0;e=a.rad(e);t=a.rad(t);var i=d.tan(e).toFixed(9);var n=d.tan(t).toFixed(9);return this.add(1,n,i,1,0,0)};e.x=function(e,t){return e*this.a+t*this.c+this.e};e.y=function(e,t){return e*this.b+t*this.d+this.f};e.get=function(e){return+this[l.fromCharCode(97+e)].toFixed(4)};e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};function r(e){return e[0]*e[0]+e[1]*e[1]}function o(e){var t=d.sqrt(r(e));e[0]&&(e[0]/=t);e[1]&&(e[1]/=t)}e.determinant=function(){return this.a*this.d-this.b*this.c};e.split=function(){var e={};e.dx=this.e;e.dy=this.f;var t=[[this.a,this.b],[this.c,this.d]];e.scalex=d.sqrt(r(t[0]));o(t[0]);e.shear=t[0][0]*t[1][0]+t[0][1]*t[1][1];t[1]=[t[1][0]-t[0][0]*e.shear,t[1][1]-t[0][1]*e.shear];e.scaley=d.sqrt(r(t[1]));o(t[1]);e.shear/=e.scaley;if(this.determinant()<0){e.scalex=-e.scalex}var i=t[0][1],n=t[1][1];if(n<0){e.rotate=a.deg(d.acos(n));if(i<0){e.rotate=360-e.rotate}}else{e.rotate=a.deg(d.asin(i))}e.isSimple=!+e.shear.toFixed(9)&&(e.scalex.toFixed(9)==e.scaley.toFixed(9)||!e.rotate);e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate;e.noRotation=!+e.shear.toFixed(9)&&!e.rotate;return e};e.toTransformString=function(e){var t=e||this.split();if(!+t.shear.toFixed(9)){t.scalex=+t.scalex.toFixed(4);t.scaley=+t.scaley.toFixed(4);t.rotate=+t.rotate.toFixed(4);return(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:c)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:c)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:c)}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}})(u.prototype);a.Matrix=u;a.matrix=function(e,t,i,n,r,o){return new u(e,t,i,n,r,o)}});e.plugin(function(o,a,e,s,l){var t="hasOwnProperty",n=o._.make,d=o._.wrap,c=o.is,u=o._.getSomeDefs,i=/^url\((['"]?)([^)]+)\1\)$/,f=o._.$,h=o.url,p=String,r=o._.separator,m="";o.deurl=function(e){var t=String(e).match(i);return t?t[2]:e};pe.on("snap.util.attr.mask",function(e){if(e instanceof a||e instanceof l){pe.stop();if(e instanceof l&&e.node.childNodes.length==1){e=e.node.firstChild;u(this).appendChild(e);e=d(e)}if(e.type=="mask"){var t=e}else{t=n("mask",u(this));t.node.appendChild(e.node)}!t.node.id&&f(t.node,{id:t.id});f(this.node,{mask:h(t.id)})}});(function(e){pe.on("snap.util.attr.clip",e);pe.on("snap.util.attr.clip-path",e);pe.on("snap.util.attr.clipPath",e)})(function(e){if(e instanceof a||e instanceof l){pe.stop();var t,i=e.node;while(i){if(i.nodeName==="clipPath"){t=new a(i);break}if(i.nodeName==="svg"){t=undefined;break}i=i.parentNode}if(!t){t=n("clipPath",u(this));t.node.appendChild(e.node);!t.node.id&&f(t.node,{id:t.id})}f(this.node,{"clip-path":h(t.node.id||t.id)})}});function g(r){return function(e){pe.stop();if(e instanceof l&&e.node.childNodes.length==1&&(e.node.firstChild.tagName=="radialGradient"||e.node.firstChild.tagName=="linearGradient"||e.node.firstChild.tagName=="pattern")){e=e.node.firstChild;u(this).appendChild(e);e=d(e)}if(e instanceof a){if(e.type=="radialGradient"||e.type=="linearGradient"||e.type=="pattern"){if(!e.node.id){f(e.node,{id:e.id})}var t=h(e.node.id)}else{t=e.attr(r)}}else{t=o.color(e);if(t.error){var i=o(u(this).ownerSVGElement).gradient(e);if(i){if(!i.node.id){f(i.node,{id:i.id})}t=h(i.node.id)}else{t=e}}else{t=p(t)}}var n={};n[r]=t;f(this.node,n);this.node.style[r]=m}}pe.on("snap.util.attr.fill",g("fill"));pe.on("snap.util.attr.stroke",g("stroke"));var v=/^([lr])(?:\(([^)]*)\))?(.*)$/i;pe.on("snap.util.grad.parse",function e(t){t=p(t);var i=t.match(v);if(!i){return null}var n=i[1],r=i[2],o=i[3];r=r.split(/\s*,\s*/).map(function(e){return+e==e?+e:e});if(r.length==1&&r[0]==0){r=[]}o=o.split("-");o=o.map(function(e){e=e.split(":");var t={color:e[0]};if(e[1]){t.offset=parseFloat(e[1])}return t});var a=o.length,s=0,l=0;function d(e,t){var i=(t-s)/(e-l);for(var n=l;n<e;n++){o[n].offset=+(+s+i*(n-l)).toFixed(2)}l=e;s=t}a--;for(var c=0;c<a;c++)if("offset"in o[c]){d(c,o[c].offset)}o[a].offset=o[a].offset||100;d(a,o[a].offset);return{type:n,params:r,stops:o}});pe.on("snap.util.attr.d",function(e){pe.stop();if(c(e,"array")&&c(e[0],"array")){e=o.path.toString.call(e)}e=p(e);if(e.match(/[ruo]/i)){e=o.path.toAbsolute(e)}f(this.node,{d:e})})(-1);pe.on("snap.util.attr.#text",function(e){pe.stop();e=p(e);var t=s.doc.createTextNode(e);while(this.node.firstChild){this.node.removeChild(this.node.firstChild)}this.node.appendChild(t)})(-1);pe.on("snap.util.attr.path",function(e){pe.stop();this.attr({d:e})})(-1);pe.on("snap.util.attr.class",function(e){pe.stop();this.node.className.baseVal=e})(-1);pe.on("snap.util.attr.viewBox",function(e){var t;if(c(e,"object")&&"x"in e){t=[e.x,e.y,e.width,e.height].join(" ")}else if(c(e,"array")){t=e.join(" ")}else{t=e}f(this.node,{viewBox:t});pe.stop()})(-1);pe.on("snap.util.attr.transform",function(e){this.transform(e);pe.stop()})(-1);pe.on("snap.util.attr.r",function(e){if(this.type=="rect"){pe.stop();f(this.node,{rx:e,ry:e})}})(-1);pe.on("snap.util.attr.textpath",function(e){pe.stop();if(this.type=="text"){var t,i,n;if(!e&&this.textPath){i=this.textPath;while(i.node.firstChild){this.node.appendChild(i.node.firstChild)}i.remove();delete this.textPath;return}if(c(e,"string")){var r=u(this),o=d(r.parentNode).path(e);r.appendChild(o.node);t=o.id;o.attr({id:t})}else{e=d(e);if(e instanceof a){t=e.attr("id");if(!t){t=e.id;e.attr({id:t})}}}if(t){i=this.textPath;n=this.node;if(i){i.attr({"xlink:href":"#"+t})}else{i=f("textPath",{"xlink:href":"#"+t});while(n.firstChild){i.appendChild(n.firstChild)}n.appendChild(i);this.textPath=d(i)}}}})(-1);pe.on("snap.util.attr.text",function(e){if(this.type=="text"){var t=0,i=this.node,n=function(e){var t=f("tspan");if(c(e,"array")){for(var i=0;i<e.length;i++){t.appendChild(n(e[i]))}}else{t.appendChild(s.doc.createTextNode(e))}t.normalize&&t.normalize();return t};while(i.firstChild){i.removeChild(i.firstChild)}var r=n(e);while(r.firstChild){i.appendChild(r.firstChild)}}pe.stop()})(-1);function _(e){pe.stop();if(e==+e){e+="px"}this.node.style.fontSize=e}pe.on("snap.util.attr.fontSize",_)(-1);pe.on("snap.util.attr.font-size",_)(-1);pe.on("snap.util.getattr.transform",function(){pe.stop();return this.transform()})(-1);pe.on("snap.util.getattr.textpath",function(){pe.stop();return this.textPath})(-1);(function(){function e(t){return function(){pe.stop();var e=s.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+t);if(e=="none"){return e}else{return o(s.doc.getElementById(e.match(i)[1]))}}}function t(n){return function(e){pe.stop();var t="marker"+n.charAt(0).toUpperCase()+n.substring(1);if(e==""||!e){this.node.style[t]="none";return}if(e.type=="marker"){var i=e.node.id;if(!i){f(e.node,{id:e.id})}this.node.style[t]=h(i);return}}}pe.on("snap.util.getattr.marker-end",e("end"))(-1);pe.on("snap.util.getattr.markerEnd",e("end"))(-1);pe.on("snap.util.getattr.marker-start",e("start"))(-1);pe.on("snap.util.getattr.markerStart",e("start"))(-1);pe.on("snap.util.getattr.marker-mid",e("mid"))(-1);pe.on("snap.util.getattr.markerMid",e("mid"))(-1);pe.on("snap.util.attr.marker-end",t("end"))(-1);pe.on("snap.util.attr.markerEnd",t("end"))(-1);pe.on("snap.util.attr.marker-start",t("start"))(-1);pe.on("snap.util.attr.markerStart",t("start"))(-1);pe.on("snap.util.attr.marker-mid",t("mid"))(-1);pe.on("snap.util.attr.markerMid",t("mid"))(-1)})();pe.on("snap.util.getattr.r",function(){if(this.type=="rect"&&f(this.node,"rx")==f(this.node,"ry")){pe.stop();return f(this.node,"rx")}})(-1);function b(e){var t=[];var i=e.childNodes;for(var n=0,r=i.length;n<r;n++){var o=i[n];if(o.nodeType==3){t.push(o.nodeValue)}if(o.tagName=="tspan"){if(o.childNodes.length==1&&o.firstChild.nodeType==3){t.push(o.firstChild.nodeValue)}else{t.push(b(o))}}}return t}pe.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){pe.stop();var e=b(this.node);return e.length==1?e[0]:e}})(-1);pe.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);pe.on("snap.util.getattr.fill",function(e){if(e){return}pe.stop();var t=pe("snap.util.getattr.fill",this,true).firstDefined();return o(o.deurl(t))||t})(-1);pe.on("snap.util.getattr.stroke",function(e){if(e){return}pe.stop();var t=pe("snap.util.getattr.stroke",this,true).firstDefined();return o(o.deurl(t))||t})(-1);pe.on("snap.util.getattr.viewBox",function(){pe.stop();var e=f(this.node,"viewBox");if(e){e=e.split(r);return o._.box(+e[0],+e[1],+e[2],+e[3])}else{return}})(-1);pe.on("snap.util.getattr.points",function(){var e=f(this.node,"points");pe.stop();if(e){return e.split(r)}else{return}})(-1);pe.on("snap.util.getattr.path",function(){var e=f(this.node,"d");pe.stop();return e})(-1);pe.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);function y(){pe.stop();return this.node.style.fontSize}pe.on("snap.util.getattr.fontSize",y)(-1);pe.on("snap.util.getattr.font-size",y)(-1)});e.plugin(function(e,t,i,n,r){var c=/\S+/g,o=/[\t\r\n\f]/g,a=/(^\s+|\s+$)/g,d=String,s=t.prototype;s.addClass=function(e){var t=d(e||"").match(c)||[],i=this.node,n=i.className.baseVal,r=n.match(c)||[],o,a,s,l;if(t.length){o=0;while(s=t[o++]){a=r.indexOf(s);if(!~a){r.push(s)}}l=r.join(" ");if(n!=l){i.className.baseVal=l}}return this};s.removeClass=function(e){var t=d(e||"").match(c)||[],i=this.node,n=i.className.baseVal,r=n.match(c)||[],o,a,s,l;if(r.length){o=0;while(s=t[o++]){a=r.indexOf(s);if(~a){r.splice(a,1)}}l=r.join(" ");if(n!=l){i.className.baseVal=l}}return this};s.hasClass=function(e){var t=this.node,i=t.className.baseVal,n=i.match(c)||[];return!!~n.indexOf(e)};s.toggleClass=function(e,t){if(t!=null){if(t){return this.addClass(e)}else{return this.removeClass(e)}}var i=(e||"").match(c)||[],n=this.node,r=n.className.baseVal,o=r.match(c)||[],a,s,l,d;a=0;while(l=i[a++]){s=o.indexOf(l);if(~s){o.splice(s,1)}else{o.push(l)}}d=o.join(" ");if(r!=d){n.className.baseVal=d}return this}});e.plugin(function(e,t,i,n,r){var c={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},u=String,f=/[a-z]+$/i,h=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function p(e){return e}function m(t){return function(e){return+e.toFixed(3)+t}}pe.on("snap.util.attr",function(e){var t=u(e).match(h);if(t){var i=pe.nt(),n=i.substring(i.lastIndexOf(".")+1),r=this.attr(n),o={};pe.stop();var a=t[3]||"",s=r.match(f),l=c[t[1]];if(s&&s==a){e=l(parseFloat(r),+t[2])}else{r=this.asPX(n);e=l(this.asPX(n),this.asPX(n,t[2]+a))}if(isNaN(r)||isNaN(e)){return}o[n]=e;this.attr(o)}})(-10);pe.on("snap.util.equal",function(e,t){var i,n,r=u(this.attr(e)||""),o=this,a=u(t).match(h);if(a){pe.stop();var s=a[3]||"",l=r.match(f),d=c[a[1]];if(l&&l==s){return{from:parseFloat(r),to:d(parseFloat(r),+a[2]),f:m(l)}}else{r=this.asPX(e);return{from:r,to:d(r,this.asPX(e,a[2]+s)),f:p}}}})(-10)});e.plugin(function(h,t,e,o,i){var n=e.prototype,d=h.is;n.rect=function(e,t,i,n,r,o){var a;if(o==null){o=r}if(d(e,"object")&&e=="[object Object]"){a=e}else if(e!=null){a={x:e,y:t,width:i,height:n};if(r!=null){a.rx=r;a.ry=o}}return this.el("rect",a)};n.circle=function(e,t,i){var n;if(d(e,"object")&&e=="[object Object]"){n=e}else if(e!=null){n={cx:e,cy:t,r:i}}return this.el("circle",n)};var s=function(){function r(){this.parentNode.removeChild(this)}return function(e,t){var i=o.doc.createElement("img"),n=o.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em";i.onload=function(){t.call(i);i.onload=i.onerror=null;n.removeChild(i)};i.onerror=r;n.appendChild(i);i.src=e}}();n.image=function(e,t,i,n,r){var o=this.el("image");if(d(e,"object")&&"src"in e){o.attr(e)}else if(e!=null){var a={"xlink:href":e,preserveAspectRatio:"none"};if(t!=null&&i!=null){a.x=t;a.y=i}if(n!=null&&r!=null){a.width=n;a.height=r}else{s(e,function(){h._.$(o.node,{width:this.offsetWidth,height:this.offsetHeight})})}h._.$(o.node,a)}return o};n.ellipse=function(e,t,i,n){var r;if(d(e,"object")&&e=="[object Object]"){r=e}else if(e!=null){r={cx:e,cy:t,rx:i,ry:n}}return this.el("ellipse",r)};n.path=function(e){var t;if(d(e,"object")&&!d(e,"array")){t=e}else if(e){t={d:e}}return this.el("path",t)};n.group=n.g=function(e){var t,i=this.el("g");if(arguments.length==1&&e&&!e.type){i.attr(e)}else if(arguments.length){i.add(Array.prototype.slice.call(arguments,0))}return i};n.svg=function(e,t,i,n,r,o,a,s){var l={};if(d(e,"object")&&t==null){l=e}else{if(e!=null){l.x=e}if(t!=null){l.y=t}if(i!=null){l.width=i}if(n!=null){l.height=n}if(r!=null&&o!=null&&a!=null&&s!=null){l.viewBox=[r,o,a,s]}}return this.el("svg",l)};n.mask=function(e){var t,i=this.el("mask");if(arguments.length==1&&e&&!e.type){i.attr(e)}else if(arguments.length){i.add(Array.prototype.slice.call(arguments,0))}return i};n.ptrn=function(e,t,i,n,r,o,a,s){if(d(e,"object")){var l=e}else{l={patternUnits:"userSpaceOnUse"};if(e){l.x=e}if(t){l.y=t}if(i!=null){l.width=i}if(n!=null){l.height=n}if(r!=null&&o!=null&&a!=null&&s!=null){l.viewBox=[r,o,a,s]}else{l.viewBox=[e||0,t||0,i||0,n||0]}}return this.el("pattern",l)};n.use=function(e){if(e!=null){if(e instanceof t){if(!e.attr("id")){e.attr({id:h._.id(e)})}e=e.attr("id")}if(String(e).charAt()=="#"){e=e.substring(1)}return this.el("use",{"xlink:href":"#"+e})}else{return t.prototype.use.call(this)}};n.symbol=function(e,t,i,n){var r={};if(e!=null&&t!=null&&i!=null&&n!=null){r.viewBox=[e,t,i,n]}return this.el("symbol",r)};n.text=function(e,t,i){var n={};if(d(e,"object")){n=e}else if(e!=null){n={x:e,y:t,text:i||""}}return this.el("text",n)};n.line=function(e,t,i,n){var r={};if(d(e,"object")){r=e}else if(e!=null){r={x1:e,x2:i,y1:t,y2:n}}return this.el("line",r)};n.polyline=function(e){if(arguments.length>1){e=Array.prototype.slice.call(arguments,0)}var t={};if(d(e,"object")&&!d(e,"array")){t=e}else if(e!=null){t={points:e}}return this.el("polyline",t)};n.polygon=function(e){if(arguments.length>1){e=Array.prototype.slice.call(arguments,0)}var t={};if(d(e,"object")&&!d(e,"array")){t=e}else if(e!=null){t={points:e}}return this.el("polygon",t)};(function(){var l=h._.$;function s(){return this.selectAll("stop")}function d(e,t){var i=l("stop"),n={offset:+t+"%"};e=h.color(e);n["stop-color"]=e.hex;if(e.opacity<1){n["stop-opacity"]=e.opacity}l(i,n);var r=this.stops(),o;for(var a=0;a<r.length;a++){var s=parseFloat(r[a].attr("offset"));if(s>t){this.node.insertBefore(i,r[a].node);o=true;break}}if(!o){this.node.appendChild(i)}return this}function c(){if(this.type=="linearGradient"){var e=l(this.node,"x1")||0,t=l(this.node,"x2")||1,i=l(this.node,"y1")||0,n=l(this.node,"y2")||0;return h._.box(e,i,math.abs(t-e),math.abs(n-i))}else{var r=this.node.cx||.5,o=this.node.cy||.5,a=this.node.r||0;return h._.box(r-a,o-a,a*2,a*2)}}function a(e){var t=e,i=this.stops();if(typeof e=="string"){t=pe("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops}if(!h.is(t,"array")){return}for(var n=0;n<i.length;n++){if(t[n]){var r=h.color(t[n].color),o={offset:t[n].offset+"%"};o["stop-color"]=r.hex;if(r.opacity<1){o["stop-opacity"]=r.opacity}i[n].attr(o)}else{i[n].remove()}}for(n=i.length;n<t.length;n++){this.addStop(t[n].color,t[n].offset)}return this}function t(e,t){var i=pe("snap.util.grad.parse",null,t).firstDefined(),n;if(!i){return null}i.params.unshift(e);if(i.type.toLowerCase()=="l"){n=u.apply(0,i.params)}else{n=f.apply(0,i.params)}if(i.type!=i.type.toLowerCase()){l(n.node,{gradientUnits:"userSpaceOnUse"})}var r=i.stops,o=r.length;for(var a=0;a<o;a++){var s=r[a];n.addStop(s.color,s.offset)}return n}function u(e,t,i,n,r){var o=h._.make("linearGradient",e);o.stops=s;o.addStop=d;o.getBBox=c;o.setStops=a;if(t!=null){l(o.node,{x1:t,y1:i,x2:n,y2:r})}return o}function f(e,t,i,n,r,o){var a=h._.make("radialGradient",e);a.stops=s;a.addStop=d;a.getBBox=c;if(t!=null){l(a.node,{cx:t,cy:i,r:n})}if(r!=null&&o!=null){l(a.node,{fx:r,fy:o})}return a}n.gradient=function(e){return t(this.defs,e)};n.gradientLinear=function(e,t,i,n){return u(this.defs,e,t,i,n)};n.gradientRadial=function(e,t,i,n,r){return f(this.defs,e,t,i,n,r)};n.toString=function(){var e=this.node.ownerDocument,t=e.createDocumentFragment(),i=e.createElement("div"),n=this.node.cloneNode(true),r;t.appendChild(i);i.appendChild(n);h._.$(n,{xmlns:"http://www.w3.org/2000/svg"});r=i.innerHTML;t.removeChild(t.firstChild);return r};n.toDataURL=function(){if(k&&k.btoa){return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))}};n.clear=function(){var e=this.node.firstChild,t;while(e){t=e.nextSibling;if(e.tagName!="defs"){e.parentNode.removeChild(e)}else{n.clear.call({node:e})}e=t}}})()});e.plugin(function($,g,e,t){var i=g.prototype,b=$.is,m=$._.clone,n="hasOwnProperty",r=/,?([a-z]),?/gi,y=parseFloat,V=Math,G=V.PI,k=V.min,S=V.max,T=V.pow,Z=V.abs;function w(t){var i=w.ps=w.ps||{};if(i[t]){i[t].sleep=100}else{i[t]={sleep:100}}setTimeout(function(){for(var e in i)if(i[n](e)&&e!=t){i[e].sleep--;!i[e].sleep&&delete i[e]}});return i[t]}function v(e,t,i,n){if(e==null){e=t=i=n=0}if(t==null){t=e.y;i=e.width;n=e.height;e=e.x}return{x:e,y:t,width:i,w:i,height:n,h:n,x2:e+i,y2:t+n,cx:e+i/2,cy:t+n/2,r1:V.min(i,n)/2,r2:V.max(i,n)/2,r0:V.sqrt(i*i+n*n)/2,path:z(e,t,i,n),vb:[e,t,i,n].join(" ")}}function x(){return this.join(",").replace(r,"$1")}function C(e){var t=m(e);t.toString=x;return t}function _(e,t,i,n,r,o,a,s,l){if(l==null){return I(e,t,i,n,r,o,a,s)}else{return N(e,t,i,n,r,o,a,s,d(e,t,i,n,r,o,a,s,l))}}function o(h,p){function m(e){return+(+e).toFixed(3)}return $._.cacher(function(e,t,i){if(e instanceof g){e=e.attr("d")}e=Q(e);var n,r,o,a,s="",l={},d,c=0;for(var u=0,f=e.length;u<f;u++){o=e[u];if(o[0]=="M"){n=+o[1];r=+o[2]}else{a=_(n,r,o[1],o[2],o[3],o[4],o[5],o[6]);if(c+a>t){if(p&&!l.start){d=_(n,r,o[1],o[2],o[3],o[4],o[5],o[6],t-c);s+=["C"+m(d.start.x),m(d.start.y),m(d.m.x),m(d.m.y),m(d.x),m(d.y)];if(i){return s}l.start=s;s=["M"+m(d.x),m(d.y)+"C"+m(d.n.x),m(d.n.y),m(d.end.x),m(d.end.y),m(o[5]),m(o[6])].join();c+=a;n=+o[5];r=+o[6];continue}if(!h&&!p){d=_(n,r,o[1],o[2],o[3],o[4],o[5],o[6],t-c);return d}}c+=a;n=+o[5];r=+o[6]}s+=o.shift()+o}l.end=s;d=h?c:p?l:N(n,r,o[0],o[1],o[2],o[3],o[4],o[5],1);return d},null,$._.clone)}var a=o(1),s=o(),l=o(0,1);function N(e,t,i,n,r,o,a,s,l){var d=1-l,c=T(d,3),u=T(d,2),f=l*l,h=f*l,p=c*e+u*3*l*i+d*3*l*l*r+h*a,m=c*t+u*3*l*n+d*3*l*l*o+h*s,g=e+2*l*(i-e)+f*(r-2*i+e),v=t+2*l*(n-t)+f*(o-2*n+t),_=i+2*l*(r-i)+f*(a-2*r+i),b=n+2*l*(o-n)+f*(s-2*o+n),y=d*e+l*i,w=d*t+l*n,x=d*r+l*a,C=d*o+l*s,k=90-V.atan2(g-_,v-b)*180/G;return{x:p,y:m,m:{x:g,y:v},n:{x:_,y:b},start:{x:y,y:w},end:{x:x,y:C},alpha:k}}function D(e,t,i,n,r,o,a,s){if(!$.is(e,"array")){e=[e,t,i,n,r,o,a,s]}var l=J.apply(null,e);return v(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function P(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function E(e,t){e=v(e);t=v(t);return P(t,e.x,e.y)||P(t,e.x2,e.y)||P(t,e.x,e.y2)||P(t,e.x2,e.y2)||P(e,t.x,t.y)||P(e,t.x2,t.y)||P(e,t.x,t.y2)||P(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function M(e,t,i,n,r){var o=-3*t+9*i-9*n+3*r,a=e*o+6*t-12*i+6*n;return e*a-3*t+3*i}function I(e,t,i,n,r,o,a,s,l){if(l==null){l=1}l=l>1?1:l<0?0:l;var d=l/2,c=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0;for(var p=0;p<c;p++){var m=d*u[p]+d,g=M(m,e,i,r,a),v=M(m,t,n,o,s),_=g*g+v*v;h+=f[p]*V.sqrt(_)}return d*h}function d(e,t,i,n,r,o,a,s,l){if(l<0||I(e,t,i,n,r,o,a,s)<l){return}var d=1,c=d/2,u=d-c,f,h=.01;f=I(e,t,i,n,r,o,a,s,u);while(Z(f-l)>h){c/=2;u+=(f<l?1:-1)*c;f=I(e,t,i,n,r,o,a,s,u)}return u}function O(e,t,i,n,r,o,a,s){if(S(e,i)<k(r,a)||k(e,i)>S(r,a)||S(t,n)<k(o,s)||k(t,n)>S(o,s)){return}var l=(e*n-t*i)*(r-a)-(e-i)*(r*s-o*a),d=(e*n-t*i)*(o-s)-(t-n)*(r*s-o*a),c=(e-i)*(o-s)-(t-n)*(r-a);if(!c){return}var u=l/c,f=d/c,h=+u.toFixed(2),p=+f.toFixed(2);if(h<+k(e,i).toFixed(2)||h>+S(e,i).toFixed(2)||h<+k(r,a).toFixed(2)||h>+S(r,a).toFixed(2)||p<+k(t,n).toFixed(2)||p>+S(t,n).toFixed(2)||p<+k(o,s).toFixed(2)||p>+S(o,s).toFixed(2)){return}return{x:u,y:f}}function c(e,t){return A(e,t)}function u(e,t){return A(e,t,1)}function A(e,t,i){var n=D(e),r=D(t);if(!E(n,r)){return i?0:[]}var o=I.apply(0,e),a=I.apply(0,t),s=~~(o/8),l=~~(a/8),d=[],c=[],u={},f=i?0:[];for(var h=0;h<s+1;h++){var p=N.apply(0,e.concat(h/s));d.push({x:p.x,y:p.y,t:h/s})}for(h=0;h<l+1;h++){p=N.apply(0,t.concat(h/l));c.push({x:p.x,y:p.y,t:h/l})}for(h=0;h<s;h++){for(var m=0;m<l;m++){var g=d[h],v=d[h+1],_=c[m],b=c[m+1],y=Z(v.x-g.x)<.001?"y":"x",w=Z(b.x-_.x)<.001?"y":"x",x=O(g.x,g.y,v.x,v.y,_.x,_.y,b.x,b.y);if(x){if(u[x.x.toFixed(4)]==x.y.toFixed(4)){continue}u[x.x.toFixed(4)]=x.y.toFixed(4);var C=g.t+Z((x[y]-g[y])/(v[y]-g[y]))*(v.t-g.t),k=_.t+Z((x[w]-_[w])/(b[w]-_[w]))*(b.t-_.t);if(C>=0&&C<=1&&k>=0&&k<=1){if(i){f++}else{f.push({x:x.x,y:x.y,t1:C,t2:k})}}}}}return f}function f(e,t){return p(e,t)}function h(e,t){return p(e,t,1)}function p(e,t,i){e=Q(e);t=Q(t);var n,r,o,a,s,l,d,c,u,f,h=i?0:[];for(var p=0,m=e.length;p<m;p++){var g=e[p];if(g[0]=="M"){n=s=g[1];r=l=g[2]}else{if(g[0]=="C"){u=[n,r].concat(g.slice(1));n=u[6];r=u[7]}else{u=[n,r,n,r,s,l,s,l];n=s;r=l}for(var v=0,_=t.length;v<_;v++){var b=t[v];if(b[0]=="M"){o=d=b[1];a=c=b[2]}else{if(b[0]=="C"){f=[o,a].concat(b.slice(1));o=f[6];a=f[7]}else{f=[o,a,o,a,d,c,d,c];o=d;a=c}var y=A(u,f,i);if(i){h+=y}else{for(var w=0,x=y.length;w<x;w++){y[w].segment1=p;y[w].segment2=v;y[w].bez1=u;y[w].bez2=f}h=h.concat(y)}}}}}return h}function R(e,t,i){var n=L(e);return P(n,t,i)&&p(e,[["M",t,i],["H",n.x2+10]],1)%2==1}function L(e){var t=w(e);if(t.bbox){return m(t.bbox)}if(!e){return v()}e=Q(e);var i=0,n=0,r=[],o=[],a;for(var s=0,l=e.length;s<l;s++){a=e[s];if(a[0]=="M"){i=a[1];n=a[2];r.push(i);o.push(n)}else{var d=J(i,n,a[1],a[2],a[3],a[4],a[5],a[6]);r=r.concat(d.min.x,d.max.x);o=o.concat(d.min.y,d.max.y);i=a[5];n=a[6]}}var c=k.apply(0,r),u=k.apply(0,o),f=S.apply(0,r),h=S.apply(0,o),p=v(c,u,f-c,h-u);t.bbox=m(p);return p}function z(e,t,i,n,r){if(r){return[["M",+e+ +r,t],["l",i-r*2,0],["a",r,r,0,0,1,r,r],["l",0,n-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-i,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-n],["a",r,r,0,0,1,r,-r],["z"]]}var o=[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]];o.toString=x;return o}function j(e,t,i,n,r){if(r==null&&n==null){n=i}e=+e;t=+t;i=+i;n=+n;if(r!=null){var o=Math.PI/180,a=e+i*Math.cos(-n*o),s=e+i*Math.cos(-r*o),l=t+i*Math.sin(-n*o),d=t+i*Math.sin(-r*o),c=[["M",a,l],["A",i,i,0,+(r-n>180),0,s,d]]}else{c=[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]}c.toString=x;return c}var B=$._unit2px,q={path:function(e){return e.attr("path")},circle:function(e){var t=B(e);return j(t.cx,t.cy,t.r)},ellipse:function(e){var t=B(e);return j(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=B(e);return z(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=B(e);return z(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return z(t.x,t.y,t.width,t.height)}};function F(e){var t=w(e),i=String.prototype.toLowerCase;if(t.rel){return C(t.rel)}if(!$.is(e,"array")||!$.is(e&&e[0],"array")){e=$.parsePathString(e)}var n=[],r=0,o=0,a=0,s=0,l=0;if(e[0][0]=="M"){r=e[0][1];o=e[0][2];a=r;s=o;l++;n.push(["M",r,o])}for(var d=l,c=e.length;d<c;d++){var u=n[d]=[],f=e[d];if(f[0]!=i.call(f[0])){u[0]=i.call(f[0]);switch(u[0]){case"a":u[1]=f[1];u[2]=f[2];u[3]=f[3];u[4]=f[4];u[5]=f[5];u[6]=+(f[6]-r).toFixed(3);u[7]=+(f[7]-o).toFixed(3);break;case"v":u[1]=+(f[1]-o).toFixed(3);break;case"m":a=f[1];s=f[2];default:for(var h=1,p=f.length;h<p;h++){u[h]=+(f[h]-(h%2?r:o)).toFixed(3)}}}else{u=n[d]=[];if(f[0]=="m"){a=f[1]+r;s=f[2]+o}for(var m=0,g=f.length;m<g;m++){n[d][m]=f[m]}}var v=n[d].length;switch(n[d][0]){case"z":r=a;o=s;break;case"h":r+=+n[d][v-1];break;case"v":o+=+n[d][v-1];break;default:r+=+n[d][v-2];o+=+n[d][v-1]}}n.toString=x;t.rel=C(n);return n}function U(e){var t=w(e);if(t.abs){return C(t.abs)}if(!b(e,"array")||!b(e&&e[0],"array")){e=$.parsePathString(e)}if(!e||!e.length){return[["M",0,0]]}var i=[],n=0,r=0,o=0,a=0,s=0,l;if(e[0][0]=="M"){n=+e[0][1];r=+e[0][2];o=n;a=r;s++;i[0]=["M",n,r]}var d=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z";for(var c,u,f=s,h=e.length;f<h;f++){i.push(c=[]);u=e[f];l=u[0];if(l!=l.toUpperCase()){c[0]=l.toUpperCase();switch(c[0]){case"A":c[1]=u[1];c[2]=u[2];c[3]=u[3];c[4]=u[4];c[5]=u[5];c[6]=+u[6]+n;c[7]=+u[7]+r;break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+n;break;case"R":var p=[n,r].concat(u.slice(1));for(var m=2,g=p.length;m<g;m++){p[m]=+p[m]+n;p[++m]=+p[m]+r}i.pop();i=i.concat(ee(p,d));break;case"O":i.pop();p=j(n,r,u[1],u[2]);p.push(p[0]);i=i.concat(p);break;case"U":i.pop();i=i.concat(j(n,r,u[1],u[2],u[3]));c=["U"].concat(i[i.length-1].slice(-2));break;case"M":o=+u[1]+n;a=+u[2]+r;default:for(m=1,g=u.length;m<g;m++){c[m]=+u[m]+(m%2?n:r)}}}else if(l=="R"){p=[n,r].concat(u.slice(1));i.pop();i=i.concat(ee(p,d));c=["R"].concat(u.slice(-2))}else if(l=="O"){i.pop();p=j(n,r,u[1],u[2]);p.push(p[0]);i=i.concat(p)}else if(l=="U"){i.pop();i=i.concat(j(n,r,u[1],u[2],u[3]));c=["U"].concat(i[i.length-1].slice(-2))}else{for(var v=0,_=u.length;v<_;v++){c[v]=u[v]}}l=l.toUpperCase();if(l!="O"){switch(c[0]){case"Z":n=+o;r=+a;break;case"H":n=c[1];break;case"V":r=c[1];break;case"M":o=c[c.length-2];a=c[c.length-1];default:n=c[c.length-2];r=c[c.length-1]}}}i.toString=x;t.abs=C(i);return i}function H(e,t,i,n){return[e,t,i,n,i,n]}function W(e,t,i,n,r,o){var a=1/3,s=2/3;return[a*e+s*i,a*t+s*n,a*r+s*i,a*o+s*n,r,o]}function K(e,t,i,n,r,o,a,s,l,d){var c=G*120/180,u=G/180*(+r||0),f=[],h,p=$._.cacher(function(e,t,i){var n=e*V.cos(i)-t*V.sin(i),r=e*V.sin(i)+t*V.cos(i);return{x:n,y:r}});if(!i||!n){return[e,t,s,l,s,l]}if(!d){h=p(e,t,-u);e=h.x;t=h.y;h=p(s,l,-u);s=h.x;l=h.y;var m=V.cos(G/180*r),g=V.sin(G/180*r),v=(e-s)/2,_=(t-l)/2;var b=v*v/(i*i)+_*_/(n*n);if(b>1){b=V.sqrt(b);i=b*i;n=b*n}var y=i*i,w=n*n,x=(o==a?-1:1)*V.sqrt(Z((y*w-y*_*_-w*v*v)/(y*_*_+w*v*v))),C=x*i*_/n+(e+s)/2,k=x*-n*v/i+(t+l)/2,S=V.asin(((t-k)/n).toFixed(9)),T=V.asin(((l-k)/n).toFixed(9));S=e<C?G-S:S;T=s<C?G-T:T;S<0&&(S=G*2+S);T<0&&(T=G*2+T);if(a&&S>T){S=S-G*2}if(!a&&T>S){T=T-G*2}}else{S=d[0];T=d[1];C=d[2];k=d[3]}var N=T-S;if(Z(N)>c){var D=T,P=s,E=l;T=S+c*(a&&T>S?1:-1);s=C+i*V.cos(T);l=k+n*V.sin(T);f=K(s,l,i,n,r,0,a,P,E,[T,D,C,k])}N=T-S;var M=V.cos(S),I=V.sin(S),O=V.cos(T),A=V.sin(T),R=V.tan(N/4),L=4/3*i*R,z=4/3*n*R,j=[e,t],B=[e+L*I,t-z*M],q=[s+L*A,l-z*O],F=[s,l];B[0]=2*j[0]-B[0];B[1]=2*j[1]-B[1];if(d){return[B,q,F].concat(f)}else{f=[B,q,F].concat(f).join().split(",");var U=[];for(var H=0,W=f.length;H<W;H++){U[H]=H%2?p(f[H-1],f[H],u).y:p(f[H],f[H+1],u).x}return U}}function Y(e,t,i,n,r,o,a,s,l){var d=1-l;return{x:T(d,3)*e+T(d,2)*3*l*i+d*3*l*l*r+T(l,3)*a,y:T(d,3)*t+T(d,2)*3*l*n+d*3*l*l*o+T(l,3)*s}}function J(e,t,i,n,r,o,a,s){var l=[],d=[[],[]],c,u,f,h,p,m,g,v;for(var _=0;_<2;++_){if(_==0){u=6*e-12*i+6*r;c=-3*e+9*i-9*r+3*a;f=3*i-3*e}else{u=6*t-12*n+6*o;c=-3*t+9*n-9*o+3*s;f=3*n-3*t}if(Z(c)<1e-12){if(Z(u)<1e-12){continue}h=-f/u;if(0<h&&h<1){l.push(h)}continue}g=u*u-4*f*c;v=V.sqrt(g);if(g<0){continue}p=(-u+v)/(2*c);if(0<p&&p<1){l.push(p)}m=(-u-v)/(2*c);if(0<m&&m<1){l.push(m)}}var b,y,w=l.length,x=w,C;while(w--){h=l[w];C=1-h;d[0][w]=C*C*C*e+3*C*C*h*i+3*C*h*h*r+h*h*h*a;d[1][w]=C*C*C*t+3*C*C*h*n+3*C*h*h*o+h*h*h*s}d[0][x]=e;d[1][x]=t;d[0][x+1]=a;d[1][x+1]=s;d[0].length=d[1].length=x+2;return{min:{x:k.apply(0,d[0]),y:k.apply(0,d[1])},max:{x:S.apply(0,d[0]),y:S.apply(0,d[1])}}}function Q(e,t){var i=!t&&w(e);if(!t&&i.curve){return C(i.curve)}var o=U(e),a=t&&U(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,i){var n,r;if(!e){return["C",t.x,t.y,t.x,t.y,t.x,t.y]}!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1];t.Y=e[2];break;case"A":e=["C"].concat(K.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":if(i=="C"||i=="S"){n=t.x*2-t.bx;r=t.y*2-t.by}else{n=t.x;r=t.y}e=["C",n,r].concat(e.slice(1));break;case"T":if(i=="Q"||i=="T"){t.qx=t.x*2-t.qx;t.qy=t.y*2-t.qy}else{t.qx=t.x;t.qy=t.y}e=["C"].concat(W(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1];t.qy=e[2];e=["C"].concat(W(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(H(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(H(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(H(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(H(t.x,t.y,t.X,t.Y));break}return e},l=function(e,t){if(e[t].length>7){e[t].shift();var i=e[t];while(i.length){c[t]="A";a&&(u[t]="A");e.splice(t++,0,["C"].concat(i.splice(0,6)))}e.splice(t,1);m=S(o.length,a&&a.length||0)}},d=function(e,t,i,n,r){if(e&&t&&e[r][0]=="M"&&t[r][0]!="M"){t.splice(r,0,["M",n.x,n.y]);i.bx=0;i.by=0;i.x=e[r][1];i.y=e[r][2];m=S(o.length,a&&a.length||0)}},c=[],u=[],f="",h="";for(var p=0,m=S(o.length,a&&a.length||0);p<m;p++){o[p]&&(f=o[p][0]);if(f!="C"){c[p]=f;p&&(h=c[p-1])}o[p]=s(o[p],n,h);if(c[p]!="A"&&f=="C")c[p]="C";l(o,p);if(a){a[p]&&(f=a[p][0]);if(f!="C"){u[p]=f;p&&(h=u[p-1])}a[p]=s(a[p],r,h);if(u[p]!="A"&&f=="C"){u[p]="C"}l(a,p)}d(o,a,n,r,p);d(a,o,r,n,p);var g=o[p],v=a&&a[p],_=g.length,b=a&&v.length;n.x=g[_-2];n.y=g[_-1];n.bx=y(g[_-4])||n.x;n.by=y(g[_-3])||n.y;r.bx=a&&(y(v[b-4])||r.x);r.by=a&&(y(v[b-3])||r.y);r.x=a&&v[b-2];r.y=a&&v[b-1]}if(!a){i.curve=C(o)}return a?[o,a]:o}function X(e,t){if(!t){return e}var i,n,r,o,a,s,l;e=Q(e);for(r=0,a=e.length;r<a;r++){l=e[r];for(o=1,s=l.length;o<s;o+=2){i=t.x(l[o],l[o+1]);n=t.y(l[o],l[o+1]);l[o]=i;l[o+1]=n}}return e}function ee(e,t){var i=[];for(var n=0,r=e.length;r-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];if(t){if(!n){o[0]={x:+e[r-2],y:+e[r-1]}}else if(r-4==n){o[3]={x:+e[0],y:+e[1]}}else if(r-2==n){o[2]={x:+e[0],y:+e[1]};o[3]={x:+e[2],y:+e[3]}}}else{if(r-4==n){o[3]=o[2]}else if(!n){o[0]={x:+e[n],y:+e[n+1]}}}i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}$.path=w;$.path.getTotalLength=a;$.path.getPointAtLength=s;$.path.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6){return l(e,t).end}var n=l(e,i,1);return t?l(n,t).end:n};i.getTotalLength=function(){if(this.node.getTotalLength){return this.node.getTotalLength()}};i.getPointAtLength=function(e){return s(this.attr("d"),e)};i.getSubpath=function(e,t){return $.path.getSubpath(this.attr("d"),e,t)};$._.box=v;$.path.findDotsAtSegment=N;$.path.bezierBBox=D;$.path.isPointInsideBBox=P;$.closest=function(e,t,i,n){var r=100,o=v(e-r/2,t-r/2,r,r),a=[],s=i[0].hasOwnProperty("x")?function(e){return{x:i[e].x,y:i[e].y}}:function(e){return{x:i[e],y:n[e]}},l=0;while(r<=1e6&&!l){for(var d=0,c=i.length;d<c;d++){var u=s(d);if(P(o,u.x,u.y)){l++;a.push(u);break}}if(!l){r*=2;o=v(e-r/2,t-r/2,r,r)}}if(r==1e6){return}var f=Infinity,h;for(d=0,c=a.length;d<c;d++){var p=$.len(e,t,a[d].x,a[d].y);if(f>p){f=p;a[d].len=p;h=a[d]}}return h};$.path.isBBoxIntersect=E;$.path.intersection=f;$.path.intersectionNumber=h;$.path.isPointInside=R;$.path.getBBox=L;$.path.get=q;$.path.toRelative=F;$.path.toAbsolute=U;$.path.toCubic=Q;$.path.map=X;$.path.toString=x;$.path.clone=C});e.plugin(function(u,e,t,i){var l=Math.max,d=Math.min;var c=function(e){this.items=[];this.bindings={};this.length=0;this.type="set";if(e){for(var t=0,i=e.length;t<i;t++){if(e[t]){this[this.items.length]=this.items[this.items.length]=e[t];this.length++}}}},n=c.prototype;n.push=function(){var e,t;for(var i=0,n=arguments.length;i<n;i++){e=arguments[i];if(e){t=this.items.length;this[t]=this.items[t]=e;this.length++}}return this};n.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};n.forEach=function(e,t){for(var i=0,n=this.items.length;i<n;i++){if(e.call(t,this.items[i],i)===false){return this}}return this};n.animate=function(i,n,r,e){if(typeof r=="function"&&!r.length){e=r;r=w.linear}if(i instanceof u._.Animation){e=i.callback;r=i.easing;n=r.dur;i=i.attr}var o=arguments;if(u.is(i,"array")&&u.is(o[o.length-1],"array")){var a=true}var t,s=function(){if(t){this.b=t}else{t=this.b}},l=0,d=this,c=e&&function(){if(++l==d.length){e.call(this)}};return this.forEach(function(e,t){pe.once("snap.animcreated."+e.id,s);if(a){o[t]&&e.animate.apply(e,o[t])}else{e.animate(i,n,r,c)}})};n.remove=function(){while(this.length){this.pop().remove()}return this};n.bind=function(e,t,i){var n={};if(typeof t=="function"){this.bindings[e]=t}else{var r=i||e;this.bindings[e]=function(e){n[r]=e;t.attr(n)}}return this};n.attr=function(e){var t={};for(var i in e){if(this.bindings[i]){this.bindings[i](e[i])}else{t[i]=e[i]}}for(var n=0,r=this.items.length;n<r;n++){this.items[n].attr(t)}return this};n.clear=function(){while(this.length){this.pop()}};n.splice=function(e,t,i){e=e<0?l(this.length+e,0):e;t=l(0,d(this.length-e,t));var n=[],r=[],o=[],a;for(a=2;a<arguments.length;a++){o.push(arguments[a])}for(a=0;a<t;a++){r.push(this[e+a])}for(;a<this.length-e;a++){n.push(this[e+a])}var s=o.length;for(a=0;a<s+n.length;a++){this.items[e+a]=this[e+a]=a<s?o[a]:n[a-s]}a=this.items.length=this.length-=t-s;while(this[a]){delete this[a++]}return new c(r)};n.exclude=function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]==e){this.splice(t,1);return true}return false};n.insertAfter=function(e){var t=this.items.length;while(t--){this.items[t].insertAfter(e)}return this};n.getBBox=function(){var e=[],t=[],i=[],n=[];for(var r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox();e.push(o.x);t.push(o.y);i.push(o.x+o.width);n.push(o.y+o.height)}e=d.apply(0,e);t=d.apply(0,t);i=l.apply(0,i);n=l.apply(0,n);return{x:e,y:t,x2:i,y2:n,width:i-e,height:n-t,cx:e+(i-e)/2,cy:t+(n-t)/2}};n.clone=function(e){e=new c;for(var t=0,i=this.items.length;t<i;t++){e.push(this.items[t].clone())}return e};n.toString=function(){return"Snap‘s set"};n.type="set";u.Set=c;u.set=function(){var e=new c;if(arguments.length){e.push.apply(e,Array.prototype.slice.call(arguments,0))}return e}});e.plugin(function(u,e,t,i){var l={},d=/[%a-z]+$/i,c=String;l.stroke=l.fill="colour";function f(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":if(e.length==4){return[t,0,e[2],e[3]]}else{return[t,0]}case"s":if(e.length==5){return[t,1,1,e[3],e[4]]}else if(e.length==3){return[t,1,1]}else{return[t,1]}}}function h(e,t,i){e=e||new u.Matrix;t=t||new u.Matrix;e=u.parseTransformString(e.toTransformString())||[];t=u.parseTransformString(t.toTransformString())||[];var n=Math.max(e.length,t.length),r=[],o=[],a=0,s,l,d,c;for(;a<n;a++){d=e[a]||f(t[a]);c=t[a]||f(d);if(d[0]!=c[0]||d[0].toLowerCase()=="r"&&(d[2]!=c[2]||d[3]!=c[3])||d[0].toLowerCase()=="s"&&(d[3]!=c[3]||d[4]!=c[4])){e=u._.transform2matrix(e,i());t=u._.transform2matrix(t,i());r=[["m",e.a,e.b,e.c,e.d,e.e,e.f]];o=[["m",t.a,t.b,t.c,t.d,t.e,t.f]];break}r[a]=[];o[a]=[];for(s=0,l=Math.max(d.length,c.length);s<l;s++){s in d&&(r[a][s]=d[s]);s in c&&(o[a][s]=c[s])}}return{from:b(r),to:b(o),f:_(r)}}function p(e){return e}function m(t){return function(e){return+e.toFixed(3)+t}}function g(e){return e.join(" ")}function v(e){return u.rgb(e[0],e[1],e[2],e[3])}function _(e){var t=0,i,n,r,o,a,s,l=[];for(i=0,n=e.length;i<n;i++){a="[";s=['"'+e[i][0]+'"'];for(r=1,o=e[i].length;r<o;r++){s[r]="val["+t+++"]"}a+=s+"]";l[i]=a}return Function("val","return Snap.path.toString.call(["+l+"])")}function b(e){var t=[];for(var i=0,n=e.length;i<n;i++){for(var r=1,o=e[i].length;r<o;r++){t.push(e[i][r])}}return t}function y(e){return isFinite(e)}function w(e,t){if(!u.is(e,"array")||!u.is(t,"array")){return false}return e.toString()==t.toString()}e.prototype.equal=function(e,t){return pe("snap.util.equal",this,e,t).firstDefined()};pe.on("snap.util.equal",function(e,t){var i,n,r=c(this.attr(e)||""),o=this;if(l[e]=="colour"){i=u.color(r);n=u.color(t);return{from:[i.r,i.g,i.b,i.opacity],to:[n.r,n.g,n.b,n.opacity],f:v}}if(e=="viewBox"){i=this.attr(e).vb.split(" ").map(Number);n=t.split(" ").map(Number);return{from:i,to:n,f:g}}if(e=="transform"||e=="gradientTransform"||e=="patternTransform"){if(typeof t=="string"){t=c(t).replace(/\.{3}|\u2026/g,r)}r=this.matrix;if(!u._.rgTransform.test(t)){t=u._.transform2matrix(u._.svgTransform2string(t),this.getBBox())}else{t=u._.transform2matrix(t,this.getBBox())}return h(r,t,function(){return o.getBBox(1)})}if(e=="d"||e=="path"){i=u.path.toCubic(r,t);return{from:b(i[0]),to:b(i[1]),f:_(i[0])}}if(e=="points"){i=c(r).split(u._.separator);n=c(t).split(u._.separator);return{from:i,to:n,f:function(e){return e}}}if(y(r)&&y(t)){return{from:parseFloat(r),to:parseFloat(t),f:p}}var a=r.match(d),s=c(t).match(d);if(a&&w(a,s)){return{from:parseFloat(r),to:parseFloat(t),f:m(a)}}else{return{from:this.asPX(e),to:this.asPX(e,t),f:p}}})});e.plugin(function(c,e,t,r){var i=e.prototype,f="hasOwnProperty",p="createTouch"in r.doc,n=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],h={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},m=function(e,t){var i=e=="y"?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:r.doc;return n[i in n.documentElement?"documentElement":"body"][i]},o=function(){this.returnValue=false},g=function(){return this.originalEvent.preventDefault()},a=function(){this.cancelBubble=true},v=function(){return this.originalEvent.stopPropagation()},s=function(l,d,c,u){var e=p&&h[d]?h[d]:d,t=function(e){var t=m("y",u),i=m("x",u);if(p&&h[f](d)){for(var n=0,r=e.targetTouches&&e.targetTouches.length;n<r;n++){if(e.targetTouches[n].target==l||l.contains(e.targetTouches[n].target)){var o=e;e=e.targetTouches[n];e.originalEvent=o;e.preventDefault=g;e.stopPropagation=v;break}}}var a=e.clientX+i,s=e.clientY+t;return c.call(u,e,a,s)};if(d!==e){l.addEventListener(d,t,false)}l.addEventListener(e,t,false);return function(){if(d!==e){l.removeEventListener(d,t,false)}l.removeEventListener(e,t,false);return true}},_=[],u=function(e){var t=e.clientX,i=e.clientY,n=m("y"),r=m("x"),o,a=_.length;while(a--){o=_[a];if(p){var s=e.touches&&e.touches.length,l;while(s--){l=e.touches[s];if(l.identifier==o.el._drag.id||o.el.node.contains(l.target)){t=l.clientX;i=l.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else{e.preventDefault()}var d=o.el.node,c,u=d.nextSibling,f=d.parentNode,h=d.style.display;t+=r;i+=n;pe("snap.drag.move."+o.el.id,o.move_scope||o.el,t-o.el._drag.x,i-o.el._drag.y,t,i,e)}},b=function(e){c.unmousemove(u).unmouseup(b);var t=_.length,i;while(t--){i=_[t];i.el._drag={};pe("snap.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,e);pe.off("snap.drag.*."+i.el.id)}_=[]};for(var l=n.length;l--;){(function(r){c[r]=i[r]=function(e,t){if(c.is(e,"function")){this.events=this.events||[];this.events.push({name:r,f:e,unbind:s(this.node||document,r,e,t||this)})}else{for(var i=0,n=this.events.length;i<n;i++)if(this.events[i].name==r){try{this.events[i].f.call(this)}catch(e){}}}return this};c["un"+r]=i["un"+r]=function(e){var t=this.events||[],i=t.length;while(i--)if(t[i].name==r&&(t[i].f==e||!e)){t[i].unbind();t.splice(i,1);!t.length&&delete this.events;return this}return this}})(n[l])}i.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)};i.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var y=[];i.drag=function(n,r,o,a,s,l){var d=this;if(!arguments.length){var i;return d.drag(function(e,t){this.attr({transform:i+(i?"T":"t")+[e,t]})},function(){i=this.transform().local})}function e(e,t,i){(e.originalEvent||e).preventDefault();d._drag.x=t;d._drag.y=i;d._drag.id=e.identifier;!_.length&&c.mousemove(u).mouseup(b);_.push({el:d,move_scope:a,start_scope:s,end_scope:l});r&&pe.on("snap.drag.start."+d.id,r);n&&pe.on("snap.drag.move."+d.id,n);o&&pe.on("snap.drag.end."+d.id,o);pe("snap.drag.start."+d.id,s||a||d,t,i,e)}function t(e,t,i){pe("snap.draginit."+d.id,d,e,t,i)}pe.on("snap.draginit."+d.id,e);d._drag={};y.push({el:d,start:e,init:t});d.mousedown(t);return d};i.undrag=function(){var e=y.length;while(e--)if(y[e].el==this){this.unmousedown(y[e].init);y.splice(e,1);pe.unbind("snap.drag.*."+this.id);pe.unbind("snap.draginit."+this.id)}!y.length&&c.unmousemove(u).unmouseup(b);return this}});e.plugin(function(s,l,e,t){var i=l.prototype,n=e.prototype,r=/^\s*url\((.+)\)/,d=String,c=s._.$;s.filter={};n.filter=function(e){var t=this;if(t.type!="svg"){t=t.paper}var i=s.parse(d(e)),n=s._.id(),r=t.node.offsetWidth,o=t.node.offsetHeight,a=c("filter");c(a,{id:n,filterUnits:"userSpaceOnUse"});a.appendChild(i.node);t.defs.appendChild(a);return new l(a)};pe.on("snap.util.getattr.filter",function(){pe.stop();var e=c(this.node,"filter");if(e){var t=d(e).match(r);return t&&s.select(t[1])}});pe.on("snap.util.attr.filter",function(e){if(e instanceof l&&e.type=="filter"){pe.stop();var t=e.node.id;if(!t){c(e.node,{id:e.id});t=e.id}c(this.node,{filter:s.url(t)})}if(!e||e=="none"){pe.stop();this.node.removeAttribute("filter")}});s.filter.blur=function(e,t){if(e==null){e=2}var i=t==null?e:[e,t];return s.format('<feGaussianBlur stdDeviation="{def}"/>',{def:i})};s.filter.blur.toString=function(){return this()};s.filter.shadow=function(e,t,i,n,r){if(r==null){if(n==null){r=i;i=4;n="#000"}else{r=n;n=i;i=4}}if(i==null){i=4}if(r==null){r=1}if(e==null){e=0;t=2}if(t==null){t=e}n=s.color(n);return s.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:n,dx:e,dy:t,blur:i,opacity:r})};s.filter.shadow.toString=function(){return this()};s.filter.grayscale=function(e){if(e==null){e=1}return s.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})};s.filter.grayscale.toString=function(){return this()};s.filter.sepia=function(e){if(e==null){e=1}return s.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})};s.filter.sepia.toString=function(){return this()};s.filter.saturate=function(e){if(e==null){e=1}return s.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})};s.filter.saturate.toString=function(){return this()};s.filter.hueRotate=function(e){e=e||0;return s.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})};s.filter.hueRotate.toString=function(){return this()};s.filter.invert=function(e){if(e==null){e=1}return s.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})};s.filter.invert.toString=function(){return this()};s.filter.brightness=function(e){if(e==null){e=1}return s.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})};s.filter.brightness.toString=function(){return this()};s.filter.contrast=function(e){if(e==null){e=1}return s.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})};s.filter.contrast.toString=function(){return this()}});e.plugin(function(e,t,i,n,r){var o=e._.box,a=e.is,s=/^[^a-z]*([tbmlrc])/i,l=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){if(t==null&&a(e,"string")){t=e;e=null}e=e||this.paper;var i=e.getBBox?e.getBBox():o(e),n=this.getBBox(),r={};t=t&&t.match(s);t=t?t[1].toLowerCase():"c";switch(t){case"t":r.dx=0;r.dy=i.y-n.y;break;case"b":r.dx=0;r.dy=i.y2-n.y2;break;case"m":r.dx=0;r.dy=i.cy-n.cy;break;case"l":r.dx=i.x-n.x;r.dy=0;break;case"r":r.dx=i.x2-n.x2;r.dy=0;break;default:r.dx=i.cx-n.cx;r.dy=0;break}r.toString=l;return r};t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}});e.plugin(function(t,e,i,n){var r="#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000",o="#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162",a="#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF",s="#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA",l="#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE",d="#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF",c="#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA",u="#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4",f="#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5",h="#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853",p="#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17",m="#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00",g="#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600",v="#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00",_="#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00",b="#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00",y="#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723",w="#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121",x="#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238";t.mui={};t.flat={};function C(e){e=e.split(/(?=#)/);var t=new String(e[5]);t[50]=e[0];t[100]=e[1];t[200]=e[2];t[300]=e[3];t[400]=e[4];t[500]=e[5];t[600]=e[6];t[700]=e[7];t[800]=e[8];t[900]=e[9];if(e[10]){t.A100=e[10];t.A200=e[11];t.A400=e[12];t.A700=e[13]}return t}t.mui.red=C(r);t.mui.pink=C(o);t.mui.purple=C(a);t.mui.deeppurple=C(s);t.mui.indigo=C(l);t.mui.blue=C(d);t.mui.lightblue=C(c);t.mui.cyan=C(u);t.mui.teal=C(f);t.mui.green=C(h);t.mui.lightgreen=C(p);t.mui.lime=C(m);t.mui.yellow=C(g);t.mui.amber=C(v);t.mui.orange=C(_);t.mui.deeporange=C(b);t.mui.brown=C(y);t.mui.grey=C(w);t.mui.bluegrey=C(x);t.flat.turquoise="#1abc9c";t.flat.greensea="#16a085";t.flat.sunflower="#f1c40f";t.flat.orange="#f39c12";t.flat.emerland="#2ecc71";t.flat.nephritis="#27ae60";t.flat.carrot="#e67e22";t.flat.pumpkin="#d35400";t.flat.peterriver="#3498db";t.flat.belizehole="#2980b9";t.flat.alizarin="#e74c3c";t.flat.pomegranate="#c0392b";t.flat.amethyst="#9b59b6";t.flat.wisteria="#8e44ad";t.flat.clouds="#ecf0f1";t.flat.silver="#bdc3c7";t.flat.wetasphalt="#34495e";t.flat.midnightblue="#2c3e50";t.flat.concrete="#95a5a6";t.flat.asbestos="#7f8c8d";t.importMUIColors=function(){for(var e in t.mui){if(t.mui.hasOwnProperty(e)){k[e]=t.mui[e]}}}});return e})}).call(window)},function(n,e,r){"use strict";(function(a){var s=t(r(0));var e=t(r(9));function t(e){return e&&e.__esModule?e:{default:e}}var i=e.default.Model.extend({defaults:{JIT:[],Triggers:[],Summary:{}},set_statistics:function e(t){var i=this.get("JIT"),n=this.get("Triggers"),r=this.get("Summary");if(Object.keys(i).length>0||Object.keys(n).length>0||Object.keys(r).length>0){(0,s.default)(".pg-explain-stats-area").removeClass("d-none")}var o=(0,s.default)("<table></table>",{class:"pgadmin-tooltip-table"});if(Object.keys(i).length>0){o.append('<tr><td class="label explain-tooltip">JIT:</td></tr>');a.each(i,function(e,t){t=a.escape(t);e=a.escape(e);o.append('\n          <tr>\n            <td class="label explain-tooltip">  '.concat(t,'</td>\n            <td class="label explain-tooltip-val">').concat(e,"</td>\n          </tr>\n        "))})}if(Object.keys(n).length>0){o.append('<tr><td class="label explain-tooltip">Triggers:</td></tr>');a.each(n,function(e,t){if(e instanceof Object){a.each(e,function(e,t){if(t==="Trigger Name"){t=a.escape(t);e=a.escape(e);o.append('\n                <tr>\n                  <td class="label explain-tooltip">  '.concat(t,'</td>\n                  <td class="label explain-tooltip-val">').concat(e,"</td>\n                </tr>\n              "))}else{t=a.escape(t);e=a.escape(e);o.append('\n                <tr>\n                  <td class="label explain-tooltip">    '.concat(t,'</td>\n                  <td class="label explain-tooltip-val">').concat(e,"</td>\n                </tr>\n              "))}})}else{t=a.escape(t);e=a.escape(e);o.append('\n            <tr>\n              <td class="label explain-tooltip">  '.concat(t,'</td>\n              <td class="label explain-tooltip-val">').concat(e,"</td>\n            </tr>\n          "))}})}if(Object.keys(r).length>0){o.append('<tr><td class="label explain-tooltip">Summary:</td></tr>');a.each(r,function(e,t){t=a.escape(t);e=a.escape(e);o.append('\n          <tr>\n            <td class="label explain-tooltip">  '.concat(t,'</td>\n            <td class="label explain-tooltip-val">').concat(e,"</td>\n          </tr>\n        "))})}(0,s.default)(".pg-explain-stats-area").off("mouseover").on("mouseover",function(){if(Object.keys(i).length==0&&Object.keys(n).length==0&&Object.keys(r).length==0){return}t.empty();t.append(o);t.css({opacity:"0.8",left:"",right:"65px",top:"15px"});(0,s.default)(".pgadmin-explain-tooltip").css("padding","5px");(0,s.default)(".pgadmin-explain-tooltip").css("border","1px solid white")});(0,s.default)(".pg-explain-stats-area").off("mouseout").on("mouseout",function(){t.empty();t.css({opacity:"0",left:0,top:0,right:""})})}});n.exports=i}).call(this,r(1))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n={blobURL:function e(t,i){var n=new Blob([t],{type:i});return(window.URL||window.webkitURL).createObjectURL(n)},downloadSVG:function e(t,i){t=t.replace(/NS\d+:href/gi,"xlink:href");var n=this.blobURL(t,"image/svg+xml");var r=document.createElement("a");r.href=n;r.setAttribute("download",i);document.body.appendChild(r);r.click();document.body.removeChild(r)}};var r=n;t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(i(8));function n(e){return e&&e.__esModule?e:{default:e}}var o={Aggregate:{image:"ex_aggregate.svg",image_text:"Aggregate"},Append:{image:"ex_append.svg",image_text:"Append"},"Bitmap Index Scan":function e(t){return{image:"ex_bmp_index.svg",image_text:t["Index Name"]}},"Bitmap Heap Scan":function e(t){return{image:"ex_bmp_heap.svg",image_text:t["Relation Name"]}},BitmapAnd:{image:"ex_bmp_and.svg",image_text:"Bitmap AND"},BitmapOr:{image:"ex_bmp_or.svg",image_text:"Bitmap OR"},"CTE Scan":{image:"ex_cte_scan.svg",image_text:"CTE Scan"},"Function Scan":{image:"ex_result.svg",image_text:"Function Scan"},"Foreign Scan":{image:"ex_foreign_scan.svg",image_text:"Foreign Scan"},Gather:{image:"ex_gather_motion.svg",image_text:"Gather"},"Gather Merge":{image:"ex_gather_merge.svg",image_text:"Gather Merge"},Group:{image:"ex_group.svg",image_text:"Group"},GroupAggregate:{image:"ex_aggregate.svg",image_text:"Group Aggregate"},Hash:{image:"ex_hash.svg",image_text:"Hash"},"Hash Join":function e(t){if(!t["Join Type"])return{image:"ex_join.svg",image_text:"Join"};switch(t["Join Type"]){case"Anti":return{image:"ex_hash_anti_join.svg",image_text:"Hash Anti Join"};case"Semi":return{image:"ex_hash_semi_join.svg",image_text:"Hash Semi Join"};default:return{image:"ex_hash.svg",image_text:String("Hash "+t["Join Type"]+" Join")}}},HashAggregate:{image:"ex_aggregate.svg",image_text:"Hash Aggregate"},"Index Only Scan":function e(t){return{image:"ex_index_only_scan.svg",image_text:t["Index Name"]}},"Index Scan":function e(t){return{image:"ex_index_scan.svg",image_text:t["Index Name"]}},"Index Scan Backword":{image:"ex_index_scan.svg",image_text:"Index Backward Scan"},Limit:{image:"ex_limit.svg",image_text:"Limit"},LockRows:{image:"ex_lock_rows.svg",image_text:"Lock Rows"},Materialize:{image:"ex_materialize.svg",image_text:"Materialize"},"Merge Append":{image:"ex_merge_append.svg",image_text:"Merge Append"},"Merge Join":function e(t){switch(t["Join Type"]){case"Anti":return{image:"ex_merge_anti_join.svg",image_text:"Merge Anti Join"};case"Semi":return{image:"ex_merge_semi_join.svg",image_text:"Merge Semi Join"};default:return{image:"ex_merge.svg",image_text:String("Merge "+t["Join Type"]+" Join")}}},ModifyTable:function e(t){switch(t["Operation"]){case"Insert":return{image:"ex_insert.svg",image_text:"Insert"};case"Update":return{image:"ex_update.svg",image_text:"Update"};case"Delete":return{image:"ex_delete.svg",image_text:"Delete"}}},"Named Tuplestore Scan":{image:"ex_named_tuplestore_scan.svg",image_text:"Named Tuplestore Scan"},"Nested Loop":function e(t){switch(t["Join Type"]){case"Anti":return{image:"ex_nested_loop_anti_join.svg",image_text:"Nested Loop Anti Join"};case"Semi":return{image:"ex_nested_loop_semi_join.svg",image_text:"Nested Loop Semi Join"};default:return{image:"ex_nested.svg",image_text:"Nested Loop "+t["Join Type"]+" Join"}}},ProjectSet:{image:"ex_projectset.svg",image_text:"ProjectSet"},"Recursive Union":{image:"ex_recursive_union.svg",image_text:"Recursive Union"},Result:{image:"ex_result.svg",image_text:"Result"},"Sample Scan":{image:"ex_scan.svg",image_text:"Sample Scan"},Scan:{image:"ex_scan.svg",image_text:"Scan"},Seek:{image:"ex_seek.svg",image_text:"Seek"},SetOp:function e(t){var i=t["Strategy"],n=t["Command"];if(i=="Hashed"){if(r.default.startsWith(n,"Intersect")){if(n=="Intersect All")return{image:"ex_hash_setop_intersect_all.svg",image_text:"Hashed Intersect All"};return{image:"ex_hash_setop_intersect.svg",image_text:"Hashed Intersect"}}else if(r.default.startsWith(n,"Except")){if(n=="Except All")return{image:"ex_hash_setop_except_all.svg",image_text:"Hashed Except All"};return{image:"ex_hash_setop_except.svg",image_text:"Hash Except"}}return{image:"ex_hash_setop_unknown.svg",image_text:"Hashed SetOp Unknown"}}return{image:"ex_setop.svg",image_text:"SetOp"}},"Seq Scan":function e(t){return{image:"ex_scan.svg",image_text:t["Relation Name"]}},"Subquery Scan":{image:"ex_subplan.svg",image_text:"SubQuery Scan"},Sort:{image:"ex_sort.svg",image_text:"Sort"},"Tid Scan":{image:"ex_tid_scan.svg",image_text:"Tid Scan"},"Table Function Scan":{image:"ex_table_func_scan.svg",image_text:"Table Function Scan"},Unique:{image:"ex_unique.svg",image_text:"Unique"},"Values Scan":{image:"ex_values_scan.svg",image_text:"Values Scan"},WindowAgg:{image:"ex_window_aggregate.svg",image_text:"Window Aggregate"},"WorkTable Scan":{image:"ex_worktable_scan.svg",image_text:"WorkTable Scan"},Undefined:{image:"ex_unknown.svg",image_text:"Undefined"}};var a=o;t.default=a},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(2),i(334),i(335),i(30),i(4)],r=function(p,m,g,v,_,b){var e=function e(t){var i=window.Slick,n=new v(t),r=new g(t),o=new i.Event,a=new i.Event,s=r.onBeforeColumnSelectAll,l=r.onColumnSelectAll;var d=function e(i){this.grid=i;i.onHeaderClick.subscribe(function(e,t){if(t.column.selectAllOnClick&&!p(e.target).hasClass("slick-resizable-handle")){f(i,e,t)}});i.getSelectionModel().onSelectedRangesChanged.subscribe(u.bind(null,i));i.registerPlugin(n);i.registerPlugin(r);a.subscribe(function(e,t){_.selectAll(t.grid)})};var c=function e(t){t=r.getColumnDefinitions(t);t=n.getColumnDefinitions(t);t[0].selectAllOnClick=true;t[0].name='<span data-id="select-all" '+'title="'+m("Select/Deselect All")+'">'+"<br>"+t[0].name+'<img class="select-all-icon" src="'+b("static",{filename:"img/select-all-icon.png"})+'"></img>';"</span>";return t};function u(e){if(_.isEntireGridSelected(e)){p("[data-id='select-all']").addClass("selected")}else{p("[data-id='select-all']").removeClass("selected")}}function f(e,t,i){if(_.isEntireGridSelected(e)){h(e)}else{o.notify(i,t);if(!(t.isPropagationStopped()||t.isImmediatePropagationStopped())){_.selectAll(e)}}}function h(e){var t=e.getSelectionModel();t.setSelectedRanges([])}p.extend(this,{init:d,getColumnDefinitions:c,onBeforeGridSelectAll:o,onGridSelectAll:a,onBeforeGridColumnSelectAll:s,onGridColumnSelectAll:l})};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(i,n,r){"use strict";(function(g){var e,t;!(e=[r(0),r(30),r(65)],t=function(p,m){var e=function e(){var t=window.Slick,i=new t.EventHandler,a=new t.Event,n=new t.Event;var r=function e(t){i.subscribe(t.onHeaderClick,o.bind(null,t));t.getSelectionModel().onSelectedRangesChanged.subscribe(s.bind(null,t));n.subscribe(function(e,t){l(t.grid,t.column.id)})};var o=function e(t,i,n){var r=n.column;t.focus();if(c(r)){var o=p(i.target);if(d(i)){if(p(i.target).hasClass("slick-resizable-handle")){return}o=p(i.target).parents(".slick-header-column")}o.toggleClass("selected");if(o.hasClass("selected")){a.notify(n,i)}if(!(i.isPropagationStopped()||i.isImmediatePropagationStopped())){l(t,r.id)}}};var s=function e(r,t,o){p(".slick-header-column").each(function(e,t){var i=p(t).find('[data-cell-type="column-header-row"]');var n=r.getColumnIndex(i.data("column-id"));if(u(r,o,n)){p(t).addClass("selected")}else{p(t).removeClass("selected")}})};var l=function e(t,i){var n=t.getSelectionModel();var r=n.getSelectedRanges();var o=t.getColumnIndex(i);var a=m.rangeForColumn(t,o);var s;if(m.isRangeSelected(r,a)){s=m.removeRange(r,a)}else{if(m.areAllRangesSingleColumns(r,t)){s=m.addRange(r,a)}else{s=[a]}}n.setSelectedRanges(s)};var d=function e(t){return!p(t.target).hasClass("slick-header-column")};var c=function e(t){return t.selectable!==false};var u=function e(t,i,n){var r=m.areAllRangesCompleteRows(t,i);return f(t,i,n)&&!r};var f=function e(t,i,n){var r=m.isRangeEntirelyWithinSelectedRanges(i,m.rangeForColumn(t,n));var o=m.isAnyCellOfColumnSelected(i,n);return r||o};var h=function e(t){return g.map(t,function(e){if(c(e)){var t="<span data-cell-type='column-header-row' "+"       data-test='output-column-header'"+"       data-column-id='"+e.id+"'>"+"  <span class='column-description'>"+"    <span class='column-name'>"+e.display_name+"</span>"+"    <span class='column-type'>"+e.column_type+"</span>"+"  </span>"+"</span>";return g.extend(e,{name:t})}else{return e}})};p.extend(this,{init:r,getColumnDefinitions:h,onBeforeColumnSelectAll:a,onColumnSelectAll:n})};return e}.apply(n,e),t!==undefined&&(i.exports=t))}).call(this,r(1))},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(30),i(65)],r=function(c,u){var e=function e(){var t=window.Slick;var i=new t.EventHandler;var n=function e(t){t.getSelectionModel().onSelectedRangesChanged.subscribe(o.bind(null,t));i.subscribe(t.onClick,r.bind(null,t))};var r=function e(t,i,n){if(t.getColumns()[n.cell].id==="row-header-column"){var r=c(i.target);if(r.data("cell-type")!="row-header-selector"){r=c(i.target).find('[data-cell-type="row-header-selector"]')}r.parent().toggleClass("selected");a(t,n.row)}};var o=function e(r,t,o){c('[data-cell-type="row-header-selector"]').each(function(e,t){var i=c(t);var n=parseInt(i.data("row"));if(l(r,o,n)){i.parent().addClass("selected")}else{i.parent().removeClass("selected")}})};var a=function e(t,i){var n=t.getSelectionModel();var r=n.getSelectedRanges();var o=u.rangeForRow(t,i);var a;if(u.isRangeSelected(r,o)){a=u.removeRange(r,o)}else{if(u.areAllRangesSingleRows(r,t)){a=u.addRange(r,o)}else{a=[o]}}n.setSelectedRanges(a)};var s=function e(t,i,n){var r=u.isRangeEntirelyWithinSelectedRanges(i,u.rangeForRow(t,n));var o=u.isAnyCellOfRowSelected(i,n);return r||o};var l=function e(t,i,n){var r=u.areAllRangesCompleteColumns(t,i);return s(t,i,n)&&!r};var d=function e(t){t.unshift({id:"row-header-column",name:"",selectable:false,focusable:false,formatter:function e(t){return"<span "+'data-row="'+t+'" '+'data-cell-type="row-header-selector">'+(t+1)+"</span>"},width:30});return t};c.extend(this,{init:n,getColumnDefinitions:d})};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(30)],r=function(I,O){var e=function e(){var t=39;var i=37;var n=38;var r=40;var o=false;var a=false;var s=false;var l;var d=function e(t){l=t;l.onDragEnd.subscribe(u);l.onHeaderClick.subscribe(f);l.onClick.subscribe(v);l.onActiveCellChanged.subscribe(_);l.onKeyDown.subscribe(b);l.onHeaderMouseEnter.subscribe(m);l.onHeaderMouseLeave.subscribe(p);l.onColumnsResized.subscribe(g)};var c=function e(){l.onDragEnd.unsubscribe(u);l.onHeaderClick.unsubscribe(f);l.onActiveCellChanged.unsubscribe(_);l.onKeyDown.unsubscribe(b);l.onHeaderMouseEnter.unsubscribe(m);l.onHeaderMouseLeave.unsubscribe(p);l.onColumnsResized.unsubscribe(g)};I.extend(this,{init:d,destroy:c});function u(e,t){o=true;l.setActiveCell(t.range.start.row,t.range.start.cell)}function f(e,t){if(y()){a=false;e.stopPropagation();return}if(I(e.target).hasClass("slick-resizable-handle")){return}o=true;var i=t.column.pos+1;if(w(0,i)){if(S()){l.resetActiveCell()}else{l.setActiveCell(0,T().fromCell)}}else if(!x(i)){l.setActiveCell(0,i)}}function h(e){return e>=l.getDataLength()}function p(){s=false}function m(){s=true;a=false}function g(){a=true}function v(e,t){if(C(t.cell)){o=true;var i=t.row;if(h(i)){return}if(w(i,1)){if(S()){l.resetActiveCell()}else{l.setActiveCell(T().fromRow,1)}}else if(!k(i)){l.setActiveCell(i,1)}}}function _(e){if(o){o=false;e.stopPropagation()}}function b(e){if(E()&&P(e)){M()}}function y(){return s&&a}function w(e,t){return E()&&l.getActiveCell().row===e&&l.getActiveCell().cell===t}function x(e){var t=O.rangeForColumn(l,e);var i=l.getSelectionModel();var n=i.getSelectedRanges();return O.isRangeSelected(n,t)}function C(e){return l.getColumns()[e].id==="row-header-column"}function k(e){var t=O.rangeForRow(l,e);var i=l.getSelectionModel();var n=i.getSelectedRanges();return O.isRangeSelected(n,t)}function S(){var e=l.getSelectionModel();var t=e.getSelectedRanges();return t.length===1}function T(){var e=l.getSelectionModel();var t=e.getSelectedRanges();return t[t.length-2]}function N(e){return e.which===t||e.which===n||e.which===i||e.which===r}function D(e){return e.shiftKey&&!e.ctrlKey&&!e.altKey}function P(e){return D(e)&&N(e)}function E(){return!!l.getActiveCell()}function M(){var e=l.getSelectionModel();var t=e.getSelectedRanges();if(t.length>1){e.setSelectedRanges([t.pop()])}}};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(i,n,r){"use strict";(function(d){var e,t;!(e=[r(30)],t=function(l){return{getUnion:function e(t){if(d.isEmpty(t)){return[]}t.sort(n);var i=[t[0]];t.forEach(function(e){var t=d.last(i);if(r(e,t)){if(!o(e,t)){t[1]=e[1]}}else{i.push(e)}});return i;function n(e,t){return e[0]-t[0]}function r(e,t){return e[0]<=t[1]+1}function o(e,t){return e[1]<=t[1]}},mapDimensionBoundaryUnion:function e(t,i){var n=[];t.forEach(function(e){for(var t=e[0];t<=e[1];t+=1){n.push(i(t))}});return n},mapOver2DArray:function e(t,i,n,r){var o=this.getUnion(t);var a=this.getUnion(i);return this.mapDimensionBoundaryUnion(o,function(t){var e=this.mapDimensionBoundaryUnion(a,function(e){return n(t,e)});return r(e)}.bind(this))},rangesToCsv:function e(t,i,n,r){var o=n.map(function(e){return[e.fromRow,e.toRow]});var a=n.map(function(e){return[e.fromCell,e.toCell]});if(!l.isFirstColumnData(i)){a=this.removeFirstColumn(a)}var s=this.mapOver2DArray(o,a,this.csvCell.bind(this,t,i,r),function(e){var t=r.field_separator||"\t";return e.join(t)});return s.join("\n")},removeFirstColumn:function e(t){var i=this.getUnion(t);if(i.length==0){return[]}var n=function e(){return i[0][0]==0};function r(){return i[0][1]==0}if(n()){if(r()){i.shift()}else{i[0][0]=1}}return i},csvCell:function e(t,i,n,r,o){var a=t[r][i[o].field],s=n.quoting||"strings",l=n.quote_char||'"';if(s=="all"){if(a&&d.isObject(a)){a=l+JSON.stringify(a)+l}else if(a){a=l+a.toString()+l}else if(d.isNull(a)||d.isUndefined(a)){a=""}}else if(s=="strings"){if(a&&d.isObject(a)){a=l+JSON.stringify(a)+l}else if(a&&typeof a!="number"&&typeof a!="boolean"){a=l+a.toString()+l}else if(d.isNull(a)||d.isUndefined(a)){a=""}}return a}}}.apply(n,e),t!==undefined&&(i.exports=t))}).call(this,r(1))},function(e,t,i){"use strict";var n,r;!(n=[i(207),i(30)],r=function(l,d){return function e(t,i){var n=67;var r=65;var o=t.keyCode;var a=t.ctrlKey||t.metaKey;var s=this||window;s.slickgrid=i.grid;s.csvOptions;if(a&&o==n){l.apply(s)}if(a&&o==r){d.selectAll(s.slickgrid)}}}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(1),i(30),i(65)],r=function(N,D,P){var e=function e(t){var p=39;var m=37;var g=38;var v=40;var _=window.Slick;var b;var i=[];var n=this;var r=new _.CellRangeSelector({selectionCss:{border:"2px solid black"},offset:{top:0,left:-1,height:2,width:1}});var o;var a={selectActiveCell:true};function s(e){o=N.extend(true,{},a,t);b=e;b.onActiveCellChanged.subscribe(h);b.onKeyDown.subscribe(S);e.registerPlugin(r);r.onCellRangeSelected.subscribe(f);r.onBeforeCellRangeSelected.subscribe(u);N(window.parent).on("mouseup",T)}function l(){b.onActiveCellChanged.unsubscribe(h);b.onKeyDown.unsubscribe(S);r.onCellRangeSelected.unsubscribe(f);r.onBeforeCellRangeSelected.unsubscribe(u);b.unregisterPlugin(r);N(window.parent).off("mouseup",T)}function d(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(b.canCellBeSelected(n.fromRow,n.fromCell)&&b.canCellBeSelected(n.toRow,n.toCell)){t.push(n)}}return t}function y(e){if((!i||i.length===0)&&(!e||e.length===0)){return}i=d(e);n.onSelectedRangesChanged.notify(i)}function w(){return i}function c(e){i=[];for(var t=0;t<e.length;t++){i.push(P.rangeForRow(b,e[t]))}}function u(e){if(b.getEditorLock().isActive()){e.stopPropagation();return false}}function f(e,t){y([t.range])}function h(e,t){if(o.selectActiveCell&&t.row!=null&&t.cell!=null){y([new _.Range(t.row,t.cell)])}}function x(e){return e.which==p||e.which==m||e.which==g||e.which==v}function C(e){return e.shiftKey&&!e.ctrlKey&&!e.altKey&&x(e)}function k(e){return d([e]).length}function S(t){var e;var i;var n=b.getActiveCell();function r(e){return t.which===e}function o(){return t.which}function a(){return n.row===u.fromRow}function s(){return n.cell===u.fromCell}function l(e,t){var i={};i.row=e.fromRow===t.row?e.toRow:e.fromRow;i.cell=e.fromCell===t.cell?e.toCell:e.fromCell;return i}function d(e,t){var i=e.cell<=t.cell?e.cell:t.cell;var n=e.cell<=t.cell?t.cell:e.cell;var r=e.row<=t.row?e.row:t.row;var o=e.row<=t.row?t.row:e.row;return new _.Range(r,i,o,n)}if(n&&C(t)){e=w();if(!e.length){e.push(new _.Range(n.row,n.cell))}i=e.pop();if(!i.contains(n.row,n.cell)){i=new _.Range(n.row,n.cell)}var c=l(i,n);switch(o()){case m:c.cell-=1;break;case p:c.cell+=1;break;case g:c.row-=1;break;case v:c.row+=1;break}var u=d(n,c);if(k(u)){var f=a()?u.toRow:u.fromRow;var h=s()?u.toCell:u.fromCell;if(r(p)||r(m)){b.scrollColumnIntoView(h)}else if(r(g)||r(v)){b.scrollRowIntoView(f)}e.push(u)}else{e.push(i)}y(e);t.preventDefault();t.stopPropagation()}}function T(){var e=r.getCurrentRange();if(!D.isUndefined(e)){b.onDragEnd.notify({range:e})}}N.extend(this,{getSelectedRanges:w,setSelectedRanges:y,setSelectedRows:c,init:s,destroy:l,onSelectedRangesChanged:new _.Event})};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(e,t,i){"use strict";var n,r;!(n=[i(0),i(1),i(30)],r=function(t,s,l){function d(e){t(e).prop("disabled",true)}function c(e){t(e).prop("disabled",false)}function r(e,r,o,a){return s.reduce(e,function(e,t){var i=o.getItem(t);if(u(i,r)){return e}var n=i[a];e[n]=f(r,i);return e},{})}function u(t,e){if(s.isUndefined(t)){return true}return!s.isUndefined(s.find(e,function(e){return s.isUndefined(t[e])}))}function f(t,i){var n={};if(t&&t.length){s.each(s.keys(i),function(e){if(s.contains(t,e))n[e]=i[e]})}return n}function h(e,t){var i=e.grid.getData();var n=r(t,s.keys(e.keys),i,e.client_primary_key);return n}var e=function e(){var t=this;function e(e){t.editor.handler.data_store.staged_rows=e}function i(){return t.editor.handler.can_edit}d("#btn-delete-row");d("#btn-copy-row");function n(){return l.areAllRangesCompleteRows(t.grid,t.selection.getSelectedRanges())}var r=this.selection.getSelectedRanges();if(r.length>0){c("#btn-copy-row")}if(n()){var o=l.getIndexesOfCompleteRows(this.grid,this.selection.getSelectedRanges());var a=h(t,o);e(a);if(s.isEmpty(a)){this.selection.setSelectedRows([])}if(i()&&!s.isEmpty(a)){c("#btn-delete-row")}}else{e({})}};return e}.apply(t,n),r!==undefined&&(e.exports=r))},function(p,e,m){"use strict";(function(i){var n=t(m(2));var r=t(m(0));var o=t(m(4));var s=t(m(25));var l=e(m(168));function e(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function t(e){return e&&e.__esModule?e:{default:e}}function d(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){d=function e(t){return typeof t}}else{d=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return d(e)}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,i){if(t)a(e.prototype,t);if(i)a(e,i);return e}var f=function(){function t(e){c(this,t);this.sqlEditor=e}u(t,[{key:"setMessage",value:function e(t){this.sqlEditor.trigger("pgadmin-sqleditor:loading-icon:message",(0,n.default)(t))}},{key:"show",value:function e(t){this.sqlEditor.trigger("pgadmin-sqleditor:loading-icon:show",t)}},{key:"hide",value:function e(){this.sqlEditor.trigger("pgadmin-sqleditor:loading-icon:hide")}}]);return t}();var h=function(){function a(e,t){c(this,a);this.sqlServerObject=e;this.loadingScreen=new f(e);this.userManagement=t}u(a,[{key:"delayedPoll",value:function e(){var t=this;setTimeout(function(){t.poll()},t.sqlServerObject.POLL_FALLBACK_TIME())}},{key:"execute",value:function e(t,i,n){if(t.length<=0)return;var r=this;r.explainPlan=i;var o=a.prepareAnalyzeSql(t,i);r.initializeExecutionOnSqlEditor(o);s.default.post(this.generateURLReconnectionFlag(n),JSON.stringify(o),{headers:{"Content-Type":"application/json"}}).then(function(e){var t=e.data;r.removeGridViewMarker();r.updateSqlEditorLastTransactionStatus(t.data.transaction_status);if(a.isSqlCorrect(t)){r.loadingScreen.setMessage("Waiting for the query to complete...");r.updateSqlEditorStateWithInformationFromServer(t.data);r.delayedPoll()}else{r.loadingScreen.hide();r.enableSQLEditorButtons();if(e.data.data.transaction_status==2||e.data.data.transaction_status==3){r.enableTransactionButtons()}else{r.disableTransactionButtons()}r.sqlServerObject.update_msg_history(false,t.data.result);if("notifies"in t.data)r.sqlServerObject.update_notifications(t.data.notifies);r.sqlServerObject._highlight_error(t.data.result)}}).catch(function(e){r.onExecuteHTTPError(e)})}},{key:"generateURLReconnectionFlag",value:function e(t){var i=(0,o.default)("sqleditor.query_tool_start",{trans_id:this.sqlServerObject.transId});if(t){i+="?connect=1"}return i}},{key:"poll",value:function e(){var t=this;var n=this;s.default.get((0,o.default)("sqleditor.poll",{trans_id:n.sqlServerObject.transId})).then(function(e){n.updateSqlEditorLastTransactionStatus(e.data.data.transaction_status);if(e.data.data.transaction_status==2||e.data.data.transaction_status==3){n.enableTransactionButtons()}else{n.disableTransactionButtons()}if(a.isQueryFinished(e)){if(t.sqlServerObject.close_on_idle_transaction&&e.data.data.transaction_status==0)t.sqlServerObject.check_needed_confirmations_before_closing_panel();n.loadingScreen.setMessage("Loading data from the database server and rendering...");n.sqlServerObject.call_render_after_poll(e.data.data);if("notifies"in e.data.data)n.sqlServerObject.update_notifications(e.data.data.notifies)}else if(a.isQueryStillRunning(e)){t.delayedPoll();n.sqlServerObject.setIsQueryRunning(true);if(e.data.data.result){n.sqlServerObject.update_msg_history(e.data.data.status,e.data.data.result,false)}}else if(a.isConnectionToServerLostWhilePolling(e)){n.loadingScreen.hide();if(n.sqlServerObject.is_query_tool){n.enableSQLEditorButtons()}n.sqlServerObject.update_msg_history(false,e.data.data.result,true)}else if(a.isQueryCancelled(e)){n.loadingScreen.hide();n.sqlServerObject.update_msg_history(false,"Execution Cancelled!",true)}}).catch(function(e){n.sqlServerObject.resetQueryHistoryObject(n.sqlServerObject);n.loadingScreen.hide();if(n.sqlServerObject.is_query_tool){n.enableSQLEditorButtons()}if(a.wasConnectionLostToPythonServer(e.response)){n.handleConnectionToServerLost();return}var t=e.response.data;if(n.userManagement.isPgaLoginRequired(t)){return n.userManagement.pgaLogin()}var i=a.extractErrorMessage(t);n.sqlServerObject.update_msg_history(false,i);n.sqlServerObject._highlight_error(i)})}},{key:"initializeExecutionOnSqlEditor",value:function e(t){this.loadingScreen.show("Running query...");(0,r.default)("#btn-flash").prop("disabled",true);(0,r.default)("#btn-download").prop("disabled",true);this.sqlServerObject.query_start_time=new Date;if(d(t)==="object"){this.sqlServerObject.query=t["sql"]}else{this.sqlServerObject.query=t}this.sqlServerObject.rows_affected=0;this.sqlServerObject._init_polling_flags();this.disableSQLEditorButtons();this.disableTransactionButtons()}},{key:"onExecuteHTTPError",value:function e(t){this.loadingScreen.hide();this.enableSQLEditorButtons();if(a.wasConnectionLostToPythonServer(t.response)){this.handleConnectionToServerLost();return}if(this.userManagement.isPgaLoginRequired(t.response)){this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]);this.userManagement.pgaLogin()}if(l.httpResponseRequiresNewTransaction(t.response)){this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]);this.sqlServerObject.initTransaction()}if(this.wasDatabaseConnectionLost(t)){this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]);this.sqlServerObject.handle_connection_lost(false,t)}if(this.isCryptKeyMissing(t)){this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]);this.sqlServerObject.handle_cryptkey_missing();return}var i=t.response.data.errormsg;this.sqlServerObject.update_msg_history(false,i)}},{key:"wasDatabaseConnectionLost",value:function e(t){return t.response.status===503&&t.response.data.info!==undefined&&t.response.data.info==="CONNECTION_LOST"}},{key:"isCryptKeyMissing",value:function e(t){return t.response.status===503&&t.response.data.info!==undefined&&t.response.data.info==="CRYPTKEY_MISSING"}},{key:"removeGridViewMarker",value:function e(){if(this.sqlServerObject.gridView.marker){this.sqlServerObject.gridView.marker.clear();delete this.sqlServerObject.gridView.marker;this.sqlServerObject.gridView.marker=null;this.sqlServerObject.gridView.query_tool_obj.removeLineClass(this.sqlServerObject.marked_line_no,"wrap","CodeMirror-activeline-background")}}},{key:"enableSQLEditorButtons",value:function e(){this.sqlServerObject.disable_tool_buttons(false)}},{key:"disableSQLEditorButtons",value:function e(){this.sqlServerObject.disable_tool_buttons(true)}},{key:"enableTransactionButtons",value:function e(){this.sqlServerObject.disable_transaction_buttons(false)}},{key:"disableTransactionButtons",value:function e(){this.sqlServerObject.special_sql=undefined;this.sqlServerObject.disable_transaction_buttons(true)}},{key:"handleConnectionToServerLost",value:function e(){this.sqlServerObject.update_msg_history(false,(0,n.default)("Not connected to the server or the connection to the server has been closed."))}},{key:"updateSqlEditorStateWithInformationFromServer",value:function e(t){this.sqlServerObject.can_edit=t.can_edit;this.sqlServerObject.can_filter=t.can_filter;this.sqlServerObject.info_notifier_timeout=t.info_notifier_timeout}},{key:"updateSqlEditorLastTransactionStatus",value:function e(t){this.sqlServerObject.last_transaction_status=t}}],[{key:"prepareAnalyzeSql",value:function e(t,i){var n={sql:t,explain_plan:i};return n}},{key:"wasConnectionLostToPythonServer",value:function e(t){return i.isUndefined(t)||i.isUndefined(t.data)}},{key:"isSqlCorrect",value:function e(t){return t.data.status}},{key:"extractErrorMessage",value:function e(t){var i=t.errormsg;if(t.responseJSON!==undefined&&t.responseJSON.errormsg!==undefined)i=t.responseJSON.errormsg;return i}},{key:"isQueryFinished",value:function e(t){return t.data.data.status==="Success"}},{key:"isQueryStillRunning",value:function e(t){return t.data.data.status==="Busy"}},{key:"isQueryCancelled",value:function e(t){return t.data.data.status==="Cancel"}},{key:"isConnectionToServerLostWhilePolling",value:function e(t){return t.data.data.status==="NotConnected"}}]);return a}();p.exports={ExecuteQuery:h}}).call(this,m(1))},function(e,t,i){"use strict";var s=r(i(2));var l=r(i(4));var d=r(i(0));var c=r(i(10));var u=r(i(3));var f=r(i(6));var h=r(i(25));var p=r(i(343));var n=i(168);function r(e){return e&&e.__esModule?e:{default:e}}var m=i(208);var o={geturl:function e(t,i){var n=(0,l.default)("sqleditor.get_filter_data",{trans_id:t});if(i){n+="?connect=1"}return n},dialog:function e(r,t){var i=(0,s.default)("Sort/Filter options");d.default.ajax({url:this.geturl(r.transId,t),headers:{"Cache-Control":"no-cache"}}).done(function(e){var a=e.data.result;if(c.default.filterDialog){delete c.default.filterDialog}c.default.dialog("filterDialog",function e(){var o=(0,d.default)("<div class='data_sorting_dialog'></div>");return{main:function e(){this.set("title",(0,s.default)("Sort/Filter options"))},build:function e(){this.elements.content.appendChild(o.get(0));c.default.pgDialogBuild.apply(this)},setup:function e(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,s.default)("Help"),url:(0,l.default)("help.static",{filename:"editgrid.html"})}},{text:(0,s.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,s.default)("OK"),className:"btn btn-primary fa fa-check pg-alertify-button","data-btn-name":"ok"}],options:{title:i,padding:!1,overflow:!1,model:0,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false,modal:false,autoReset:false}}},hooks:{onclose:function e(){if(this.view){this.filterCollectionModel.stopSession();this.view.model.stopSession();this.view.remove({data:true,internal:true,silent:true})}}},prepare:function e(){var t=this;o.html("");this.__internal.buttons[2].element.disabled=true;this.statusBar=(0,d.default)("<div class='pg-prop-status-bar pg-el-xs-12 d-none'>"+'  <div class="error-in-footer"> '+'    <div class="d-flex px-2 py-1"> '+'      <div class="pr-2"> '+'        <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i> '+"      </div> "+'      <div class="alert-text"></div> '+"    </div> "+"  </div> "+"</div>").appendTo(o);this.showFilterProgress=(0,d.default)('<div id="show_filter_progress" class="pg-sp-container sql-editor-busy-fetching d-none">\n                  <div class="pg-sp-content">\n                      <div class="row"><div class="col-12 pg-sp-icon sql-editor-busy-icon"></div></div>\n                      <div class="row"><div class="col-12 pg-sp-text sql-editor-busy-text">'.concat((0,s.default)("Loading data..."),"</div></div>\n                  </div>\n              </div>")).appendTo(o);(0,d.default)(t.showFilterProgress[0]).removeClass("d-none");t.filterCollectionModel=(0,p.default)(a);var i=f.default.generateViewSchema(null,t.filterCollectionModel,"create",null,null,true);var n=this.view=new f.default.Dialog({el:"<div></div>",model:t.filterCollectionModel,schema:i});(0,d.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties");o.append(n.render().$el);n.listenTo(n.model,"pgadmin-session:start",function(){n.listenTo(n.model,"pgadmin-session:invalid",function(e){t.statusBar.removeClass("d-none");(0,d.default)(t.statusBar.find(".alert-text")).html(e);t.__internal.buttons[2].element.disabled=true});n.listenTo(n.model,"pgadmin-session:valid",function(){t.statusBar.addClass("d-none");(0,d.default)(t.statusBar.find(".alert-text")).html("");t.__internal.buttons[2].element.disabled=false})});n.listenTo(n.model,"pgadmin-session:stop",function(){n.stopListening(n.model,"pgadmin-session:invalid");n.stopListening(n.model,"pgadmin-session:valid")});n.model.startNewSession();var r=n.model.get("data_sorting");r.add(a["data_sorting"]);(0,d.default)(t.showFilterProgress[0]).addClass("d-none")},callback:function e(t){var i=this;if(t.button.element.name=="dialog_help"){t.cancel=true;u.default.Browser.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);return}else if(t.button["data-btn-name"]==="ok"){t.cancel=true;var n=this.filterCollectionModel.toJSON();(0,d.default)(i.showFilterProgress[0]).removeClass("d-none");h.default.put((0,l.default)("sqleditor.set_filter_data",{trans_id:r.transId}),n).then(function(e){(0,d.default)(i.showFilterProgress[0]).addClass("d-none");var t=e.data.data;if(t.status){setTimeout(function(){i.close();c.default.success((0,s.default)("Filter updated successfully"));m.executeQuery(r)},10)}else{c.default.alert((0,s.default)("Validation Error"),t.result)}}).catch(function(e){(0,d.default)(i.showFilterProgress[0]).addClass("d-none");r.onExecuteHTTPError(e);setTimeout(function(){c.default.error(e)},10)})}else{i.close()}}}});c.default.filterDialog(i).resizeTo(u.default.Browser.stdW.md,u.default.Browser.stdH.md)}).fail(function(e){(0,n.handleQueryToolAjaxError)(u.default,r,e,"_show_filter",[],true)})}};e.exports=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=r;var o=n(i(2));var a=n(i(1));var s=n(i(3));var l=n(i(12));var d=n(i(6));function n(e){return e&&e.__esModule?e:{default:e}}function r(t){var i={asc:(0,o.default)("ASC"),desc:(0,o.default)("DESC")};var e=s.default.Browser.DataModel.extend({idAttribute:"name",defaults:{name:undefined,order:"asc"},schema:[{id:"name",name:"name",label:(0,o.default)("Column"),cell:"select2",editable:true,cellHeaderClasses:"width_percent_60",headerCell:l.default.Extension.CustomHeaderCell,disabled:false,control:"select2",select2:{allowClear:false},options:function e(){return a.default.map(t.column_list,function(e){return{value:e,label:e}})}},{id:"order",name:"order",label:(0,o.default)("Order"),control:"select2",cell:"select2",cellHeaderClasses:"width_percent_40",headerCell:l.default.Extension.CustomHeaderCell,editable:true,deps:["type"],select2:{allowClear:false},options:function e(){return a.default.map(i,function(e,t){return{value:t,label:e}})}}],validate:function e(){var t=null;this.errorModel.clear();if(a.default.isUndefined(this.get("name"))||a.default.isNull(this.get("name"))||String(this.get("name")).replace(/^\s+|\s+$/g,"")==""){t=(0,o.default)("Please select a column.");this.errorModel.set("name",t);return t}else if(a.default.isUndefined(this.get("order"))||a.default.isNull(this.get("order"))||String(this.get("order")).replace(/^\s+|\s+$/g,"")==""){t=(0,o.default)("Please select the order.");this.errorModel.set("order",t);return t}return null}});var n=s.default.Browser.DataModel.extend({idAttribute:"sql",defaults:{sql:t.sql||null},schema:[{id:"sql",label:(0,o.default)("SQL Filter"),cell:"string",type:"text",mode:["create"],control:d.default.SqlFieldControl.extend({render:function e(){var t=d.default.SqlFieldControl.prototype.render.apply(this,arguments);setTimeout(function(){t.sqlCtrl.focus()},1e3);return t}}),extraClasses:["custom_height_css_class"]},{id:"data_sorting",name:"data_sorting",label:(0,o.default)("Data Sorting"),model:e,editable:true,type:"collection",mode:["create"],control:"unique-col-collection",uniqueCol:["name"],canAdd:true,canEdit:false,canDelete:true,visible:true,version_compatible:true}],validate:function e(){return null}});var r=new n;return r}},function(i,e,n){"use strict";(function(x){var C=e(n(2));var k=n(345);var S=n(89);var b=e(n(353));var d=e(n(0));function e(e){return e&&e.__esModule?e:{default:e}}var t={panel_closed:true,render_geometries:function e(t,i,n,r){var o=this;if(!o.map_component){o.map_component=c()}if(o.panel_closed){var a=window.wcDocker;var s=t.gridView.geometry_viewer=t.gridView.docker.addPanel("geometry_viewer",a.DOCK.STACKED,t.gridView.data_output_panel);(0,d.default)("#geometry_viewer_panel")[0].appendChild(o.map_component.mapContainer.get(0));o.panel_closed=false;s.on(a.EVENT.CLOSED,function(){(0,d.default)("#geometry_viewer_panel").empty();o.map_component.clearMap();o.panel_closed=true});s.on(a.EVENT.RESIZE_ENDED,function(){if(s.isVisible()){o.map_component.resizeMap()}});s.on(a.EVENT.VISIBILITY_CHANGED,function(e){if(e){o.map_component.resizeMap()}else{o.map_component.loseFocus()}})}t.gridView.geometry_viewer.focus();o.map_component.clearMap();var l=u(i,n,r);o.map_component.renderMap(l)},add_header_button:function e(t){t.header={buttons:[{cssClass:"div-view-geometry-column",tooltip:"View all geometries in this column",showOnHover:false,command:"view-geometries",content:'<button class="btn-xs btn-primary"><i class="fa fa-eye" aria-hidden="true"></i></button>'}]}},parse_data:u};function c(){var n={radius:4,weight:3};var e={weight:2};var f={closeButton:false,minWidth:260,maxWidth:300,maxHeight:300};var t=(0,d.default)('<div class="geometry-viewer-container"></div>');var h=b.default.map(t.get(0),{preferCanvas:true}).setZoom(0);h.attributionControl.setPrefix("");var p=b.default.geoJSON([],{style:e,pointToLayer:function e(t,i){return b.default.circleMarker(i,n)}});p.addTo(h);var i={Empty:b.default.tileLayer(""),Street:b.default.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>'}),Topography:b.default.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>,'+' &copy; <a href="http://viewfinderpanoramas.org" target="_blank">SRTM</a>,'+' &copy; <a href="https://opentopomap.org" target="_blank">OpenTopoMap</a>'}),"Gray Style":b.default.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>,'+' &copy; <a href="http://cartodb.com/attributions" target="_blank">CartoDB</a>',subdomains:"abcd",maxZoom:19}),"Light Color":b.default.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>,'+' &copy; <a href="http://cartodb.com/attributions" target="_blank">CartoDB</a>',subdomains:"abcd",maxZoom:19}),"Dark Matter":b.default.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>,'+' &copy; <a href="http://cartodb.com/attributions" target="_blank">CartoDB</a>',subdomains:"abcd",maxZoom:19})};var m=b.default.control.layers(i);var r=i.Street;var o=x.values(i);var g=b.default.control({position:"topright"});g.onAdd=function(){this._div=b.default.DomUtil.create("div","geometry-viewer-info-control");return this._div};g.update=function(e){this._div.innerHTML=e};var v=function e(){if(h.options.crs!==b.default.CRS.EPSG3857){h.options.crs=b.default.CRS.EPSG3857;m.addTo(h);h.addLayer(r);t.addClass("geometry-viewer-container-plain-background");h.setMinZoom(0)}};var _=function e(){if(h.options.crs!==b.default.CRS.Simple){h.options.crs=b.default.CRS.Simple;m.remove();x.each(o,function(e){if(h.hasLayer(e)){r=e;e.remove()}});t.removeClass("geometry-viewer-container-plain-background")}};_();v();return{mapContainer:t,clearMap:function e(){h.closePopup();g.remove();p.clearLayers()},loseFocus:function e(){h.fire("blur")},renderMap:function e(t){var i=t.geoJSONs,n=t.selectedSRID,r=t.getPopupContent,o=t.infoList;var a=false;if(i.length===0){a=true}try{p.addData(i)}catch(e){o.push("An error occurred while rendering data.");a=true}var s=p.getBounds();if(!s.isValid()){a=true}if(o.length>0){if(h.options.crs===b.default.CRS.EPSG3857){m.remove();g.addTo(h);m.addTo(h)}else{g.addTo(h)}var l=y(o);g.update(l)}if(a){_();h.setView([0,0],h.getZoom());return}if(typeof r==="function"){var d=function e(t){t.bindPopup(function(){return r(t.feature.geometry)},f)};p.eachLayer(d)}s=s.pad(.1);var c=Math.max(s.getNorth()-s.getSouth(),s.getEast()-s.getWest());if(n===4326){v()}else{_();if(c>=180){var u=Math.floor(Math.log2(360/c))-2;h.setMinZoom(u)}else{h.setMinZoom(0)}}if(c>0){h.fitBounds(s)}else{h.setView(s.getCenter(),h.getZoom())}},resizeMap:function e(){setTimeout(function(){h.invalidateSize()},10)}}}function u(e,r,o){var a=20*1024*1024;var s=1e5;var l=r[o].field;var d=[],c=[],u=[],t=[],f=new Map,i=false,h=0,p=false,m=false;if(e.length===0){t.push("Empty row.");return{geoJSONs:[],selectedSRID:0,getPopupContent:undefined,infoList:t}}x.every(e,function(t){try{var e=t[l];var i=S.Buffer.from(e,"hex");var n=k.Geometry.parse(i);if(n.hasZ){d.push(n)}else{h+=i.byteLength;if(h>a){p=true;return false}if(c.length>=s){m=true;return false}if(!n.srid){n.srid=0}c.push(n);f.set(n,t)}}catch(e){u.push(t)}return true});if(p||m){t.push(c.length+" of "+e.length+" geometries rendered.")}if(d.length>0){t.push((0,C.default)("3D geometries not rendered."))}if(u.length>0){t.push((0,C.default)("Unsupported geometries not rendered."))}if(c.length===0){return{geoJSONs:[],selectedSRID:0,getPopupContent:undefined,infoList:t}}var n=x.groupBy(c,"srid");var g=x.pairs(n);if(g.length>1){i=true}var v=x.max(g,function(e){return e[1].length});var _=parseInt(v[0]);var b=v[1];var y=x.map(b,function(e){return e.toGeoJSON()});var w;if(r.length>=3){w=function e(t){var i=b[y.indexOf(t)];var n=f.get(i);return T(n,r,o)}}if(i){t.push((0,C.default)("Geometries with non-SRID")+_+" not rendered.")}return{geoJSONs:y,selectedSRID:_,getPopupContent:w,infoList:t}}function T(e,t,i){var n='<table class="table table-bordered table-striped view-geometry-property-table"><tbody>';for(var r=1;r<t.length;r++){if(r!==i){var o=t[r];n+="<tr><th>"+o.display_name+"</th>";var a=e[o.field];if(x.isUndefined(a)&&o.has_default_val){n+='<td class="td-disabled">[default]</td>'}else if(x.isUndefined(a)&&o.not_null||x.isUndefined(a)||a===null){n+='<td class="td-disabled">[null]</td>'}else{n+="<td>"+a+"</td>"}n+="</tr>"}}n+="</tbody></table>";return n}function y(e){var t=e.join("<br>");return t}i.exports=t}).call(this,n(1))},function(e,t,i){t.Types=i(31);t.Geometry=i(37);t.Point=i(38);t.LineString=i(169);t.Polygon=i(170);t.MultiPoint=i(210);t.MultiLineString=i(211);t.MultiPolygon=i(212);t.GeometryCollection=i(213)},function(e,t,i){"use strict";t.byteLength=a;t.toByteArray=s;t.fromByteArray=m;var l=[];var d=[];var c=typeof Uint8Array!=="undefined"?Uint8Array:Array;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var r=0,o=n.length;r<o;++r){l[r]=n[r];d[n.charCodeAt(r)]=r}d["-".charCodeAt(0)]=62;d["_".charCodeAt(0)]=63;function u(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var i=e.indexOf("=");if(i===-1)i=t;var n=i===t?0:4-i%4;return[i,n]}function a(e){var t=u(e);var i=t[0];var n=t[1];return(i+n)*3/4-n}function f(e,t,i){return(t+i)*3/4-i}function s(e){var t;var i=u(e);var n=i[0];var r=i[1];var o=new c(f(e,n,r));var a=0;var s=r>0?n-4:n;for(var l=0;l<s;l+=4){t=d[e.charCodeAt(l)]<<18|d[e.charCodeAt(l+1)]<<12|d[e.charCodeAt(l+2)]<<6|d[e.charCodeAt(l+3)];o[a++]=t>>16&255;o[a++]=t>>8&255;o[a++]=t&255}if(r===2){t=d[e.charCodeAt(l)]<<2|d[e.charCodeAt(l+1)]>>4;o[a++]=t&255}if(r===1){t=d[e.charCodeAt(l)]<<10|d[e.charCodeAt(l+1)]<<4|d[e.charCodeAt(l+2)]>>2;o[a++]=t>>8&255;o[a++]=t&255}return o}function h(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[e&63]}function p(e,t,i){var n;var r=[];for(var o=t;o<i;o+=3){n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255);r.push(h(n))}return r.join("")}function m(e){var t;var i=e.length;var n=i%3;var r=[];var o=16383;for(var a=0,s=i-n;a<s;a+=o){r.push(p(e,a,a+o>s?s:a+o))}if(n===1){t=e[i-1];r.push(l[t>>2]+l[t<<4&63]+"==")}else if(n===2){t=(e[i-2]<<8)+e[i-1];r.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")}return r.join("")}},function(e,t){t.read=function(e,t,i,n,r){var o,a;var s=r*8-n-1;var l=(1<<s)-1;var d=l>>1;var c=-7;var u=i?r-1:0;var f=i?-1:1;var h=e[t+u];u+=f;o=h&(1<<-c)-1;h>>=-c;c+=s;for(;c>0;o=o*256+e[t+u],u+=f,c-=8){}a=o&(1<<-c)-1;o>>=-c;c+=n;for(;c>0;a=a*256+e[t+u],u+=f,c-=8){}if(o===0){o=1-d}else if(o===l){return a?NaN:(h?-1:1)*Infinity}else{a=a+Math.pow(2,n);o=o-d}return(h?-1:1)*a*Math.pow(2,o-n)};t.write=function(e,t,i,n,r,o){var a,s,l;var d=o*8-r-1;var c=(1<<d)-1;var u=c>>1;var f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0;var h=n?0:o-1;var p=n?1:-1;var m=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;a=c}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-a))<1){a--;l*=2}if(a+u>=1){t+=f/l}else{t+=f*Math.pow(2,1-u)}if(t*l>=2){a++;l/=2}if(a+u>=c){s=0;a=c}else if(a+u>=1){s=(t*l-1)*Math.pow(2,r);a=a+u}else{s=t*Math.pow(2,u-1)*Math.pow(2,r);a=0}}for(;r>=8;e[i+h]=s&255,h+=p,s/=256,r-=8){}a=a<<r|s;d+=r;for(;d>0;e[i+h]=a&255,h+=p,a/=256,d-=8){}e[i+h-p]|=m*128}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return i.call(e)=="[object Array]"}},function(e,t){e.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},function(e,t){if(typeof Object.create==="function"){e.exports=function e(t,i){t.super_=i;t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{e.exports=function e(t,i){t.super_=i;var n=function(){};n.prototype=i.prototype;t.prototype=new n;t.prototype.constructor=t}}},function(n,e,t){(function(e){n.exports=t;function t(e,t){this.buffer=e;this.position=0;this.isBigEndian=t||false}function i(t,i,n){return function(){var e;if(this.isBigEndian)e=i.call(this.buffer,this.position);else e=t.call(this.buffer,this.position);this.position+=n;return e}}t.prototype.readUInt8=i(e.prototype.readUInt8,e.prototype.readUInt8,1);t.prototype.readUInt16=i(e.prototype.readUInt16LE,e.prototype.readUInt16BE,2);t.prototype.readUInt32=i(e.prototype.readUInt32LE,e.prototype.readUInt32BE,4);t.prototype.readInt8=i(e.prototype.readInt8,e.prototype.readInt8,1);t.prototype.readInt16=i(e.prototype.readInt16LE,e.prototype.readInt16BE,2);t.prototype.readInt32=i(e.prototype.readInt32LE,e.prototype.readInt32BE,4);t.prototype.readFloat=i(e.prototype.readFloatLE,e.prototype.readFloatBE,4);t.prototype.readDouble=i(e.prototype.readDoubleLE,e.prototype.readDoubleBE,8);t.prototype.readVarInt=function(){var e,t=0,i=0;do{e=this.buffer[this.position+i];t+=(e&127)<<7*i;i++}while(e>=128);this.position+=i;return t}}).call(this,t(89).Buffer)},function(e,t,i){e.exports=o;var n=i(31);var r=i(38);function o(e){this.value=e;this.position=0}o.prototype.match=function(e){this.skipWhitespaces();for(var t=0;t<e.length;t++){if(this.value.substring(this.position).indexOf(e[t])===0){this.position+=e[t].length;return e[t]}}return null};o.prototype.matchRegex=function(e){this.skipWhitespaces();for(var t=0;t<e.length;t++){var i=this.value.substring(this.position).match(e[t]);if(i){this.position+=i[0].length;return i}}return null};o.prototype.isMatch=function(e){this.skipWhitespaces();for(var t=0;t<e.length;t++){if(this.value.substring(this.position).indexOf(e[t])===0){this.position+=e[t].length;return true}}return false};o.prototype.matchType=function(){var e=this.match([n.wkt.Point,n.wkt.LineString,n.wkt.Polygon,n.wkt.MultiPoint,n.wkt.MultiLineString,n.wkt.MultiPolygon,n.wkt.GeometryCollection]);if(!e)throw new Error("Expected geometry type");return e};o.prototype.matchDimension=function(){var e=this.match(["ZM","Z","M"]);switch(e){case"ZM":return{hasZ:true,hasM:true};case"Z":return{hasZ:true,hasM:false};case"M":return{hasZ:false,hasM:true};default:return{hasZ:false,hasM:false}}};o.prototype.expectGroupStart=function(){if(!this.isMatch(["("]))throw new Error("Expected group start")};o.prototype.expectGroupEnd=function(){if(!this.isMatch([")"]))throw new Error("Expected group end")};o.prototype.matchCoordinate=function(e){var t;if(e.hasZ&&e.hasM)t=this.matchRegex([/^(\S*)\s+(\S*)\s+(\S*)\s+([^\s,)]*)/]);else if(e.hasZ||e.hasM)t=this.matchRegex([/^(\S*)\s+(\S*)\s+([^\s,)]*)/]);else t=this.matchRegex([/^(\S*)\s+([^\s,)]*)/]);if(!t)throw new Error("Expected coordinates");if(e.hasZ&&e.hasM)return new r(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4]));else if(e.hasZ)return new r(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));else if(e.hasM)return new r(parseFloat(t[1]),parseFloat(t[2]),undefined,parseFloat(t[3]));else return new r(parseFloat(t[1]),parseFloat(t[2]))};o.prototype.matchCoordinates=function(e){var t=[];do{var i=this.isMatch(["("]);t.push(this.matchCoordinate(e));if(i)this.expectGroupEnd()}while(this.isMatch([","]));return t};o.prototype.skipWhitespaces=function(){while(this.position<this.value.length&&this.value[this.position]===" ")this.position++}},function(e,i,t){
/* @preserve
 * Leaflet 1.5.1+build.2e3e0ff, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2018 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
(function(e,t){true?t(i):undefined})(this,function(e){"use strict";var t="1.5.1+build.2e3e0ffb";var i=Object.freeze;Object.freeze=function(e){return e};function l(e){var t,i,n,r;for(i=1,n=arguments.length;i<n;i++){r=arguments[i];for(t in r){e[t]=r[t]}}return e}var o=Object.create||function(){function t(){}return function(e){t.prototype=e;return new t}}();function s(e,t){var i=Array.prototype.slice;if(e.bind){return e.bind.apply(e,i.call(arguments,1))}var n=i.call(arguments,2);return function(){return e.apply(t,n.length?n.concat(i.call(arguments)):arguments)}}var n=0;function d(e){e._leaflet_id=e._leaflet_id||++n;return e._leaflet_id}function r(e,t,i){var n,r,o,a;a=function(){n=false;if(r){o.apply(i,r);r=false}};o=function(){if(n){r=arguments}else{e.apply(i,arguments);setTimeout(a,t);n=true}};return o}function a(e,t,i){var n=t[1],r=t[0],o=n-r;return e===n&&i?e:((e-r)%o+o)%o+r}function c(){return false}function u(e,t){t=t===undefined?6:t;return+(Math.round(e+("e+"+t))+("e-"+t))}function f(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return f(e).split(/\s+/)}function p(e,t){if(!e.hasOwnProperty("options")){e.options=e.options?o(e.options):{}}for(var i in t){e.options[i]=t[i]}return e.options}function m(e,t,i){var n=[];for(var r in e){n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(e[r]))}return(!t||t.indexOf("?")===-1?"?":"&")+n.join("&")}var g=/\{ *([\w_-]+) *\}/g;function v(e,n){return e.replace(g,function(e,t){var i=n[t];if(i===undefined){throw new Error("No value provided for variable "+e)}else if(typeof i==="function"){i=i(n)}return i})}var _=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function b(e,t){for(var i=0;i<e.length;i++){if(e[i]===t){return i}}return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function C(e){var t=+new Date,i=Math.max(0,16-(t-x));x=t+i;return window.setTimeout(e,i)}var k=window.requestAnimationFrame||w("RequestAnimationFrame")||C;var S=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function T(e,t,i){if(i&&k===C){e.call(t)}else{return k.call(window,s(e,t))}}function N(e){if(e){S.call(window,e)}}var D=(Object.freeze||Object)({freeze:i,extend:l,create:o,bind:s,lastId:n,stamp:d,throttle:r,wrapNum:a,falseFn:c,formatNum:u,trim:f,splitWords:h,setOptions:p,getParamString:m,template:v,isArray:_,indexOf:b,emptyImageUrl:y,requestFn:k,cancelFn:S,requestAnimFrame:T,cancelAnimFrame:N});function P(){}P.extend=function(e){var t=function(){if(this.initialize){this.initialize.apply(this,arguments)}this.callInitHooks()};var i=t.__super__=this.prototype;var n=o(i);n.constructor=t;t.prototype=n;for(var r in this){if(this.hasOwnProperty(r)&&r!=="prototype"&&r!=="__super__"){t[r]=this[r]}}if(e.statics){l(t,e.statics);delete e.statics}if(e.includes){E(e.includes);l.apply(null,[n].concat(e.includes));delete e.includes}if(n.options){e.options=l(o(n.options),e.options)}l(n,e);n._initHooks=[];n.callInitHooks=function(){if(this._initHooksCalled){return}if(i.callInitHooks){i.callInitHooks.call(this)}this._initHooksCalled=true;for(var e=0,t=n._initHooks.length;e<t;e++){n._initHooks[e].call(this)}};return t};P.include=function(e){l(this.prototype,e);return this};P.mergeOptions=function(e){l(this.prototype.options,e);return this};P.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1);var i=typeof e==="function"?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i);return this};function E(e){if(typeof L==="undefined"||!L||!L.Mixin){return}e=_(e)?e:[e];for(var t=0;t<e.length;t++){if(e[t]===L.Mixin.Events){console.warn("Deprecated include of L.Mixin.Events: "+"this property will be removed in future releases, "+"please inherit from L.Evented instead.",(new Error).stack)}}}var M={on:function(e,t,i){if(typeof e==="object"){for(var n in e){this._on(n,e[n],t)}}else{e=h(e);for(var r=0,o=e.length;r<o;r++){this._on(e[r],t,i)}}return this},off:function(e,t,i){if(!e){delete this._events}else if(typeof e==="object"){for(var n in e){this._off(n,e[n],t)}}else{e=h(e);for(var r=0,o=e.length;r<o;r++){this._off(e[r],t,i)}}return this},_on:function(e,t,i){this._events=this._events||{};var n=this._events[e];if(!n){n=[];this._events[e]=n}if(i===this){i=undefined}var r={fn:t,ctx:i},o=n;for(var a=0,s=o.length;a<s;a++){if(o[a].fn===t&&o[a].ctx===i){return}}o.push(r)},_off:function(e,t,i){var n,r,o;if(!this._events){return}n=this._events[e];if(!n){return}if(!t){for(r=0,o=n.length;r<o;r++){n[r].fn=c}delete this._events[e];return}if(i===this){i=undefined}if(n){for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx!==i){continue}if(a.fn===t){a.fn=c;if(this._firingCount){this._events[e]=n=n.slice()}n.splice(r,1);return}}}},fire:function(e,t,i){if(!this.listens(e,i)){return this}var n=l({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var r=this._events[e];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o];s.fn.call(s.ctx||this,n)}this._firingCount--}}if(i){this._propagateEvent(n)}return this},listens:function(e,t){var i=this._events&&this._events[e];if(i&&i.length){return true}if(t){for(var n in this._eventParents){if(this._eventParents[n].listens(e,t)){return true}}}return false},once:function(e,t,i){if(typeof e==="object"){for(var n in e){this.once(n,e[n],t)}return this}var r=s(function(){this.off(e,t,i).off(e,r,i)},this);return this.on(e,t,i).on(e,r,i)},addEventParent:function(e){this._eventParents=this._eventParents||{};this._eventParents[d(e)]=e;return this},removeEventParent:function(e){if(this._eventParents){delete this._eventParents[d(e)]}return this},_propagateEvent:function(e){for(var t in this._eventParents){this._eventParents[t].fire(e.type,l({layer:e.target,propagatedFrom:e.target},e),true)}}};M.addEventListener=M.on;M.removeEventListener=M.clearAllEventListeners=M.off;M.addOneTimeEventListener=M.once;M.fireEvent=M.fire;M.hasEventListeners=M.listens;var I=P.extend(M);function O(e,t,i){this.x=i?Math.round(e):e;this.y=i?Math.round(t):t}var A=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(e){return this.clone()._add(R(e))},_add:function(e){this.x+=e.x;this.y+=e.y;return this},subtract:function(e){return this.clone()._subtract(R(e))},_subtract:function(e){this.x-=e.x;this.y-=e.y;return this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){this.x/=e;this.y/=e;return this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){this.x*=e;this.y*=e;return this},scaleBy:function(e){return new O(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new O(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},trunc:function(){return this.clone()._trunc()},_trunc:function(){this.x=A(this.x);this.y=A(this.y);return this},distanceTo:function(e){e=R(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){e=R(e);return e.x===this.x&&e.y===this.y},contains:function(e){e=R(e);return Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}};function R(e,t,i){if(e instanceof O){return e}if(_(e)){return new O(e[0],e[1])}if(e===undefined||e===null){return e}if(typeof e==="object"&&"x"in e&&"y"in e){return new O(e.x,e.y)}return new O(e,t,i)}function z(e,t){if(!e){return}var i=t?[e,t]:e;for(var n=0,r=i.length;n<r;n++){this.extend(i[n])}}z.prototype={extend:function(e){e=R(e);if(!this.min&&!this.max){this.min=e.clone();this.max=e.clone()}else{this.min.x=Math.min(e.x,this.min.x);this.max.x=Math.max(e.x,this.max.x);this.min.y=Math.min(e.y,this.min.y);this.max.y=Math.max(e.y,this.max.y)}return this},getCenter:function(e){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;if(typeof e[0]==="number"||e instanceof O){e=R(e)}else{e=j(e)}if(e instanceof z){t=e.min;i=e.max}else{t=i=e}return t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,i=this.max,n=e.min,r=e.max,o=r.x>=t.x&&n.x<=i.x,a=r.y>=t.y&&n.y<=i.y;return o&&a},overlaps:function(e){e=j(e);var t=this.min,i=this.max,n=e.min,r=e.max,o=r.x>t.x&&n.x<i.x,a=r.y>t.y&&n.y<i.y;return o&&a},isValid:function(){return!!(this.min&&this.max)}};function j(e,t){if(!e||e instanceof z){return e}return new z(e,t)}function B(e,t){if(!e){return}var i=t?[e,t]:e;for(var n=0,r=i.length;n<r;n++){this.extend(i[n])}}B.prototype={extend:function(e){var t=this._southWest,i=this._northEast,n,r;if(e instanceof F){n=e;r=e}else if(e instanceof B){n=e._southWest;r=e._northEast;if(!n||!r){return this}}else{return e?this.extend(U(e)||q(e)):this}if(!t&&!i){this._southWest=new F(n.lat,n.lng);this._northEast=new F(r.lat,r.lng)}else{t.lat=Math.min(n.lat,t.lat);t.lng=Math.min(n.lng,t.lng);i.lat=Math.max(r.lat,i.lat);i.lng=Math.max(r.lng,i.lng)}return this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new B(new F(t.lat-n,t.lng-r),new F(i.lat+n,i.lng+r))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){if(typeof e[0]==="number"||e instanceof F||"lat"in e){e=U(e)}else{e=q(e)}var t=this._southWest,i=this._northEast,n,r;if(e instanceof B){n=e.getSouthWest();r=e.getNorthEast()}else{n=r=e}return n.lat>=t.lat&&r.lat<=i.lat&&n.lng>=t.lng&&r.lng<=i.lng},intersects:function(e){e=q(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),o=r.lat>=t.lat&&n.lat<=i.lat,a=r.lng>=t.lng&&n.lng<=i.lng;return o&&a},overlaps:function(e){e=q(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),o=r.lat>t.lat&&n.lat<i.lat,a=r.lng>t.lng&&n.lng<i.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){if(!e){return false}e=q(e);return this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)},isValid:function(){return!!(this._southWest&&this._northEast)}};function q(e,t){if(e instanceof B){return e}return new B(e,t)}function F(e,t,i){if(isNaN(e)||isNaN(t)){throw new Error("Invalid LatLng object: ("+e+", "+t+")")}this.lat=+e;this.lng=+t;if(i!==undefined){this.alt=+i}}F.prototype={equals:function(e,t){if(!e){return false}e=U(e);var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return i<=(t===undefined?1e-9:t)},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return W.distance(this,U(e))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return q([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new F(this.lat,this.lng,this.alt)}};function U(e,t,i){if(e instanceof F){return e}if(_(e)&&typeof e[0]!=="object"){if(e.length===3){return new F(e[0],e[1],e[2])}if(e.length===2){return new F(e[0],e[1])}return null}if(e===undefined||e===null){return e}if(typeof e==="object"&&"lat"in e){return new F(e.lat,"lng"in e?e.lng:e.lon,e.alt)}if(t===undefined){return null}return new F(e,t,i)}var H={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite){return null}var t=this.projection.bounds,i=this.scale(e),n=this.transformation.transform(t.min,i),r=this.transformation.transform(t.max,i);return new z(n,r)},infinite:false,wrapLatLng:function(e){var t=this.wrapLng?a(e.lng,this.wrapLng,true):e.lng,i=this.wrapLat?a(e.lat,this.wrapLat,true):e.lat,n=e.alt;return new F(i,t,n)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,r=t.lng-i.lng;if(n===0&&r===0){return e}var o=e.getSouthWest(),a=e.getNorthEast(),s=new F(o.lat-n,o.lng-r),l=new F(a.lat-n,a.lng-r);return new B(s,l)}};var W=l({},H,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,r=t.lat*i,o=Math.sin((t.lat-e.lat)*i/2),a=Math.sin((t.lng-e.lng)*i/2),s=o*o+Math.cos(n)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}});var $=6378137;var V={R:$,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=Math.sin(n*t);return new O(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new F((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=$*Math.PI;return new z([-e,-e],[e,e])}()};function G(e,t,i,n){if(_(e)){this._a=e[0];this._b=e[1];this._c=e[2];this._d=e[3];return}this._a=e;this._b=t;this._c=i;this._d=n}G.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){t=t||1;e.x=t*(this._a*e.x+this._b);e.y=t*(this._c*e.y+this._d);return e},untransform:function(e,t){t=t||1;return new O((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function Z(e,t,i,n){return new G(e,t,i,n)}var K=l({},W,{code:"EPSG:3857",projection:V,transformation:function(){var e=.5/(Math.PI*V.R);return Z(e,.5,-e,.5)}()});var Y=l({},K,{code:"EPSG:900913"});function J(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Q(e,t){var i="",n,r,o,a,s,l;for(n=0,o=e.length;n<o;n++){s=e[n];for(r=0,a=s.length;r<a;r++){l=s[r];i+=(r?"L":"M")+l.x+" "+l.y}i+=t?Pe?"z":"x":""}return i||"M0 0"}var X=document.documentElement.style;var ee="ActiveXObject"in window;var te=ee&&!document.addEventListener;var ie="msLaunchUri"in navigator&&!("documentMode"in document);var ne=Me("webkit");var re=Me("android");var oe=Me("android 2")||Me("android 3");var ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10);var se=re&&Me("Google")&&ae<537&&!("AudioNode"in window);var le=!!window.opera;var de=Me("chrome");var ce=Me("gecko")&&!ne&&!le&&!ee;var ue=!de&&Me("safari");var fe=Me("phantom");var he="OTransition"in X;var pe=navigator.platform.indexOf("Win")===0;var me=ee&&"transition"in X;var ge="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oe;var ve="MozPerspective"in X;var _e=!window.L_DISABLE_3D&&(me||ge||ve)&&!he&&!fe;var be=typeof orientation!=="undefined"||Me("mobile");var ye=be&&ne;var we=be&&ge;var xe=!window.PointerEvent&&window.MSPointerEvent;var Ce=!!(window.PointerEvent||xe);var ke=!window.L_NO_TOUCH&&(Ce||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);var Se=be&&le;var Te=be&&ce;var Ne=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1;var De=function(){return!!document.createElement("canvas").getContext}();var Pe=!!(document.createElementNS&&J("svg").createSVGRect);var Ee=!Pe&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;t.style.behavior="url(#default#VML)";return t&&typeof t.adj==="object"}catch(e){return false}}();function Me(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ie=(Object.freeze||Object)({ie:ee,ielt9:te,edge:ie,webkit:ne,android:re,android23:oe,androidStock:se,opera:le,chrome:de,gecko:ce,safari:ue,phantom:fe,opera12:he,win:pe,ie3d:me,webkit3d:ge,gecko3d:ve,any3d:_e,mobile:be,mobileWebkit:ye,mobileWebkit3d:we,msPointer:xe,pointer:Ce,touch:ke,mobileOpera:Se,mobileGecko:Te,retina:Ne,canvas:De,svg:Pe,vml:Ee});var Oe=xe?"MSPointerDown":"pointerdown";var Ae=xe?"MSPointerMove":"pointermove";var Re=xe?"MSPointerUp":"pointerup";var Le=xe?"MSPointerCancel":"pointercancel";var ze=["INPUT","SELECT","OPTION"];var je={};var Be=false;var qe=0;function Fe(e,t,i,n){if(t==="touchstart"){He(e,i,n)}else if(t==="touchmove"){Ze(e,i,n)}else if(t==="touchend"){Ke(e,i,n)}return this}function Ue(e,t,i){var n=e["_leaflet_"+t+i];if(t==="touchstart"){e.removeEventListener(Oe,n,false)}else if(t==="touchmove"){e.removeEventListener(Ae,n,false)}else if(t==="touchend"){e.removeEventListener(Re,n,false);e.removeEventListener(Le,n,false)}return this}function He(e,t,i){var n=s(function(e){if(e.pointerType!=="mouse"&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(ze.indexOf(e.target.tagName)<0){Ht(e)}else{return}}Ge(e,t)});e["_leaflet_touchstart"+i]=n;e.addEventListener(Oe,n,false);if(!Be){document.documentElement.addEventListener(Oe,We,true);document.documentElement.addEventListener(Ae,$e,true);document.documentElement.addEventListener(Re,Ve,true);document.documentElement.addEventListener(Le,Ve,true);Be=true}}function We(e){je[e.pointerId]=e;qe++}function $e(e){if(je[e.pointerId]){je[e.pointerId]=e}}function Ve(e){delete je[e.pointerId];qe--}function Ge(e,t){e.touches=[];for(var i in je){e.touches.push(je[i])}e.changedTouches=[e];t(e)}function Ze(e,t,i){var n=function(e){if((e.pointerType===e.MSPOINTER_TYPE_MOUSE||e.pointerType==="mouse")&&e.buttons===0){return}Ge(e,t)};e["_leaflet_touchmove"+i]=n;e.addEventListener(Ae,n,false)}function Ke(e,t,i){var n=function(e){Ge(e,t)};e["_leaflet_touchend"+i]=n;e.addEventListener(Re,n,false);e.addEventListener(Le,n,false)}var Ye=xe?"MSPointerDown":Ce?"pointerdown":"touchstart";var Je=xe?"MSPointerUp":Ce?"pointerup":"touchend";var Qe="_leaflet_";function Xe(e,r,t){var o,a,s=false,l=250;function i(e){var t;if(Ce){if(!ie||e.pointerType==="mouse"){return}t=qe}else{t=e.touches.length}if(t>1){return}var i=Date.now(),n=i-(o||i);a=e.touches?e.touches[0]:e;s=n>0&&n<=l;o=i}function n(e){if(s&&!a.cancelBubble){if(Ce){if(!ie||e.pointerType==="mouse"){return}var t={},i,n;for(n in a){i=a[n];t[n]=i&&i.bind?i.bind(a):i}a=t}a.type="dblclick";a.button=0;r(a);o=null}}e[Qe+Ye+t]=i;e[Qe+Je+t]=n;e[Qe+"dblclick"+t]=r;e.addEventListener(Ye,i,false);e.addEventListener(Je,n,false);e.addEventListener("dblclick",r,false);return this}function et(e,t){var i=e[Qe+Ye+t],n=e[Qe+Je+t],r=e[Qe+"dblclick"+t];e.removeEventListener(Ye,i,false);e.removeEventListener(Je,n,false);if(!ie){e.removeEventListener("dblclick",r,false)}return this}var tt=_t(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);var it=_t(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);var nt=it==="webkitTransition"||it==="OTransition"?it+"End":"transitionend";function rt(e){return typeof e==="string"?document.getElementById(e):e}function ot(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||i==="auto")&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);i=n?n[t]:null}return i==="auto"?null:i}function at(e,t,i){var n=document.createElement(e);n.className=t||"";if(i){i.appendChild(n)}return n}function st(e){var t=e.parentNode;if(t){t.removeChild(e)}}function lt(e){while(e.firstChild){e.removeChild(e.firstChild)}}function dt(e){var t=e.parentNode;if(t&&t.lastChild!==e){t.appendChild(e)}}function ct(e){var t=e.parentNode;if(t&&t.firstChild!==e){t.insertBefore(e,t.firstChild)}}function ut(e,t){if(e.classList!==undefined){return e.classList.contains(t)}var i=mt(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function ft(e,t){if(e.classList!==undefined){var i=h(t);for(var n=0,r=i.length;n<r;n++){e.classList.add(i[n])}}else if(!ut(e,t)){var o=mt(e);pt(e,(o?o+" ":"")+t)}}function ht(e,t){if(e.classList!==undefined){e.classList.remove(t)}else{pt(e,f((" "+mt(e)+" ").replace(" "+t+" "," ")))}}function pt(e,t){if(e.className.baseVal===undefined){e.className=t}else{e.className.baseVal=t}}function mt(e){if(e.correspondingElement){e=e.correspondingElement}return e.className.baseVal===undefined?e.className:e.className.baseVal}function gt(e,t){if("opacity"in e.style){e.style.opacity=t}else if("filter"in e.style){vt(e,t)}}function vt(e,t){var i=false,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(e){if(t===1){return}}t=Math.round(t*100);if(i){i.Enabled=t!==100;i.Opacity=t}else{e.style.filter+=" progid:"+n+"(opacity="+t+")"}}function _t(e){var t=document.documentElement.style;for(var i=0;i<e.length;i++){if(e[i]in t){return e[i]}}return false}function bt(e,t,i){var n=t||new O(0,0);e.style[tt]=(me?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function yt(e,t){e._leaflet_pos=t;if(_e){bt(e,t)}else{e.style.left=t.x+"px";e.style.top=t.y+"px"}}function wt(e){return e._leaflet_pos||new O(0,0)}var xt;var Ct;var kt;if("onselectstart"in document){xt=function(){Rt(window,"selectstart",Ht)};Ct=function(){zt(window,"selectstart",Ht)}}else{var St=_t(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xt=function(){if(St){var e=document.documentElement.style;kt=e[St];e[St]="none"}};Ct=function(){if(St){document.documentElement.style[St]=kt;kt=undefined}}}function Tt(){Rt(window,"dragstart",Ht)}function Nt(){zt(window,"dragstart",Ht)}var Dt;var Pt;function Et(e){while(e.tabIndex===-1){e=e.parentNode}if(!e.style){return}Mt();Dt=e;Pt=e.style.outline;e.style.outline="none";Rt(window,"keydown",Mt)}function Mt(){if(!Dt){return}Dt.style.outline=Pt;Dt=undefined;Pt=undefined;zt(window,"keydown",Mt)}function It(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Ot(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var At=(Object.freeze||Object)({TRANSFORM:tt,TRANSITION:it,TRANSITION_END:nt,get:rt,getStyle:ot,create:at,remove:st,empty:lt,toFront:dt,toBack:ct,hasClass:ut,addClass:ft,removeClass:ht,setClass:pt,getClass:mt,setOpacity:gt,testProp:_t,setTransform:bt,setPosition:yt,getPosition:wt,disableTextSelection:xt,enableTextSelection:Ct,disableImageDrag:Tt,enableImageDrag:Nt,preventOutline:Et,restoreOutline:Mt,getSizedParentNode:It,getScale:Ot});function Rt(e,t,i,n){if(typeof t==="object"){for(var r in t){jt(e,r,t[r],i)}}else{t=h(t);for(var o=0,a=t.length;o<a;o++){jt(e,t[o],i,n)}}return this}var Lt="_leaflet_events";function zt(e,t,i,n){if(typeof t==="object"){for(var r in t){Bt(e,r,t[r],i)}}else if(t){t=h(t);for(var o=0,a=t.length;o<a;o++){Bt(e,t[o],i,n)}}else{for(var s in e[Lt]){Bt(e,s,e[Lt][s])}delete e[Lt]}return this}function jt(t,e,i,n){var r=e+d(i)+(n?"_"+d(n):"");if(t[Lt]&&t[Lt][r]){return this}var o=function(e){return i.call(n||t,e||window.event)};var a=o;if(Ce&&e.indexOf("touch")===0){Fe(t,e,o,r)}else if(ke&&e==="dblclick"&&Xe&&!(Ce&&de)){Xe(t,o,r)}else if("addEventListener"in t){if(e==="mousewheel"){t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,false)}else if(e==="mouseenter"||e==="mouseleave"){o=function(e){e=e||window.event;if(Jt(t,e)){a(e)}};t.addEventListener(e==="mouseenter"?"mouseover":"mouseout",o,false)}else{if(e==="click"&&re){o=function(e){Xt(e,a)}}t.addEventListener(e,o,false)}}else if("attachEvent"in t){t.attachEvent("on"+e,o)}t[Lt]=t[Lt]||{};t[Lt][r]=o}function Bt(e,t,i,n){var r=t+d(i)+(n?"_"+d(n):""),o=e[Lt]&&e[Lt][r];if(!o){return this}if(Ce&&t.indexOf("touch")===0){Ue(e,t,r)}else if(ke&&t==="dblclick"&&et&&!(Ce&&de)){et(e,r)}else if("removeEventListener"in e){if(t==="mousewheel"){e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,false)}else{e.removeEventListener(t==="mouseenter"?"mouseover":t==="mouseleave"?"mouseout":t,o,false)}}else if("detachEvent"in e){e.detachEvent("on"+t,o)}e[Lt][r]=null}function qt(e){if(e.stopPropagation){e.stopPropagation()}else if(e.originalEvent){e.originalEvent._stopped=true}else{e.cancelBubble=true}Yt(e);return this}function Ft(e){jt(e,"mousewheel",qt);return this}function Ut(e){Rt(e,"mousedown touchstart dblclick",qt);jt(e,"click",Kt);return this}function Ht(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}return this}function Wt(e){Ht(e);qt(e);return this}function $t(e,t){if(!t){return new O(e.clientX,e.clientY)}var i=Ot(t),n=i.boundingClientRect;return new O((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)}var Vt=pe&&de?2*window.devicePixelRatio:ce?window.devicePixelRatio:1;function Gt(e){return ie?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Vt:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}var Zt={};function Kt(e){Zt[e.type]=true}function Yt(e){var t=Zt[e.type];Zt[e.type]=false;return t}function Jt(e,t){var i=t.relatedTarget;if(!i){return true}try{while(i&&i!==e){i=i.parentNode}}catch(e){return false}return i!==e}var Qt;function Xt(e,t){var i=e.timeStamp||e.originalEvent&&e.originalEvent.timeStamp,n=Qt&&i-Qt;if(n&&n>100&&n<500||e.target._simulatedClick&&!e._simulated){Wt(e);return}Qt=i;t(e)}var ei=(Object.freeze||Object)({on:Rt,off:zt,stopPropagation:qt,disableScrollPropagation:Ft,disableClickPropagation:Ut,preventDefault:Ht,stop:Wt,getMousePosition:$t,getWheelDelta:Gt,fakeStop:Kt,skipped:Yt,isExternalTarget:Jt,addListener:Rt,removeListener:zt});var ti=I.extend({run:function(e,t,i,n){this.stop();this._el=e;this._inProgress=true;this._duration=i||.25;this._easeOutPower=1/Math.max(n||.5,.2);this._startPos=wt(e);this._offset=t.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step(true);this._complete()},_animate:function(){this._animId=T(this._animate,this);this._step()},_step:function(e){var t=+new Date-this._startTime,i=this._duration*1e3;if(t<i){this._runFrame(this._easeOut(t/i),e)}else{this._runFrame(1);this._complete()}},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));if(t){i._round()}yt(this._el,i);this.fire("step")},_complete:function(){N(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}});var ii=I.extend({options:{crs:K,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:true,zoomAnimationThreshold:4,fadeAnimation:true,markerZoomAnimation:true,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:true},initialize:function(e,t){t=p(this,t);this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=true;this._initContainer(e);this._initLayout();this._onResize=s(this._onResize,this);this._initEvents();if(t.maxBounds){this.setMaxBounds(t.maxBounds)}if(t.zoom!==undefined){this._zoom=this._limitZoom(t.zoom)}if(t.center&&t.zoom!==undefined){this.setView(U(t.center),t.zoom,{reset:true})}this.callInitHooks();this._zoomAnimated=it&&_e&&!Se&&this.options.zoomAnimation;if(this._zoomAnimated){this._createAnimProxy();Rt(this._proxy,nt,this._catchTransitionEnd,this)}this._addLayers(this.options.layers)},setView:function(e,t,i){t=t===undefined?this._zoom:this._limitZoom(t);e=this._limitCenter(U(e),t,this.options.maxBounds);i=i||{};this._stop();if(this._loaded&&!i.reset&&i!==true){if(i.animate!==undefined){i.zoom=l({animate:i.animate},i.zoom);i.pan=l({animate:i.animate,duration:i.duration},i.pan)}var n=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(n){clearTimeout(this._sizeTimer);return this}}this._resetView(e,t);return this},setZoom:function(e,t){if(!this._loaded){this._zoom=e;return this}return this.setView(this.getCenter(),e,{zoom:t})},zoomIn:function(e,t){e=e||(_e?this.options.zoomDelta:1);return this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){e=e||(_e?this.options.zoomDelta:1);return this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),o=e instanceof O?e:this.latLngToContainerPoint(e),a=o.subtract(r).multiplyBy(1-1/n),s=this.containerPointToLatLng(r.add(a));return this.setView(s,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{};e=e.getBounds?e.getBounds():q(e);var i=R(t.paddingTopLeft||t.padding||[0,0]),n=R(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,false,i.add(n));r=typeof t.maxZoom==="number"?Math.min(t.maxZoom,r):r;if(r===Infinity){return{center:e.getCenter(),zoom:r}}var o=n.subtract(i).divideBy(2),a=this.project(e.getSouthWest(),r),s=this.project(e.getNorthEast(),r),l=this.unproject(a.add(s).divideBy(2).add(o),r);return{center:l,zoom:r}},fitBounds:function(e,t){e=q(e);if(!e.isValid()){throw new Error("Bounds are not valid.")}var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){e=R(e).round();t=t||{};if(!e.x&&!e.y){return this.fire("moveend")}if(t.animate!==true&&!this.getSize().contains(e)){this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom());return this}if(!this._panAnim){this._panAnim=new ti;this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(!t.noMoveStart){this.fire("movestart")}if(t.animate!==false){ft(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else{this._rawPanBy(e);this.fire("move").fire("moveend")}return this},flyTo:function(i,n,e){e=e||{};if(e.animate===false||!_e){return this.setView(i,n,e)}this._stop();var r=this.project(this.getCenter()),o=this.project(i),t=this.getSize(),a=this._zoom;i=U(i);n=n===undefined?a:n;var l=Math.max(t.x,t.y),d=l*this.getZoomScale(a,n),c=o.distanceTo(r)||1,s=1.42,u=s*s;function f(e){var t=e?-1:1,i=e?d:l,n=d*d-l*l+t*u*u*c*c,r=2*i*u*c,o=n/r,a=Math.sqrt(o*o+1)-o;var s=a<1e-9?-18:Math.log(a);return s}function h(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return h(e)/p(e)}var g=f(0);function v(e){return l*(p(g)/p(g+s*e))}function _(e){return l*(p(g)*m(g+s*e)-h(g))/u}function b(e){return 1-Math.pow(1-e,1.5)}var y=Date.now(),w=(f(1)-g)/s,x=e.duration?1e3*e.duration:1e3*w*.8;function C(){var e=(Date.now()-y)/x,t=b(e)*w;if(e<=1){this._flyToFrame=T(C,this);this._move(this.unproject(r.add(o.subtract(r).multiplyBy(_(t)/c)),a),this.getScaleZoom(l/v(t),a),{flyTo:true})}else{this._move(i,n)._moveEnd(true)}}this._moveStart(true,e.noMoveStart);C.call(this);return this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){e=q(e);if(!e.isValid()){this.options.maxBounds=null;return this.off("moveend",this._panInsideMaxBounds)}else if(this.options.maxBounds){this.off("moveend",this._panInsideMaxBounds)}this.options.maxBounds=e;if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(e){var t=this.options.minZoom;this.options.minZoom=e;if(this._loaded&&t!==e){this.fire("zoomlevelschange");if(this.getZoom()<this.options.minZoom){return this.setZoom(e)}}return this},setMaxZoom:function(e){var t=this.options.maxZoom;this.options.maxZoom=e;if(this._loaded&&t!==e){this.fire("zoomlevelschange");if(this.getZoom()>this.options.maxZoom){return this.setZoom(e)}}return this},panInsideBounds:function(e,t){this._enforcingBounds=true;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,q(e));if(!i.equals(n)){this.panTo(n,t)}this._enforcingBounds=false;return this},panInside:function(e,t){t=t||{};var i=R(t.paddingTopLeft||t.padding||[0,0]),n=R(t.paddingBottomRight||t.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(e),s=this.getPixelBounds(),l=s.getSize().divideBy(2),d=j([s.min.add(i),s.max.subtract(n)]);if(!d.contains(a)){this._enforcingBounds=true;var c=o.subtract(a),u=R(a.x+c.x,a.y+c.y);if(a.x<d.min.x||a.x>d.max.x){u.x=o.x-c.x;if(c.x>0){u.x+=l.x-i.x}else{u.x-=l.x-n.x}}if(a.y<d.min.y||a.y>d.max.y){u.y=o.y-c.y;if(c.y>0){u.y+=l.y-i.y}else{u.y-=l.y-n.y}}this.panTo(this.unproject(u),t);this._enforcingBounds=false}return this},invalidateSize:function(e){if(!this._loaded){return this}e=l({animate:false,pan:true},e===true?{animate:true}:e);var t=this.getSize();this._sizeChanged=true;this._lastCenter=null;var i=this.getSize(),n=t.divideBy(2).round(),r=i.divideBy(2).round(),o=n.subtract(r);if(!o.x&&!o.y){return this}if(e.animate&&e.pan){this.panBy(o)}else{if(e.pan){this._rawPanBy(o)}this.fire("move");if(e.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:t,newSize:i})},stop:function(){this.setZoom(this._limitZoom(this._zoom));if(!this.options.zoomSnap){this.fire("viewreset")}return this._stop()},locate:function(e){e=this._locateOptions=l({timeout:1e4,watch:false},e);if(!("geolocation"in navigator)){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var t=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);if(e.watch){this._locationWatchId=navigator.geolocation.watchPosition(t,i,e)}else{navigator.geolocation.getCurrentPosition(t,i,e)}return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(e){var t=e.code,i=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,i=e.coords.longitude,n=new F(t,i),r=n.toBounds(e.coords.accuracy*2),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(r);this.setView(n,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:n,bounds:r,timestamp:e.timestamp};for(var l in e.coords){if(typeof e.coords[l]==="number"){s[l]=e.coords[l]}}this.fire("locationfound",s)},addHandler:function(e,t){if(!t){return this}var i=this[e]=new t(this);this._handlers.push(i);if(this.options[e]){i.enable()}return this},remove:function(){this._initEvents(true);if(this._containerId!==this._container._leaflet_id){throw new Error("Map container is being reused by another instance")}try{delete this._container._leaflet_id;delete this._containerId}catch(e){this._container._leaflet_id=undefined;this._containerId=undefined}if(this._locationWatchId!==undefined){this.stopLocate()}this._stop();st(this._mapPane);if(this._clearControlPos){this._clearControlPos()}if(this._resizeRequest){N(this._resizeRequest);this._resizeRequest=null}this._clearHandlers();if(this._loaded){this.fire("unload")}var e;for(e in this._layers){this._layers[e].remove()}for(e in this._panes){st(this._panes[e])}this._layers=[];this._panes=[];delete this._mapPane;delete this._renderer;return this},createPane:function(e,t){var i="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),n=at("div",i,t||this._mapPane);if(e){this._panes[e]=n}return n},getCenter:function(){this._checkIfLoaded();if(this._lastCenter&&!this._moved()){return this._lastCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new B(t,i)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=q(e);i=R(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(i),d=j(this.project(s,n),this.project(a,n)).getSize(),c=_e?this.options.zoomSnap:1,u=l.x/d.x,f=l.y/d.y,h=t?Math.max(u,f):Math.min(u,f);n=this.getScaleZoom(h,n);if(c){n=Math.round(n/(c/100))*(c/100);n=t?Math.ceil(n/c)*c:Math.floor(n/c)*c}return Math.max(r,Math.min(o,n))},getSize:function(){if(!this._size||this._sizeChanged){this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new z(i,i.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===undefined?this.getZoom():e)},getPane:function(e){return typeof e==="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;t=t===undefined?this._zoom:t;return i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=t===undefined?this._zoom:t;var n=i.zoom(e*i.scale(t));return isNaN(n)?Infinity:n},project:function(e,t){t=t===undefined?this._zoom:t;return this.options.crs.latLngToPoint(U(e),t)},unproject:function(e,t){t=t===undefined?this._zoom:t;return this.options.crs.pointToLatLng(R(e),t)},layerPointToLatLng:function(e){var t=R(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(U(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(U(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(q(e))},distance:function(e,t){return this.options.crs.distance(U(e),U(t))},containerPointToLayerPoint:function(e){return R(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return R(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(R(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(e)))},mouseEventToContainerPoint:function(e){return $t(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=rt(e);if(!t){throw new Error("Map container not found.")}else if(t._leaflet_id){throw new Error("Map container is already initialized.")}Rt(t,"scroll",this._onScroll,this);this._containerId=d(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&_e;ft(e,"leaflet-container"+(ke?" leaflet-touch":"")+(Ne?" leaflet-retina":"")+(te?" leaflet-oldie":"")+(ue?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ot(e,"position");if(t!=="absolute"&&t!=="relative"&&t!=="fixed"){e.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var e=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);yt(this._mapPane,new O(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");this.createPane("popupPane");if(!this.options.markerZoomAnimation){ft(e.markerPane,"leaflet-zoom-hide");ft(e.shadowPane,"leaflet-zoom-hide")}},_resetView:function(e,t){yt(this._mapPane,new O(0,0));var i=!this._loaded;this._loaded=true;t=this._limitZoom(t);this.fire("viewprereset");var n=this._zoom!==t;this._moveStart(n,false)._move(e,t)._moveEnd(n);this.fire("viewreset");if(i){this.fire("load")}},_moveStart:function(e,t){if(e){this.fire("zoomstart")}if(!t){this.fire("movestart")}return this},_move:function(e,t,i){if(t===undefined){t=this._zoom}var n=this._zoom!==t;this._zoom=t;this._lastCenter=e;this._pixelOrigin=this._getNewPixelOrigin(e);if(n||i&&i.pinch){this.fire("zoom",i)}return this.fire("move",i)},_moveEnd:function(e){if(e){this.fire("zoomend")}return this.fire("moveend")},_stop:function(){N(this._flyToFrame);if(this._panAnim){this._panAnim.stop()}return this},_rawPanBy:function(e){yt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds){this.panInsideBounds(this.options.maxBounds)}},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(e){this._targets={};this._targets[d(this._container)]=this;var t=e?zt:Rt;t(this._container,"click dblclick mousedown mouseup "+"mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this);if(this.options.trackResize){t(window,"resize",this._onResize,this)}if(_e&&this.options.transform3DLimit){(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)}},_onResize:function(){N(this._resizeRequest);this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:true})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();if(Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit){this._resetView(this.getCenter(),this.getZoom())}},_findEventTargets:function(e,t){var i=[],n,r=t==="mouseout"||t==="mouseover",o=e.target||e.srcElement,a=false;while(o){n=this._targets[d(o)];if(n&&(t==="click"||t==="preclick")&&!e._simulated&&this._draggableMoved(n)){a=true;break}if(n&&n.listens(t,true)){if(r&&!Jt(o,e)){break}i.push(n);if(r){break}}if(o===this._container){break}o=o.parentNode}if(!i.length&&!a&&!r&&Jt(o,e)){i=[this]}return i},_handleDOMEvent:function(e){if(!this._loaded||Yt(e)){return}var t=e.type;if(t==="mousedown"||t==="keypress"||t==="keyup"||t==="keydown"){Et(e.target||e.srcElement)}this._fireDOMEvent(e,t)},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if(e.type==="click"){var n=l({},e);n.type="preclick";this._fireDOMEvent(n,n.type,i)}if(e._stopped){return}i=(i||[]).concat(this._findEventTargets(e,t));if(!i.length){return}var r=i[0];if(t==="contextmenu"&&r.listens(t,true)){Ht(e)}var o={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var a=r.getLatLng&&(!r._radius||r._radius<=10);o.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(e);o.layerPoint=this.containerPointToLayerPoint(o.containerPoint);o.latlng=a?r.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var s=0;s<i.length;s++){i[s].fire(t,o,true);if(o.originalEvent._stopped||i[s].options.bubblingMouseEvents===false&&b(this._mouseEvents,t)!==-1){return}}},_draggableMoved:function(e){e=e.dragging&&e.dragging.enabled()?e:this;return e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++){this._handlers[e].disable()}},whenReady:function(e,t){if(this._loaded){e.call(t||this,{target:this})}else{this.on("load",e,t)}return this},_getMapPanePos:function(){return wt(this._mapPane)||new O(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var i=e&&t!==undefined?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(n)},_latLngBoundsToNewLayerBounds:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return j([this.project(e.getSouthWest(),t)._subtract(n),this.project(e.getNorthWest(),t)._subtract(n),this.project(e.getSouthEast(),t)._subtract(n),this.project(e.getNorthEast(),t)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i){return e}var n=this.project(e,t),r=this.getSize().divideBy(2),o=new z(n.subtract(r),n.add(r)),a=this._getBoundsOffset(o,i,t);if(a.round().equals([0,0])){return e}return this.unproject(n.add(a),t)},_limitOffset:function(e,t){if(!t){return e}var i=this.getPixelBounds(),n=new z(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=j(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),r=n.min.subtract(e.min),o=n.max.subtract(e.max),a=this._rebound(r.x,-o.x),s=this._rebound(r.y,-o.y);return new O(a,s)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=_e?this.options.zoomSnap:1;if(n){e=Math.round(e/n)*n}return Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();if((t&&t.animate)!==true&&!this.getSize().contains(i)){return false}this.panBy(i,t);return true},_createAnimProxy:function(){var e=this._proxy=at("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e);this.on("zoomanim",function(e){var t=tt,i=this._proxy.style[t];bt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1));if(i===this._proxy.style[t]&&this._animatingZoom){this._onZoomTransitionEnd()}},this);this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();bt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this);this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy);delete this._proxy},_catchTransitionEnd:function(e){if(this._animatingZoom&&e.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom){return true}i=i||{};if(!this._zoomAnimated||i.animate===false||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold){return false}var n=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/n);if(i.animate!==true&&!this.getSize().contains(r)){return false}T(function(){this._moveStart(true,false)._animateZoom(e,t,true)},this);return true},_animateZoom:function(e,t,i,n){if(!this._mapPane){return}if(i){this._animatingZoom=true;this._animateToCenter=e;this._animateToZoom=t;ft(this._mapPane,"leaflet-zoom-anim")}this.fire("zoomanim",{center:e,zoom:t,noUpdate:n});setTimeout(s(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return}if(this._mapPane){ht(this._mapPane,"leaflet-zoom-anim")}this._animatingZoom=false;this._move(this._animateToCenter,this._animateToZoom);T(function(){this._moveEnd(true)},this)}});function ni(e,t){return new ii(e,t)}var ri=P.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;if(t){t.removeControl(this)}this.options.position=e;if(t){t.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(e){this.remove();this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];ft(t,"leaflet-control");if(i.indexOf("bottom")!==-1){n.insertBefore(t,n.firstChild)}else{n.appendChild(t)}this._map.on("unload",this.remove,this);return this},remove:function(){if(!this._map){return this}st(this._container);if(this.onRemove){this.onRemove(this._map)}this._map.off("unload",this.remove,this);this._map=null;return this},_refocusOnMap:function(e){if(this._map&&e&&e.screenX>0&&e.screenY>0){this._map.getContainer().focus()}}});var oi=function(e){return new ri(e)};ii.include({addControl:function(e){e.addTo(this);return this},removeControl:function(e){e.remove();return this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",o=this._controlContainer=at("div",r+"control-container",this._container);function e(e,t){var i=r+e+" "+r+t;n[e+t]=at("div",i,o)}e("top","left");e("top","right");e("bottom","left");e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners){st(this._controlCorners[e])}st(this._controlContainer);delete this._controlCorners;delete this._controlContainer}});var ai=ri.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false,sortLayers:false,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){p(this,i);this._layerControlInputs=[];this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var n in e){this._addLayer(e[n],n)}for(n in t){this._addLayer(t[n],n,true)}},onAdd:function(e){this._initLayout();this._update();this._map=e;e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++){this._layers[t].layer.on("add remove",this._onLayerChange,this)}return this._container},addTo:function(e){ri.prototype.addTo.call(this,e);return this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++){this._layers[e].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(e,t){this._addLayer(e,t);return this._map?this._update():this},addOverlay:function(e,t){this._addLayer(e,t,true);return this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(d(e));if(t){this._layers.splice(this._layers.indexOf(t),1)}return this._map?this._update():this},expand:function(){ft(this._container,"leaflet-control-layers-expanded");this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);if(e<this._section.clientHeight){ft(this._section,"leaflet-control-layers-scrollbar");this._section.style.height=e+"px"}else{ht(this._section,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){ht(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=at("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",true);Ut(t);Ft(t);var n=this._section=at("section",e+"-list");if(i){this._map.on("click",this.collapse,this);if(!re){Rt(t,{mouseenter:this.expand,mouseleave:this.collapse},this)}}var r=this._layersLink=at("a",e+"-toggle",t);r.href="#";r.title="Layers";if(ke){Rt(r,"click",Wt);Rt(r,"click",this.expand,this)}else{Rt(r,"focus",this.expand,this)}if(!i){this.expand()}this._baseLayersList=at("div",e+"-base",n);this._separator=at("div",e+"-separator",n);this._overlaysList=at("div",e+"-overlays",n);t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++){if(this._layers[t]&&d(this._layers[t].layer)===e){return this._layers[t]}}},_addLayer:function(e,t,i){if(this._map){e.on("add remove",this._onLayerChange,this)}this._layers.push({layer:e,name:t,overlay:i});if(this.options.sortLayers){this._layers.sort(s(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this))}if(this.options.autoZIndex&&e.setZIndex){this._lastZIndex++;e.setZIndex(this._lastZIndex)}this._expandIfNotCollapsed()},_update:function(){if(!this._container){return this}lt(this._baseLayersList);lt(this._overlaysList);this._layerControlInputs=[];var e,t,i,n,r=0;for(i=0;i<this._layers.length;i++){n=this._layers[i];this._addItem(n);t=t||n.overlay;e=e||!n.overlay;r+=!n.overlay?1:0}if(this.options.hideSingleBase){e=e&&r>1;this._baseLayersList.style.display=e?"":"none"}this._separator.style.display=t&&e?"":"none";return this},_onLayerChange:function(e){if(!this._handlingClick){this._update()}var t=this._getLayer(d(e.target));var i=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;if(i){this._map.fire(i,t)}},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>";var n=document.createElement("div");n.innerHTML=i;return n.firstChild},_addItem:function(e){var t=document.createElement("label"),i=this._map.hasLayer(e.layer),n;if(e.overlay){n=document.createElement("input");n.type="checkbox";n.className="leaflet-control-layers-selector";n.defaultChecked=i}else{n=this._createRadioElement("leaflet-base-layers_"+d(this),i)}this._layerControlInputs.push(n);n.layerId=d(e.layer);Rt(n,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var o=document.createElement("div");t.appendChild(o);o.appendChild(n);o.appendChild(r);var a=e.overlay?this._overlaysList:this._baseLayersList;a.appendChild(t);this._checkDisabledLayers();return t},_onInputClick:function(){var e=this._layerControlInputs,t,i;var n=[],r=[];this._handlingClick=true;for(var o=e.length-1;o>=0;o--){t=e[o];i=this._getLayer(t.layerId).layer;if(t.checked){n.push(i)}else if(!t.checked){r.push(i)}}for(o=0;o<r.length;o++){if(this._map.hasLayer(r[o])){this._map.removeLayer(r[o])}}for(o=0;o<n.length;o++){if(!this._map.hasLayer(n[o])){this._map.addLayer(n[o])}}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var e=this._layerControlInputs,t,i,n=this._map.getZoom();for(var r=e.length-1;r>=0;r--){t=e[r];i=this._getLayer(t.layerId).layer;t.disabled=i.options.minZoom!==undefined&&n<i.options.minZoom||i.options.maxZoom!==undefined&&n>i.options.maxZoom}},_expandIfNotCollapsed:function(){if(this._map&&!this.options.collapsed){this.expand()}return this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});var si=function(e,t,i){return new ai(e,t,i)};var li=ri.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=at("div",t+" leaflet-bar"),n=this.options;this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn);this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut);this._updateDisabled();e.on("zoomend zoomlevelschange",this._updateDisabled,this);return i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){this._disabled=true;this._updateDisabled();return this},enable:function(){this._disabled=false;this._updateDisabled();return this},_zoomIn:function(e){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom()){this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))}},_zoomOut:function(e){if(!this._disabled&&this._map._zoom>this._map.getMinZoom()){this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))}},_createButton:function(e,t,i,n,r){var o=at("a",i,n);o.innerHTML=e;o.href="#";o.title=t;o.setAttribute("role","button");o.setAttribute("aria-label",t);Ut(o);Rt(o,"click",Wt);Rt(o,"click",r,this);Rt(o,"click",this._refocusOnMap,this);return o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";ht(this._zoomInButton,t);ht(this._zoomOutButton,t);if(this._disabled||e._zoom===e.getMinZoom()){ft(this._zoomOutButton,t)}if(this._disabled||e._zoom===e.getMaxZoom()){ft(this._zoomInButton,t)}}});ii.mergeOptions({zoomControl:true});ii.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new li;this.addControl(this.zoomControl)}});var di=function(e){return new li(e)};var ci=ri.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true},onAdd:function(e){var t="leaflet-control-scale",i=at("div",t),n=this.options;this._addScales(n,t+"-line",i);e.on(n.updateWhenIdle?"moveend":"move",this._update,this);e.whenReady(this._update,this);return i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){if(e.metric){this._mScale=at("div",t,i)}if(e.imperial){this._iScale=at("div",t,i)}},_update:function(){var e=this._map,t=e.getSize().y/2;var i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){if(this.options.metric&&e){this._updateMetric(e)}if(this.options.imperial&&e){this._updateImperial(e)}},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t=e*3.2808399,i,n,r;if(t>5280){i=t/5280;n=this._getRoundNum(i);this._updateScale(this._iScale,n+" mi",n/i)}else{r=this._getRoundNum(t);this._updateScale(this._iScale,r+" ft",r/t)}},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px";e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1;return t*i}});var ui=function(e){return new ci(e)};var fi=ri.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){p(this,e);this._attributions={}},onAdd:function(e){e.attributionControl=this;this._container=at("div","leaflet-control-attribution");Ut(this._container);for(var t in e._layers){if(e._layers[t].getAttribution){this.addAttribution(e._layers[t].getAttribution())}}this._update();return this._container},setPrefix:function(e){this.options.prefix=e;this._update();return this},addAttribution:function(e){if(!e){return this}if(!this._attributions[e]){this._attributions[e]=0}this._attributions[e]++;this._update();return this},removeAttribution:function(e){if(!e){return this}if(this._attributions[e]){this._attributions[e]--;this._update()}return this},_update:function(){if(!this._map){return}var e=[];for(var t in this._attributions){if(this._attributions[t]){e.push(t)}}var i=[];if(this.options.prefix){i.push(this.options.prefix)}if(e.length){i.push(e.join(", "))}this._container.innerHTML=i.join(" | ")}});ii.mergeOptions({attributionControl:true});ii.addInitHook(function(){if(this.options.attributionControl){(new fi).addTo(this)}});var hi=function(e){return new fi(e)};ri.Layers=ai;ri.Zoom=li;ri.Scale=ci;ri.Attribution=fi;oi.layers=si;oi.zoom=di;oi.scale=ui;oi.attribution=hi;var pi=P.extend({initialize:function(e){this._map=e},enable:function(){if(this._enabled){return this}this._enabled=true;this.addHooks();return this},disable:function(){if(!this._enabled){return this}this._enabled=false;this.removeHooks();return this},enabled:function(){return!!this._enabled}});pi.addTo=function(e,t){e.addHandler(t,this);return this};var mi={Events:M};var gi=ke?"touchstart mousedown":"mousedown";var vi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"};var _i={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"};var bi=I.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){p(this,n);this._element=e;this._dragStartTarget=t||e;this._preventOutline=i},enable:function(){if(this._enabled){return}Rt(this._dragStartTarget,gi,this._onDown,this);this._enabled=true},disable:function(){if(!this._enabled){return}if(bi._dragging===this){this.finishDrag()}zt(this._dragStartTarget,gi,this._onDown,this);this._enabled=false;this._moved=false},_onDown:function(e){if(e._simulated||!this._enabled){return}this._moved=false;if(ut(this._element,"leaflet-zoom-anim")){return}if(bi._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches){return}bi._dragging=this;if(this._preventOutline){Et(this._element)}Tt();xt();if(this._moving){return}this.fire("down");var t=e.touches?e.touches[0]:e,i=It(this._element);this._startPoint=new O(t.clientX,t.clientY);this._parentScale=Ot(i);Rt(document,_i[e.type],this._onMove,this);Rt(document,vi[e.type],this._onUp,this)},_onMove:function(e){if(e._simulated||!this._enabled){return}if(e.touches&&e.touches.length>1){this._moved=true;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,i=new O(t.clientX,t.clientY)._subtract(this._startPoint);if(!i.x&&!i.y){return}if(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance){return}i.x/=this._parentScale.x;i.y/=this._parentScale.y;Ht(e);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=wt(this._element).subtract(i);ft(document.body,"leaflet-dragging");this._lastTarget=e.target||e.srcElement;if(window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance){this._lastTarget=this._lastTarget.correspondingUseElement}ft(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(i);this._moving=true;N(this._animRequest);this._lastEvent=e;this._animRequest=T(this._updatePosition,this,true)},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e);yt(this._element,this._newPos);this.fire("drag",e)},_onUp:function(e){if(e._simulated||!this._enabled){return}this.finishDrag()},finishDrag:function(){ht(document.body,"leaflet-dragging");if(this._lastTarget){ht(this._lastTarget,"leaflet-drag-target");this._lastTarget=null}for(var e in _i){zt(document,_i[e],this._onMove,this);zt(document,vi[e],this._onUp,this)}Nt();Ct();if(this._moved&&this._moving){N(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false;bi._dragging=false}});function yi(e,t){if(!t||!e.length){return e.slice()}var i=t*t;e=Si(e,i);e=Ci(e,i);return e}function wi(e,t,i){return Math.sqrt(Mi(e,t,i,true))}function xi(e,t,i){return Mi(e,t,i)}function Ci(e,t){var i=e.length,n=typeof Uint8Array!==undefined+""?Uint8Array:Array,r=new n(i);r[0]=r[i-1]=1;ki(e,r,t,0,i-1);var o,a=[];for(o=0;o<i;o++){if(r[o]){a.push(e[o])}}return a}function ki(e,t,i,n,r){var o=0,a,s,l;for(s=n+1;s<=r-1;s++){l=Mi(e[s],e[n],e[r],true);if(l>o){a=s;o=l}}if(o>i){t[a]=1;ki(e,t,i,n,a);ki(e,t,i,a,r)}}function Si(e,t){var i=[e[0]];for(var n=1,r=0,o=e.length;n<o;n++){if(Ei(e[n],e[r])>t){i.push(e[n]);r=n}}if(r<o-1){i.push(e[o-1])}return i}var Ti;function Ni(e,t,i,n,r){var o=n?Ti:Pi(e,i),a=Pi(t,i),s,l,d;Ti=a;while(true){if(!(o|a)){return[e,t]}if(o&a){return false}s=o||a;l=Di(e,t,s,i,r);d=Pi(l,i);if(s===o){e=l;o=d}else{t=l;a=d}}}function Di(e,t,i,n,r){var o=t.x-e.x,a=t.y-e.y,s=n.min,l=n.max,d,c;if(i&8){d=e.x+o*(l.y-e.y)/a;c=l.y}else if(i&4){d=e.x+o*(s.y-e.y)/a;c=s.y}else if(i&2){d=l.x;c=e.y+a*(l.x-e.x)/o}else if(i&1){d=s.x;c=e.y+a*(s.x-e.x)/o}return new O(d,c,r)}function Pi(e,t){var i=0;if(e.x<t.min.x){i|=1}else if(e.x>t.max.x){i|=2}if(e.y<t.min.y){i|=4}else if(e.y>t.max.y){i|=8}return i}function Ei(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function Mi(e,t,i,n){var r=t.x,o=t.y,a=i.x-r,s=i.y-o,l=a*a+s*s,d;if(l>0){d=((e.x-r)*a+(e.y-o)*s)/l;if(d>1){r=i.x;o=i.y}else if(d>0){r+=a*d;o+=s*d}}a=e.x-r;s=e.y-o;return n?a*a+s*s:new O(r,o)}function Ii(e){return!_(e[0])||typeof e[0][0]!=="object"&&typeof e[0][0]!=="undefined"}function Oi(e){console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead.");return Ii(e)}var Ai=(Object.freeze||Object)({simplify:yi,pointToSegmentDistance:wi,closestPointOnSegment:xi,clipSegment:Ni,_getEdgeIntersection:Di,_getBitCode:Pi,_sqClosestPointOnSegment:Mi,isFlat:Ii,_flat:Oi});function Ri(e,t,i){var n,r=[1,4,2,8],o,a,s,l,d,c,u,f;for(o=0,c=e.length;o<c;o++){e[o]._code=Pi(e[o],t)}for(s=0;s<4;s++){u=r[s];n=[];for(o=0,c=e.length,a=c-1;o<c;a=o++){l=e[o];d=e[a];if(!(l._code&u)){if(d._code&u){f=Di(d,l,u,t,i);f._code=Pi(f,t);n.push(f)}n.push(l)}else if(!(d._code&u)){f=Di(d,l,u,t,i);f._code=Pi(f,t);n.push(f)}}e=n}return e}var Li=(Object.freeze||Object)({clipPolygon:Ri});var zi={project:function(e){return new O(e.lng,e.lat)},unproject:function(e){return new F(e.y,e.x)},bounds:new z([-180,-90],[180,90])};var ji={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=o*Math.sin(n);var s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),o/2);n=-i*Math.log(Math.max(s,1e-10));return new O(e.lng*t*i,n)},unproject:function(e){var t=180/Math.PI,i=this.R,n=this.R_MINOR/i,r=Math.sqrt(1-n*n),o=Math.exp(-e.y/i),a=Math.PI/2-2*Math.atan(o);for(var s=0,l=.1,d;s<15&&Math.abs(l)>1e-7;s++){d=r*Math.sin(a);d=Math.pow((1-d)/(1+d),r/2);l=Math.PI/2-2*Math.atan(o*d)-a;a+=l}return new F(a*t,e.x*t/i)}};var Bi=(Object.freeze||Object)({LonLat:zi,Mercator:ji,SphericalMercator:V});var qi=l({},W,{code:"EPSG:3395",projection:ji,transformation:function(){var e=.5/(Math.PI*ji.R);return Z(e,.5,-e,.5)}()});var Fi=l({},W,{code:"EPSG:4326",projection:zi,transformation:Z(1/180,1,-1/180,.5)});var Ui=l({},H,{projection:zi,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(i*i+n*n)},infinite:true});H.Earth=W;H.EPSG3395=qi;H.EPSG3857=K;H.EPSG900913=Y;H.EPSG4326=Fi;H.Simple=Ui;var Hi=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:true},addTo:function(e){e.addLayer(this);return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){if(e){e.removeLayer(this)}return this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){this._map._targets[d(e)]=this;return this},removeInteractiveTarget:function(e){delete this._map._targets[d(e)];return this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(!t.hasLayer(this)){return}this._map=t;this._zoomAnimated=t._zoomAnimated;if(this.getEvents){var i=this.getEvents();t.on(i,this);this.once("remove",function(){t.off(i,this)},this)}this.onAdd(t);if(this.getAttribution&&t.attributionControl){t.attributionControl.addAttribution(this.getAttribution())}this.fire("add");t.fire("layeradd",{layer:this})}});ii.include({addLayer:function(e){if(!e._layerAdd){throw new Error("The provided object is not a Layer.")}var t=d(e);if(this._layers[t]){return this}this._layers[t]=e;e._mapToAdd=this;if(e.beforeAdd){e.beforeAdd(this)}this.whenReady(e._layerAdd,e);return this},removeLayer:function(e){var t=d(e);if(!this._layers[t]){return this}if(this._loaded){e.onRemove(this)}if(e.getAttribution&&this.attributionControl){this.attributionControl.removeAttribution(e.getAttribution())}delete this._layers[t];if(this._loaded){this.fire("layerremove",{layer:e});e.fire("remove")}e._map=e._mapToAdd=null;return this},hasLayer:function(e){return!!e&&d(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers){e.call(t,this._layers[i])}return this},_addLayers:function(e){e=e?_(e)?e:[e]:[];for(var t=0,i=e.length;t<i;t++){this.addLayer(e[t])}},_addZoomLimit:function(e){if(isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom)){this._zoomBoundLayers[d(e)]=e;this._updateZoomLevels()}},_removeZoomLimit:function(e){var t=d(e);if(this._zoomBoundLayers[t]){delete this._zoomBoundLayers[t];this._updateZoomLevels()}},_updateZoomLevels:function(){var e=Infinity,t=-Infinity,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;e=r.minZoom===undefined?e:Math.min(e,r.minZoom);t=r.maxZoom===undefined?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-Infinity?undefined:t;this._layersMinZoom=e===Infinity?undefined:e;if(i!==this._getZoomSpan()){this.fire("zoomlevelschange")}if(this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom){this.setZoom(this._layersMaxZoom)}if(this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom){this.setZoom(this._layersMinZoom)}}});var Wi=Hi.extend({initialize:function(e,t){p(this,t);this._layers={};var i,n;if(e){for(i=0,n=e.length;i<n;i++){this.addLayer(e[i])}}},addLayer:function(e){var t=this.getLayerId(e);this._layers[t]=e;if(this._map){this._map.addLayer(e)}return this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);if(this._map&&this._layers[t]){this._map.removeLayer(this._layers[t])}delete this._layers[t];return this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers){n=this._layers[i];if(n[e]){n[e].apply(n,t)}}return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers){e.call(t,this._layers[i])}return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];this.eachLayer(e.push,e);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return d(e)}});var $i=function(e,t){return new Wi(e,t)};var Vi=Wi.extend({addLayer:function(e){if(this.hasLayer(e)){return this}e.addEventParent(this);Wi.prototype.addLayer.call(this,e);return this.fire("layeradd",{layer:e})},removeLayer:function(e){if(!this.hasLayer(e)){return this}if(e in this._layers){e=this._layers[e]}e.removeEventParent(this);Wi.prototype.removeLayer.call(this,e);return this.fire("layerremove",{layer:e})},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new B;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}});var Gi=function(e){return new Vi(e)};var Zi=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if(e==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var n=this._createImg(i,t&&t.tagName==="IMG"?t:null);this._setIconStyles(n,e);return n},_setIconStyles:function(e,t){var i=this.options;var n=i[t+"Size"];if(typeof n==="number"){n=[n,n]}var r=R(n),o=R(t==="shadow"&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,true));e.className="leaflet-marker-"+t+" "+(i.className||"");if(o){e.style.marginLeft=-o.x+"px";e.style.marginTop=-o.y+"px"}if(r){e.style.width=r.x+"px";e.style.height=r.y+"px"}},_createImg:function(e,t){t=t||document.createElement("img");t.src=e;return t},_getIconUrl:function(e){return Ne&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Ki(e){return new Zi(e)}var Yi=Zi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){if(!Yi.imagePath){Yi.imagePath=this._detectIconPath()}return(this.options.imagePath||Yi.imagePath)+Zi.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=at("div","leaflet-default-icon-path",document.body);var t=ot(e,"background-image")||ot(e,"backgroundImage");document.body.removeChild(e);if(t===null||t.indexOf("url")!==0){t=""}else{t=t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}return t}});var Ji=pi.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;if(!this._draggable){this._draggable=new bi(e,e,true)}this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable();ft(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable();if(this._marker._icon){ht(this._marker._icon,"leaflet-marker-draggable")}},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=wt(t._icon),a=i.getPixelBounds(),s=i.getPixelOrigin();var l=j(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var d=R((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(d,{animate:false});this._draggable._newPos._add(d);this._draggable._startPos._add(d);yt(t._icon,this._draggable._newPos);this._onDrag(e);this._panRequest=T(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){if(this._marker.options.autoPan){N(this._panRequest);this._panRequest=T(this._adjustPan.bind(this,e))}},_onDrag:function(e){var t=this._marker,i=t._shadow,n=wt(t._icon),r=t._map.layerPointToLatLng(n);if(i){yt(i,n)}t._latlng=r;e.latlng=r;e.oldLatLng=this._oldLatLng;t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){N(this._panRequest);delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",e)}});var Qi=Hi.extend({options:{icon:new Yi,interactive:true,keyboard:true,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:false,draggable:false,autoPan:false,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t);this._latlng=U(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation;if(this._zoomAnimated){e.on("zoomanim",this._animateZoom,this)}this._initIcon();this.update()},onRemove:function(e){if(this.dragging&&this.dragging.enabled()){this.options.draggable=true;this.dragging.removeHooks()}delete this.dragging;if(this._zoomAnimated){e.off("zoomanim",this._animateZoom,this)}this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;this._latlng=U(e);this.update();return this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){this.options.zIndexOffset=e;return this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){this.options.icon=e;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup,this._popup.options)}return this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");var i=e.icon.createIcon(this._icon),n=false;if(i!==this._icon){if(this._icon){this._removeIcon()}n=true;if(e.title){i.title=e.title}if(i.tagName==="IMG"){i.alt=e.alt||""}}ft(i,t);if(e.keyboard){i.tabIndex="0"}this._icon=i;if(e.riseOnHover){this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex})}var r=e.icon.createShadow(this._shadow),o=false;if(r!==this._shadow){this._removeShadow();o=true}if(r){ft(r,t);r.alt=""}this._shadow=r;if(e.opacity<1){this._updateOpacity()}if(n){this.getPane().appendChild(this._icon)}this._initInteraction();if(r&&o){this.getPane(e.shadowPane).appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex})}st(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){st(this._shadow)}this._shadow=null},_setPos:function(e){yt(this._icon,e);if(this._shadow){yt(this._shadow,e)}this._zIndex=e.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(!this.options.interactive){return}ft(this._icon,"leaflet-interactive");this.addInteractiveTarget(this._icon);if(Ji){var e=this.options.draggable;if(this.dragging){e=this.dragging.enabled();this.dragging.disable()}this.dragging=new Ji(this);if(e){this.dragging.enable()}}},setOpacity:function(e){this.options.opacity=e;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){var e=this.options.opacity;if(this._icon){gt(this._icon,e)}if(this._shadow){gt(this._shadow,e)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xi(e,t){return new Qi(e,t)}var en=Hi.extend({options:{stroke:true,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:false,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:true,bubblingMouseEvents:true},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){if(this._map){this._renderer._updatePath(this)}return this},setStyle:function(e){p(this,e);if(this._renderer){this._renderer._updateStyle(this);if(this.options.stroke&&e.hasOwnProperty("weight")){this._updateBounds()}}return this},bringToFront:function(){if(this._renderer){this._renderer._bringToFront(this)}return this},bringToBack:function(){if(this._renderer){this._renderer._bringToBack(this)}return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}});var tn=en.extend({options:{fill:true,radius:10},initialize:function(e,t){p(this,t);this._latlng=U(e);this._radius=this.options.radius},setLatLng:function(e){this._latlng=U(e);this.redraw();return this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){this.options.radius=this._radius=e;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;en.prototype.setStyle.call(this,e);this.setRadius(t);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),n=[e+i,t+i];this._pxBounds=new z(this._point.subtract(n),this._point.add(n))},_update:function(){if(this._map){this._updatePath()}},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nn(e,t){return new tn(e,t)}var rn=tn.extend({initialize:function(e,t,i){if(typeof t==="number"){t=l({},i,{radius:t})}p(this,t);this._latlng=U(e);if(isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(e){this._mRadius=e;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:en.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===W.distance){var r=Math.PI/180,o=this._mRadius/W.R/r,a=i.project([t+o,e]),s=i.project([t-o,e]),l=a.add(s).divideBy(2),d=i.unproject(l).lat,c=Math.acos((Math.cos(o*r)-Math.sin(t*r)*Math.sin(d*r))/(Math.cos(t*r)*Math.cos(d*r)))/r;if(isNaN(c)||c===0){c=o/Math.cos(Math.PI/180*t)}this._point=l.subtract(i.getPixelOrigin());this._radius=isNaN(c)?0:l.x-i.project([d,e-c]).x;this._radiusY=l.y-a.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng);this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}});function on(e,t,i){return new rn(e,t,i)}var an=en.extend({options:{smoothFactor:1,noClip:false},initialize:function(e,t){p(this,t);this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){this._setLatLngs(e);return this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){var t=Infinity,i=null,n=Mi,r,o;for(var a=0,s=this._parts.length;a<s;a++){var l=this._parts[a];for(var d=1,c=l.length;d<c;d++){r=l[d-1];o=l[d];var u=n(e,r,o,true);if(u<t){t=u;i=n(e,r,o)}}}if(i){i.distance=Math.sqrt(t)}return i},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var e,t,i,n,r,o,a,s=this._rings[0],l=s.length;if(!l){return null}for(e=0,t=0;e<l-1;e++){t+=s[e].distanceTo(s[e+1])/2}if(t===0){return this._map.layerPointToLatLng(s[0])}for(e=0,n=0;e<l-1;e++){r=s[e];o=s[e+1];i=r.distanceTo(o);n+=i;if(n>t){a=(n-t)/i;return this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(e,t){t=t||this._defaultShape();e=U(e);t.push(e);this._bounds.extend(e);return this.redraw()},_setLatLngs:function(e){this._bounds=new B;this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Ii(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){var t=[],i=Ii(e);for(var n=0,r=e.length;n<r;n++){if(i){t[n]=U(e[n]);this._bounds.extend(t[n])}else{t[n]=this._convertLatLngs(e[n])}}return t},_project:function(){var e=new z;this._rings=[];this._projectLatlngs(this._latlngs,this._rings,e);if(this._bounds.isValid()&&e.isValid()){this._rawPxBounds=e;this._updateBounds()}},_updateBounds:function(){var e=this._clickTolerance(),t=new O(e,e);this._pxBounds=new z([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(e,t,i){var n=e[0]instanceof F,r=e.length,o,a;if(n){a=[];for(o=0;o<r;o++){a[o]=this._map.latLngToLayerPoint(e[o]);i.extend(a[o])}t.push(a)}else{for(o=0;o<r;o++){this._projectLatlngs(e[o],t,i)}}},_clipPoints:function(){var e=this._renderer._bounds;this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(e)){return}if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,i,n,r,o,a,s,l;for(i=0,r=0,o=this._rings.length;i<o;i++){l=this._rings[i];for(n=0,a=l.length;n<a-1;n++){s=Ni(l[n],l[n+1],e,n,true);if(!s){continue}t[r]=t[r]||[];t[r].push(s[0]);if(s[1]!==l[n+1]||n===a-2){t[r].push(s[1]);r++}}}},_simplifyPoints:function(){var e=this._parts,t=this.options.smoothFactor;for(var i=0,n=e.length;i<n;i++){e[i]=yi(e[i],t)}},_update:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e)){return false}for(i=0,o=this._parts.length;i<o;i++){s=this._parts[i];for(n=0,a=s.length,r=a-1;n<a;r=n++){if(!t&&n===0){continue}if(wi(e,s[r],s[n])<=l){return true}}}return false}});function sn(e,t){return new an(e,t)}an._flat=Oi;var ln=an.extend({options:{fill:true},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var e,t,i,n,r,o,a,s,l,d=this._rings[0],c=d.length;if(!c){return null}o=a=s=0;for(e=0,t=c-1;e<c;t=e++){i=d[e];n=d[t];r=i.y*n.x-n.y*i.x;a+=(i.x+n.x)*r;s+=(i.y+n.y)*r;o+=r*3}if(o===0){l=d[0]}else{l=[a/o,s/o]}return this._map.layerPointToLatLng(l)},_convertLatLngs:function(e){var t=an.prototype._convertLatLngs.call(this,e),i=t.length;if(i>=2&&t[0]instanceof F&&t[0].equals(t[i-1])){t.pop()}return t},_setLatLngs:function(e){an.prototype._setLatLngs.call(this,e);if(Ii(this._latlngs)){this._latlngs=[this._latlngs]}},_defaultShape:function(){return Ii(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new O(t,t);e=new z(e.min.subtract(i),e.max.add(i));this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(e)){return}if(this.options.noClip){this._parts=this._rings;return}for(var n=0,r=this._rings.length,o;n<r;n++){o=Ri(this._rings[n],e,true);if(o.length){this._parts.push(o)}}},_updatePath:function(){this._renderer._updatePoly(this,true)},_containsPoint:function(e){var t=false,i,n,r,o,a,s,l,d;if(!this._pxBounds||!this._pxBounds.contains(e)){return false}for(o=0,l=this._parts.length;o<l;o++){i=this._parts[o];for(a=0,d=i.length,s=d-1;a<d;s=a++){n=i[a];r=i[s];if(n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x){t=!t}}}return t||an.prototype._containsPoint.call(this,e,true)}});function dn(e,t){return new ln(e,t)}var cn=Vi.extend({initialize:function(e,t){p(this,t);this._layers={};if(e){this.addData(e)}},addData:function(e){var t=_(e)?e:e.features,i,n,r;if(t){for(i=0,n=t.length;i<n;i++){r=t[i];if(r.geometries||r.geometry||r.features||r.coordinates){this.addData(r)}}return this}var o=this.options;if(o.filter&&!o.filter(e)){return this}var a=un(e,o);if(!a){return this}a.feature=vn(e);a.defaultOptions=a.options;this.resetStyle(a);if(o.onEachFeature){o.onEachFeature(e,a)}return this.addLayer(a)},resetStyle:function(e){e.options=l({},e.defaultOptions);this._setLayerStyle(e,this.options.style);return this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(e,t){if(e.setStyle){if(typeof t==="function"){t=t(e.feature)}e.setStyle(t)}}});function un(e,t){var i=e.type==="Feature"?e.geometry:e,n=i?i.coordinates:null,r=[],o=t&&t.pointToLayer,a=t&&t.coordsToLatLng||fn,s,l,d,c;if(!n&&!i){return null}switch(i.type){case"Point":s=a(n);return o?o(e,s):new Qi(s);case"MultiPoint":for(d=0,c=n.length;d<c;d++){s=a(n[d]);r.push(o?o(e,s):new Qi(s))}return new Vi(r);case"LineString":case"MultiLineString":l=hn(n,i.type==="LineString"?0:1,a);return new an(l,t);case"Polygon":case"MultiPolygon":l=hn(n,i.type==="Polygon"?1:2,a);return new ln(l,t);case"GeometryCollection":for(d=0,c=i.geometries.length;d<c;d++){var u=un({geometry:i.geometries[d],type:"Feature",properties:e.properties},t);if(u){r.push(u)}}return new Vi(r);default:throw new Error("Invalid GeoJSON object.")}}function fn(e){return new F(e[1],e[0],e[2])}function hn(e,t,i){var n=[];for(var r=0,o=e.length,a;r<o;r++){a=t?hn(e[r],t-1,i):(i||fn)(e[r]);n.push(a)}return n}function pn(e,t){t=typeof t==="number"?t:6;return e.alt!==undefined?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function mn(e,t,i,n){var r=[];for(var o=0,a=e.length;o<a;o++){r.push(t?mn(e[o],t-1,i,n):pn(e[o],n))}if(!t&&i){r.push(r[0])}return r}function gn(e,t){return e.feature?l({},e.feature,{geometry:t}):vn(t)}function vn(e){if(e.type==="Feature"||e.type==="FeatureCollection"){return e}return{type:"Feature",properties:{},geometry:e}}var _n={toGeoJSON:function(e){return gn(this,{type:"Point",coordinates:pn(this.getLatLng(),e)})}};Qi.include(_n);rn.include(_n);tn.include(_n);an.include({toGeoJSON:function(e){var t=!Ii(this._latlngs);var i=mn(this._latlngs,t?1:0,false,e);return gn(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}});ln.include({toGeoJSON:function(e){var t=!Ii(this._latlngs),i=t&&!Ii(this._latlngs[0]);var n=mn(this._latlngs,i?2:t?1:0,true,e);if(!t){n=[n]}return gn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}});Wi.include({toMultiPoint:function(t){var i=[];this.eachLayer(function(e){i.push(e.toGeoJSON(t).geometry.coordinates)});return gn(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(n){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint"){return this.toMultiPoint(n)}var r=e==="GeometryCollection",o=[];this.eachLayer(function(e){if(e.toGeoJSON){var t=e.toGeoJSON(n);if(r){o.push(t.geometry)}else{var i=vn(t);if(i.type==="FeatureCollection"){o.push.apply(o,i.features)}else{o.push(i)}}}});if(r){return gn(this,{geometries:o,type:"GeometryCollection"})}return{type:"FeatureCollection",features:o}}});function bn(e,t){return new cn(e,t)}var yn=bn;var wn=Hi.extend({options:{opacity:1,alt:"",interactive:false,crossOrigin:false,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e;this._bounds=q(t);p(this,i)},onAdd:function(){if(!this._image){this._initImage();if(this.options.opacity<1){this._updateOpacity()}}if(this.options.interactive){ft(this._image,"leaflet-interactive");this.addInteractiveTarget(this._image)}this.getPane().appendChild(this._image);this._reset()},onRemove:function(){st(this._image);if(this.options.interactive){this.removeInteractiveTarget(this._image)}},setOpacity:function(e){this.options.opacity=e;if(this._image){this._updateOpacity()}return this},setStyle:function(e){if(e.opacity){this.setOpacity(e.opacity)}return this},bringToFront:function(){if(this._map){dt(this._image)}return this},bringToBack:function(){if(this._map){ct(this._image)}return this},setUrl:function(e){this._url=e;if(this._image){this._image.src=e}return this},setBounds:function(e){this._bounds=q(e);if(this._map){this._reset()}return this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};if(this._zoomAnimated){e.zoomanim=this._animateZoom}return e},setZIndex:function(e){this.options.zIndex=e;this._updateZIndex();return this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG";var t=this._image=e?this._url:at("img");ft(t,"leaflet-image-layer");if(this._zoomAnimated){ft(t,"leaflet-zoom-animated")}if(this.options.className){ft(t,this.options.className)}t.onselectstart=c;t.onmousemove=c;t.onload=s(this.fire,this,"load");t.onerror=s(this._overlayOnError,this,"error");if(this.options.crossOrigin||this.options.crossOrigin===""){t.crossOrigin=this.options.crossOrigin===true?"":this.options.crossOrigin}if(this.options.zIndex){this._updateZIndex()}if(e){this._url=t.src;return}t.src=this._url;t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;bt(this._image,i,t)},_reset:function(){var e=this._image,t=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();yt(e,t.min);e.style.width=i.x+"px";e.style.height=i.y+"px"},_updateOpacity:function(){gt(this._image,this.options.opacity)},_updateZIndex:function(){if(this._image&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._image.style.zIndex=this.options.zIndex}},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;if(e&&this._url!==e){this._url=e;this._image.src=e}}});var xn=function(e,t,i){return new wn(e,t,i)};var Cn=wn.extend({options:{autoplay:true,loop:true,keepAspectRatio:true},_initImage:function(){var e=this._url.tagName==="VIDEO";var t=this._image=e?this._url:at("video");ft(t,"leaflet-image-layer");if(this._zoomAnimated){ft(t,"leaflet-zoom-animated")}t.onselectstart=c;t.onmousemove=c;t.onloadeddata=s(this.fire,this,"load");if(e){var i=t.getElementsByTagName("source");var n=[];for(var r=0;r<i.length;r++){n.push(i[r].src)}this._url=i.length>0?n:[t.src];return}if(!_(this._url)){this._url=[this._url]}if(!this.options.keepAspectRatio&&t.style.hasOwnProperty("objectFit")){t.style["objectFit"]="fill"}t.autoplay=!!this.options.autoplay;t.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=at("source");a.src=this._url[o];t.appendChild(a)}}});function kn(e,t,i){return new Cn(e,t,i)}var Sn=wn.extend({_initImage:function(){var e=this._image=this._url;ft(e,"leaflet-image-layer");if(this._zoomAnimated){ft(e,"leaflet-zoom-animated")}e.onselectstart=c;e.onmousemove=c}});function Tn(e,t,i){return new Sn(e,t,i)}var Nn=Hi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){p(this,e);this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated;if(!this._container){this._initLayout()}if(e._fadeAnimated){gt(this._container,0)}clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();if(e._fadeAnimated){gt(this._container,1)}this.bringToFront()},onRemove:function(e){if(e._fadeAnimated){gt(this._container,0);this._removeTimeout=setTimeout(s(st,undefined,this._container),200)}else{st(this._container)}},getLatLng:function(){return this._latlng},setLatLng:function(e){this._latlng=U(e);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(e){this._content=e;this.update();return this},getElement:function(){return this._container},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated){e.zoomanim=this._animateZoom}return e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map){dt(this._container)}return this},bringToBack:function(){if(this._map){ct(this._container)}return this},_prepareOpen:function(e,t,i){if(!(t instanceof Hi)){i=t;t=e}if(t instanceof Vi){for(var n in e._layers){t=e._layers[n];break}}if(!i){if(t.getCenter){i=t.getCenter()}else if(t.getLatLng){i=t.getLatLng()}else{throw new Error("Unable to get source layer LatLng.")}}this._source=t;this.update();return i},_updateContent:function(){if(!this._content){return}var e=this._contentNode;var t=typeof this._content==="function"?this._content(this._source||this):this._content;if(typeof t==="string"){e.innerHTML=t}else{while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.appendChild(t)}this.fire("contentupdate")},_updatePosition:function(){if(!this._map){return}var e=this._map.latLngToLayerPoint(this._latlng),t=R(this.options.offset),i=this._getAnchor();if(this._zoomAnimated){yt(this._container,e.add(i))}else{t=t.add(e).add(i)}var n=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px";this._container.style.left=r+"px"},_getAnchor:function(){return[0,0]}});var Dn=Nn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:true,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:false,closeButton:true,autoClose:true,closeOnEscapeKey:true,className:""},openOn:function(e){e.openPopup(this);return this},onAdd:function(e){Nn.prototype.onAdd.call(this,e);e.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this},true);if(!(this._source instanceof en)){this._source.on("preclick",qt)}}},onRemove:function(e){Nn.prototype.onRemove.call(this,e);e.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this},true);if(!(this._source instanceof en)){this._source.off("preclick",qt)}}},getEvents:function(){var e=Nn.prototype.getEvents.call(this);if(this.options.closeOnClick!==undefined?this.options.closeOnClick:this._map.options.closePopupOnClick){e.preclick=this._close}if(this.options.keepInView){e.moveend=this._adjustPan}return e},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var e="leaflet-popup",t=this._container=at("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated");var i=this._wrapper=at("div",e+"-content-wrapper",t);this._contentNode=at("div",e+"-content",i);Ut(i);Ft(this._contentNode);Rt(i,"contextmenu",qt);this._tipContainer=at("div",e+"-tip-container",t);this._tip=at("div",e+"-tip",this._tipContainer);if(this.options.closeButton){var n=this._closeButton=at("a",e+"-close-button",t);n.href="#close";n.innerHTML="&#215;";Rt(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="";t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth);t.width=i+1+"px";t.whiteSpace="";t.height="";var n=e.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";if(r&&n>r){t.height=r+"px";ft(e,o)}else{ht(e,o)}this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();yt(this._container,t.add(i))},_adjustPan:function(){if(!this.options.autoPan){return}if(this._map._panAnim){this._map._panAnim.stop()}var e=this._map,t=parseInt(ot(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,n=this._containerWidth,r=new O(this._containerLeft,-i-this._containerBottom);r._add(wt(this._container));var o=e.layerPointToContainerPoint(r),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),d=e.getSize(),c=0,u=0;if(o.x+n+l.x>d.x){c=o.x+n-d.x+l.x}if(o.x-c-s.x<0){c=o.x-s.x}if(o.y+i+l.y>d.y){u=o.y+i-d.y+l.y}if(o.y-u-s.y<0){u=o.y-s.y}if(c||u){e.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(e){this._close();Wt(e)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});var Pn=function(e,t){return new Dn(e,t)};ii.mergeOptions({closePopupOnClick:true});ii.include({openPopup:function(e,t,i){if(!(e instanceof Dn)){e=new Dn(i).setContent(e)}if(t){e.setLatLng(t)}if(this.hasLayer(e)){return this}if(this._popup&&this._popup.options.autoClose){this.closePopup()}this._popup=e;return this.addLayer(e)},closePopup:function(e){if(!e||e===this._popup){e=this._popup;this._popup=null}if(e){this.removeLayer(e)}return this}});Hi.include({bindPopup:function(e,t){if(e instanceof Dn){p(e,t);this._popup=e;e._source=this}else{if(!this._popup||t){this._popup=new Dn(t,this)}this._popup.setContent(e)}if(!this._popupHandlersAdded){this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=false;this._popup=null}return this},openPopup:function(e,t){if(this._popup&&this._map){t=this._popup._prepareOpen(this,e,t);this._map.openPopup(this._popup,t)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(e){if(this._popup){if(this._popup._map){this.closePopup()}else{this.openPopup(e)}}return this},isPopupOpen:function(){return this._popup?this._popup.isOpen():false},setPopupContent:function(e){if(this._popup){this._popup.setContent(e)}return this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;if(!this._popup){return}if(!this._map){return}Wt(e);if(t instanceof en){this.openPopup(e.layer||e.target,e.latlng);return}if(this._map.hasLayer(this._popup)&&this._popup._source===t){this.closePopup()}else{this.openPopup(t,e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){if(e.originalEvent.keyCode===13){this._openPopup(e)}}});var En=Nn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:false,sticky:false,interactive:false,opacity:.9},onAdd:function(e){Nn.prototype.onAdd.call(this,e);this.setOpacity(this.options.opacity);e.fire("tooltipopen",{tooltip:this});if(this._source){this._source.fire("tooltipopen",{tooltip:this},true)}},onRemove:function(e){Nn.prototype.onRemove.call(this,e);e.fire("tooltipclose",{tooltip:this});if(this._source){this._source.fire("tooltipclose",{tooltip:this},true)}},getEvents:function(){var e=Nn.prototype.getEvents.call(this);if(ke&&!this.options.permanent){e.preclick=this._close}return e},_close:function(){if(this._map){this._map.closeTooltip(this)}},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=at("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,i=this._container,n=t.latLngToContainerPoint(t.getCenter()),r=t.layerPointToContainerPoint(e),o=this.options.direction,a=i.offsetWidth,s=i.offsetHeight,l=R(this.options.offset),d=this._getAnchor();if(o==="top"){e=e.add(R(-a/2+l.x,-s+l.y+d.y,true))}else if(o==="bottom"){e=e.subtract(R(a/2-l.x,-l.y,true))}else if(o==="center"){e=e.subtract(R(a/2+l.x,s/2-d.y+l.y,true))}else if(o==="right"||o==="auto"&&r.x<n.x){o="right";e=e.add(R(l.x+d.x,d.y-s/2+l.y,true))}else{o="left";e=e.subtract(R(a+d.x-l.x,s/2-d.y-l.y,true))}ht(i,"leaflet-tooltip-right");ht(i,"leaflet-tooltip-left");ht(i,"leaflet-tooltip-top");ht(i,"leaflet-tooltip-bottom");ft(i,"leaflet-tooltip-"+o);yt(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e;if(this._container){gt(this._container,e)}},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});var Mn=function(e,t){return new En(e,t)};ii.include({openTooltip:function(e,t,i){if(!(e instanceof En)){e=new En(i).setContent(e)}if(t){e.setLatLng(t)}if(this.hasLayer(e)){return this}return this.addLayer(e)},closeTooltip:function(e){if(e){this.removeLayer(e)}return this}});Hi.include({bindTooltip:function(e,t){if(e instanceof En){p(e,t);this._tooltip=e;e._source=this}else{if(!this._tooltip||t){this._tooltip=new En(t,this)}this._tooltip.setContent(e)}this._initTooltipInteractions();if(this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)){this.openTooltip()}return this},unbindTooltip:function(){if(this._tooltip){this._initTooltipInteractions(true);this.closeTooltip();this._tooltip=null}return this},_initTooltipInteractions:function(e){if(!e&&this._tooltipHandlersAdded){return}var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent){i.mouseover=this._openTooltip;i.mouseout=this.closeTooltip;if(this._tooltip.options.sticky){i.mousemove=this._moveTooltip}if(ke){i.click=this._openTooltip}}else{i.add=this._openTooltip}this[t](i);this._tooltipHandlersAdded=!e},openTooltip:function(e,t){if(this._tooltip&&this._map){t=this._tooltip._prepareOpen(this,e,t);this._map.openTooltip(this._tooltip,t);if(this._tooltip.options.interactive&&this._tooltip._container){ft(this._tooltip._container,"leaflet-clickable");this.addInteractiveTarget(this._tooltip._container)}}return this},closeTooltip:function(){if(this._tooltip){this._tooltip._close();if(this._tooltip.options.interactive&&this._tooltip._container){ht(this._tooltip._container,"leaflet-clickable");this.removeInteractiveTarget(this._tooltip._container)}}return this},toggleTooltip:function(e){if(this._tooltip){if(this._tooltip._map){this.closeTooltip()}else{this.openTooltip(e)}}return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){if(this._tooltip){this._tooltip.setContent(e)}return this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;if(!this._tooltip||!this._map){return}this.openTooltip(t,this._tooltip.options.sticky?e.latlng:undefined)},_moveTooltip:function(e){var t=e.latlng,i,n;if(this._tooltip.options.sticky&&e.originalEvent){i=this._map.mouseEventToContainerPoint(e.originalEvent);n=this._map.containerPointToLayerPoint(i);t=this._map.layerPointToLatLng(n)}this._tooltip.setLatLng(t)}});var In=Zi.extend({options:{iconSize:[12,12],html:false,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),i=this.options;if(i.html instanceof Element){lt(t);t.appendChild(i.html)}else{t.innerHTML=i.html!==false?i.html:""}if(i.bgPos){var n=R(i.bgPos);t.style.backgroundPosition=-n.x+"px "+-n.y+"px"}this._setIconStyles(t,"icon");return t},createShadow:function(){return null}});function On(e){return new In(e)}Zi.Default=Yi;var An=Hi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:be,updateWhenZooming:true,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,maxNativeZoom:undefined,minNativeZoom:undefined,noWrap:false,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles();st(this._container);e._removeZoomLimit(this);this._container=null;this._tileZoom=undefined},bringToFront:function(){if(this._map){dt(this._container);this._setAutoZIndex(Math.max)}return this},bringToBack:function(){if(this._map){ct(this._container);this._setAutoZIndex(Math.min)}return this},getContainer:function(){return this._container},setOpacity:function(e){this.options.opacity=e;this._updateOpacity();return this},setZIndex:function(e){this.options.zIndex=e;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove){this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)}e.move=this._onMove}if(this._zoomAnimated){e.zoomanim=this._animateZoom}return e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof O?e:new O(e,e)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(e){var t=this.getPane().children,i=-e(-Infinity,Infinity);for(var n=0,r=t.length,o;n<r;n++){o=t[n].style.zIndex;if(t[n]!==this._container&&o){i=e(i,+o)}}if(isFinite(i)){this.options.zIndex=i+e(-1,1);this._updateZIndex()}},_updateOpacity:function(){if(!this._map){return}if(te){return}gt(this._container,this.options.opacity);var e=+new Date,t=false,i=false;for(var n in this._tiles){var r=this._tiles[n];if(!r.current||!r.loaded){continue}var o=Math.min(1,(e-r.loaded)/200);gt(r.el,o);if(o<1){t=true}else{if(r.active){i=true}else{this._onOpaqueTile(r)}r.active=true}}if(i&&!this._noPrune){this._pruneTiles()}if(t){N(this._fadeFrame);this._fadeFrame=T(this._updateOpacity,this)}},_onOpaqueTile:c,_initContainer:function(){if(this._container){return}this._container=at("div","leaflet-layer "+(this.options.className||""));this._updateZIndex();if(this.options.opacity<1){this._updateOpacity()}this.getPane().appendChild(this._container)},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e===undefined){return undefined}for(var i in this._levels){if(this._levels[i].el.children.length||i===e){this._levels[i].el.style.zIndex=t-Math.abs(e-i);this._onUpdateLevel(i)}else{st(this._levels[i].el);this._removeTilesAtZoom(i);this._onRemoveLevel(i);delete this._levels[i]}}var n=this._levels[e],r=this._map;if(!n){n=this._levels[e]={};n.el=at("div","leaflet-tile-container leaflet-zoom-animated",this._container);n.el.style.zIndex=t;n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round();n.zoom=e;this._setZoomTransform(n,r.getCenter(),r.getZoom());c(n.el.offsetWidth);this._onCreateLevel(n)}this._level=n;return n},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(!this._map){return}var e,t;var i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles){t=this._tiles[e];t.retain=t.current}for(e in this._tiles){t=this._tiles[e];if(t.current&&!t.active){var n=t.coords;if(!this._retainParent(n.x,n.y,n.z,n.z-5)){this._retainChildren(n.x,n.y,n.z,n.z+2)}}}for(e in this._tiles){if(!this._tiles[e].retain){this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles){if(this._tiles[t].coords.z!==e){continue}this._removeTile(t)}},_removeAllTiles:function(){for(var e in this._tiles){this._removeTile(e)}},_invalidateAll:function(){for(var e in this._levels){st(this._levels[e].el);this._onRemoveLevel(e);delete this._levels[e]}this._removeAllTiles();this._tileZoom=undefined},_retainParent:function(e,t,i,n){var r=Math.floor(e/2),o=Math.floor(t/2),a=i-1,s=new O(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),d=this._tiles[l];if(d&&d.active){d.retain=true;return true}else if(d&&d.loaded){d.retain=true}if(a>n){return this._retainParent(r,o,a,n)}return false},_retainChildren:function(e,t,i,n){for(var r=2*e;r<2*e+2;r++){for(var o=2*t;o<2*t+2;o++){var a=new O(r,o);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];if(l&&l.active){l.retain=true;continue}else if(l&&l.loaded){l.retain=true}if(i+1<n){this._retainChildren(r,o,i+1,n)}}}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,true,e.noUpdate)},_clampZoom:function(e){var t=this.options;if(undefined!==t.minNativeZoom&&e<t.minNativeZoom){return t.minNativeZoom}if(undefined!==t.maxNativeZoom&&t.maxNativeZoom<e){return t.maxNativeZoom}return e},_setView:function(e,t,i,n){var r=this._clampZoom(Math.round(t));if(this.options.maxZoom!==undefined&&r>this.options.maxZoom||this.options.minZoom!==undefined&&r<this.options.minZoom){r=undefined}var o=this.options.updateWhenZooming&&r!==this._tileZoom;if(!n||o){this._tileZoom=r;if(this._abortLoading){this._abortLoading()}this._updateLevels();this._resetGrid();if(r!==undefined){this._update(e)}if(!i){this._pruneTiles()}this._noPrune=!!i}this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels){this._setZoomTransform(this._levels[i],e,t)}},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),r=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();if(_e){bt(e.el,r,n)}else{yt(e.el,r)}},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom;var r=this._map.getPixelWorldBounds(this._tileZoom);if(r){this._globalTileRange=this._pxBoundsToTileRange(r)}this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)];this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom){return}this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),n=t.getZoomScale(i,this._tileZoom),r=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(n*2);return new z(r.subtract(o),r.add(o))},_update:function(e){var t=this._map;if(!t){return}var i=this._clampZoom(t.getZoom());if(e===undefined){e=t.getCenter()}if(this._tileZoom===undefined){return}var n=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(n),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new z(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y))){throw new Error("Attempted to load an infinite number of tiles")}for(var d in this._tiles){var c=this._tiles[d].coords;if(c.z!==this._tileZoom||!l.contains(new O(c.x,c.y))){this._tiles[d].current=false}}if(Math.abs(i-this._tileZoom)>1){this._setView(e,i);return}for(var u=r.min.y;u<=r.max.y;u++){for(var f=r.min.x;f<=r.max.x;f++){var h=new O(f,u);h.z=this._tileZoom;if(!this._isValidTile(h)){continue}var p=this._tiles[this._tileCoordsToKey(h)];if(p){p.current=true}else{a.push(h)}}}a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)});if(a.length!==0){if(!this._loading){this._loading=true;this.fire("loading")}var m=document.createDocumentFragment();for(f=0;f<a.length;f++){this._addTile(a[f],m)}this._level.el.appendChild(m)}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y)){return false}}if(!this.options.bounds){return true}var n=this._tileCoordsToBounds(e);return q(this.options.bounds).overlaps(n)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),r=n.add(i),o=t.unproject(n,e.z),a=t.unproject(r,e.z);return[o,a]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new B(t[0],t[1]);if(!this.options.noWrap){i=this._map.wrapLatLngBounds(i)}return i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new O(+t[0],+t[1]);i.z=+t[2];return i},_removeTile:function(e){var t=this._tiles[e];if(!t){return}st(t.el);delete this._tiles[e];this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)})},_initTile:function(e){ft(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px";e.style.height=t.y+"px";e.onselectstart=c;e.onmousemove=c;if(te&&this.options.opacity<1){gt(e,this.options.opacity)}if(re&&!oe){e.style.WebkitBackfaceVisibility="hidden"}},_addTile:function(e,t){var i=this._getTilePos(e),n=this._tileCoordsToKey(e);var r=this.createTile(this._wrapCoords(e),s(this._tileReady,this,e));this._initTile(r);if(this.createTile.length<2){T(s(this._tileReady,this,e,null,r))}yt(r,i);this._tiles[n]={el:r,coords:e,current:true};t.appendChild(r);this.fire("tileloadstart",{tile:r,coords:e})},_tileReady:function(e,t,i){if(t){this.fire("tileerror",{error:t,tile:i,coords:e})}var n=this._tileCoordsToKey(e);i=this._tiles[n];if(!i){return}i.loaded=+new Date;if(this._map._fadeAnimated){gt(i.el,0);N(this._fadeFrame);this._fadeFrame=T(this._updateOpacity,this)}else{i.active=true;this._pruneTiles()}if(!t){ft(i.el,"leaflet-tile-loaded");this.fire("tileload",{tile:i.el,coords:e})}if(this._noTilesToLoad()){this._loading=false;this.fire("load");if(te||!this._map._fadeAnimated){T(this._pruneTiles,this)}else{setTimeout(s(this._pruneTiles,this),250)}}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new O(this._wrapX?a(e.x,this._wrapX):e.x,this._wrapY?a(e.y,this._wrapY):e.y);t.z=e.z;return t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new z(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles){if(!this._tiles[e].loaded){return false}}return true}});function Rn(e){return new An(e)}var Ln=An.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:false,zoomReverse:false,detectRetina:false,crossOrigin:false},initialize:function(e,t){this._url=e;t=p(this,t);if(t.detectRetina&&Ne&&t.maxZoom>0){t.tileSize=Math.floor(t.tileSize/2);if(!t.zoomReverse){t.zoomOffset++;t.maxZoom--}else{t.zoomOffset--;t.minZoom++}t.minZoom=Math.max(0,t.minZoom)}if(typeof t.subdomains==="string"){t.subdomains=t.subdomains.split("")}if(!re){this.on("tileunload",this._onTileRemove)}},setUrl:function(e,t){if(this._url===e&&t===undefined){t=true}this._url=e;if(!t){this.redraw()}return this},createTile:function(e,t){var i=document.createElement("img");Rt(i,"load",s(this._tileOnLoad,this,t,i));Rt(i,"error",s(this._tileOnError,this,t,i));if(this.options.crossOrigin||this.options.crossOrigin===""){i.crossOrigin=this.options.crossOrigin===true?"":this.options.crossOrigin}i.alt="";i.setAttribute("role","presentation");i.src=this.getTileUrl(e);return i},getTileUrl:function(e){var t={r:Ne?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;if(this.options.tms){t["y"]=i}t["-y"]=i}return v(this._url,l(t,this.options))},_tileOnLoad:function(e,t){if(te){setTimeout(s(e,this,null,t),0)}else{e(null,t)}},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;if(n&&t.getAttribute("src")!==n){t.src=n}e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;if(i){e=t-e}return e+n},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles){if(this._tiles[e].coords.z!==this._tileZoom){t=this._tiles[e].el;t.onload=c;t.onerror=c;if(!t.complete){t.src=y;st(t);delete this._tiles[e]}}}},_removeTile:function(e){var t=this._tiles[e];if(!t){return}if(!se){t.el.setAttribute("src",y)}return An.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(!this._map||i&&i.getAttribute("src")===y){return}return An.prototype._tileReady.call(this,e,t,i)}});function zn(e,t){return new Ln(e,t)}var jn=Ln.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:false,version:"1.1.1"},options:{crs:null,uppercase:false},initialize:function(e,t){this._url=e;var i=l({},this.defaultWmsParams);for(var n in t){if(!(n in this.options)){i[n]=t[n]}}t=p(this,t);var r=t.detectRetina&&Ne?2:1;var o=this.getTileSize();i.width=o.x*r;i.height=o.y*r;this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code;Ln.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,n=j(i.project(t[0]),i.project(t[1])),r=n.min,o=n.max,a=(this._wmsVersion>=1.3&&this._crs===Fi?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=Ln.prototype.getTileUrl.call(this,e);return s+m(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){l(this.wmsParams,e);if(!t){this.redraw()}return this}});function Bn(e,t){return new jn(e,t)}Ln.WMS=jn;zn.wms=Bn;var qn=Hi.extend({options:{padding:.1,tolerance:0},initialize:function(e){p(this,e);d(this);this._layers=this._layers||{}},onAdd:function(){if(!this._container){this._initContainer();if(this._zoomAnimated){ft(this._container,"leaflet-zoom-animated")}}this.getPane().appendChild(this._container);this._update();this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this);this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};if(this._zoomAnimated){e.zoomanim=this._onAnimZoom}return e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=wt(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),a=this._map.project(e,t),s=a.subtract(o),l=r.multiplyBy(-i).add(n).add(r).subtract(s);if(_e){bt(this._container,l,i)}else{yt(this._container,l)}},_reset:function(){this._update();this._updateTransform(this._center,this._zoom);for(var e in this._layers){this._layers[e]._reset()}},_onZoomEnd:function(){for(var e in this._layers){this._layers[e]._project()}},_updatePaths:function(){for(var e in this._layers){this._layers[e]._update()}},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new z(i,i.add(t.multiplyBy(1+e*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}});var Fn=qn.extend({getEvents:function(){var e=qn.prototype.getEvents.call(this);e.viewprereset=this._onViewPreReset;return e},_onViewPreReset:function(){this._postponeUpdatePaths=true},onAdd:function(){qn.prototype.onAdd.call(this);this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Rt(e,"mousemove",r(this._onMouseMove,32,this),this);Rt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this);Rt(e,"mouseout",this._handleMouseOut,this);this._ctx=e.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest);delete this._ctx;st(this._container);zt(this._container);delete this._container},_updatePaths:function(){if(this._postponeUpdatePaths){return}var e;this._redrawBounds=null;for(var t in this._layers){e=this._layers[t];e._update()}this._redraw()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}qn.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),n=Ne?2:1;yt(t,e.min);t.width=n*i.x;t.height=n*i.y;t.style.width=i.x+"px";t.style.height=i.y+"px";if(Ne){this._ctx.scale(2,2)}this._ctx.translate(-e.min.x,-e.min.y);this.fire("update")},_reset:function(){qn.prototype._reset.call(this);if(this._postponeUpdatePaths){this._postponeUpdatePaths=false;this._updatePaths()}},_initPath:function(e){this._updateDashArray(e);this._layers[d(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};if(this._drawLast){this._drawLast.next=t}this._drawLast=t;this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order;var i=t.next;var n=t.prev;if(i){i.prev=n}else{this._drawLast=n}if(n){n.next=i}else{this._drawFirst=i}delete e._order;delete this._layers[d(e)];this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e);e._project();e._update();this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e);this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray==="string"){var t=e.options.dashArray.split(/[, ]+/),i=[],n,r;for(r=0;r<t.length;r++){n=Number(t[r]);if(isNaN(n)){return}i.push(n)}e.options._dashArray=i}else{e.options._dashArray=e.options.dashArray}},_requestRedraw:function(e){if(!this._map){return}this._extendRedrawBounds(e);this._redrawRequest=this._redrawRequest||T(this._redraw,this)},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z;this._redrawBounds.extend(e._pxBounds.min.subtract([t,t]));this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null;if(this._redrawBounds){this._redrawBounds.min._floor();this._redrawBounds.max._ceil()}this._clear();this._draw();this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else{this._ctx.clearRect(0,0,this._container.width,this._container.height)}},_draw:function(){var e,t=this._redrawBounds;this._ctx.save();if(t){var i=t.getSize();this._ctx.beginPath();this._ctx.rect(t.min.x,t.min.y,i.x,i.y);this._ctx.clip()}this._drawing=true;for(var n=this._drawFirst;n;n=n.next){e=n.layer;if(!t||e._pxBounds&&e._pxBounds.intersects(t)){e._updatePath()}}this._drawing=false;this._ctx.restore()},_updatePoly:function(e,t){if(!this._drawing){return}var i,n,r,o,a=e._parts,s=a.length,l=this._ctx;if(!s){return}l.beginPath();for(i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++){o=a[i][n];l[n?"lineTo":"moveTo"](o.x,o.y)}if(t){l.closePath()}}this._fillStroke(l,e)},_updateCircle:function(e){if(!this._drawing||e._empty()){return}var t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||n)/n;if(r!==1){i.save();i.scale(1,r)}i.beginPath();i.arc(t.x,t.y/r,n,0,Math.PI*2,false);if(r!==1){i.restore()}this._fillStroke(i,e)},_fillStroke:function(e,t){var i=t.options;if(i.fill){e.globalAlpha=i.fillOpacity;e.fillStyle=i.fillColor||i.color;e.fill(i.fillRule||"evenodd")}if(i.stroke&&i.weight!==0){if(e.setLineDash){e.setLineDash(t.options&&t.options._dashArray||[])}e.globalAlpha=i.opacity;e.lineWidth=i.weight;e.strokeStyle=i.color;e.lineCap=i.lineCap;e.lineJoin=i.lineJoin;e.stroke()}},_onClick:function(e){var t=this._map.mouseEventToLayerPoint(e),i,n;for(var r=this._drawFirst;r;r=r.next){i=r.layer;if(i.options.interactive&&i._containsPoint(t)&&!this._map._draggableMoved(i)){n=i}}if(n){Kt(e);this._fireEvent([n],e)}},_onMouseMove:function(e){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom){return}var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)},_handleMouseOut:function(e){var t=this._hoveredLayer;if(t){ht(this._container,"leaflet-interactive");this._fireEvent([t],e,"mouseout");this._hoveredLayer=null}},_handleMouseHover:function(e,t){var i,n;for(var r=this._drawFirst;r;r=r.next){i=r.layer;if(i.options.interactive&&i._containsPoint(t)){n=i}}if(n!==this._hoveredLayer){this._handleMouseOut(e);if(n){ft(this._container,"leaflet-interactive");this._fireEvent([n],e,"mouseover");this._hoveredLayer=n}}if(this._hoveredLayer){this._fireEvent([this._hoveredLayer],e)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(!t){return}var i=t.next;var n=t.prev;if(i){i.prev=n}else{return}if(n){n.next=i}else if(i){this._drawFirst=i}t.prev=this._drawLast;this._drawLast.next=t;t.next=null;this._drawLast=t;this._requestRedraw(e)},_bringToBack:function(e){var t=e._order;if(!t){return}var i=t.next;var n=t.prev;if(n){n.next=i}else{return}if(i){i.prev=n}else if(n){this._drawLast=n}t.prev=null;t.next=this._drawFirst;this._drawFirst.prev=t;this._drawFirst=t;this._requestRedraw(e)}});function Un(e){return De?new Fn(e):null}var Hn=function(){try{document.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}();var Wn={_initContainer:function(){this._container=at("div","leaflet-vml-container")},_update:function(){if(this._map._animatingZoom){return}qn.prototype._update.call(this);this.fire("update")},_initPath:function(e){var t=e._container=Hn("shape");ft(t,"leaflet-vml-shape "+(this.options.className||""));t.coordsize="1 1";e._path=Hn("path");t.appendChild(e._path);this._updateStyle(e);this._layers[d(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t);if(e.options.interactive){e.addInteractiveTarget(t)}},_removePath:function(e){var t=e._container;st(t);e.removeInteractiveTarget(t);delete this._layers[d(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,r=e._container;r.stroked=!!n.stroke;r.filled=!!n.fill;if(n.stroke){if(!t){t=e._stroke=Hn("stroke")}r.appendChild(t);t.weight=n.weight+"px";t.color=n.color;t.opacity=n.opacity;if(n.dashArray){t.dashStyle=_(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," ")}else{t.dashStyle=""}t.endcap=n.lineCap.replace("butt","flat");t.joinstyle=n.lineJoin}else if(t){r.removeChild(t);e._stroke=null}if(n.fill){if(!i){i=e._fill=Hn("fill")}r.appendChild(i);i.color=n.fillColor||n.color;i.opacity=n.fillOpacity}else if(i){r.removeChild(i);e._fill=null}},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){dt(e._container)},_bringToBack:function(e){ct(e._container)}};var $n=Ee?Hn:J;var Vn=qn.extend({getEvents:function(){var e=qn.prototype.getEvents.call(this);e.zoomstart=this._onZoomStart;return e},_initContainer:function(){this._container=$n("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=$n("g");this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container);zt(this._container);delete this._container;delete this._rootGroup;delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}qn.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;if(!this._svgSize||!this._svgSize.equals(t)){this._svgSize=t;i.setAttribute("width",t.x);i.setAttribute("height",t.y)}yt(i,e.min);i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" "));this.fire("update")},_initPath:function(e){var t=e._path=$n("path");if(e.options.className){ft(t,e.options.className)}if(e.options.interactive){ft(t,"leaflet-interactive")}this._updateStyle(e);this._layers[d(e)]=e},_addPath:function(e){if(!this._rootGroup){this._initContainer()}this._rootGroup.appendChild(e._path);e.addInteractiveTarget(e._path)},_removePath:function(e){st(e._path);e.removeInteractiveTarget(e._path);delete this._layers[d(e)]},_updatePath:function(e){e._project();e._update()},_updateStyle:function(e){var t=e._path,i=e.options;if(!t){return}if(i.stroke){t.setAttribute("stroke",i.color);t.setAttribute("stroke-opacity",i.opacity);t.setAttribute("stroke-width",i.weight);t.setAttribute("stroke-linecap",i.lineCap);t.setAttribute("stroke-linejoin",i.lineJoin);if(i.dashArray){t.setAttribute("stroke-dasharray",i.dashArray)}else{t.removeAttribute("stroke-dasharray")}if(i.dashOffset){t.setAttribute("stroke-dashoffset",i.dashOffset)}else{t.removeAttribute("stroke-dashoffset")}}else{t.setAttribute("stroke","none")}if(i.fill){t.setAttribute("fill",i.fillColor||i.color);t.setAttribute("fill-opacity",i.fillOpacity);t.setAttribute("fill-rule",i.fillRule||"evenodd")}else{t.setAttribute("fill","none")}},_updatePoly:function(e,t){this._setPath(e,Q(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n=Math.max(Math.round(e._radiusY),1)||i,r="a"+i+","+n+" 0 1,0 ";var o=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+r+i*2+",0 "+r+-i*2+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){dt(e._path)},_bringToBack:function(e){ct(e._path)}});if(Ee){Vn.include(Wn)}function Gn(e){return Pe||Ee?new Vn(e):null}ii.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;if(!t){t=this._renderer=this._createRenderer()}if(!this.hasLayer(t)){this.addLayer(t)}return t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===undefined){return false}var t=this._paneRenderers[e];if(t===undefined){t=this._createRenderer({pane:e});this._paneRenderers[e]=t}return t},_createRenderer:function(e){return this.options.preferCanvas&&Un(e)||Gn(e)}});var Zn=ln.extend({initialize:function(e,t){ln.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){e=q(e);return[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Kn(e,t){return new Zn(e,t)}Vn.create=$n;Vn.pointsToPath=Q;cn.geometryToLayer=un;cn.coordsToLatLng=fn;cn.coordsToLatLngs=hn;cn.latLngToCoords=pn;cn.latLngsToCoords=mn;cn.getFeature=gn;cn.asFeature=vn;ii.mergeOptions({boxZoom:true});var Yn=pi.extend({initialize:function(e){this._map=e;this._container=e._container;this._pane=e._panes.overlayPane;this._resetStateTimeout=0;e.on("unload",this._destroy,this)},addHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane);delete this._pane},_resetState:function(){this._resetStateTimeout=0;this._moved=false},_clearDeferredResetState:function(){if(this._resetStateTimeout!==0){clearTimeout(this._resetStateTimeout);this._resetStateTimeout=0}},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1){return false}this._clearDeferredResetState();this._resetState();xt();Tt();this._startPoint=this._map.mouseEventToContainerPoint(e);Rt(document,{contextmenu:Wt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){if(!this._moved){this._moved=true;this._box=at("div","leaflet-zoom-box",this._container);ft(this._container,"leaflet-crosshair");this._map.fire("boxzoomstart")}this._point=this._map.mouseEventToContainerPoint(e);var t=new z(this._point,this._startPoint),i=t.getSize();yt(this._box,t.min);this._box.style.width=i.x+"px";this._box.style.height=i.y+"px"},_finish:function(){if(this._moved){st(this._box);ht(this._container,"leaflet-crosshair")}Ct();Nt();zt(document,{contextmenu:Wt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(e.which!==1&&e.button!==1){return}this._finish();if(!this._moved){return}this._clearDeferredResetState();this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var t=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})},_onKeyDown:function(e){if(e.keyCode===27){this._finish()}}});ii.addInitHook("addHandler","boxZoom",Yn);ii.mergeOptions({doubleClickZoom:true});var Jn=pi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,r=e.originalEvent.shiftKey?i-n:i+n;if(t.options.doubleClickZoom==="center"){t.setZoom(r)}else{t.setZoomAround(e.containerPoint,r)}}});ii.addInitHook("addHandler","doubleClickZoom",Jn);ii.mergeOptions({dragging:true,inertia:!oe,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:false,maxBoundsViscosity:0});var Qn=pi.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new bi(e._mapPane,e._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);if(e.options.worldCopyJump){this._draggable.on("predrag",this._onPreDragWrap,this);e.on("zoomend",this._onZoomEnd,this);e.whenReady(this._onZoomEnd,this)}}ft(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab");ht(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;e._stop();if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=q(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}e.fire("movestart").fire("dragstart");if(e.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i);this._times.push(t);this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){while(this._positions.length>1&&e-this._times[0]>50){this._positions.shift();this._times.shift()}},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit){return}var e=this._draggable._newPos.subtract(this._draggable._startPos);var t=this._offsetLimit;if(e.x<t.min.x){e.x=this._viscousLimit(e.x,t.min.x)}if(e.y<t.min.y){e.y=this._viscousLimit(e.y,t.min.y)}if(e.x>t.max.x){e.x=this._viscousLimit(e.x,t.max.x)}if(e.y>t.max.y){e.y=this._viscousLimit(e.y,t.max.y)}this._draggable._newPos=this._draggable._startPos.add(e)},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-t+i)%e+t-i,o=(n+t+i)%e-t-i,a=Math.abs(r+i)<Math.abs(o+i)?r:o;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,i=t.options,n=!i.inertia||this._times.length<2;t.fire("dragend",e);if(n){t.fire("moveend")}else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=r.multiplyBy(a/o),l=s.distanceTo([0,0]),d=Math.min(i.inertiaMaxSpeed,l),c=s.multiplyBy(d/l),u=d/(i.inertiaDeceleration*a),f=c.multiplyBy(-u/2).round();if(!f.x&&!f.y){t.fire("moveend")}else{f=t._limitOffset(f,t.options.maxBounds);T(function(){t.panBy(f,{duration:u,easeLinearity:a,noMoveStart:true,animate:true})})}}}});ii.addInitHook("addHandler","dragging",Qn);ii.mergeOptions({keyboard:true,keyboardPanDelta:80});var Xn=pi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e;this._setPanDelta(e.options.keyboardPanDelta);this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;if(e.tabIndex<=0){e.tabIndex="0"}Rt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused){return}var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,n=e.scrollLeft||t.scrollLeft;this._map._container.focus();window.scrollTo(n,i)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},i=this.keyCodes,n,r;for(n=0,r=i.left.length;n<r;n++){t[i.left[n]]=[-1*e,0]}for(n=0,r=i.right.length;n<r;n++){t[i.right[n]]=[e,0]}for(n=0,r=i.down.length;n<r;n++){t[i.down[n]]=[0,e]}for(n=0,r=i.up.length;n<r;n++){t[i.up[n]]=[0,-1*e]}},_setZoomDelta:function(e){var t=this._zoomKeys={},i=this.keyCodes,n,r;for(n=0,r=i.zoomIn.length;n<r;n++){t[i.zoomIn[n]]=e}for(n=0,r=i.zoomOut.length;n<r;n++){t[i.zoomOut[n]]=-e}},_addHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(e.altKey||e.ctrlKey||e.metaKey){return}var t=e.keyCode,i=this._map,n;if(t in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress){n=this._panKeys[t];if(e.shiftKey){n=R(n).multiplyBy(3)}i.panBy(n);if(i.options.maxBounds){i.panInsideBounds(i.options.maxBounds)}}}else if(t in this._zoomKeys){i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t])}else if(t===27&&i._popup&&i._popup.options.closeOnEscapeKey){i.closePopup()}else{return}Wt(e)}});ii.addInitHook("addHandler","keyboard",Xn);ii.mergeOptions({scrollWheelZoom:true,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var er=pi.extend({addHooks:function(){Rt(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){zt(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Gt(e);var i=this._map.options.wheelDebounceTime;this._delta+=t;this._lastMousePos=this._map.mouseEventToContainerPoint(e);if(!this._startTime){this._startTime=+new Date}var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(s(this._performZoom,this),n);Wt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(r/i)*i:r,a=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0;this._startTime=null;if(!a){return}if(e.options.scrollWheelZoom==="center"){e.setZoom(t+a)}else{e.setZoomAround(this._lastMousePos,t+a)}}});ii.addInitHook("addHandler","scrollWheelZoom",er);ii.mergeOptions({tap:true,tapTolerance:15});var tr=pi.extend({addHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(!e.touches){return}Ht(e);this._fireClick=true;if(e.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return}var t=e.touches[0],i=t.target;this._startPos=this._newPos=new O(t.clientX,t.clientY);if(i.tagName&&i.tagName.toLowerCase()==="a"){ft(i,"leaflet-active")}this._holdTimeout=setTimeout(s(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",t)}},this),1e3);this._simulateEvent("mousedown",t);Rt(document,{touchmove:this._onMove,touchend:this._onUp},this)},_onUp:function(e){clearTimeout(this._holdTimeout);zt(document,{touchmove:this._onMove,touchend:this._onUp},this);if(this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],i=t.target;if(i&&i.tagName&&i.tagName.toLowerCase()==="a"){ht(i,"leaflet-active")}this._simulateEvent("mouseup",t);if(this._isTapValid()){this._simulateEvent("click",t)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new O(t.clientX,t.clientY);this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var i=document.createEvent("MouseEvents");i._simulated=true;t.target._simulatedClick=true;i.initMouseEvent(e,true,true,window,1,t.screenX,t.screenY,t.clientX,t.clientY,false,false,false,false,0,null);t.target.dispatchEvent(i)}});if(ke&&!Ce){ii.addInitHook("addHandler","tap",tr)}ii.mergeOptions({touchZoom:ke&&!oe,bounceAtZoomLimits:true});var ir=pi.extend({addHooks:function(){ft(this._map._container,"leaflet-touch-zoom");Rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom");zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming){return}var i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2);this._startLatLng=t.containerPointToLatLng(this._centerPoint);if(t.options.touchZoom!=="center"){this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))}this._startDist=i.distanceTo(n);this._startZoom=t.getZoom();this._moved=false;this._zooming=true;t._stop();Rt(document,"touchmove",this._onTouchMove,this);Rt(document,"touchend",this._onTouchEnd,this);Ht(e)},_onTouchMove:function(e){if(!e.touches||e.touches.length!==2||!this._zooming){return}var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),r=i.distanceTo(n)/this._startDist;this._zoom=t.getScaleZoom(r,this._startZoom);if(!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&r<1||this._zoom>t.getMaxZoom()&&r>1)){this._zoom=t._limitZoom(this._zoom)}if(t.options.touchZoom==="center"){this._center=this._startLatLng;if(r===1){return}}else{var o=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(r===1&&o.x===0&&o.y===0){return}this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}if(!this._moved){t._moveStart(true,false);this._moved=true}N(this._animRequest);var a=s(t._move,t,this._center,this._zoom,{pinch:true,round:false});this._animRequest=T(a,this,true);Ht(e)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}this._zooming=false;N(this._animRequest);zt(document,"touchmove",this._onTouchMove);zt(document,"touchend",this._onTouchEnd);if(this._map.options.zoomAnimation){this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),true,this._map.options.zoomSnap)}else{this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}});ii.addInitHook("addHandler","touchZoom",ir);ii.BoxZoom=Yn;ii.DoubleClickZoom=Jn;ii.Drag=Qn;ii.Keyboard=Xn;ii.ScrollWheelZoom=er;ii.Tap=tr;ii.TouchZoom=ir;Object.freeze=i;e.version=t;e.Control=ri;e.control=oi;e.Browser=Ie;e.Evented=I;e.Mixin=mi;e.Util=D;e.Class=P;e.Handler=pi;e.extend=l;e.bind=s;e.stamp=d;e.setOptions=p;e.DomEvent=ei;e.DomUtil=At;e.PosAnimation=ti;e.Draggable=bi;e.LineUtil=Ai;e.PolyUtil=Li;e.Point=O;e.point=R;e.Bounds=z;e.bounds=j;e.Transformation=G;e.transformation=Z;e.Projection=Bi;e.LatLng=F;e.latLng=U;e.LatLngBounds=B;e.latLngBounds=q;e.CRS=H;e.GeoJSON=cn;e.geoJSON=bn;e.geoJson=yn;e.Layer=Hi;e.LayerGroup=Wi;e.layerGroup=$i;e.FeatureGroup=Vi;e.featureGroup=Gi;e.ImageOverlay=wn;e.imageOverlay=xn;e.VideoOverlay=Cn;e.videoOverlay=kn;e.SVGOverlay=Sn;e.svgOverlay=Tn;e.DivOverlay=Nn;e.Popup=Dn;e.popup=Pn;e.Tooltip=En;e.tooltip=Mn;e.Icon=Zi;e.icon=Ki;e.DivIcon=In;e.divIcon=On;e.Marker=Qi;e.marker=Xi;e.TileLayer=Ln;e.tileLayer=zn;e.GridLayer=An;e.gridLayer=Rn;e.SVG=Vn;e.svg=Gn;e.Renderer=qn;e.Canvas=Fn;e.canvas=Un;e.Path=en;e.CircleMarker=tn;e.circleMarker=nn;e.Circle=rn;e.circle=on;e.Polyline=an;e.polyline=sn;e.Polygon=ln;e.polygon=dn;e.Rectangle=Zn;e.rectangle=Kn;e.Map=ii;e.map=ni;var nr=window.L;e.noConflict=function(){window.L=nr;return this};window.L=e})},function(e,o,t){"use strict";(function(n){Object.defineProperty(o,"__esModule",{value:true});o.default=void 0;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function e(e,t,i){if(t)r(e.prototype,t);if(i)r(e,i);return e}var t=function(){function t(e){i(this,t);this.historyList=n.sortBy(e,function(e){return e.start_time});this.onAdd(function(){})}e(t,[{key:"length",value:function e(){return this.historyList.length}},{key:"add",value:function e(t){var i=n.sortedIndex(this.historyList,t,function(e){return e.start_time});this.historyList.splice(i,0,t);this.onAddHandler(t)}},{key:"reset",value:function e(){this.historyList=[];this.onResetHandler(this.historyList)}},{key:"onAdd",value:function e(t){this.onAddHandler=t}},{key:"onReset",value:function e(t){this.onResetHandler=t}}]);return t}();o.default=t}).call(this,t(1))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(i(356));var o=i(357);var a=n(i(358));var s=n(i(2));var l=n(i(0));function n(e){return e&&e.__esModule?e:{default:e}}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){d(i,true).forEach(function(e){u(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{d(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function u(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,i){if(t)h(e.prototype,t);if(i)h(e,i);return e}var m=function(){function i(e,t){f(this,i);this.parentNode=e;this.histCollection=t;this.editorPref={};this.onCopyToEditorHandler=function(){};this.histCollection.onAdd(this.onAddEntry.bind(this));this.histCollection.onReset(this.onResetEntries.bind(this))}p(i,[{key:"focus",value:function e(){if(this.queryHistEntries){this.queryHistEntries.focus()}}},{key:"onAddEntry",value:function e(t){if(this.histCollection.length()==1){this.render()}else if(this.queryHistEntries){this.queryHistEntries.addEntry(t)}}},{key:"onResetEntries",value:function e(){this.isRendered=false;this.queryHistEntries=null;this.queryHistDetails=null;this.render()}},{key:"onCopyToEditorClick",value:function e(t){this.onCopyToEditorHandler=t;if(this.queryHistDetails){this.queryHistDetails.onCopyToEditorClick(this.onCopyToEditorHandler)}}},{key:"setEditorPref",value:function e(t){this.editorPref=c({},this.editorPref,{},t);if(this.queryHistDetails){this.queryHistDetails.setEditorPref(this.editorPref)}}},{key:"render",value:function e(){var t=this;if(this.histCollection.length()==0){this.parentNode.empty().removeClass("d-flex").append("<div class='alert alert-info pg-panel-message'>".concat((0,s.default)("No history found"),"</div>"))}else{this.parentNode.empty().addClass("d-flex");var i=(0,l.default)("<div><div>").appendTo(this.parentNode);var n=(0,l.default)("<div><div>").appendTo(this.parentNode);(0,a.default)([i[0],n[0]],{gutterSize:1,cursor:"ew-resize"});this.queryHistDetails=new r.default(n);this.queryHistDetails.setEditorPref(this.editorPref);this.queryHistDetails.onCopyToEditorClick(this.onCopyToEditorHandler);this.queryHistDetails.render();this.queryHistEntries=new o.QueryHistoryEntries(i);this.queryHistEntries.onSelectedChange(function(e){t.queryHistDetails.setEntry(e)}.bind(this));this.queryHistEntries.render();this.histCollection.historyList.map(function(e){t.queryHistEntries.addEntry(e)})}}}]);return i}();t.default=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=l(i(23));var r=l(i(167));var o=l(i(2));var a=l(i(0));var s=l(i(1));function l(e){return e&&e.__esModule?e:{default:e}}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){d(i,true).forEach(function(e){u(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{d(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function u(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,i){if(t)h(e.prototype,t);if(i)h(e,i);return e}var m=function(){function t(e){f(this,t);this.parentNode=e;this.isCopied=false;this.timeout=null;this.isRendered=false;this.sqlFontSize=null;this.onCopyToEditorHandler=function(){};this.editorPref={sql_font_size:"1em",copy_to_editor:true}}p(t,[{key:"setEntry",value:function e(t){this.entry=t;if(this.isRendered){this.selectiveRender()}else{this.render()}}},{key:"setEditorPref",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.editorPref=c({},this.editorPref,{},t);if(this.query_codemirror&&!s.default.isUndefined(t.sql_font_size)){(0,a.default)(this.query_codemirror.getWrapperElement()).css("font-size",this.editorPref.sql_font_size);this.query_codemirror.refresh()}if(this.$copyToEditor&&!s.default.isUndefined(t.copy_to_editor)){if(t.copy_to_editor){this.$copyToEditor.removeClass("d-none")}else{this.$copyToEditor.addClass("d-none")}}}},{key:"parseErrorMessage",value:function e(t){return t.match(/ERROR:\s*([^\n\r]*)/i)?t.match(/ERROR:\s*([^\n\r]*)/i)[1]:t}},{key:"formatDate",value:function e(t){return t.toLocaleDateString()+" "+t.toLocaleTimeString()}},{key:"copyAllHandler",value:function e(){var t=this;r.default.copyTextToClipboard(this.entry.query);this.clearPreviousTimeout();this.updateCopyButton(true);this.timeout=setTimeout(function(){t.updateCopyButton(false)},1500)}},{key:"onCopyToEditorClick",value:function e(t){this.onCopyToEditorHandler=t}},{key:"clearPreviousTimeout",value:function e(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}}},{key:"updateCopyButton",value:function e(t){if(t){this.$copyBtn.addClass("was-copied").removeClass("copy-all");this.$copyBtn.text("Copied!")}else{this.$copyBtn.addClass("copy-all").removeClass("was-copied");this.$copyBtn.text("Copy")}}},{key:"updateQueryMetaData",value:function e(){var t=function e(t,i){if(t)return"<div class='item'>\n                  <span class='value'>".concat(t,"</span>\n                  <span class='description'>").concat(i,"</span>\n              </div>");else return""};this.$metaData.empty().append("<div class='metadata'>\n                ".concat(t(this.formatDate(this.entry.start_time),"Date"),"\n                ").concat(t(this.entry.row_affected.toLocaleString(),"Rows Affected"),"\n                ").concat(t(this.entry.total_time,"Duration"),"\n            </div>"))}},{key:"updateMessageContent",value:function e(){this.$message_content.empty().append("<pre class='content-value'>".concat(s.default.escape(this.entry.message),"</pre>"))}},{key:"updateErrorMessage",value:function e(){if(!this.entry.status){this.$errMsgBlock.removeClass("d-none");this.$errMsgBlock.empty().append("<div class='history-error-text'>\n            <span>Error Message</span> ".concat(s.default.escape(this.parseErrorMessage(this.entry.message)),"\n        </div>"))}else{this.$errMsgBlock.addClass("d-none");this.$errMsgBlock.empty()}}},{key:"updateInfoMessage",value:function e(){if(this.entry.info){this.$infoMsgBlock.removeClass("d-none");this.$infoMsgBlock.empty().append("<div class='history-info-text'>\n            ".concat(this.entry.info,"\n        </div>"))}else{this.$infoMsgBlock.addClass("d-none");this.$infoMsgBlock.empty()}}},{key:"selectiveRender",value:function e(){this.updateErrorMessage();this.updateInfoMessage();this.updateCopyButton(false);this.updateQueryMetaData();this.query_codemirror.setValue(this.entry.query);this.updateMessageContent()}},{key:"render",value:function e(){var t=this;if(this.entry){this.parentNode.empty().append("<div id='query_detail' class='query-detail'>\n            <div class='error-message-block'></div>\n            <div class='info-message-block'></div>\n            <div class='metadata-block'></div>\n            <div class='query-statement-block'>\n              <div id='history-detail-query'>\n                <button class='btn-copy' tabindex=0 accesskey='y'></button>\n                <button class='btn-copy-editor copy-to-editor' tabindex=0 accesskey='y'>"+(0,o.default)("Copy to Query Editor")+"</button>\n                <div></div>\n              </div>\n            </div>\n            <div>\n              <hr class='block-divider'/>\n            </div>\n            <div class='message-block'>\n              <div class='message'>\n                <div class='message-header'>Messages</div>\n                <div class='content'></div>\n              </div>\n            </div>\n        </div>");this.$errMsgBlock=this.parentNode.find(".error-message-block");this.$infoMsgBlock=this.parentNode.find(".info-message-block");this.$copyBtn=this.parentNode.find("#history-detail-query .btn-copy");this.$copyBtn.off("click").on("click",this.copyAllHandler.bind(this));this.$copyToEditor=this.parentNode.find("#history-detail-query .btn-copy-editor");this.$copyToEditor.off("click").on("click",function(){t.onCopyToEditorHandler(t.entry.query)});this.$copyToEditor.addClass(this.editorPref.copy_to_editor?"":"d-none");this.$metaData=this.parentNode.find(".metadata-block");this.query_codemirror=(0,n.default)(this.parentNode.find("#history-detail-query div")[0],{tabindex:-1,mode:"text/x-pgsql",readOnly:true});(0,a.default)(this.query_codemirror.getWrapperElement()).css("font-size",this.editorPref.sql_font_size);this.$message_content=this.parentNode.find(".message-block .content");this.isRendered=true;this.selectiveRender()}}}]);return t}();t.default=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryHistoryEntries=t.QueryHistoryItem=t.QueryHistoryEntryDateGroup=void 0;var n=r(i(50));var d=r(i(0));var c=r(i(1));i(94);function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,i){if(t)a(e.prototype,t);if(i)a(e,i);return e}var l=38;var u=40;var f=function(){function i(e,t){o(this,i);this.date=e;this.formatString="MMM DD YYYY";this.groupKey=t}s(i,[{key:"getDatePrefix",value:function e(){var t="";if(this.isDaysBefore(0)){t="Today - "}else if(this.isDaysBefore(1)){t="Yesterday - "}return t}},{key:"getDateFormatted",value:function e(t){return t.toLocaleDateString()}},{key:"isDaysBefore",value:function e(t){return this.getDateFormatted(this.date)===this.getDateFormatted((0,n.default)().subtract(t,"days").toDate())}},{key:"render",value:function e(){return(0,d.default)("<div class='query-group' data-key='".concat(this.groupKey,"'>\n            <div class='date-label'>").concat(this.getDatePrefix()).concat(this.getDateFormatted(this.date),"</div>\n            <ul class='query-entries'></ul>\n        </div>"))}}]);return i}();t.QueryHistoryEntryDateGroup=f;var h=function(){function t(e){o(this,t);this.entry=e;this.$el=null;this.onClickHandler=null}s(t,[{key:"onClick",value:function e(t){var i=this;this.onClickHandler=t;if(this.$el){this.$el.off("click").on("click",function(e){i.onClickHandler((0,d.default)(e.currentTarget))})}}},{key:"formatDate",value:function e(t){return(0,n.default)(t).format("HH:mm:ss")}},{key:"dataKey",value:function e(){return this.formatDate(this.entry.start_time)}},{key:"render",value:function e(t){var i=this;this.$el=(0,d.default)("<li class='list-item' tabindex='0' data-key='".concat(this.dataKey(),"'>\n          <div class='entry ").concat(this.entry.status?"":"error",'\'>\n              <div class=\'query\'>\n                  <i id="query_source_icon" class="query-history-icon sql-icon-lg"></i>\n                  ').concat(c.default.escape(this.entry.query),"\n              </div>\n              <div class='other-info'>\n              <div class='timestamp'>").concat(this.formatDate(this.entry.start_time),"</div>\n              </div>\n          </div>\n      </li>")).data("entrydata",this.entry).on("click",function(e){i.onClickHandler((0,d.default)(e.currentTarget))});var n=this.entry.query_source;if(n)this.$el.find("#query_source_icon").addClass(n.ICON_CSS_CLASS);if(this.entry.is_pgadmin_query){this.$el.addClass("pgadmin-query-history-entry");if(!t)this.$el.addClass("d-none")}}}]);return t}();t.QueryHistoryItem=h;var p=function(){function t(e){o(this,t);this.parentNode=e;this.$selectedItem=null;this.groupKeyFormat="YYYY MM DD";this.$el=null;this.is_pgadmin_queries_shown=null}s(t,[{key:"onSelectedChange",value:function e(t){this.onSelectedChangeHandler=t}},{key:"focus",value:function e(){if(!this.$selectedItem){this.setSelectedListItem(this.$entriesEl.find(".list-item").first())}this.$selectedItem.trigger("click");this.$entriesEl.focus()}},{key:"isArrowDown",value:function e(t){return(t.keyCode||t.which)===u}},{key:"isArrowUp",value:function e(t){return(t.keyCode||t.which)===l}},{key:"navigateUpAndDown",value:function e(t){var i=[l,u];var n=t.keyCode||t.which;if(i.indexOf(n)>-1){t.preventDefault();this.onKeyDownHandler(t);return false}return true}},{key:"onKeyDownHandler",value:function e(t){if(this.isArrowDown(t)){if(this.$selectedItem.next().length>0){this.setSelectedListItem(this.$selectedItem.next())}else{var i=this.$selectedItem.closest(".query-group");if(i.next().length>0){this.setSelectedListItem(i.next().find(".list-item").first())}}}else if(this.isArrowUp(t)){if(this.$selectedItem.prev().length>0){this.setSelectedListItem(this.$selectedItem.prev())}else{var n=this.$selectedItem.closest(".query-group");if(n.prev().length>0){this.setSelectedListItem(n.prev().find(".list-item").last())}}}}},{key:"onSelectListItem",value:function e(t){this.setSelectedListItem((0,d.default)(t.currentTarget))}},{key:"dateAsGroupKey",value:function e(t){return(0,n.default)(t).format(this.groupKeyFormat)}},{key:"setSelectedListItem",value:function e(t){if(this.$selectedItem){this.$selectedItem.removeClass("selected")}t.addClass("selected");this.$selectedItem=t;this.$selectedItem[0].scrollIntoView({block:"center"});if(this.onSelectedChangeHandler){this.onSelectedChangeHandler(this.$selectedItem.data("entrydata"))}}},{key:"addEntry",value:function e(t){var i=this.$entriesEl.find(".query-group");var n=d.default.map(i,function(e){return(0,d.default)(e).attr("data-key")});var r=this.dateAsGroupKey(t.start_time);var o=c.default.indexOf(n,r);var a=null;if(i.length==0){a=new f(t.start_time,r).render();this.$entriesEl.prepend(a)}else if(o<0&&i.length!=0){a=new f(t.start_time,r).render();var s=0;while(s<n.length){if(r>n[s]){a.insertBefore(i[s]);break}s++}if(s==n.length){this.$entriesEl.append(a)}}else if(o>=0){a=(0,d.default)(i[o])}var l=new h(t);l.onClick(this.setSelectedListItem.bind(this));l.render(this.is_pgadmin_queries_shown);a.find(".query-entries").prepend(l.$el);this.setSelectedListItem(l.$el)}},{key:"toggleGeneratedQueries",value:function e(){this.$el.find(".pgadmin-query-history-entry").each(function(){(0,d.default)(this).toggleClass("d-none")});this.is_pgadmin_queries_shown=!this.is_pgadmin_queries_shown}},{key:"render",value:function e(){var t=this;t.$el=(0,d.default)('\n        <div class="toggle-and-history-container">\n            <div class="query-history-toggle">\n                <label class="control-label">\n                    Show queries generated internally by pgAdmin?\n                </label>\n                <input id="generated-queries-toggle" type="checkbox"\n                  class="pgadmin-controls" data-style="quick"\n                  data-size="mini" data-on="Yes" data-off="No"\n                  data-onstyle="success" data-offstyle="primary" checked>\n            </div>\n            <div id=\'query_list\' class=\'query-history\' tabindex=\'0\'></div>\n        </div>\n    ');t.$entriesEl=t.$el.find("#query_list");t.$entriesEl.on("keydown",this.navigateUpAndDown.bind(this));t.is_pgadmin_queries_shown=true;t.$el.find("#generated-queries-toggle").bootstrapToggle().change(function(){t.toggleGeneratedQueries()});t.parentNode.empty().append(t.$el)}}]);return t}();t.QueryHistoryEntries=p},function(e,t,i){"use strict";i.r(t);var F=window;var U=F.document;var H="addEventListener";var W="removeEventListener";var $="getBoundingClientRect";var V="_a";var G="_b";var Z="_c";var K="horizontal";var Y=function(){return false};var J=F.attachEvent&&!F[H];var r=["","-webkit-","-moz-","-o-"].filter(function(e){var t=U.createElement("div");t.style.cssText="width:"+e+"calc(9px)";return!!t.style.length}).shift()+"calc";var o=function(e){return typeof e==="string"||e instanceof String};var Q=function(e){if(o(e)){var t=U.querySelector(e);if(!t){throw new Error("Selector "+e+" did not match a DOM element")}return t}return e};var X=function(e,t,i){var n=e[t];if(n!==undefined){return n}return i};var ee=function(e,t,i,n){if(t){if(n==="end"){return 0}if(n==="center"){return e/2}}else if(i){if(n==="start"){return 0}if(n==="center"){return e/2}}return e};var te=function(e,t){var i=U.createElement("div");i.className="gutter gutter-"+t;return i};var ie=function(e,t,i){var n={};if(!o(t)){if(!J){n[e]=r+"("+t+"% - "+i+"px)"}else{n[e]=t+"%"}}else{n[e]=t}return n};var ne=function(e,t){var i;return i={},i[e]=t+"px",i};var n=function(e,r){if(r===void 0)r={};var a=e;var o;var t;var s;var l;var n;var d;if(Array.from){a=Array.from(a)}var i=Q(a[0]);var c=i.parentNode;var u=getComputedStyle?getComputedStyle(c):null;var f=u?u.flexDirection:null;var h=X(r,"sizes")||a.map(function(){return 100/a.length});var p=X(r,"minSize",100);var m=Array.isArray(p)?p:a.map(function(){return p});var g=X(r,"expandToMin",false);var v=X(r,"gutterSize",10);var _=X(r,"gutterAlign","center");var b=X(r,"snapOffset",30);var y=X(r,"dragInterval",1);var w=X(r,"direction",K);var x=X(r,"cursor",w===K?"col-resize":"row-resize");var C=X(r,"gutter",te);var k=X(r,"elementStyle",ie);var S=X(r,"gutterStyle",ne);if(w===K){o="width";t="clientX";s="left";l="right";n="clientWidth"}else if(w==="vertical"){o="height";t="clientY";s="top";l="bottom";n="clientHeight"}function T(t,e,i,n){var r=k(o,e,i,n);Object.keys(r).forEach(function(e){t.style[e]=r[e]})}function N(t,e,i){var n=S(o,e,i);Object.keys(n).forEach(function(e){t.style[e]=n[e]})}function D(){return d.map(function(e){return e.size})}function P(e){if("touches"in e){return e.touches[0][t]}return e[t]}function E(e){var t=d[this.a];var i=d[this.b];var n=t.size+i.size;t.size=e/this.size*n;i.size=n-e/this.size*n;T(t.element,t.size,this[G],t.i);T(i.element,i.size,this[Z],i.i)}function M(e){var t;var i=d[this.a];var n=d[this.b];if(!this.dragging){return}t=P(e)-this.start+(this[G]-this.dragOffset);if(y>1){t=Math.round(t/y)*y}if(t<=i.minSize+b+this[G]){t=i.minSize+this[G]}else if(t>=this.size-(n.minSize+b+this[Z])){t=this.size-(n.minSize+this[Z])}E.call(this,t);X(r,"onDrag",Y)()}function I(){var e=d[this.a].element;var t=d[this.b].element;var i=e[$]();var n=t[$]();this.size=i[o]+n[o]+this[G]+this[Z];this.start=i[s];this.end=i[l]}function O(e){if(!getComputedStyle){return null}var t=getComputedStyle(e);if(!t){return null}var i=e[n];if(i===0){return null}if(w===K){i-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}else{i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}return i}function A(o){var a=O(c);if(a===null){return o}if(m.reduce(function(e,t){return e+t},0)>a){return o}var s=0;var l=[];var e=o.map(function(e,t){var i=a*e/100;var n=ee(v,t===0,t===o.length-1,_);var r=m[t]+n;if(i<r){s+=r-i;l.push(0);return r}l.push(i-r);return i});if(s===0){return o}return e.map(function(e,t){var i=e;if(s>0&&l[t]-s>0){var n=Math.min(s,l[t]-s);s-=n;i=e-n}return i/a*100})}function R(){var e=this;var t=d[e.a].element;var i=d[e.b].element;if(e.dragging){X(r,"onDragEnd",Y)(D())}e.dragging=false;F[W]("mouseup",e.stop);F[W]("touchend",e.stop);F[W]("touchcancel",e.stop);F[W]("mousemove",e.move);F[W]("touchmove",e.move);e.stop=null;e.move=null;t[W]("selectstart",Y);t[W]("dragstart",Y);i[W]("selectstart",Y);i[W]("dragstart",Y);t.style.userSelect="";t.style.webkitUserSelect="";t.style.MozUserSelect="";t.style.pointerEvents="";i.style.userSelect="";i.style.webkitUserSelect="";i.style.MozUserSelect="";i.style.pointerEvents="";e.gutter.style.cursor="";e.parent.style.cursor="";U.body.style.cursor=""}function L(e){if("button"in e&&e.button!==0){return}var t=this;var i=d[t.a].element;var n=d[t.b].element;if(!t.dragging){X(r,"onDragStart",Y)(D())}e.preventDefault();t.dragging=true;t.move=M.bind(t);t.stop=R.bind(t);F[H]("mouseup",t.stop);F[H]("touchend",t.stop);F[H]("touchcancel",t.stop);F[H]("mousemove",t.move);F[H]("touchmove",t.move);i[H]("selectstart",Y);i[H]("dragstart",Y);n[H]("selectstart",Y);n[H]("dragstart",Y);i.style.userSelect="none";i.style.webkitUserSelect="none";i.style.MozUserSelect="none";i.style.pointerEvents="none";n.style.userSelect="none";n.style.webkitUserSelect="none";n.style.MozUserSelect="none";n.style.pointerEvents="none";t.gutter.style.cursor=x;t.parent.style.cursor=x;U.body.style.cursor=x;I.call(t);t.dragOffset=P(e)-t.end}h=A(h);var z=[];d=a.map(function(e,t){var i={element:Q(e),size:h[t],minSize:m[t],i:t};var n;if(t>0){n={a:t-1,b:t,dragging:false,direction:w,parent:c};n[G]=ee(v,t-1===0,false,_);n[Z]=ee(v,false,t===a.length-1,_);if(f==="row-reverse"||f==="column-reverse"){var r=n.a;n.a=n.b;n.b=r}}if(!J){if(t>0){var o=C(t,w,i.element);N(o,v,t);n[V]=L.bind(n);o[H]("mousedown",n[V]);o[H]("touchstart",n[V]);c.insertBefore(o,i.element);n.gutter=o}}T(i.element,i.size,ee(v,t===0,t===a.length-1,_),t);if(t>0){z.push(n)}return i});function j(e){var t=e.i===z.length;var i=t?z[e.i-1]:z[e.i];I.call(i);var n=t?i.size-e.minSize-i[Z]:e.minSize+i[G];E.call(i,n)}d.forEach(function(e){var t=e.element[$]()[o];if(t<e.minSize){if(g){j(e)}else{e.minSize=t}}});function B(e){var o=A(e);o.forEach(function(e,t){if(t>0){var i=z[t-1];var n=d[i.a];var r=d[i.b];n.size=o[t-1];r.size=e;T(n.element,n.size,i[G],n.i);T(r.element,r.size,i[Z],r.i)}})}function q(i,n){z.forEach(function(t){if(n!==true){t.parent.removeChild(t.gutter)}else{t.gutter[W]("mousedown",t[V]);t.gutter[W]("touchstart",t[V])}if(i!==true){var e=k(o,t.a.size,t[G]);Object.keys(e).forEach(function(e){d[t.a].element.style[e]="";d[t.b].element.style[e]=""})}})}if(J){return{setSizes:B,destroy:q}}return{setSizes:B,getSizes:D,collapse:function e(t){j(d[t])},destroy:q,parent:c,pairs:z}};t["default"]=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QuerySources=void 0;var n={EXECUTE:{ICON_CSS_CLASS:"fa fa-bolt"},EXPLAIN:{ICON_CSS_CLASS:"fa fa-hand-pointer-o"},EXPLAIN_ANALYZE:{ICON_CSS_CLASS:"fa fa-list-alt"},COMMIT:{ICON_CSS_CLASS:"icon-commit"},ROLLBACK:{ICON_CSS_CLASS:"icon-rollback"},SAVE_DATA:{ICON_CSS_CLASS:"icon-save-data-changes"},VIEW_DATA:{ICON_CSS_CLASS:"icon-view-data"}};t.QuerySources=n},function(e,t,i){"use strict";var r=s(i(2));var o=s(i(12));var n=s(i(9));var a=s(i(10));function s(e){return e&&e.__esModule?e:{default:e}}var l=n.default.Model.extend({defaults:{recorded_time:undefined,event:undefined,pid:undefined,payload:undefined},schema:[{id:"recorded_time",label:(0,r.default)("Recorded time"),cell:"string",type:"text",editable:false,cellHeaderClasses:"width_percent_20",headerCell:o.default.Extension.CustomHeaderCell},{id:"channel",label:(0,r.default)("Event"),cell:"string",type:"text",editable:false,cellHeaderClasses:"width_percent_20",headerCell:o.default.Extension.CustomHeaderCell},{id:"pid",label:(0,r.default)("Process ID"),cell:"string",type:"text",editable:false,cellHeaderClasses:"width_percent_20",headerCell:o.default.Extension.CustomHeaderCell},{id:"payload",label:(0,r.default)("Payload"),cell:"string",type:"text",editable:false,cellHeaderClasses:"width_percent_40",headerCell:o.default.Extension.CustomHeaderCell}]});var d=n.default.Collection.extend({model:l});var c={collection:null,renderNotificationsGrid:function e(t){if(!c.collection)c.collection=new d;var i=[{name:"recorded_time",label:(0,r.default)("Recorded time"),type:"text",editable:false,cell:"string"},{name:"channel",label:(0,r.default)("Event"),type:"text",editable:false,cell:"string"},{name:"pid",label:(0,r.default)("Process ID"),type:"text",editable:false,cell:"string"},{name:"payload",label:(0,r.default)("Payload"),type:"text",editable:false,cell:"string"}];var n=new o.default.Grid({emptyText:"No data found",columns:i,collection:c.collection,className:"backgrid presentation table table-bordered table-hover table-noouter-border table-bottom-border"});if(n)t.$container.find(".sql-editor-notifications").append(n.render().el)},updateNotifications:function e(t){if(t!=null&&t.length>0){for(var i in t){var n="";if(t[i].payload!=""){n=(0,r.default)('Asynchronous notification "')+t[i].channel+(0,r.default)('" with payload "')+t[i].payload+(0,r.default)('" received from server process with PID ')+t[i].pid}else{n=(0,r.default)('Asynchronous notification "')+t[i].channel+(0,r.default)('" received from server process with PID ')+t[i].pid}a.default.info(n)}c.collection.add(t)}}};e.exports=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.callRenderAfterPoll=c;var r=i(214);var o=n(i(2));var a=i(29);function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return e.colinfo!=null}function l(e){return e.is_query_tool}function d(e){return e.info_notifier_timeout>=0}function c(e,t,i){e.query_end_time=new Date;e.rows_affected=i.rows_affected;e.has_more_rows=i.has_more_rows;if(s(i)){e._render(i)}else{e.total_time=(0,r.calculateQueryRunTime)(e.query_start_time,e.query_end_time);var n=(0,a.sprintf)((0,o.default)("Query returned successfully in %s."),e.total_time);if(i.result)i.result+="\n\n"+n;else i.result=n;e.update_msg_history(true,i.result,true);e.reset_data_store();if(d(e)){t.success(n,e.info_notifier_timeout)}}if(l(e)){e.disable_tool_buttons(false)}e.setIsQueryRunning(false);e.trigger("pgadmin-sqleditor:loading-icon:hide")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateUIPreferences=o;var a=i(28);var s=r(i(24));var l=n(i(0));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};if(n.get||n.set){Object.defineProperty(t,i,n)}else{t[i]=e[i]}}}}t.default=e;return t}}function o(e){var t=e.$el,i=e.preferences;if(e.handler.slickgrid){e.handler.slickgrid.CSVOptions={quoting:e.preferences.results_grid_quoting,quote_char:e.preferences.results_grid_quote_char,field_separator:e.preferences.results_grid_field_separator}}t.find("#btn-load-file").attr("title",(0,a.shortcut_accesskey_title)("Open File",i.btn_open_file)).attr("accesskey",(0,a.shortcut_key)(i.btn_open_file));t.find("#btn-save-file").attr("title",(0,a.shortcut_accesskey_title)("Save File",i.btn_save_file)).attr("accesskey",(0,a.shortcut_key)(i.btn_save_file));t.find("#btn-find-menu-dropdown").attr("title",(0,a.shortcut_accesskey_title)("Find",i.btn_find_options)).attr("accesskey",(0,a.shortcut_key)(i.btn_find_options));t.find("#btn-copy-row").attr("title",(0,a.shortcut_accesskey_title)("Copy",i.btn_copy_row)).attr("accesskey",(0,a.shortcut_key)(i.btn_copy_row));t.find("#btn-paste-row").attr("title",(0,a.shortcut_accesskey_title)("Paste",i.btn_paste_row)).attr("accesskey",(0,a.shortcut_key)(i.btn_paste_row));t.find("#btn-delete-row").attr("title",(0,a.shortcut_accesskey_title)("Delete",i.btn_delete_row)).attr("accesskey",(0,a.shortcut_key)(i.btn_delete_row));t.find("#btn-filter").attr("title",(0,a.shortcut_accesskey_title)("Filter",i.btn_filter_dialog)).attr("accesskey",(0,a.shortcut_key)(i.btn_filter_dialog));t.find("#btn-filter-dropdown").attr("title",(0,a.shortcut_accesskey_title)("Filter options",i.btn_filter_options)).attr("accesskey",(0,a.shortcut_key)(i.btn_filter_options));t.find("#btn-rows-limit").attr("title",(0,a.shortcut_accesskey_title)("Rows limit",i.btn_rows_limit)).attr("accesskey",(0,a.shortcut_key)(i.btn_rows_limit));t.find("#btn-query-dropdown").attr("title",(0,a.shortcut_accesskey_title)("Execute options",i.btn_execute_options)).attr("accesskey",(0,a.shortcut_key)(i.btn_execute_options));t.find("#btn-cancel-query").attr("title",(0,a.shortcut_accesskey_title)("Cancel query",i.btn_cancel_query)).attr("accesskey",(0,a.shortcut_key)(i.btn_cancel_query));t.find("#btn-clear-dropdown").attr("title",(0,a.shortcut_accesskey_title)("Clear",i.btn_clear_options)).attr("accesskey",(0,a.shortcut_key)(i.btn_clear_options));t.find("#btn-conn-status").attr("accesskey",(0,a.shortcut_key)(i.btn_conn_status)).find("i").attr("title",(0,a.shortcut_accesskey_title)("Connection status (click for details)",i.btn_conn_status));t.find("#btn-flash").attr("title",(0,a.shortcut_title)("Execute/Refresh",i.execute_query));t.find("#btn-explain").attr("title",(0,a.shortcut_title)("Explain",i.explain_query));t.find("#btn-explain-analyze").attr("title",(0,a.shortcut_title)("Explain Analyze",i.explain_analyze_query));t.find("#btn-download").attr("title",(0,a.shortcut_title)("Download as CSV",i.download_csv));t.find("#btn-save-data").attr("title",(0,a.shortcut_title)("Save Data Changes",i.save_data));t.find("#btn-commit").attr("title",(0,a.shortcut_title)("Commit",i.commit_transaction));t.find("#btn-rollback").attr("title",(0,a.shortcut_title)("Rollback",i.rollback_transaction));if(i.explain_verbose){t.find(".explain-verbose").removeClass("visibility-hidden")}else{t.find(".explain-verbose").addClass("visibility-hidden")}if(i.explain_costs){t.find(".explain-costs").removeClass("visibility-hidden")}else{t.find(".explain-costs").addClass("visibility-hidden")}if(i.explain_buffers){t.find(".explain-buffers").removeClass("visibility-hidden")}else{t.find(".explain-buffers").addClass("visibility-hidden")}if(i.explain_timing){t.find(".explain-timing").removeClass("visibility-hidden")}else{t.find(".explain-timing").addClass("visibility-hidden")}if(i.explain_summary){t.find(".explain-summary").removeClass("visibility-hidden")}else{t.find(".explain-summary").addClass("visibility-hidden")}if(i.explain_settings){t.find(".explain-settings").removeClass("visibility-hidden")}else{t.find(".explain-settings").addClass("visibility-hidden")}if(e.connIntervalId!=null){clearInterval(e.connIntervalId);e.connIntervalId=null}if(i.connection_status){var n=t.find("#btn-conn-status"),r=n.find("i");n.popover();n.removeClass("connection-status-hide");s.fetchConnectionStatus(e.handler,n,r);e.connIntervalId=setInterval(s.fetchConnectionStatus.bind(null,e.handler,n,r),i.connection_status_fetch_time*1e3)}else{t.find("#btn-conn-status").addClass("connection-status-hide")}var o=s.calcFontSize(i.sql_font_size);(0,l.default)(e.query_tool_obj.getWrapperElement()).css("font-size",o);if(i.plain_editor_mode){e.query_tool_obj.setOption("mode","text/plain");e.query_tool_obj.setOption("foldGutter",false)}else{e.query_tool_obj.setOption("mode",e.handler.server_type==="gpdb"?"text/x-gpsql":"text/x-pgsql");e.query_tool_obj.setOption("foldGutter",i.code_folding)}e.query_tool_obj.setOption("foldGutter",i.code_folding);e.query_tool_obj.setOption("indentWithTabs",!i.use_spaces);e.query_tool_obj.setOption("indentUnit",i.tab_size);e.query_tool_obj.setOption("tabSize",i.tab_size);e.query_tool_obj.setOption("lineWrapping",i.wrap_code);e.query_tool_obj.setOption("autoCloseBrackets",i.insert_pair_brackets);e.query_tool_obj.setOption("matchBrackets",i.brace_matching);e.query_tool_obj.refresh();e.historyComponent.setEditorPref({sql_font_size:o})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;i(364);i(206);i(65);i(365);i(366);i(367);i(368);i(369);i(370);i(371);i(372);var n=window.Slick;t.default=n},function(e,t,i){(function(v){(function(p){p.fn.drag=function(e,t,i){var n=typeof e=="string"?e:"",r=p.isFunction(e)?e:p.isFunction(t)?t:null;if(n.indexOf("drag")!==0)n="drag"+n;i=(e==r?t:i)||{};return r?this.on(n,i,r):this.trigger(n)};var m=p.event,n=m.special,g=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(e){var i=p.data(this,g.datakey),n=e.data||{};i.related+=1;p.each(g.defaults,function(e,t){if(n[e]!==undefined)i[e]=n[e]})},remove:function(){p.data(this,g.datakey).related-=1},setup:function(){if(p.data(this,g.datakey))return;var e=p.extend({related:0},g.defaults);p.data(this,g.datakey,e);m.add(this,"touchstart mousedown",g.init,e);if(this.attachEvent)this.attachEvent("ondragstart",g.dontstart)},teardown:function(){var e=p.data(this,g.datakey)||{};if(e.related)return;p.removeData(this,g.datakey);m.remove(this,"touchstart mousedown",g.init);g.textselect(true);if(this.detachEvent)this.detachEvent("ondragstart",g.dontstart)},init:function(e){if(g.touched)return;var t=e.data,i;if(e.which!=0&&t.which>0&&e.which!=t.which)return;if(p(e.target).is(t.not))return;if(t.handle&&!p(e.target).closest(t.handle,e.currentTarget).length)return;g.touched=e.type=="touchstart"?this:null;t.propagates=1;t.mousedown=this;t.interactions=[g.interaction(this,t)];t.target=e.target;t.pageX=e.pageX;t.pageY=e.pageY;t.dragging=null;i=g.hijack(e,"draginit",t);if(!t.propagates)return;i=g.flatten(i);if(i&&i.length){t.interactions=[];p.each(i,function(){t.interactions.push(g.interaction(this,t))})}t.propagates=t.interactions.length;if(t.drop!==false&&n.drop)n.drop.handler(e,t);g.textselect(false);if(g.touched)m.add(g.touched,"touchmove touchend",g.handler,t);else m.add(document,"mousemove mouseup",g.handler,t);if(!g.touched||t.live)return false},interaction:function(e,t){var i=e&&e.ownerDocument?p(e)[t.relative?"position":"offset"]()||{top:0,left:0}:{top:0,left:0};return{drag:e,callback:new g.callback,droppable:[],offset:i}},handler:function(e){var t=e.data;switch(e.type){case!t.dragging&&"touchmove":e.preventDefault();case!t.dragging&&"mousemove":if(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageY-t.pageY,2)<Math.pow(t.distance,2))break;e.target=t.target;g.hijack(e,"dragstart",t);if(t.propagates)t.dragging=true;case"touchmove":e.preventDefault();case"mousemove":if(t.dragging){g.hijack(e,"drag",t);if(t.propagates){if(t.drop!==false&&n.drop)n.drop.handler(e,t);break}e.type="mouseup"}case"touchend":case"mouseup":default:if(g.touched)m.remove(g.touched,"touchmove touchend",g.handler);else m.remove(document,"mousemove mouseup",g.handler);if(t.dragging){if(t.drop!==false&&n.drop)n.drop.handler(e,t);g.hijack(e,"dragend",t)}g.textselect(true);if(t.click===false&&t.dragging)p.data(t.mousedown,"suppress.click",(new Date).getTime()+5);t.dragging=g.touched=false;break}},hijack:function(i,n,r,e,t){if(!r)return;var o={event:i.originalEvent,type:i.type},a=n.indexOf("drop")?"drag":"drop",s,l=e||0,d,c,u,f=!isNaN(e)?e:r.interactions.length;i.type=n;var h=function(){};i.originalEvent=new v.Event(o.event,{preventDefault:h,stopPropagation:h,stopImmediatePropagation:h});r.results=[];do{if(d=r.interactions[l]){if(n!=="dragend"&&d.cancelled)continue;u=g.properties(i,r,d);d.results=[];p(t||d[a]||r.droppable).each(function(e,t){u.target=t;i.isPropagationStopped=function(){return false};s=t?m.dispatch.call(t,i,u):null;if(s===false){if(a=="drag"){d.cancelled=true;r.propagates-=1}if(n=="drop"){d[a][e]=null}}else if(n=="dropinit")d.droppable.push(g.element(s)||t);if(n=="dragstart")d.proxy=p(g.element(s)||d.drag)[0];d.results.push(s);delete i.result;if(n!=="dropinit")return s});r.results[l]=g.flatten(d.results);if(n=="dropinit")d.droppable=g.flatten(d.droppable);if(n=="dragstart"&&!d.cancelled)u.update()}}while(++l<f);i.type=o.type;i.originalEvent=o.event;return g.flatten(r.results)},properties:function(e,t,i){var n=i.callback;n.drag=i.drag;n.proxy=i.proxy||i.drag;n.startX=t.pageX;n.startY=t.pageY;n.deltaX=e.pageX-t.pageX;n.deltaY=e.pageY-t.pageY;n.originalX=i.offset.left;n.originalY=i.offset.top;n.offsetX=n.originalX+n.deltaX;n.offsetY=n.originalY+n.deltaY;n.drop=g.flatten((i.drop||[]).slice());n.available=g.flatten((i.droppable||[]).slice());return n},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(e){return p.map(e,function(e){return e&&e.jquery?p.makeArray(e):e&&e.length?g.flatten(e):e})},textselect:function(e){p(document)[e?"off":"on"]("selectstart",g.dontstart).css("MozUserSelect",e?"":"none");document.unselectable=e?"off":"on"},dontstart:function(){return false},callback:function(){}};g.callback.prototype={update:function(){if(n.drop&&this.available.length)p.each(this.available,function(e){n.drop.locate(this,e)})}};var t=m.dispatch;m.dispatch=function(e){if(p.data(this,"suppress."+e.type)-(new Date).getTime()>0){p.removeData(this,"suppress."+e.type);return}return t.apply(this,arguments)};n.draginit=n.dragstart=n.dragend=g})(v)}).call(this,i(0))},function(module,exports,__webpack_require__){(function(jQuery){
/**
 * @license
 * (c) 2009-2016 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.3
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */
if(typeof jQuery==="undefined"){throw new Error("SlickGrid requires jquery module to be loaded")}if(!jQuery.fn.drag){throw new Error("SlickGrid requires jquery.event.drag module to be loaded")}if(typeof Slick==="undefined"){throw new Error("slick.core.js not loaded")}(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;var maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:false,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:false,asyncPostRenderCleanupDelay:40,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,createFooterRow:false,showFooterRow:false,footerRowHeight:25,createPreHeaderPanel:false,showPreHeaderPanel:false,preHeaderPanelHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false,dataItemColumnValueExtractor:null,fullWidthRows:false,multiColumnSort:false,numberedMultiColumnSort:false,tristateMultiColumnSort:false,defaultFormatter:defaultFormatter,forceSyncScrolling:false,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:false,showCellSelection:true,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:true};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null,defaultSortAsc:true,focusable:true,selectable:true};var th;var h;var ph;var n;var cj;var page=0;var offset=0;var vScrollDir=1;var initialized=false;var $container;var uid="slickgrid_"+Math.round(1e6*Math.random());var self=this;var $focusSink,$focusSink2;var $headerScroller;var $headers;var $headerRow,$headerRowScroller,$headerRowSpacer;var $footerRow,$footerRowScroller,$footerRowSpacer;var $preHeaderPanel,$preHeaderPanelScroller,$preHeaderPanelSpacer;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var $boundAncestors;var stylesheet,columnCssRulesL,columnCssRulesR;var viewportH,viewportW;var canvasWidth;var viewportHasHScroll,viewportHasVScroll;var headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,jQueryNewWidthBehaviour=false;var absoluteColumnMinWidth;var sortIndicatorCssClass="slick-sort-indicator";var tabbingDirection=1;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var lastRenderedScrollLeft=0;var prevScrollLeft=0;var scrollLeft=0;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumns=[];var columnPosLeft=[];var columnPosRight=[];var pagingActive=false;var pagingIsLastPage=false;var h_editorLoader=null;var h_render=null;var h_postrender=null;var h_postrenderCleanup=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var postProcessedCleanupQueue=[];var postProcessgroupId=0;var counter_rows_rendered=0;var counter_rows_removed=0;var rowNodeFromLastMouseWheelEvent;var zombieRowNodeFromLastMouseWheelEvent;var zombieRowCacheFromLastMouseWheelEvent;var zombieRowPostProcessedFromLastMouseWheelEvent;var cssShow={position:"absolute",visibility:"hidden",display:"block"};var $hiddenParents;var oldProps=[];var columnResizeDragging=false;function init(){if(container instanceof jQuery){$container=container}else{$container=$(container)}if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.")}cacheCssForHiddenInit();maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight();options=$.extend({},defaults,options);validateAndEnforceOptions();columnDefaults.width=options.defaultColumnWidth;columnsById={};for(var e=0;e<columns.length;e++){var t=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[t.id]=e;if(t.minWidth&&t.width<t.minWidth){t.width=t.minWidth}if(t.maxWidth&&t.width>t.maxWidth){t.width=t.maxWidth}}if(options.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded")}editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit};$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative")}$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container);if(options.createPreHeaderPanel){$preHeaderPanelScroller=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$preHeaderPanel=$("<div />").appendTo($preHeaderPanelScroller);$preHeaderPanelSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScroller);if(!options.showPreHeaderPanel){$preHeaderPanelScroller.hide()}}$headerScroller=$("<div class='slick-header ui-state-default' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);$headerRowScroller=$("<div class='slick-headerrow ui-state-default' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller);$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide()}if(!options.showHeaderRow){$headerRowScroller.hide()}$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container);$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");if(options.viewportClass)$viewport.toggleClass(options.viewportClass,true);$canvas=$("<div class='grid-canvas' />").appendTo($viewport);scrollbarDimensions=scrollbarDimensions||measureScrollbar();if($preHeaderPanelSpacer)$preHeaderPanelSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px");$headers.width(getHeadersWidth());$headerRowSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px");if(options.createFooterRow){$footerRowScroller=$("<div class='slick-footerrow ui-state-default' />").appendTo($container);$footerRow=$("<div class='slick-footerrow-columns' />").appendTo($footerRowScroller);$footerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScroller);if(!options.showFooterRow){$footerRowScroller.hide()}}if(options.numberedMultiColumnSort){sortIndicatorCssClass="slick-sort-indicator-numbered"}$focusSink2=$focusSink.clone().appendTo($container);if(!options.explicitInitialization){finishInitialization()}}function finishInitialization(){if(!initialized){initialized=true;viewportW=parseFloat($.css($container[0],"width",true));measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.on("selectstart.ui",function(e){return $(e.target).is("input,textarea")})}updateColumnCaches();createColumnHeaders();setupColumnSort();createCssRules();resizeCanvas();bindAncestorScrollEvents();$container.on("resize.slickgrid",resizeCanvas);$viewport.on("scroll",handleScroll);$headerScroller.on("contextmenu",handleHeaderContextMenu).on("click",handleHeaderClick).on("mouseenter",".slick-header-column",handleHeaderMouseEnter).on("mouseleave",".slick-header-column",handleHeaderMouseLeave);$headerRowScroller.on("scroll",handleHeaderRowScroll);if(options.createFooterRow){$footerRowScroller.on("scroll",handleFooterRowScroll)}if(options.createPreHeaderPanel){$preHeaderPanelScroller.on("scroll",handlePreHeaderPanelScroll)}$focusSink.add($focusSink2).on("keydown",handleKeyDown);$canvas.on("keydown",handleKeyDown).on("click",handleClick).on("dblclick",handleDblClick).on("contextmenu",handleContextMenu).on("draginit",handleDragInit).on("dragstart",{distance:3},handleDragStart).on("drag",handleDrag).on("dragend",handleDragEnd).on("mouseenter",".slick-cell",handleMouseEnter).on("mouseleave",".slick-cell",handleMouseLeave);if(navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)){$canvas.on("mousewheel",handleMouseWheel)}restoreCssFromHiddenInit()}}function cacheCssForHiddenInit(){$hiddenParents=$container.parents().addBack().not(":visible");$hiddenParents.each(function(){var e={};for(var t in cssShow){e[t]=this.style[t];this.style[t]=cssShow[t]}oldProps.push(e)})}function restoreCssFromHiddenInit(){$hiddenParents.each(function(e){var t=oldProps[e];for(var i in cssShow){this.style[i]=t[i]}})}function registerPlugin(e){plugins.unshift(e);e.init(self)}function unregisterPlugin(e){for(var t=plugins.length;t>=0;t--){if(plugins[t]===e){if(plugins[t].destroy){plugins[t].destroy()}plugins.splice(t,1);break}}}function setSelectionModel(e){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy()}}selectionModel=e;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)}}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var e=$('<div class="'+$viewport.className+'" style="position:absolute; top:-10000px; left:-10000px; overflow:auto; width:100px; height:100px;"></div>').appendTo($viewport);var t=$('<div style="width:200px; height:200px; overflow:auto;"></div>').appendTo(e);var i={width:e[0].offsetWidth-e[0].clientWidth,height:e[0].offsetHeight-e[0].clientHeight};t.remove();e.remove();return i}function getColumnTotalWidth(e){var t=0;for(var i=0,n=columns.length;i<n;i++){var r=columns[i].width;t+=r}if(e){t+=scrollbarDimensions.width}return t}function getHeadersWidth(){var e=getColumnTotalWidth(!options.autoHeight);return Math.max(e,viewportW)+1e3}function getCanvasWidth(){var e=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;var t=0;var i=columns.length;while(i--){t+=columns[i].width}return options.fullWidthRows?Math.max(t,e):t}function updateCanvasWidth(e){var t=canvasWidth;canvasWidth=getCanvasWidth();if(canvasWidth!=t){$canvas.width(canvasWidth);$headerRow.width(canvasWidth);if(options.createFooterRow){$footerRow.width(canvasWidth)}if(options.createPreHeaderPanel){$preHeaderPanel.width(canvasWidth)}$headers.width(getHeadersWidth());viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width}var i=canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0);$headerRowSpacer.width(i);if(options.createFooterRow){$footerRowSpacer.width(i)}if(options.createPreHeaderPanel){$preHeaderPanelSpacer.width(i)}if(canvasWidth!=t||e){applyColumnWidths()}}function disableSelection(e){if(e&&e.jquery){e.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",function(){return false})}}function getMaxSupportedCssHeight(){var e=1e6;var t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9;var i=$("<div style='display:none' />").appendTo(document.body);while(true){var n=e*2;i.css("height",n);if(n>t||i.height()!==n){break}else{e=n}}i.remove();return e}function getUID(){return uid}function getHeaderColumnWidthDiff(){return headerColumnWidthDiff}function getScrollbarDimensions(){return scrollbarDimensions}function bindAncestorScrollEvents(){var e=$canvas[0];while((e=e.parentNode)!=document.body&&e!=null){if(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight){var t=$(e);if(!$boundAncestors){$boundAncestors=t}else{$boundAncestors=$boundAncestors.add(t)}t.on("scroll."+uid,handleActiveCellPositionChange)}}}function unbindAncestorScrollEvents(){if(!$boundAncestors){return}$boundAncestors.off("scroll."+uid);$boundAncestors=null}function updateColumnHeader(e,t,i){if(!initialized){return}var n=getColumnIndex(e);if(n==null){return}var r=columns[n];var o=$headers.children().eq(n);if(o){if(t!==undefined){columns[n].name=t}if(i!==undefined){columns[n].toolTip=i}trigger(self.onBeforeHeaderCellDestroy,{node:o[0],column:r,grid:self});o.attr("title",i||"").children().eq(0).html(t);trigger(self.onHeaderCellRendered,{node:o[0],column:r,grid:self})}}function getHeader(){return $header[0]}function getHeaderColumn(e){var t=typeof e==="number"?e:getColumnIndex[e];var i=$header.children().eq(t);return i&&i[0]}function getHeaderRow(){return $headerRow[0]}function getFooterRow(){return $footerRow[0]}function getPreHeaderPanel(){return $preHeaderPanel[0]}function getHeaderRowColumn(e){var t=typeof e==="number"?e:getColumnIndex[e];var i=$headerRow.children().eq(t);return i&&i[0]}function getFooterRowColumn(e){var t=typeof e==="number"?e:getColumnIndex[e];var i=$footerRow.children().eq(t);return i&&i[0]}function createColumnHeaders(){function e(){$(this).addClass("ui-state-hover")}function t(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var e=$(this).data("column");if(e){trigger(self.onBeforeHeaderCellDestroy,{node:this,column:e,grid:self})}});$headers.empty();$headers.width(getHeadersWidth());$headerRow.find(".slick-headerrow-column").each(function(){var e=$(this).data("column");if(e){trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:e,grid:self})}});$headerRow.empty();if(options.createFooterRow){$footerRow.find(".slick-footerrow-column").each(function(){var e=$(this).data("column");if(e){trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:e})}});$footerRow.empty()}for(var i=0;i<columns.length;i++){var n=columns[i];var r=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+n.name+"</span>").width(n.width-headerColumnWidthDiff).attr("id",""+uid+n.id).attr("title",n.toolTip||"").data("column",n).addClass(n.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||n.sortable){r.on("mouseenter",e).on("mouseleave",t)}if(n.sortable){r.addClass("slick-header-sortable");r.append("<span class='"+sortIndicatorCssClass+"' />")}trigger(self.onHeaderCellRendered,{node:r[0],column:n,grid:self});if(options.showHeaderRow){var o=$("<div class='ui-state-default slick-headerrow-column l"+i+" r"+i+"'></div>").data("column",n).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:o[0],column:n,grid:self})}if(options.createFooterRow&&options.showFooterRow){var a=$("<div class='ui-state-default slick-footerrow-column l"+i+" r"+i+"'></div>").data("column",n).appendTo($footerRow);trigger(self.onFooterRowCellRendered,{node:a[0],column:n})}}setSortColumns(sortColumns);setupColumnResize();if(options.enableColumnReorder){if(typeof options.enableColumnReorder=="function"){options.enableColumnReorder(self,$headers,headerColumnWidthDiff,setColumns,setupColumnResize,columns,getColumnIndex,uid,trigger)}else{setupColumnReorder()}}}function setupColumnSort(){$headers.click(function(e){if(columnResizeDragging)return;e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("slick-resizable-handle")){return}var t=$(e.target).closest(".slick-header-column");if(!t.length){return}var i=t.data("column");if(i.sortable){if(!getEditorLock().commitCurrentEdit()){return}var n=null;var r=0;for(;r<sortColumns.length;r++){if(sortColumns[r].columnId==i.id){n=sortColumns[r];n.sortAsc=!n.sortAsc;break}}var o=!!n;if(options.tristateMultiColumnSort){if(!n){n={columnId:i.id,sortAsc:i.defaultSortAsc}}if(o&&n.sortAsc){sortColumns.splice(r,1);n=null}if(!options.multiColumnSort){sortColumns=[]}if(n&&(!o||!options.multiColumnSort)){sortColumns.push(n)}}else{if(e.metaKey&&options.multiColumnSort){if(n){sortColumns.splice(r,1)}}else{if(!e.shiftKey&&!e.metaKey||!options.multiColumnSort){sortColumns=[]}if(!n){n={columnId:i.id,sortAsc:i.defaultSortAsc};sortColumns.push(n)}else if(sortColumns.length==0){sortColumns.push(n)}}}setSortColumns(sortColumns);if(!options.multiColumnSort){trigger(self.onSort,{multiColumnSort:false,sortCol:sortColumns.length>0?i:null,sortAsc:sortColumns.length>0?sortColumns[0].sortAsc:true,grid:self},e)}else{trigger(self.onSort,{multiColumnSort:true,sortCols:$.map(sortColumns,function(e){return{sortCol:columns[getColumnIndex(e.columnId)],sortAsc:e.sortAsc}}),grid:self},e)}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy");$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(e,t){t.placeholder.width(t.helper.outerWidth()-headerColumnWidthDiff);$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var t=$headers.sortable("toArray");var i=[];for(var n=0;n<t.length;n++){i.push(columns[getColumnIndex(t[n].replace(uid,""))])}setColumns(i);trigger(self.onColumnsReordered,{grid:self});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var t,s,l,d,c,u,f,i,n;c=$headers.children();c.find(".slick-resizable-handle").remove();c.each(function(e,t){if(e>=columns.length){return}if(columns[e].resizable){if(i===undefined){i=e}n=e}});if(i===undefined){return}c.each(function(a,e){if(a>=columns.length){return}if(a<i||options.forceFitColumns&&a>=n){return}t=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).on("dragstart",function(e,t){if(!getEditorLock().commitCurrentEdit()){return false}d=e.pageX;$(this).parent().addClass("slick-header-column-active");var i=null,n=null;c.each(function(e,t){if(e>=columns.length){return}columns[e].previousWidth=$(t).outerWidth()});if(options.forceFitColumns){i=0;n=0;for(s=a+1;s<columns.length;s++){l=columns[s];if(l.resizable){if(n!==null){if(l.maxWidth){n+=l.maxWidth-l.previousWidth}else{n=null}}i+=l.previousWidth-Math.max(l.minWidth||0,absoluteColumnMinWidth)}}}var r=0,o=0;for(s=0;s<=a;s++){l=columns[s];if(l.resizable){if(o!==null){if(l.maxWidth){o+=l.maxWidth-l.previousWidth}else{o=null}}r+=l.previousWidth-Math.max(l.minWidth||0,absoluteColumnMinWidth)}}if(i===null){i=1e5}if(r===null){r=1e5}if(n===null){n=1e5}if(o===null){o=1e5}f=d+Math.min(i,o);u=d-Math.min(r,n)}).on("drag",function(e,t){columnResizeDragging=true;var i,n=Math.min(f,Math.max(u,e.pageX))-d,r;if(n<0){r=n;for(s=a;s>=0;s--){l=columns[s];if(l.resizable){i=Math.max(l.minWidth||0,absoluteColumnMinWidth);if(r&&l.previousWidth+r<i){r+=l.previousWidth-i;l.width=i}else{l.width=l.previousWidth+r;r=0}}}if(options.forceFitColumns){r=-n;for(s=a+1;s<columns.length;s++){l=columns[s];if(l.resizable){if(r&&l.maxWidth&&l.maxWidth-l.previousWidth<r){r-=l.maxWidth-l.previousWidth;l.width=l.maxWidth}else{l.width=l.previousWidth+r;r=0}}}}}else{r=n;for(s=a;s>=0;s--){l=columns[s];if(l.resizable){if(r&&l.maxWidth&&l.maxWidth-l.previousWidth<r){r-=l.maxWidth-l.previousWidth;l.width=l.maxWidth}else{l.width=l.previousWidth+r;r=0}}}if(options.forceFitColumns){r=-n;for(s=a+1;s<columns.length;s++){l=columns[s];if(l.resizable){i=Math.max(l.minWidth||0,absoluteColumnMinWidth);if(r&&l.previousWidth+r<i){r+=l.previousWidth-i;l.width=i}else{l.width=l.previousWidth+r;r=0}}}}}applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths()}}).on("dragend",function(e,t){var i;$(this).parent().removeClass("slick-header-column-active");for(s=0;s<columns.length;s++){l=columns[s];i=$(c[s]).outerWidth();if(l.previousWidth!==i&&l.rerenderOnResize){invalidateAllRows()}}updateCanvasWidth(true);render();trigger(self.onColumnsResized,{grid:self});setTimeout(function(){columnResizeDragging=false},300)})})}function getVBoxDelta(i){var e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var n=0;$.each(e,function(e,t){n+=parseFloat(i.css(t))||0});return n}function measureCellPaddingAndBorder(){var i;var e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var n=$.fn.jquery.split(".");jQueryNewWidthBehaviour=n[0]==1&&n[1]>=8||n[0]>=2;i=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;if(i.css("box-sizing")!="border-box"&&i.css("-moz-box-sizing")!="border-box"&&i.css("-webkit-box-sizing")!="border-box"){$.each(e,function(e,t){headerColumnWidthDiff+=parseFloat(i.css(t))||0});$.each(t,function(e,t){headerColumnHeightDiff+=parseFloat(i.css(t))||0})}i.remove();var r=$("<div class='slick-row' />").appendTo($canvas);i=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;if(i.css("box-sizing")!="border-box"&&i.css("-moz-box-sizing")!="border-box"&&i.css("-webkit-box-sizing")!="border-box"){$.each(e,function(e,t){cellWidthDiff+=parseFloat(i.css(t))||0});$.each(t,function(e,t){cellHeightDiff+=parseFloat(i.css(t))||0})}r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var e=options.rowHeight-cellHeightDiff;var t=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-preheader-panel { height:"+options.preHeaderPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-footerrow-columns { height:"+options.footerRowHeight+"px; }","."+uid+" .slick-cell { height:"+e+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"];for(var i=0;i<columns.length;i++){t.push("."+uid+" .l"+i+" { }");t.push("."+uid+" .r"+i+" { }")}if($style[0].styleSheet){$style[0].styleSheet.cssText=t.join(" ")}else{$style[0].appendChild(document.createTextNode(t.join(" ")))}}function getColumnCssRules(e){var t;if(!stylesheet){var i=document.styleSheets;for(t=0;t<i.length;t++){if((i[t].ownerNode||i[t].owningElement)==$style[0]){stylesheet=i[t];break}}if(!stylesheet){throw new Error("Cannot find stylesheet.")}columnCssRulesL=[];columnCssRulesR=[];var n=stylesheet.cssRules||stylesheet.rules;var r,o;for(t=0;t<n.length;t++){var a=n[t].selectorText;if(r=/\.l\d+/.exec(a)){o=parseInt(r[0].substr(2,r[0].length-2),10);columnCssRulesL[o]=n[t]}else if(r=/\.r\d+/.exec(a)){o=parseInt(r[0].substr(2,r[0].length-2),10);columnCssRulesR[o]=n[t]}}}return{left:columnCssRulesL[e],right:columnCssRulesR[e]}}function removeCssRules(){$style.remove();stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{grid:self});var e=plugins.length;while(e--){unregisterPlugin(plugins[e])}if(options.enableColumnReorder){$headers.filter(":ui-sortable").sortable("destroy")}unbindAncestorScrollEvents();$container.off(".slickgrid");removeCssRules();$canvas.off("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(e,t,i){i=i||new Slick.EventData;t=t||{};t.grid=self;return e.notify(t,i,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,i=[],n=0,r=0,o,a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(e=0;e<columns.length;e++){t=columns[e];i.push(t.width);r+=t.width;if(t.resizable){n+=t.width-Math.max(t.minWidth,absoluteColumnMinWidth)}}o=r;while(r>a&&n){var s=(r-a)/n;for(e=0;e<columns.length&&r>a;e++){t=columns[e];var l=i[e];if(!t.resizable||l<=t.minWidth||l<=absoluteColumnMinWidth){continue}var d=Math.max(t.minWidth,absoluteColumnMinWidth);var c=Math.floor(s*(l-d))||1;c=Math.min(c,l-d);r-=c;n-=c;i[e]-=c}if(o<=r){break}o=r}o=r;while(r<a){var u=a/r;for(e=0;e<columns.length&&r<a;e++){t=columns[e];var f=i[e];var h;if(!t.resizable||t.maxWidth<=f){h=0}else{h=Math.min(Math.floor(u*f)-f,t.maxWidth-f||1e6)||1}r+=h;i[e]+=r<=a?h:0}if(o>=r){break}o=r}var p=false;for(e=0;e<columns.length;e++){if(columns[e].rerenderOnResize&&columns[e].width!=i[e]){p=true}columns[e].width=i[e]}applyColumnHeaderWidths();updateCanvasWidth(true);if(p){invalidateAllRows();render()}}function applyColumnHeaderWidths(){if(!initialized){return}var e;for(var t=0,i=$headers.children(),n=columns.length;t<n;t++){e=$(i[t]);if(jQueryNewWidthBehaviour){if(e.outerWidth()!==columns[t].width){e.outerWidth(columns[t].width)}}else{if(e.width()!==columns[t].width-headerColumnWidthDiff){e.width(columns[t].width-headerColumnWidthDiff)}}}updateColumnCaches()}function applyColumnWidths(){var e=0,t,i;for(var n=0;n<columns.length;n++){t=columns[n].width;i=getColumnCssRules(n);i.left.style.left=e+"px";i.right.style.right=canvasWidth-e-t+"px";e+=columns[n].width}}function setSortColumn(e,t){setSortColumns([{columnId:e,sortAsc:t}])}function setSortColumns(e){sortColumns=e;var n=options.numberedMultiColumnSort&&sortColumns.length>1;var r=$headers.children();var o=r.removeClass("slick-header-column-sorted").find("."+sortIndicatorCssClass).removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");o.text("");$.each(sortColumns,function(e,t){if(t.sortAsc==null){t.sortAsc=true}var i=getColumnIndex(t.columnId);if(i!=null){o=r.eq(i).addClass("slick-header-column-sorted").find("."+sortIndicatorCssClass).addClass(t.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc");if(n){o.text(e+1)}}})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,t){selectedRows=[];var i={};for(var n=0;n<t.length;n++){for(var r=t[n].fromRow;r<=t[n].toRow;r++){if(!i[r]){selectedRows.push(r);i[r]={}}for(var o=t[n].fromCell;o<=t[n].toCell;o++){if(canCellBeSelected(r,o)){i[r][columns[o].id]=options.selectedCellCssClass}}}}setCellCssStyles(options.selectedCellCssClass,i);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),grid:self},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[];columnPosRight=[];var e=0;for(var t=0,i=columns.length;t<i;t++){columnPosLeft[t]=e;columnPosRight[t]=e+columns[t].width;e+=columns[t].width}}function setColumns(e){columns=e;columnsById={};for(var t=0;t<columns.length;t++){var i=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[i.id]=t;if(i.minWidth&&i.width<i.minWidth){i.width=i.minWidth}if(i.maxWidth&&i.width>i.maxWidth){i.width=i.maxWidth}}updateColumnCaches();if(initialized){invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeCanvas();applyColumnWidths();handleScroll()}}function getOptions(){return options}function setOptions(e,t){if(!getEditorLock().commitCurrentEdit()){return}makeActiveCellNormal();if(options.enableAddRow!==e.enableAddRow){invalidateRow(getDataLength())}options=$.extend(options,e);validateAndEnforceOptions();$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");if(!t){render()}}function validateAndEnforceOptions(){if(options.autoHeight){options.leaveSpaceForNewRows=false}}function setData(e,t){data=e;invalidateAllRows();updateRowCount();if(t){scrollTo(0)}}function getData(){return data}function getDataLength(){if(data.getLength){return data.getLength()}else{return data.length}}function getDataLengthIncludingAddNew(){return getDataLength()+(!options.enableAddRow?0:!pagingActive||pagingIsLastPage?1:0)}function getDataItem(e){if(data.getItem){return data.getItem(e)}else{return data[e]}}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(e){if(options.showTopPanel!=e){options.showTopPanel=e;if(e){$topPanelScroller.slideDown("fast",resizeCanvas)}else{$topPanelScroller.slideUp("fast",resizeCanvas)}}}function setHeaderRowVisibility(e){if(options.showHeaderRow!=e){options.showHeaderRow=e;if(e){$headerRowScroller.slideDown("fast",resizeCanvas)}else{$headerRowScroller.slideUp("fast",resizeCanvas)}}}function setFooterRowVisibility(e){if(options.showFooterRow!=e){options.showFooterRow=e;if(e){$footerRowScroller.slideDown("fast",resizeCanvas)}else{$footerRowScroller.slideUp("fast",resizeCanvas)}}}function setPreHeaderPanelVisibility(e){if(options.showPreHeaderPanel!=e){options.showPreHeaderPanel=e;if(e){$preHeaderPanelScroller.slideDown("fast",resizeCanvas)}else{$preHeaderPanelScroller.slideUp("fast",resizeCanvas)}}}function getContainerNode(){return $container.get(0)}function getRowTop(e){return options.rowHeight*e-offset}function getRowFromPosition(e){return Math.floor((e+offset)/options.rowHeight)}function scrollTo(e){e=Math.max(e,0);e=Math.min(e,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var t=offset;page=Math.min(n-1,Math.floor(e/ph));offset=Math.round(page*cj);var i=e-offset;if(offset!=t){var r=getVisibleRange(i);cleanupRows(r);updateRowPositions()}if(prevScrollTop!=i){vScrollDir=prevScrollTop+t<i+offset?1:-1;$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=i;trigger(self.onViewportChanged,{grid:self})}}function defaultFormatter(e,t,i,n,r,o){if(i==null){return""}else{return(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}function getFormatter(e,t){var i=data.getItemMetadata&&data.getItemMetadata(e);var n=i&&i.columns&&(i.columns[t.id]||i.columns[getColumnIndex(t.id)]);return n&&n.formatter||i&&i.formatter||t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||options.defaultFormatter}function getEditor(e,t){var i=columns[t];var n=data.getItemMetadata&&data.getItemMetadata(e);var r=n&&n.columns;if(r&&r[i.id]&&r[i.id].editor!==undefined){return r[i.id].editor}if(r&&r[t]&&r[t].editor!==undefined){return r[t].editor}return i.editor||options.editorFactory&&options.editorFactory.getEditor(i)}function getDataItemValueForColumn(e,t){if(options.dataItemColumnValueExtractor){return options.dataItemColumnValueExtractor(e,t)}return e[t.field]}function appendRowHtml(e,t,i,n){var r=getDataItem(t);var o=t<n&&!r;var a="slick-row"+(o?" loading":"")+(t===activeRow?" active":"")+(t%2==1?" odd":" even");if(!r){a+=" "+options.addNewRowCssClass}var s=data.getItemMetadata&&data.getItemMetadata(t);if(s&&s.cssClasses){a+=" "+s.cssClasses}e.push("<div class='ui-widget-content "+a+"' style='top:"+getRowTop(t)+"px'>");var l,d;for(var c=0,u=columns.length;c<u;c++){d=columns[c];l=1;if(s&&s.columns){var f=s.columns[d.id]||s.columns[c];l=f&&f.colspan||1;if(l==="*"){l=u-c}}if(columnPosRight[Math.min(u-1,c+l-1)]>i.leftPx){if(columnPosLeft[c]>i.rightPx){break}appendCellHtml(e,t,c,l,r)}if(l>1){c+=l-1}}e.push("</div>")}function appendCellHtml(e,t,i,n,r){var o=columns[i];var a="slick-cell l"+i+" r"+Math.min(columns.length-1,i+n-1)+(o.cssClass?" "+o.cssClass:"");if(t===activeRow&&i===activeCell){a+=" active"}for(var s in cellCssClasses){if(cellCssClasses[s][t]&&cellCssClasses[s][t][o.id]){a+=" "+cellCssClasses[s][t][o.id]}}var l=null,d="";if(r){l=getDataItemValueForColumn(r,o);d=getFormatter(t,o)(t,i,l,o,r,self);if(d===null||d===undefined){d=""}}var c=trigger(self.onBeforeAppendCell,{row:t,cell:i,grid:self,value:l,dataContext:r})||"";c+=d.addClasses?(c?" ":"")+d.addClasses:"";e.push("<div class='"+a+(c?" "+c:"")+"'>");if(r){e.push(Object.prototype.toString.call(d)!=="[object Object]"?d:d.text)}e.push("</div>");rowsCache[t].cellRenderQueue.push(i);rowsCache[t].cellColSpans[i]=n}function cleanupRows(e){for(var t in rowsCache){if((t=parseInt(t,10))!==activeRow&&(t<e.top||t>e.bottom)){removeRowFromCache(t)}}if(options.enableAsyncPostRenderCleanup){startPostProcessingCleanup()}}function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal()}for(var e in rowsCache){removeRowFromCache(e)}if(options.enableAsyncPostRenderCleanup){startPostProcessingCleanup()}}function queuePostProcessedRowForCleanup(e,t,i){postProcessgroupId++;for(var n in t){if(t.hasOwnProperty(n)){postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:e.cellNodesByColumnIdx[n|0],columnIdx:n|0,rowIdx:i})}}postProcessedCleanupQueue.push({actionType:"R",groupId:postProcessgroupId,node:e.rowNode});$(e.rowNode).detach()}function queuePostProcessedCellForCleanup(e,t,i){postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:e,columnIdx:t,rowIdx:i});$(e).detach()}function removeRowFromCache(e){var t=rowsCache[e];if(!t){return}if(t.rowNode){if(rowNodeFromLastMouseWheelEvent===t.rowNode){t.rowNode.style.display="none";zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent;zombieRowCacheFromLastMouseWheelEvent=t;zombieRowPostProcessedFromLastMouseWheelEvent=postProcessedRows[e]}else{if(options.enableAsyncPostRenderCleanup&&postProcessedRows[e]){queuePostProcessedRowForCleanup(t,postProcessedRows[e],e)}else{$canvas[0].removeChild(t.rowNode)}}}delete rowsCache[e];delete postProcessedRows[e];renderedRows--;counter_rows_removed++}function invalidateRows(e){var t,i;if(!e||!e.length){return}vScrollDir=0;i=e.length;for(t=0;t<i;t++){if(currentEditor&&activeRow===e[t]){makeActiveCellNormal()}if(rowsCache[e[t]]){removeRowFromCache(e[t])}}if(options.enableAsyncPostRenderCleanup){startPostProcessingCleanup()}}function invalidateRow(e){invalidateRows([e])}function applyFormatResultToCellNode(e,t,i){if(Object.prototype.toString.call(e)!=="[object Object]"){t.innerHTML=e;return}t.innerHTML=e.text;if(e.removeClasses&&!i){$(t).removeClass(e.removeClasses)}if(e.addClasses){$(t).addClass(e.addClasses)}}function updateCell(e,t){var i=getCellNode(e,t);if(!i){return}var n=columns[t],r=getDataItem(e);if(currentEditor&&activeRow===e&&activeCell===t){currentEditor.loadValue(r)}else{var o=r?getFormatter(e,n)(e,t,getDataItemValueForColumn(r,n),n,r,self):"";applyFormatResultToCellNode(o,i);invalidatePostProcessingResults(e)}}function updateRow(e){var t=rowsCache[e];if(!t){return}ensureCellNodesInRowsCache(e);var i,n=getDataItem(e);for(var r in t.cellNodesByColumnIdx){if(!t.cellNodesByColumnIdx.hasOwnProperty(r)){continue}r=r|0;var o=columns[r],a=t.cellNodesByColumnIdx[r];if(e===activeRow&&r===activeCell&&currentEditor){currentEditor.loadValue(n)}else if(n){i=getFormatter(e,o)(e,r,getDataItemValueForColumn(n,o),o,n,self);applyFormatResultToCellNode(i,a)}else{a.innerHTML=""}}invalidatePostProcessingResults(e)}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-parseFloat($.css($container[0],"paddingTop",true))-parseFloat($.css($container[0],"paddingBottom",true))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)-(options.createFooterRow&&options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0)-(options.createPreHeaderPanel&&options.showPreHeaderPanel?options.preHeaderPanelHeight+getVBoxDelta($preHeaderPanelScroller):0)}function resizeCanvas(){if(!initialized){return}if(options.autoHeight){viewportH=options.rowHeight*getDataLengthIncludingAddNew()}else{viewportH=getViewportHeight()}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(!options.autoHeight){$viewport.height(viewportH)}if(!scrollbarDimensions||!scrollbarDimensions.width){scrollbarDimensions=measureScrollbar()}if(options.forceFitColumns){autosizeColumns()}updateRowCount();handleScroll();lastRenderedScrollLeft=-1;render()}function updatePagingStatusFromView(e){pagingActive=e.pageSize!==0;pagingIsLastPage=e.pageNum==e.totalPages-1}function updateRowCount(){if(!initialized){return}var e=getDataLength();var t=getDataLengthIncludingAddNew();var i=t+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var r=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&i*options.rowHeight>viewportH;viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width;makeActiveCellNormal();var o=e-1;for(var a in rowsCache){if(a>o){removeRowFromCache(a)}}if(options.enableAsyncPostRenderCleanup){startPostProcessingCleanup()}if(activeCellNode&&activeRow>o){resetActiveCell()}var s=h;th=Math.max(options.rowHeight*i,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1)}if(h!==s){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop}var l=scrollTop+offset<=th-viewportH;if(th==0||scrollTop==0){page=offset=0}else if(l){scrollTo(scrollTop+offset)}else{scrollTo(th-viewportH)}if(h!=s&&options.autoHeight){resizeCanvas()}if(options.forceFitColumns&&r!=viewportHasVScroll){autosizeColumns()}updateCanvasWidth(false)}function getVisibleRange(e,t){if(e==null){e=scrollTop}if(t==null){t=scrollLeft}return{top:getRowFromPosition(e),bottom:getRowFromPosition(e+viewportH)+1,leftPx:t,rightPx:t+viewportW}}function getRenderedRange(e,t){var i=getVisibleRange(e,t);var n=Math.round(viewportH/options.rowHeight);var r=options.minRowBuffer;if(vScrollDir==-1){i.top-=n;i.bottom+=r}else if(vScrollDir==1){i.top-=r;i.bottom+=n}else{i.top-=r;i.bottom+=r}i.top=Math.max(0,i.top);i.bottom=Math.min(getDataLengthIncludingAddNew()-1,i.bottom);i.leftPx-=viewportW;i.rightPx+=viewportW;i.leftPx=Math.max(0,i.leftPx);i.rightPx=Math.min(canvasWidth,i.rightPx);return i}function ensureCellNodesInRowsCache(e){var t=rowsCache[e];if(t){if(t.cellRenderQueue.length){var i=t.rowNode.lastChild;while(t.cellRenderQueue.length){var n=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[n]=i;i=i.previousSibling}}}}function cleanUpCells(e,t){var i=0;var n=rowsCache[t];var r=[];for(var o in n.cellNodesByColumnIdx){if(!n.cellNodesByColumnIdx.hasOwnProperty(o)){continue}o=o|0;var a=n.cellColSpans[o];if(columnPosLeft[o]>e.rightPx||columnPosRight[Math.min(columns.length-1,o+a-1)]<e.leftPx){if(!(t==activeRow&&o==activeCell)){r.push(o)}}}var s,l;postProcessgroupId++;while((s=r.pop())!=null){l=n.cellNodesByColumnIdx[s];if(options.enableAsyncPostRenderCleanup&&postProcessedRows[t]&&postProcessedRows[t][s]){queuePostProcessedCellForCleanup(l,s,t)}else{n.rowNode.removeChild(l)}delete n.cellColSpans[s];delete n.cellNodesByColumnIdx[s];if(postProcessedRows[t]){delete postProcessedRows[t][s]}i++}}function cleanUpAndRenderCells(e){var t;var i=[];var n=[];var r;var o=0;var a;for(var s=e.top,l=e.bottom;s<=l;s++){t=rowsCache[s];if(!t){continue}ensureCellNodesInRowsCache(s);cleanUpCells(e,s);r=0;var d=data.getItemMetadata&&data.getItemMetadata(s);d=d&&d.columns;var c=getDataItem(s);for(var u=0,f=columns.length;u<f;u++){if(columnPosLeft[u]>e.rightPx){break}if((a=t.cellColSpans[u])!=null){u+=a>1?a-1:0;continue}a=1;if(d){var h=d[columns[u].id]||d[u];a=h&&h.colspan||1;if(a==="*"){a=f-u}}if(columnPosRight[Math.min(f-1,u+a-1)]>e.leftPx){appendCellHtml(i,s,u,a,c);r++}u+=a>1?a-1:0}if(r){o+=r;n.push(s)}}if(!i.length){return}var p=document.createElement("div");p.innerHTML=i.join("");var m;var g;while((m=n.pop())!=null){t=rowsCache[m];var v;while((v=t.cellRenderQueue.pop())!=null){g=p.lastChild;t.rowNode.appendChild(g);t.cellNodesByColumnIdx[v]=g}}}function renderRows(e){var t=$canvas[0],i=[],n=[],r=false,o=getDataLength();for(var a=e.top,s=e.bottom;a<=s;a++){if(rowsCache[a]){continue}renderedRows++;n.push(a);rowsCache[a]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]};appendRowHtml(i,a,e,o);if(activeCellNode&&activeRow===a){r=true}counter_rows_rendered++}if(!n.length){return}var l=document.createElement("div");l.innerHTML=i.join("");for(var a=0,s=n.length;a<s;a++){rowsCache[n[a]].rowNode=t.appendChild(l.firstChild)}if(r){activeCellNode=getCellNode(activeRow,activeCell)}}function startPostProcessing(){if(!options.enableAsyncPostRender){return}clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function startPostProcessingCleanup(){if(!options.enableAsyncPostRenderCleanup){return}clearTimeout(h_postrenderCleanup);h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}function invalidatePostProcessingResults(e){for(var t in postProcessedRows[e]){if(postProcessedRows[e].hasOwnProperty(t)){postProcessedRows[e][t]="C"}}postProcessFromRow=Math.min(postProcessFromRow,e);postProcessToRow=Math.max(postProcessToRow,e);startPostProcessing()}function updateRowPositions(){for(var e in rowsCache){rowsCache[e].rowNode.style.top=getRowTop(e)+"px"}}function render(){if(!initialized){return}var e=getVisibleRange();var t=getRenderedRange();cleanupRows(t);if(lastRenderedScrollLeft!=scrollLeft){cleanUpAndRenderCells(t)}renderRows(t);postProcessFromRow=e.top;postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,e.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;lastRenderedScrollLeft=scrollLeft;h_render=null}function handleHeaderScroll(){handleElementScroll($headerScroller[0])}function handleHeaderRowScroll(){handleElementScroll($headerRowScroller[0])}function handleFooterRowScroll(){handleElementScroll($footerRowScroller[0])}function handlePreHeaderPanelScroll(){handleElementScroll($preHeaderPanelScroller[0])}function handleElementScroll(e){var t=e.scrollLeft;if(t!=$viewport[0].scrollLeft){$viewport[0].scrollLeft=t}}function handleScroll(){scrollTop=$viewport[0].scrollTop;scrollLeft=$viewport[0].scrollLeft;var e=Math.abs(scrollTop-prevScrollTop);var t=Math.abs(scrollLeft-prevScrollLeft);if(t){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft;if(options.createFooterRow){$footerRowScroller[0].scrollLeft=scrollLeft}if(options.createPreHeaderPanel){$preHeaderPanelScroller[0].scrollLeft=scrollLeft}}if(e){vScrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(e<viewportH){scrollTo(scrollTop+offset)}else{var i=offset;if(h==viewportH){page=0}else{page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)))}offset=Math.round(page*cj);if(i!=offset){invalidateAllRows()}}}if(t||e){if(h_render){clearTimeout(h_render)}if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20){if(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW){render()}else{h_render=setTimeout(render,50)}trigger(self.onViewportChanged,{grid:self})}}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop,grid:self})}function asyncPostProcessRows(){var e=getDataLength();while(postProcessFromRow<=postProcessToRow){var t=vScrollDir>=0?postProcessFromRow++:postProcessToRow--;var i=rowsCache[t];if(!i||t>=e){continue}if(!postProcessedRows[t]){postProcessedRows[t]={}}ensureCellNodesInRowsCache(t);for(var n in i.cellNodesByColumnIdx){if(!i.cellNodesByColumnIdx.hasOwnProperty(n)){continue}n=n|0;var r=columns[n];var o=postProcessedRows[t][n];if(r.asyncPostRender&&o!=="R"){var a=i.cellNodesByColumnIdx[n];if(a){r.asyncPostRender(a,t,getDataItem(t),r,o==="C")}postProcessedRows[t][n]="R"}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function asyncPostProcessCleanupRows(){if(postProcessedCleanupQueue.length>0){var e=postProcessedCleanupQueue[0].groupId;while(postProcessedCleanupQueue.length>0&&postProcessedCleanupQueue[0].groupId==e){var t=postProcessedCleanupQueue.shift();if(t.actionType=="R"){$(t.node).remove()}if(t.actionType=="C"){var i=columns[t.columnIdx];if(i.asyncPostRenderCleanup&&t.node){i.asyncPostRenderCleanup(t.node,t.rowIdx,i)}}}h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}}function updateCellCssStylesOnRenderedRows(e,t){var i,n,r,o;for(var a in rowsCache){o=t&&t[a];r=e&&e[a];if(o){for(n in o){if(!r||o[n]!=r[n]){i=getCellNode(a,getColumnIndex(n));if(i){$(i).removeClass(o[n])}}}}if(r){for(n in r){if(!o||o[n]!=r[n]){i=getCellNode(a,getColumnIndex(n));if(i){$(i).addClass(r[n])}}}}}}function addCellCssStyles(e,t){if(cellCssClasses[e]){throw new Error("addCellCssStyles: cell CSS hash with key '"+e+"' already exists.")}cellCssClasses[e]=t;updateCellCssStylesOnRenderedRows(t,null);trigger(self.onCellCssStylesChanged,{key:e,hash:t,grid:self})}function removeCellCssStyles(e){if(!cellCssClasses[e]){return}updateCellCssStylesOnRenderedRows(null,cellCssClasses[e]);delete cellCssClasses[e];trigger(self.onCellCssStylesChanged,{key:e,hash:null,grid:self})}function setCellCssStyles(e,t){var i=cellCssClasses[e];cellCssClasses[e]=t;updateCellCssStylesOnRenderedRows(t,i);trigger(self.onCellCssStylesChanged,{key:e,hash:t,grid:self})}function getCellCssStyles(e){return cellCssClasses[e]}function flashCell(e,t,i){i=i||100;if(rowsCache[e]){var n=$(getCellNode(e,t));function r(e){if(!e){return}setTimeout(function(){n.queue(function(){n.toggleClass(options.cellFlashingCssClass).dequeue();r(e-1)})},i)}r(4)}}function handleMouseWheel(e){var t=$(e.target).closest(".slick-row")[0];if(t!=rowNodeFromLastMouseWheelEvent){if(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=t){if(options.enableAsyncPostRenderCleanup&&zombieRowPostProcessedFromLastMouseWheelEvent){queuePostProcessedRowForCleanup(zombieRowCacheFromLastMouseWheelEvent,zombieRowPostProcessedFromLastMouseWheelEvent)}else{$canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent)}zombieRowNodeFromLastMouseWheelEvent=null;zombieRowCacheFromLastMouseWheelEvent=null;zombieRowPostProcessedFromLastMouseWheelEvent=null;if(options.enableAsyncPostRenderCleanup){startPostProcessingCleanup()}}rowNodeFromLastMouseWheelEvent=t}}function handleDragInit(e,t){var i=getCellFromEvent(e);if(!i||!cellExists(i.row,i.cell)){return false}var n=trigger(self.onDragInit,t,e);if(e.isImmediatePropagationStopped()){return n}return false}function handleDragStart(e,t){var i=getCellFromEvent(e);if(!i||!cellExists(i.row,i.cell)){return false}var n=trigger(self.onDragStart,t,e);if(e.isImmediatePropagationStopped()){return n}return false}function handleDrag(e,t){return trigger(self.onDrag,t,e)}function handleDragEnd(e,t){trigger(self.onDragEnd,t,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell,grid:self},e);var t=e.isImmediatePropagationStopped();var i=Slick.keyCode;if(!t){if(!e.shiftKey&&!e.altKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList){if(currentEditor.keyCaptureList.indexOf(e.which)>-1){return}}if(e.which==i.HOME){t=e.ctrlKey?navigateTop():navigateRowStart()}else if(e.which==i.END){t=e.ctrlKey?navigateBottom():navigateRowEnd()}}}if(!t){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList){if(currentEditor.keyCaptureList.indexOf(e.which)>-1){return}}if(e.which==i.ESCAPE){if(!getEditorLock().isActive()){return}cancelEditAndSetFocus()}else if(e.which==i.PAGE_DOWN){navigatePageDown();t=true}else if(e.which==i.PAGE_UP){navigatePageUp();t=true}else if(e.which==i.LEFT){t=navigateLeft()}else if(e.which==i.RIGHT){t=navigateRight()}else if(e.which==i.UP){t=navigateUp()}else if(e.which==i.DOWN){t=navigateDown()}else if(e.which==i.TAB){t=navigateNext()}else if(e.which==i.ENTER){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable()}}}t=true}}else if(e.which==i.TAB&&e.shiftKey&&!e.ctrlKey&&!e.altKey){t=navigatePrev()}}if(t){e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(e){}}}function handleClick(e){if(!currentEditor){if(e.target!=document.activeElement||$(e.target).hasClass("slick-cell")){setFocus()}}var t=getCellFromEvent(e);if(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell){return}trigger(self.onClick,{row:t.row,cell:t.cell,grid:self},e);if(e.isImmediatePropagationStopped()){return}if(canCellBeActive(t.row,t.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(t.row,false);var i=e.target&&e.target.className===Slick.preClickClassName;setActiveCellInternal(getCellNode(t.row,t.cell),null,i)}}}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);if(t.length===0){return}if(activeCellNode===t[0]&&currentEditor!==null){return}trigger(self.onContextMenu,{grid:self},e)}function handleDblClick(e){var t=getCellFromEvent(e);if(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell){return}trigger(self.onDblClick,{row:t.row,cell:t.cell,grid:self},e);if(e.isImmediatePropagationStopped()){return}if(options.editable){gotoCell(t.row,t.cell,true)}}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column"),grid:self},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column"),grid:self},e)}function handleHeaderContextMenu(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns");var i=t&&t.data("column");trigger(self.onHeaderContextMenu,{column:i,grid:self},e)}function handleHeaderClick(e){if(columnResizeDragging)return;var t=$(e.target).closest(".slick-header-column",".slick-header-columns");var i=t&&t.data("column");if(i){trigger(self.onHeaderClick,{column:i,grid:self},e)}}function handleMouseEnter(e){trigger(self.onMouseEnter,{grid:self},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{grid:self},e)}function cellExists(e,t){return!(e<0||e>=getDataLength()||t<0||t>=columns.length)}function getCellFromPoint(e,t){var i=getRowFromPosition(t);var n=0;var r=0;for(var o=0;o<columns.length&&r<e;o++){r+=columns[o].width;n++}if(n<0){n=0}return{row:i,cell:n-1}}function getCellFromNode(e){var t=/l\d+/.exec(e.className);if(!t){throw new Error("getCellFromNode: cannot get cell - "+e.className)}return parseInt(t[0].substr(1,t[0].length-1),10)}function getRowFromNode(e){for(var t in rowsCache){if(rowsCache[t].rowNode===e){return t|0}}return null}function getCellFromEvent(e){var t=$(e.target).closest(".slick-cell",$canvas);if(!t.length){return null}var i=getRowFromNode(t[0].parentNode);var n=getCellFromNode(t[0]);if(i==null||n==null){return null}else{return{row:i,cell:n}}}function getCellNodeBox(e,t){if(!cellExists(e,t)){return null}var i=getRowTop(e);var n=i+options.rowHeight-1;var r=0;for(var o=0;o<t;o++){r+=columns[o].width}var a=r+columns[t].width;return{top:i,left:r,bottom:n,right:a}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){if(tabbingDirection==-1){$focusSink[0].focus()}else{$focusSink2[0].focus()}}function scrollCellIntoView(e,t,i){scrollRowIntoView(e,i);var n=getColspan(e,t);internalScrollColumnIntoView(columnPosLeft[t],columnPosRight[t+(n>1?n-1:0)])}function internalScrollColumnIntoView(e,t){var i=scrollLeft+viewportW;if(e<scrollLeft){$viewport.scrollLeft(e);handleScroll();render()}else if(t>i){$viewport.scrollLeft(Math.min(e,t-$viewport[0].clientWidth));handleScroll();render()}}function scrollColumnIntoView(e){internalScrollColumnIntoView(columnPosLeft[e],columnPosRight[e])}function setActiveCellInternal(e,t,i,n){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active");if(rowsCache[activeRow]){$(rowsCache[activeRow].rowNode).removeClass("active")}}var r=activeCellNode!==e;activeCellNode=e;if(activeCellNode!=null){activeRow=getRowFromNode(activeCellNode.parentNode);activeCell=activePosX=getCellFromNode(activeCellNode);if(t==null){t=activeRow==getDataLength()||options.autoEdit}if(options.showCellSelection){$(activeCellNode).addClass("active");$(rowsCache[activeRow].rowNode).addClass("active")}if(options.editable&&t&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable(undefined,i)},options.asyncEditorLoadDelay)}else{makeActiveCellEditable(undefined,i)}}}else{activeRow=activeCell=null}if(!n){trigger(self.onActiveCellChanged,getActiveCell())}}function clearTextSelection(){if(document.selection&&document.selection.empty){try{document.selection.empty()}catch(e){}}else if(window.getSelection){var e=window.getSelection();if(e&&e.removeAllRanges){e.removeAllRanges()}}}function isCellPotentiallyEditable(e,t){var i=getDataLength();if(e<i&&!getDataItem(e)){return false}if(columns[t].cannotTriggerInsert&&e>=i){return false}if(!getEditor(e,t)){return false}return true}function makeActiveCellNormal(){if(!currentEditor){return}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor,grid:self});currentEditor.destroy();currentEditor=null;if(activeCellNode){var e=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(e){var t=columns[activeCell];var i=getFormatter(activeRow,t);var n=i(activeRow,activeCell,getDataItemValueForColumn(e,t),t,e,self);applyFormatResultToCellNode(n,activeCellNode);invalidatePostProcessingResults(activeRow)}}if(navigator.userAgent.toLowerCase().match(/msie/)){clearTextSelection()}getEditorLock().deactivate(editController)}function makeActiveCellEditable(e,t){if(!activeCellNode){return}if(!options.editable){throw new Error("Grid : makeActiveCellEditable : should never get called when options.editable is false")}clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return}var i=columns[activeCell];var n=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:i,grid:self})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");var r=e||getEditor(activeRow,activeCell);if(!e&&!r.suppressClearOnEdit){activeCellNode.innerHTML=""}currentEditor=new r({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:i,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(n){currentEditor.loadValue(n);if(t&&currentEditor.preClick){currentEditor.preClick()}}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange()}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown()}}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus()}}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:true};t.bottom=t.top+t.height;t.right=t.left+t.width;var i=e.offsetParent;while((e=e.parentNode)!=document.body){if(e==null)break;if(t.visible&&e.scrollHeight!=e.offsetHeight&&$(e).css("overflowY")!="visible"){t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight}if(t.visible&&e.scrollWidth!=e.offsetWidth&&$(e).css("overflowX")!="visible"){t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth}t.left-=e.scrollLeft;t.top-=e.scrollTop;if(e===i){t.left+=e.offsetLeft;t.top+=e.offsetTop;i=e.offsetParent}t.bottom=t.top+t.height;t.right=t.left+t.width}return t}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode){return}trigger(self.onActiveCellPositionChanged,{grid:self});if(currentEditor){var e=getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!e.visible){currentEditor.hide()}else{currentEditor.show()}}if(currentEditor.position){currentEditor.position(e)}}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode){return null}else{return{row:activeRow,cell:activeCell,grid:self}}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(e,t){var i=e*options.rowHeight;var n=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((e+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(t?i:n);render()}else if(e*options.rowHeight<scrollTop+offset){scrollTo(t?n:i);render()}}function scrollRowToTop(e){scrollTo(e*options.rowHeight);render()}function scrollPage(e){var t=e*numVisibleRows;scrollTo((getRowFromPosition(scrollTop)+t)*options.rowHeight);render();if(options.enableCellNavigation&&activeRow!=null){var i=activeRow+t;var n=getDataLengthIncludingAddNew();if(i>=n){i=n-1}if(i<0){i=0}var r=0,o=null;var a=activePosX;while(r<=activePosX){if(canCellBeActive(i,r)){o=r}r+=getColspan(i,r)}if(o!==null){setActiveCellInternal(getCellNode(i,o));activePosX=a}else{resetActiveCell()}}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function navigateTop(){navigateToRow(0)}function navigateBottom(){navigateToRow(getDataLength()-1)}function navigateToRow(e){var t=getDataLength();if(!t)return true;if(e<0)e=0;else if(e>=t)e=t-1;scrollCellIntoView(e,0,true);if(options.enableCellNavigation&&activeRow!=null){var i=0,n=null;var r=activePosX;while(i<=activePosX){if(canCellBeActive(e,i)){n=i}i+=getColspan(e,i)}if(n!==null){setActiveCellInternal(getCellNode(e,n));activePosX=r}else{resetActiveCell()}}return true}function getColspan(e,t){var i=data.getItemMetadata&&data.getItemMetadata(e);if(!i||!i.columns){return 1}var n=i.columns[columns[t].id]||i.columns[t];var r=n&&n.colspan;if(r==="*"){r=columns.length-t}else{r=r||1}return r}function findFirstFocusableCell(e){var t=0;while(t<columns.length){if(canCellBeActive(e,t)){return t}t+=getColspan(e,t)}return null}function findLastFocusableCell(e){var t=0;var i=null;while(t<columns.length){if(canCellBeActive(e,t)){i=t}t+=getColspan(e,t)}return i}function gotoRight(e,t,i){if(t>=columns.length){return null}do{t+=getColspan(e,t)}while(t<columns.length&&!canCellBeActive(e,t));if(t<columns.length){return{row:e,cell:t,posX:t}}return null}function gotoLeft(e,t,i){if(t<=0){return null}var n=findFirstFocusableCell(e);if(n===null||n>=t){return null}var r={row:e,cell:n,posX:n};var o;while(true){o=gotoRight(r.row,r.cell,r.posX);if(!o){return null}if(o.cell>=t){return r}r=o}}function gotoDown(e,t,i){var n;var r=getDataLengthIncludingAddNew();while(true){if(++e>=r){return null}n=t=0;while(t<=i){n=t;t+=getColspan(e,t)}if(canCellBeActive(e,n)){return{row:e,cell:n,posX:i}}}}function gotoUp(e,t,i){var n;while(true){if(--e<0){return null}n=t=0;while(t<=i){n=t;t+=getColspan(e,t)}if(canCellBeActive(e,n)){return{row:e,cell:n,posX:i}}}}function gotoNext(e,t,i){if(e==null&&t==null){e=t=i=0;if(canCellBeActive(e,t)){return{row:e,cell:t,posX:t}}}var n=gotoRight(e,t,i);if(n){return n}var r=null;var o=getDataLengthIncludingAddNew();if(e===o-1){e--}while(++e<o){r=findFirstFocusableCell(e);if(r!==null){return{row:e,cell:r,posX:r}}}return null}function gotoPrev(e,t,i){if(e==null&&t==null){e=getDataLengthIncludingAddNew()-1;t=i=columns.length-1;if(canCellBeActive(e,t)){return{row:e,cell:t,posX:t}}}var n;var r;while(!n){n=gotoLeft(e,t,i);if(n){break}if(--e<0){return null}t=0;r=findLastFocusableCell(e);if(r!==null){n={row:e,cell:r,posX:r}}}return n}function gotoRowStart(e,t,i){var n=findFirstFocusableCell(e);if(n===null)return null;return{row:e,cell:n,posX:i}}function gotoRowEnd(e,t,i){var n=findLastFocusableCell(e);if(n===null)return null;return{row:e,cell:n,posX:i}}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigateRowStart(){return navigate("home")}function navigateRowEnd(){return navigate("end")}function navigate(e){if(!options.enableCellNavigation){return false}if(!activeCellNode&&e!="prev"&&e!="next"){return false}if(!getEditorLock().commitCurrentEdit()){return true}setFocus();var t={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};tabbingDirection=t[e];var i={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext,home:gotoRowStart,end:gotoRowEnd};var n=i[e];var r=n(activeRow,activeCell,activePosX);if(r){var o=r.row==getDataLength();scrollCellIntoView(r.row,r.cell,!o&&options.emulatePagingWhenScrolling);setActiveCellInternal(getCellNode(r.row,r.cell));activePosX=r.posX;return true}else{setActiveCellInternal(getCellNode(activeRow,activeCell));return false}}function getCellNode(e,t){if(rowsCache[e]){ensureCellNodesInRowsCache(e);return rowsCache[e].cellNodesByColumnIdx[t]}return null}function setActiveCell(e,t,i,n,r){if(!initialized){return}if(e>getDataLength()||e<0||t>=columns.length||t<0){return}if(!options.enableCellNavigation){return}scrollCellIntoView(e,t,false);setActiveCellInternal(getCellNode(e,t),i,n,r)}function canCellBeActive(e,t){if(!options.enableCellNavigation||e>=getDataLengthIncludingAddNew()||e<0||t>=columns.length||t<0){return false}var i=data.getItemMetadata&&data.getItemMetadata(e);if(i&&typeof i.focusable!=="undefined"){return!!i.focusable}var n=i&&i.columns;if(n&&n[columns[t].id]&&typeof n[columns[t].id].focusable!=="undefined"){return!!n[columns[t].id].focusable}if(n&&n[t]&&typeof n[t].focusable!=="undefined"){return!!n[t].focusable}return!!columns[t].focusable}function canCellBeSelected(e,t){if(e>=getDataLength()||e<0||t>=columns.length||t<0){return false}var i=data.getItemMetadata&&data.getItemMetadata(e);if(i&&typeof i.selectable!=="undefined"){return!!i.selectable}var n=i&&i.columns&&(i.columns[columns[t].id]||i.columns[t]);if(n&&typeof n.selectable!=="undefined"){return!!n.selectable}return!!columns[t].selectable}function gotoCell(e,t,i){if(!initialized){return}if(!canCellBeActive(e,t)){return}if(!getEditorLock().commitCurrentEdit()){return}scrollCellIntoView(e,t,false);var n=getCellNode(e,t);setActiveCellInternal(n,i||e===getDataLength()||options.autoEdit);if(!currentEditor){setFocus()}}function commitCurrentEdit(){var e=getDataItem(activeRow);var t=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var i=currentEditor.validate();if(i.valid){if(activeRow<getDataLength()){var n={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue);updateRow(this.row);trigger(self.onCellChange,{row:this.row,cell:this.cell,item:e,grid:self})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue);updateRow(this.row);trigger(self.onCellChange,{row:this.row,cell:this.cell,item:e,grid:self})}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(e,t,n)}else{n.execute();makeActiveCellNormal()}}else{var r={};currentEditor.applyValue(r,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:r,column:t,grid:self})}return!getEditorLock().isActive()}else{$(activeCellNode).removeClass("invalid");$(activeCellNode).width();$(activeCellNode).addClass("invalid");trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:i,row:activeRow,cell:activeCell,column:t,grid:self});currentEditor.focus();return false}}makeActiveCellNormal()}return true}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(e){var t=[];var i=columns.length-1;for(var n=0;n<e.length;n++){t.push(new Slick.Range(e[n],0,e[n],i))}return t}function getSelectedRows(){if(!selectionModel){throw new Error("Selection model is not set")}return selectedRows}function setSelectedRows(e){if(!selectionModel){throw new Error("Selection model is not set")}selectionModel.setSelectedRanges(rowsToRanges(e))}this.debug=function(){var e="";e+="\n"+"counter_rows_rendered:  "+counter_rows_rendered;e+="\n"+"counter_rows_removed:  "+counter_rows_removed;e+="\n"+"renderedRows:  "+renderedRows;e+="\n"+"numVisibleRows:  "+numVisibleRows;e+="\n"+"maxSupportedCssHeight:  "+maxSupportedCssHeight;e+="\n"+"n(umber of pages):  "+n;e+="\n"+"(current) page:  "+page;e+="\n"+"page height (ph):  "+ph;e+="\n"+"vScrollDir:  "+vScrollDir;alert(e)};this.eval=function(expr){return eval(expr)};$.extend(this,{slickGridVersion:"2.3.16",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,updatePagingStatusFromView:updatePagingStatusFromView,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,scrollColumnIntoView:scrollColumnIntoView,getCanvasNode:getCanvasNode,getUID:getUID,getHeaderColumnWidthDiff:getHeaderColumnWidthDiff,getScrollbarDimensions:getScrollbarDimensions,getHeadersWidth:getHeadersWidth,getCanvasWidth:getCanvasWidth,focus:setFocus,scrollTo:scrollTo,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,navigateTop:navigateTop,navigateBottom:navigateBottom,navigateRowStart:navigateRowStart,navigateRowEnd:navigateRowEnd,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,getPreHeaderPanel:getPreHeaderPanel,setPreHeaderPanelVisibility:setPreHeaderPanelVisibility,getHeader:getHeader,getHeaderColumn:getHeaderColumn,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,setFooterRowVisibility:setFooterRowVisibility,getFooterRow:getFooterRow,getFooterRowColumn:getFooterRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController});init()}})(jQuery)}).call(this,__webpack_require__(0))},function(e,t,i){(function(e){(function(Fe){Fe.extend(true,window,{Slick:{Data:{DataView:e,Aggregators:{Avg:t,Min:i,Max:n,Sum:r}}}});function e(r){var l=this;var e={groupItemMetadataProvider:null,inlineFilters:false};var c="id";var o=[];var d=[];var a={};var u=null;var f=null;var h=null;var n=false;var s=true;var p;var m;var g={};var v={};var _;var b=[];var y;var w;var x=[];var C={getter:null,formatter:null,comparer:function(e,t){return e.value===t.value?0:e.value>t.value?1:-1},predefinedValues:[],aggregators:[],aggregateEmpty:false,aggregateCollapsed:false,aggregateChildGroups:false,collapsed:false,displayTotalsRow:true,lazyTotalsCalculation:false};var k=[];var S=[];var T=[];var N=":|:";var D=0;var P=0;var E=0;var M=new Slick.Event;var I=new Slick.Event;var O=new Slick.Event;r=Fe.extend(true,{},e,r);function t(){n=true}function i(){n=false;je()}function A(e){g=e}function R(e){_=e}function L(e){e=e||0;var t;for(var i=e,n=o.length;i<n;i++){t=o[i][c];if(t===undefined){throw new Error("Each data element must implement a unique 'id' property")}a[t]=i}}function z(){var e;for(var t=0,i=o.length;t<i;t++){e=o[t][c];if(e===undefined||a[e]!==t){throw new Error("Each data element must implement a unique 'id' property")}}}function j(){return o}function B(e,t){if(t!==undefined){c=t}o=b=e;a={};L();z();je()}function q(e){if(e.pageSize!=undefined){D=e.pageSize;P=D?Math.min(P,Math.max(0,Math.ceil(E/D)-1)):0}if(e.pageNum!=undefined){P=Math.min(e.pageNum,Math.max(0,Math.ceil(E/D)-1))}O.notify(F(),null,l);je()}function F(){var e=D?Math.max(1,Math.ceil(E/D)):1;return{pageSize:D,pageNum:P,totalRows:E,totalPages:e,dataView:l}}function U(e,t){s=t;m=e;p=null;if(t===false){o.reverse()}o.sort(e);if(t===false){o.reverse()}a={};L();je()}function H(e,t){s=t;p=e;m=null;var i=Object.prototype.toString;Object.prototype.toString=typeof e=="function"?e:function(){return this[e]};if(t===false){o.reverse()}o.sort();Object.prototype.toString=i;if(t===false){o.reverse()}a={};L();je()}function W(){if(m){U(m,s)}else if(p){H(p,s)}}function $(){return b}function V(){return f}function G(e){f=e;if(r.inlineFilters){y=Me();w=Ie()}je()}function Z(){return k}function K(e){if(!r.groupItemMetadataProvider){r.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider}S=[];T=[];e=e||[];k=e instanceof Array?e:[e];for(var t=0;t<k.length;t++){var i=k[t]=Fe.extend(true,{},C,k[t]);i.getterIsAFn=typeof i.getter==="function";i.compiledAccumulators=[];var n=i.aggregators.length;while(n--){i.compiledAccumulators[n]=Ee(i.aggregators[n])}T[t]={}}je()}function Y(e,t,i){if(e==null){K([]);return}K({getter:e,formatter:t,comparer:i})}function J(e,t){if(!k.length){throw new Error("At least one grouping must be specified before calling setAggregators().")}k[0].aggregators=e;k[0].aggregateCollapsed=t;K(k)}function Q(e){return o[e]}function X(e){return a[e]}function ee(){if(!u){u={};for(var e=0,t=d.length;e<t;e++){u[d[e][c]]=e}}}function te(e){ee();return u[e[c]]}function ie(e){ee();return u[e]}function ne(e){return o[a[e]]}function re(e){var t=[];ee();for(var i=0,n=e.length;i<n;i++){var r=u[e[i][c]];if(r!=null){t[t.length]=r}}return t}function oe(e){var t=[];ee();for(var i=0,n=e.length;i<n;i++){var r=u[e[i]];if(r!=null){t[t.length]=r}}return t}function ae(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(e[i]<d.length){t[t.length]=d[e[i]][c]}}return t}function se(e,t){if(a[e]===undefined||e!==t[c]){throw new Error("Invalid or non-matching id")}o[a[e]]=t;if(!h){h={}}h[e]=true;je()}function le(e,t){o.splice(e,0,t);L(e);je()}function de(e){o.push(e);L(o.length-1);je()}function ce(e){var t=a[e];if(t===undefined){throw new Error("Invalid id")}delete a[e];o.splice(t,1);L(t);je()}function ue(e){if(!m){throw new Error("sortedAddItem() requires a sort comparer, use sort()")}le(he(e),e)}function fe(e,t){if(a[e]===undefined||e!==t[c]){throw new Error("Invalid or non-matching id "+a[e])}if(!m){throw new Error("sortedUpdateItem() requires a sort comparer, use sort()")}var i=ne(e);if(m(i,t)!==0){ce(e);ue(t)}else{se(e,t)}}function he(e){var t=0,i=o.length;while(t<i){var n=t+i>>>1;if(m(o[n],e)===-1){t=n+1}else{i=n}}return t}function pe(){return d.length}function me(e){var t=d[e];if(t&&t.__group&&t.totals&&!t.totals.initialized){var i=k[t.level];if(!i.displayTotalsRow){Se(t.totals);t.title=i.formatter?i.formatter(t):t.value}}else if(t&&t.__groupTotals&&!t.initialized){Se(t)}return t}function ge(e){var t=d[e];if(t===undefined){return null}if(t.__group){return r.groupItemMetadataProvider.getGroupRowMetadata(t)}if(t.__groupTotals){return r.groupItemMetadataProvider.getTotalsRowMetadata(t)}return null}function ve(e,t){if(e==null){for(var i=0;i<k.length;i++){T[i]={};k[i].collapsed=t}}else{T[e]={};k[e].collapsed=t}je()}function _e(e){ve(e,true)}function be(e){ve(e,false)}function ye(e,t,i){T[e][t]=k[e].collapsed^i;je()}function we(e){var t=Array.prototype.slice.call(arguments);var i=t[0];if(t.length==1&&i.indexOf(N)!=-1){ye(i.split(N).length-1,i,true)}else{ye(t.length-1,t.join(N),true)}}function xe(e){var t=Array.prototype.slice.call(arguments);var i=t[0];if(t.length==1&&i.indexOf(N)!=-1){ye(i.split(N).length-1,i,false)}else{ye(t.length-1,t.join(N),false)}}function Ce(){return S}function ke(e,t){var i;var n;var r=[];var o={};var a;var s=t?t.level+1:0;var l=k[s];for(var d=0,c=l.predefinedValues.length;d<c;d++){n=l.predefinedValues[d];i=o[n];if(!i){i=new Slick.Group;i.value=n;i.level=s;i.groupingKey=(t?t.groupingKey+N:"")+n;r[r.length]=i;o[n]=i}}for(var d=0,c=e.length;d<c;d++){a=e[d];n=l.getterIsAFn?l.getter(a):a[l.getter];i=o[n];if(!i){i=new Slick.Group;i.value=n;i.level=s;i.groupingKey=(t?t.groupingKey+N:"")+n;r[r.length]=i;o[n]=i}i.rows[i.count++]=a}if(s<k.length-1){for(var d=0;d<r.length;d++){i=r[d];i.groups=ke(i.rows,i)}}r.sort(k[s].comparer);return r}function Se(e){var t=e.group;var i=k[t.level];var n=t.level==k.length;var r,o=i.aggregators.length;if(!n&&i.aggregateChildGroups){var a=t.groups.length;while(a--){if(!t.groups[a].totals.initialized){Se(t.groups[a].totals)}}}while(o--){r=i.aggregators[o];r.init();if(!n&&i.aggregateChildGroups){i.compiledAccumulators[o].call(r,t.groups)}else{i.compiledAccumulators[o].call(r,t.rows)}r.storeResult(e)}e.initialized=true}function Te(e){var t=k[e.level];var i=new Slick.GroupTotals;i.group=e;e.totals=i;if(!t.lazyTotalsCalculation){Se(i)}}function Ne(e,t){t=t||0;var i=k[t];var n=i.collapsed;var r=T[t];var o=e.length,a;while(o--){a=e[o];if(a.collapsed&&!i.aggregateCollapsed){continue}if(a.groups){Ne(a.groups,t+1)}if(i.aggregators.length&&(i.aggregateEmpty||a.rows.length||a.groups&&a.groups.length)){Te(a)}a.collapsed=n^r[a.groupingKey];a.title=i.formatter?i.formatter(a):a.value}}function De(e,t){t=t||0;var i=k[t];var n=[],r,o=0,a;for(var s=0,l=e.length;s<l;s++){a=e[s];n[o++]=a;if(!a.collapsed){r=a.groups?De(a.groups,t+1):a.rows;for(var d=0,c=r.length;d<c;d++){n[o++]=r[d]}}if(a.totals&&i.displayTotalsRow&&(!a.collapsed||i.aggregateCollapsed)){n[o++]=a.totals}}return n}function Pe(e){var t=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/;var i=e.toString().match(t);return{params:i[1].split(","),body:i[2]}}function Ee(e){var t=Pe(e.accumulate);var i=new Function("_items","for (var "+t.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+t.params[0]+" = _items[_i]; "+t.body+"}");i.displayName=i.name="compiledAccumulatorLoop";return i}function Me(){var e=Pe(f);var t="{ continue _coreloop; }$1";var i="{ _retval[_idx++] = $item$; continue _coreloop; }$1";var n=e.body.replace(/return false\s*([;}]|\}|$)/gi,t).replace(/return!1([;}]|\}|$)/gi,t).replace(/return true\s*([;}]|\}|$)/gi,i).replace(/return!0([;}]|\}|$)/gi,i).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");var r=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");r=r.replace(/\$filter\$/gi,n);r=r.replace(/\$item\$/gi,e.params[0]);r=r.replace(/\$args\$/gi,e.params[1]);var o=new Function("_items,_args",r);o.displayName=o.name="compiledFilter";return o}function Ie(){var e=Pe(f);var t="{ continue _coreloop; }$1";var i="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1";var n=e.body.replace(/return false\s*([;}]|\}|$)/gi,t).replace(/return!1([;}]|\}|$)/gi,t).replace(/return true\s*([;}]|\}|$)/gi,i).replace(/return!0([;}]|\}|$)/gi,i).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");var r=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");r=r.replace(/\$filter\$/gi,n);r=r.replace(/\$item\$/gi,e.params[0]);r=r.replace(/\$args\$/gi,e.params[1]);var o=new Function("_items,_args,_cache",r);o.displayName=o.name="compiledFilterWithCaching";return o}function Oe(e,t){var i=[],n=0;for(var r=0,o=e.length;r<o;r++){if(f(e[r],t)){i[n++]=e[r]}}return i}function Ae(e,t,i){var n=[],r=0,o;for(var a=0,s=e.length;a<s;a++){o=e[a];if(i[a]){n[r++]=o}else if(f(o,t)){n[r++]=o;i[a]=true}}return n}function Re(e){if(f){var t=r.inlineFilters?y:Oe;var i=r.inlineFilters?w:Ae;if(g.isFilterNarrowing){b=t(b,_)}else if(g.isFilterExpanding){b=i(e,_,x)}else if(!g.isFilterUnchanged){b=t(e,_)}}else{b=D?e:e.concat()}var n;if(D){if(b.length<=P*D){if(b.length===0){P=0}else{P=Math.floor((b.length-1)/D)}}n=b.slice(D*P,D*P+D)}else{n=b}return{totalRows:b.length,rows:n}}function Le(e,t){var i,n,r,o=[];var a=0,s=t.length;if(g&&g.ignoreDiffsBefore){a=Math.max(0,Math.min(t.length,g.ignoreDiffsBefore))}if(g&&g.ignoreDiffsAfter){s=Math.min(t.length,Math.max(0,g.ignoreDiffsAfter))}for(var l=a,d=e.length;l<s;l++){if(l>=d){o[o.length]=l}else{i=t[l];n=e[l];if(k.length&&(r=i.__nonDataRow||n.__nonDataRow)&&i.__group!==n.__group||i.__group&&!i.equals(n)||r&&(i.__groupTotals||n.__groupTotals)||i[c]!=n[c]||h&&h[i[c]]){o[o.length]=l}}}return o}function ze(e){u=null;if(g.isFilterNarrowing!=v.isFilterNarrowing||g.isFilterExpanding!=v.isFilterExpanding){x=[]}var t=Re(e);E=t.totalRows;var i=t.rows;S=[];if(k.length){S=ke(i);if(S.length){Ne(S);i=De(S)}}var n=Le(d,i);d=i;return n}function je(){if(n){return}var e=d.length;var t=E;var i=ze(o,f);if(D&&E<P*D){P=Math.max(0,Math.ceil(E/D)-1);i=ze(o,f)}h=null;v=g;g={};if(t!==E){O.notify(F(),null,l)}if(e!==d.length){M.notify({previous:e,current:d.length,dataView:l},null,l)}if(i.length>0){I.notify({rows:i,dataView:l},null,l)}}function Be(r,t,o){var a=this;var s;var l=a.mapRowsToIds(r.getSelectedRows());var i=new Slick.Event;function d(e){if(l.join(",")==e.join(",")){return}l=e;i.notify({grid:r,ids:l,dataView:a},new Slick.EventData,a)}function e(){if(l.length>0){s=true;var e=a.mapIdsToRows(l);if(!t){d(a.mapRowsToIds(e))}r.setSelectedRows(e);s=false}}r.onSelectedRowsChanged.subscribe(function(e,t){if(s){return}var i=a.mapRowsToIds(r.getSelectedRows());if(!o||!r.getOptions().multiSelect){d(i)}else{var n=Fe.grep(l,function(e){return a.getRowById(e)===undefined});d(n.concat(i))}});this.onRowsChanged.subscribe(e);this.onRowCountChanged.subscribe(e);return i}function qe(n,r){var o;var a;i(n.getCellCssStyles(r));function i(e){o={};for(var t in e){var i=d[t][c];o[i]=e[t]}}function s(){if(o){a=true;ee();var e={};for(var t in o){var i=u[t];if(i!=undefined){e[i]=o[t]}}n.setCellCssStyles(r,e);a=false}}n.onCellCssStylesChanged.subscribe(function(e,t){if(a){return}if(r!=t.key){return}if(t.hash){i(t.hash)}else{n.onCellCssStylesChanged.unsubscribe(styleChanged);l.onRowsChanged.unsubscribe(s);l.onRowCountChanged.unsubscribe(s)}});this.onRowsChanged.subscribe(s);this.onRowCountChanged.subscribe(s)}Fe.extend(this,{beginUpdate:t,endUpdate:i,setPagingOptions:q,getPagingInfo:F,getItems:j,setItems:B,setFilter:G,getFilter:V,getFilteredItems:$,sort:U,fastSort:H,reSort:W,setGrouping:K,getGrouping:Z,groupBy:Y,setAggregators:J,collapseAllGroups:_e,expandAllGroups:be,collapseGroup:we,expandGroup:xe,getGroups:Ce,getIdxById:X,getRowByItem:te,getRowById:ie,getItemById:ne,getItemByIdx:Q,mapItemsToRows:re,mapRowsToIds:ae,mapIdsToRows:oe,setRefreshHints:A,setFilterArgs:R,refresh:je,updateItem:se,insertItem:le,addItem:de,deleteItem:ce,sortedAddItem:ue,sortedUpdateItem:fe,syncGridSelection:Be,syncGridCellCssStyles:qe,getLength:pe,getItem:me,getItemMetadata:ge,onRowCountChanged:M,onRowsChanged:I,onPagingInfoChanged:O})}function t(e){this.field_=e;this.init=function(){this.count_=0;this.nonNullCount_=0;this.sum_=0};this.accumulate=function(e){var t=e[this.field_];this.count_++;if(t!=null&&t!==""&&!isNaN(t)){this.nonNullCount_++;this.sum_+=parseFloat(t)}};this.storeResult=function(e){if(!e.avg){e.avg={}}if(this.nonNullCount_!=0){e.avg[this.field_]=this.sum_/this.nonNullCount_}}}function i(e){this.field_=e;this.init=function(){this.min_=null};this.accumulate=function(e){var t=e[this.field_];if(t!=null&&t!==""&&!isNaN(t)){if(this.min_==null||t<this.min_){this.min_=t}}};this.storeResult=function(e){if(!e.min){e.min={}}e.min[this.field_]=this.min_}}function n(e){this.field_=e;this.init=function(){this.max_=null};this.accumulate=function(e){var t=e[this.field_];if(t!=null&&t!==""&&!isNaN(t)){if(this.max_==null||t>this.max_){this.max_=t}}};this.storeResult=function(e){if(!e.max){e.max={}}e.max[this.field_]=this.max_}}function r(e){this.field_=e;this.init=function(){this.sum_=null};this.accumulate=function(e){var t=e[this.field_];if(t!=null&&t!==""&&!isNaN(t)){this.sum_+=parseFloat(t)}};this.storeResult=function(e){if(!e.sum){e.sum={}}e.sum[this.field_]=this.sum_}}})(e)}).call(this,i(0))},function(e,t,i){(function(e){(function(a){a.extend(true,window,{Slick:{Editors:{Text:e,Integer:t,Float:s,Date:i,YesNoSelect:n,Checkbox:r,PercentComplete:o,LongText:l}}});function e(i){var t;var n;var e=this;this.init=function(){t=a("<INPUT type=text class='editor-text' />").appendTo(i.container).on("keydown.nav",function(e){if(e.keyCode===a.ui.keyCode.LEFT||e.keyCode===a.ui.keyCode.RIGHT){e.stopImmediatePropagation()}}).focus().select()};this.destroy=function(){t.remove()};this.focus=function(){t.focus()};this.getValue=function(){return t.val()};this.setValue=function(e){t.val(e)};this.loadValue=function(e){n=e[i.column.field]||"";t.val(n);t[0].defaultValue=n;t.select()};this.serializeValue=function(){return t.val()};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(t.val()==""&&n==null)&&t.val()!=n};this.validate=function(){if(i.column.validator){var e=i.column.validator(t.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}function t(i){var t;var n;var e=this;this.init=function(){t=a("<INPUT type=text class='editor-text' />");t.on("keydown.nav",function(e){if(e.keyCode===a.ui.keyCode.LEFT||e.keyCode===a.ui.keyCode.RIGHT){e.stopImmediatePropagation()}});t.appendTo(i.container);t.focus().select()};this.destroy=function(){t.remove()};this.focus=function(){t.focus()};this.loadValue=function(e){n=e[i.column.field];t.val(n);t[0].defaultValue=n;t.select()};this.serializeValue=function(){return parseInt(t.val(),10)||0};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(t.val()==""&&n==null)&&t.val()!=n};this.validate=function(){if(isNaN(t.val())){return{valid:false,msg:"Please enter a valid integer"}}if(i.column.validator){var e=i.column.validator(t.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}function s(i){var n;var r;var e=this;this.init=function(){n=a("<INPUT type=text class='editor-text' />");n.on("keydown.nav",function(e){if(e.keyCode===a.ui.keyCode.LEFT||e.keyCode===a.ui.keyCode.RIGHT){e.stopImmediatePropagation()}});n.appendTo(i.container);n.focus().select()};this.destroy=function(){n.remove()};this.focus=function(){n.focus()};function o(){var e=i.column.editorFixedDecimalPlaces;if(typeof e=="undefined"){e=s.DefaultDecimalPlaces}return!e&&e!==0?null:e}this.loadValue=function(e){r=e[i.column.field];var t=o();if(t!==null&&(r||r===0)&&r.toFixed){r=r.toFixed(t)}n.val(r);n[0].defaultValue=r;n.select()};this.serializeValue=function(){var e=parseFloat(n.val());if(s.AllowEmptyValue){if(!e&&e!==0){e=""}}else{e=e||0}var t=o();if(t!==null&&(e||e===0)&&e.toFixed){e=parseFloat(e.toFixed(t))}return e};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(n.val()==""&&r==null)&&n.val()!=r};this.validate=function(){if(isNaN(n.val())){return{valid:false,msg:"Please enter a valid number"}}if(i.column.validator){var e=i.column.validator(n.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}s.DefaultDecimalPlaces=null;s.AllowEmptyValue=false;function i(i){var t;var n;var e=this;var r=false;this.init=function(){t=a("<INPUT type=text class='editor-text' />");t.appendTo(i.container);t.focus().select();t.datepicker({showOn:"button",buttonImageOnly:true,beforeShow:function(){r=true},onClose:function(){r=false}});t.width(t.width()-18)};this.destroy=function(){a.datepicker.dpDiv.stop(true,true);t.datepicker("hide");t.datepicker("destroy");t.remove()};this.show=function(){if(r){a.datepicker.dpDiv.stop(true,true).show()}};this.hide=function(){if(r){a.datepicker.dpDiv.stop(true,true).hide()}};this.position=function(e){if(!r){return}a.datepicker.dpDiv.css("top",e.top+30).css("left",e.left)};this.focus=function(){t.focus()};this.loadValue=function(e){n=e[i.column.field];t.val(n);t[0].defaultValue=n;t.select()};this.serializeValue=function(){return t.val()};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(t.val()==""&&n==null)&&t.val()!=n};this.validate=function(){if(i.column.validator){var e=i.column.validator(t.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}function n(i){var t;var n;var e=this;this.init=function(){t=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>");t.appendTo(i.container);t.focus()};this.destroy=function(){t.remove()};this.focus=function(){t.focus()};this.loadValue=function(e){t.val((n=e[i.column.field])?"yes":"no");t.select()};this.serializeValue=function(){return t.val()=="yes"};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return t.val()!=n};this.validate=function(){return{valid:true,msg:null}};this.init()}function r(i){var t;var n;var e=this;this.init=function(){t=a("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>");t.appendTo(i.container);t.focus()};this.destroy=function(){t.remove()};this.focus=function(){t.focus()};this.loadValue=function(e){n=!!e[i.column.field];if(n){t.prop("checked",true)}else{t.prop("checked",false)}};this.preClick=function(){t.prop("checked",!t.prop("checked"))};this.serializeValue=function(){return t.prop("checked")};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return this.serializeValue()!==n};this.validate=function(){return{valid:true,msg:null}};this.init()}function o(i){var n,t;var r;var e=this;this.init=function(){n=a("<INPUT type=text class='editor-percentcomplete' />");n.width(a(i.container).innerWidth()-25);n.appendTo(i.container);t=a("<div class='editor-percentcomplete-picker' />").appendTo(i.container);t.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>");t.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>");n.focus().select();t.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:r,slide:function(e,t){n.val(t.value)}});t.find(".editor-percentcomplete-buttons button").on("click",function(e){n.val(a(this).attr("val"));t.find(".editor-percentcomplete-slider").slider("value",a(this).attr("val"))})};this.destroy=function(){n.remove();t.remove()};this.focus=function(){n.focus()};this.loadValue=function(e){n.val(r=e[i.column.field]);n.select()};this.serializeValue=function(){return parseInt(n.val(),10)||0};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(n.val()==""&&r==null)&&(parseInt(n.val(),10)||0)!=r};this.validate=function(){if(isNaN(parseInt(n.val(),10))){return{valid:false,msg:"Please enter a valid positive number"}}return{valid:true,msg:null}};this.init()}function l(i){var t,n;var r;var o=this;this.init=function(){var e=a("body");n=a("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(e);t=a("<TEXTAREA hidefocus rows=5 style='background:white;width:250px;height:80px;border:0;outline:0'>").appendTo(n);a("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(n);n.find("button:first").on("click",this.save);n.find("button:last").on("click",this.cancel);t.on("keydown",this.handleKeyDown);o.position(i.position);t.focus().select()};this.handleKeyDown=function(e){if(e.which==a.ui.keyCode.ENTER&&e.ctrlKey){o.save()}else if(e.which==a.ui.keyCode.ESCAPE){e.preventDefault();o.cancel()}else if(e.which==a.ui.keyCode.TAB&&e.shiftKey){e.preventDefault();i.grid.navigatePrev()}else if(e.which==a.ui.keyCode.TAB){e.preventDefault();i.grid.navigateNext()}};this.save=function(){i.commitChanges()};this.cancel=function(){t.val(r);i.cancelChanges()};this.hide=function(){n.hide()};this.show=function(){n.show()};this.position=function(e){n.css("top",e.top-5).css("left",e.left-5)};this.destroy=function(){n.remove()};this.focus=function(){t.focus()};this.loadValue=function(e){t.val(r=e[i.column.field]);t.select()};this.serializeValue=function(){return t.val()};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(t.val()==""&&r==null)&&t.val()!=r};this.validate=function(){if(i.column.validator){var e=i.column.validator(t.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}})(e)}).call(this,i(0))},function(e,t,i){(function(e){(function(e){e.extend(true,window,{Slick:{Formatters:{PercentComplete:t,PercentCompleteBar:i,YesNo:n,Checkmark:o,Checkbox:r}}});function t(e,t,i,n,r){if(i==null||i===""){return"-"}else if(i<50){return"<span style='color:red;font-weight:bold;'>"+i+"%</span>"}else{return"<span style='color:green'>"+i+"%</span>"}}function i(e,t,i,n,r){if(i==null||i===""){return""}var o;if(i<30){o="red"}else if(i<70){o="silver"}else{o="green"}return"<span class='percent-complete-bar' style='background:"+o+";width:"+i+"%'></span>"}function n(e,t,i,n,r){return i?"Yes":"No"}function r(e,t,i,n,r){return'<img class="slick-edit-preclick" src="../images/'+(i?"CheckboxY":"CheckboxN")+'.png">'}function o(e,t,i,n,r){return i?"<img src='../images/tick.png'>":""}})(e)}).call(this,i(0))},function(e,t,i){(function(e){(function(l){l.extend(true,window,{Slick:{AutoTooltips:e}});function e(r){var o;var e=this;var t={enableForCells:true,enableForHeaderCells:false,maxToolTipLength:null};function i(e){r=l.extend(true,{},t,r);o=e;if(r.enableForCells)o.onMouseEnter.subscribe(a);if(r.enableForHeaderCells)o.onHeaderMouseEnter.subscribe(s)}function n(){if(r.enableForCells)o.onMouseEnter.unsubscribe(a);if(r.enableForHeaderCells)o.onHeaderMouseEnter.unsubscribe(s)}function a(e){var t=o.getCellFromEvent(e);if(t){var i=l(o.getCellNode(t.row,t.cell));var n;if(i.innerWidth()<i[0].scrollWidth){n=l.trim(i.text());if(r.maxToolTipLength&&n.length>r.maxToolTipLength){n=n.substr(0,r.maxToolTipLength-3)+"..."}}else{n=""}i.attr("title",n)}}function s(e,t){var i=t.column,n=l(e.target).closest(".slick-header-column");if(i&&!i.toolTip){n.attr("title",n.innerWidth()<n[0].scrollWidth?i.name:"")}}l.extend(this,{init:i,destroy:n})}})(e)}).call(this,i(0))},function(e,t,i){(function(e){(function(a){a.extend(true,window,{Slick:{CellRangeDecorator:e}});function e(n,r){var o;var e={selectionCssClass:"slick-range-decorator",selectionCss:{zIndex:"9999",border:"2px dashed red"},offset:{top:-1,left:-1,height:-2,width:-2}};r=a.extend(true,{},e,r);function t(e){if(!o){o=a("<div></div>",{css:r.selectionCss}).addClass(r.selectionCssClass).css("position","absolute").appendTo(n.getCanvasNode())}var t=n.getCellNodeBox(e.fromRow,e.fromCell);var i=n.getCellNodeBox(e.toRow,e.toCell);o.css({top:t.top+r.offset.top,left:t.left+r.offset.left,height:i.bottom-t.top+r.offset.height,width:i.right-t.left+r.offset.width});return o}function i(){if(o){o.remove();o=null}}a.extend(this,{show:t,hide:i})}})(e)}).call(this,i(0))},function(e,t,i){(function(e){(function(v){v.extend(true,window,{Slick:{CellRangeSelector:e}});function e(t){var r;var o;var a;var s;var l;var d=this;var i=new Slick.EventHandler;var n={selectionCss:{border:"2px dashed blue"}};function e(e){t=v.extend(true,{},n,t);l=t.cellDecorator||new Slick.CellRangeDecorator(e,t);r=e;a=r.getCanvasNode();i.subscribe(r.onDragInit,f).subscribe(r.onDragStart,h).subscribe(r.onDrag,p).subscribe(r.onDragEnd,m)}function c(){i.unsubscribeAll()}function u(){return l}function f(e,t){e.stopImmediatePropagation()}function h(e,t){var i=r.getCellFromEvent(e);if(d.onBeforeCellRangeSelected.notify(i)!==false){if(r.canCellBeSelected(i.row,i.cell)){s=true;e.stopImmediatePropagation()}}if(!s){return}r.focus();var n=r.getCellFromPoint(t.startX-v(a).offset().left,t.startY-v(a).offset().top);t.range={start:n,end:{}};o=t.range;return l.show(new Slick.Range(n.row,n.cell))}function p(e,t){if(!s){return}e.stopImmediatePropagation();var i=r.getCellFromPoint(e.pageX-v(a).offset().left,e.pageY-v(a).offset().top);if(!r.canCellBeSelected(i.row,i.cell)){return}t.range.end=i;o=t.range;l.show(new Slick.Range(t.range.start.row,t.range.start.cell,i.row,i.cell))}function m(e,t){if(!s){return}s=false;e.stopImmediatePropagation();l.hide();d.onCellRangeSelected.notify({range:new Slick.Range(t.range.start.row,t.range.start.cell,t.range.end.row,t.range.end.cell)})}function g(){return o}v.extend(this,{init:e,destroy:c,getCellDecorator:u,getCurrentRange:g,onBeforeCellRangeSelected:new Slick.Event,onCellRangeSelected:new Slick.Event})}})(e)}).call(this,i(0))},function(e,t,i){"use strict";(function(e){(function(c){c.extend(true,window,{Slick:{Plugins:{HeaderButtons:e}}});function e(a){var r;var o=this;var t=new window.Slick.EventHandler;var i={buttonCssClass:"slick-header-button"};function e(e){a=c.extend(true,{},i,a);r=e;t.subscribe(r.onHeaderCellRendered,s).subscribe(r.onBeforeHeaderCellDestroy,l);r.setColumns(r.getColumns())}function n(){t.unsubscribeAll()}function s(e,t){var i=t.column;if(i.header&&i.header.buttons){var n=i.header.buttons.length;while(n--){var r=i.header.buttons[n];var o=c("<div></div>").addClass(a.buttonCssClass).data("column",i).data("button",r);if(r.content){o.append(r.content)}if(r.showOnHover){o.addClass("slick-header-button-hidden")}if(r.image){o.css("backgroundImage","url("+r.image+")")}if(r.cssClass){o.addClass(r.cssClass)}if(r.tooltip){o.attr("title",r.tooltip)}if(r.command){o.data("command",r.command)}if(r.handler){o.bind("click",r.handler)}o.bind("click",d).prependTo(t.node)}}}function l(e,t){var i=t.column;if(i.header&&i.header.buttons){c(t.node).find("."+a.buttonCssClass).remove()}}function d(e){var t=c(this).data("command");var i=c(this).data("column");var n=c(this).data("button");if(t!=null){o.onCommand.notify({grid:r,column:i,command:t,button:n},e,o);r.updateColumnHeader(i.id)}e.preventDefault();e.stopPropagation()}c.extend(this,{init:e,destroy:n,onCommand:new window.Slick.Event})}})(e)}).call(this,i(0))},function(i,e,n){(function(t,v){
/*
 backgrid-sizeable-columns
 https://github.com/WRidder/backgrid-sizeable-columns

 Copyright (c) 2014 Wilbert van de Ridder
 Licensed under the MIT @license.
 */
(function(e,t){if(true){i.exports=t(n(1),n(19))}else{}})(this,function(a,e){"use strict";e.Extension.SizeAbleColumns=t.View.extend({tagName:"colgroup",initialize:function(e){this.grid=e.grid;this.listenTo(this.grid.header,"backgrid:header:rendered",this.render);this.listenTo(this.grid.columns,"width:auto",this.setWidthAuto);this.listenTo(this.grid.columns,"width:fixed",this.setWidthFixed);this.listenTo(this.grid,"backgrid:refresh",this.setColToActualWidth);this.listenTo(this.grid.collection,"add remove reset",this.setColToActualWidth)},render:function(){var o=this;o.$el.empty();o.grid.columns.each(function(e){if(typeof e.get("renderable")=="undefined"||e.get("renderable")){var t=v("<col>").appendTo(o.$el).attr("data-column-cid",e.cid);var i=e.get("width");var n=e.get("minWidth");var r=e.get("maxWidth");if(i&&i!="*"){if(n&&i<n){i=n}if(r&&i>r){i=r}t.width(i)}}});if(o.grid.header.headerRows){a.each(o.grid.header.headerRows,function(e){a.each(e.cells,function(e){e.$el.attr("data-column-cid",e.column.cid)})})}else{a.each(o.grid.header.row.cells,function(e){e.$el.attr("data-column-cid",e.column.cid)})}o.grid.collection.trigger("backgrid:colgroup:changed");return this},getColumnElement:function(e){return this.$el.find('col[data-column-cid="'+e.cid+'"]')},getHeaderElementWidth:function(e){return this.grid.header.$el.find("th[data-column-cid='"+e.cid+"']").outerWidth()},setWidthAuto:function(e){var t=this.getColumnElement(e);e.set("width","*");t.css("width","");view.grid.collection.trigger("backgrid:colgroup:updated")},setWidthFixed:function(e){var t=this.getColumnElement(e);var i=this.getHeaderElementWidth(e);t.css("width",i);e.set("width",i);view.grid.collection.trigger("backgrid:colgroup:updated")},setColToActualWidth:function(){var i=this;var n=false;a.each(i.grid.header.row.cells,function(e){var t=i.getColumnElement(e.column);if(e.column.get("width")!=="*"){n=n||t.width()==e.$el.outerWidth();t.width(e.$el.outerWidth())}});if(n){i.grid.collection.trigger("backgrid:colgroup:updated")}}});e.Extension.SizeAbleColumnsHandlers=t.View.extend({initialize:function(e){this.sizeAbleColumns=e.sizeAbleColumns;this.grid=this.sizeAbleColumns.grid;this.columns=this.grid.columns;this.header=this.grid.header;this.saveColumnWidth=e.saveColumnWidth;this.setHeaderElements();this.attachEvents()},render:function(){var g=this;g.$el.empty();a.each(g.headerElements,function(e,t){var u=v(e);var i=u.data("column-cid");var f=g.sizeAbleColumns.$el.find("col[data-column-cid="+i+"]");var h=g.columns.get({cid:i});if(h&&h.get("resizeable")){var p=v("<div></div>").addClass("resizeHandler").attr("data-column-index",t).appendTo(g.$el);var m=v("<div></div>").hide().addClass("grid-draggable-cursor").appendTo(p);p.on("mousedown",function(e){g._stopEvent(e);var s=Math.round(p.offset().left);var l=v(document);var a=p.outerWidth();p.addClass("grid-draggable");m.show();var d=function(e){g._stopEvent(e);var t=h.get("minWidth");if(!t||t<20){t=20}var i=h.get("maxWidth");var n=e.pageX;var r=h.get("width");var o=r+(n-s)-a/2;if(t&&o<=t){n=s-(r-t)+a/2}if(i&&o>=i){n=s+i-r+a/2}p.offset({left:n})};l.on("mousemove",d);var c=function(e){g._stopEvent(e);p.removeClass("grid-draggable");m.hide();l.off("mouseup",c);l.off("mousemove",d);var t=Math.round(p.offset().left);var i=s-t;var n=u.outerWidth();var r=n-i;f.width(r);var o=u.outerWidth();f.width(o);if(o!=n){if(g.saveColumnWidth){h.set("width",o,{silent:true})}h.trigger("resize",h,o,n);var a=g.columns.findWhere({width:"*"});if(a){a.trigger("resize",a)}}g.updateHandlerPosition()};l.on("mouseup",c)})}});g.updateHandlerPosition();return this},_stopEvent:function(e){if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}e.cancelBubble=true;e.returnValue=false},attachEvents:function(){var e=this;e.listenTo(e.columns,"change:resizeable",e.render);e.listenTo(e.columns,"resize width:auto width:fixed add remove",e.checkSpacerColumn);e.listenTo(e.grid.collection,"backgrid:colgroup:updated",e.updateHandlerPosition);e.listenTo(e.grid.collection,"backgrid:colgroup:changed",function(){a.defer(function(){e.setHeaderElements();e.render()})});this.resizeEvtHandler=a.debounce(a.bind(e.updateHandlerPosition,e),250);v(window).on("resize",this.resizeEvtHandler)},checkSpacerColumn:function(){var e=this;var t=a.first(e.columns.where({name:"__spacerColumn"}));var i=e.columns.filter(function(e){return e.get("width")=="*"&&e.get("name")!="__spacerColumn"});if(a.isEmpty(i)){var n=e.columns.reduce(function(e,t){var i=t.get("width")=="*"?0:t.get("width");return e+i},0);var r=e.grid.$el.width();if(r>n){if(!t){e.columns.add(e.getSpacerColumn())}}else{if(t){e.columns.remove(t)}}}else if(t){e.columns.remove(t)}},getSpacerColumn:function(){return e.Extension.SizeAbleColumns.spacerColumnDefinition},updateHandlerPosition:function(){var n=this;a.each(n.headerElements,function(e,t){var i=v(e);n.$el.children().filter("[data-column-index='"+t+"']").css("left",i.position().left+i.outerWidth())})},setHeaderElements:function(){var i=this;var e=i.grid.header.headerRows||[i.grid.header.row];i.headerCells=[];a.each(e,function(e){a.each(e.cells,function(e){var t=i.columns.get({cid:e.column.cid});if(!a.isEmpty(t)){i.headerCells.push({$el:e.$el,el:e.el,column:t})}})});var t=a.sortBy(i.headerCells,function(e){return i.columns.indexOf(e.column)});i.headerCells=a.filter(t,function(e){return e.column.get("renderable")===true||typeof e.column.get("renderable")==="undefined"});i.headerElements=a.map(i.headerCells,function(e){return e.el})},remove:function(){v(window).off("resize",this.resizeEvtHandler);t.View.prototype.remove.call(this)}});e.Extension.SizeAbleColumns.spacerColumnDefinition={name:"__spacerColumn",label:"",editable:false,cell:e.StringCell,width:"*",nesting:[],resizeable:false,sortable:false,orderable:false,displayOrder:9999};return e})}).call(this,n(9),n(0))},function(e,t,i){"use strict";(function(e,d){function c(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){c=function e(t){return typeof t}}else{c=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return c(e)}(function(s){s.extend(true,window,{Slick:{Formatters:{JsonString:e,Numbers:t,Checkmark:i,Text:n,Binary:r}}});function l(e,t,i,n){if(d.isUndefined(i)&&n.has_default_val){return"<span class='pull-left disabled_cell'>[default]</span>"}else if(d.isUndefined(i)&&n.not_null||d.isUndefined(i)||i===null){return"<span class='pull-left disabled_cell'>[null]</span>"}return null}function a(e,t,i,n){if(d.isUndefined(i)&&n.has_default_val){return"<span class='pull-right disabled_cell'>[default]</span>"}else if(d.isUndefined(i)&&n.not_null||d.isUndefined(i)||i===null){return"<span class='pull-right disabled_cell'>[null]</span>"}return null}function e(e,t,i,n,r){var o=l(e,t,i,n,r);if(o){return o}else{if(c(i)==="object"&&!Array.isArray(i)){return d.escape(JSON.stringify(i))}else if(Array.isArray(i)){var a=[];s.each(i,function(e,t){if(c(t)==="object"){a.push(JSON.stringify(t))}else{a.push(t)}});return d.escape("["+a.join()+"]")}else{return d.escape(i)}}}function t(e,t,i,n,r){var o=a(e,t,i,n,r);if(o){return o}else{return"<span style='float:right'>"+d.escape(i)+"</span>"}}function i(e,t,i,n,r){var o=l(e,t,i,n,r);if(o){return o}else{return i?"true":"false"}}function n(e,t,i,n,r){var o=l(e,t,i,n,r);if(o){return o}else{return d.escape(i)}}function r(e,t,i,n,r){var o=l(e,t,i,n,r);if(o){return o}else{return"<span class='pull-left disabled_cell'>["+d.escape(i)+"]</span>"}}})(e)}).call(this,i(0),i(1))},function(e,t,n){"use strict";(function(e,g){var t=i(n(376));var v=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}function _(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_=function e(t){return typeof t}}else{_=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _(e)}(function(s,d){s.extend(true,window,{Slick:{Editors:{pgText:e,JsonText:t,CustomNumber:a,Checkbox:m,ReadOnlyText:r,ReadOnlyCheckbox:o,ReadOnlypgText:i,ReadOnlyJsonText:n}}});function l(){return s("<div class='pg-text-editor' />")}function c(){return s("<textarea class='pg-textarea text-12' hidefocus rows=5'>")}function u(e){var t=s("<div class='pg_buttons' />"),i=e?(0,v.default)("Cancel"):(0,v.default)("OK"),n=e?"btn-secondary":"btn-primary",r=e?"fa-times":"fa-check";s("<button class='btn "+n+" long_text_editor pg-alertify-button' data-label=\""+i+'">'+'<span class="fa '+r+' pg-alertify-button"></span>&nbsp;'+i+"</button>").appendTo(t);if(e){s("<button class='btn btn-primary long_text_editor' data-label=\""+(0,v.default)("OK")+'">'+'<span class="fa fa-check pg-alertify-button"></span>&nbsp;'+(0,v.default)("OK")+"</button>").appendTo(t)}return t}function f(e){e=s.trim(e);return!(e!=""&&(e.charAt(0)!="{"||e.charAt(e.length-1)!="}"))}function h(e,t,i,n){var r=e.grid;if(t.is_row_copied){if(!r.copied_rows){r.copied_rows=[[]]}var o=r.getActiveCell(),a=o["row"],s=o["cell"],l=t[e.column.pos];l=n==="number"?g.isEmpty(l)||l:l;t[e.column.field]=i;if(l&&g.isNull(i)&&(g.isUndefined(r.copied_rows[a])||g.isUndefined(r.copied_rows[a][s]))){t[e.column.field]=undefined;if(r.copied_rows[a]==undefined)r.copied_rows[a]=[];r.copied_rows[a][s]=1}}else{if(n==="jsonb"){t[e.column.field]=d.stringify(d.parse(i))}else{t[e.column.field]=i}}}function p(e,t){var i=t.parent().find("#datagrid");e.top=e.top-t.height();var n=i.width(),r=t.width()+32;r+=e.left;if(r>n){e.left-=r-n}return e}function e(i){var t,n,r;var o;var a=this;this.init=function(){var e=s("body");n=l().appendTo(e);t=c().appendTo(n);r=u(true).appendTo(n);r.find("button:first").on("click",this.cancel);r.find("button:last").on("click",this.save);t.on("keydown",this.handleKeyDown);a.position(i.position);t.trigger("focus").trigger("select")};this.handleKeyDown=function(e){if(e.which==s.ui.keyCode.ENTER&&e.ctrlKey){a.save()}else if(e.which==s.ui.keyCode.ESCAPE){e.preventDefault();a.cancel()}else if(e.which==s.ui.keyCode.TAB&&e.shiftKey){e.preventDefault();i.grid.navigatePrev()}else if(e.which==s.ui.keyCode.TAB){e.preventDefault();i.grid.navigateNext()}};this.save=function(){i.commitChanges()};this.cancel=function(){t.val(o);i.cancelChanges()};this.hide=function(){n.hide()};this.show=function(){n.show()};this.position=function(e){p(e,n);n.css("top",e.top).css("left",e.left)};this.destroy=function(){n.remove()};this.focus=function(){t.trigger("focus")};this.loadValue=function(e){if(g.isUndefined(e[i.column.field])||g.isNull(e[i.column.field])){t.val(o="");return}if(!i.column.is_array){if(e[i.column.field]===""){t.val(o="''")}else if(e[i.column.field]==="''"){t.val(o="\\'\\'")}else if(e[i.column.field]==='""'){t.val(o='\\"\\"')}else{t.val(o=e[i.column.field]);t.trigger("select")}}else{t.val(o=e[i.column.field]);t.trigger("select")}};this.serializeValue=function(){var e=t.val();if(e===""){return null}if(!i.column.is_array){if(e==="''"||e==='""'){return""}else if(e==="\\'\\'"){return"''"}else if(e==='\\"\\"'){return'""'}else{return e}}else{return s.trim(e)}};this.applyValue=function(e,t){h(i,e,t,"text")};this.isValueChanged=function(){if(t.val()==""&&g.isUndefined(o)){return false}else{return!(t.val()==""&&g.isNull(o))&&t.val()!==o}};this.validate=function(){if(i.column.validator){var e=i.column.validator(t.val());if(!e.valid){return e}}if(i.column.is_array&&!f(t.val())){return{valid:false,msg:(0,v.default)('Arrays must start with "{" and end with "}"')}}return{valid:true,msg:null}};this.init()}function t(n){var r,t,i;var o;var a=this;this.init=function(){var e=s("body");t=l().appendTo(e);r=c().appendTo(t);i=u(true).appendTo(t);i.find("button:first").on("click",this.cancel);i.find("button:last").on("click",this.save);r.on("keydown",this.handleKeyDown);a.position(n.position);r.trigger("focus").trigger("select")};this.handleKeyDown=function(e){if(e.which==s.ui.keyCode.ENTER&&e.ctrlKey){a.save()}else if(e.which==s.ui.keyCode.ESCAPE){e.preventDefault();a.cancel()}else if(e.which==s.ui.keyCode.TAB&&e.shiftKey){e.preventDefault();n.grid.navigatePrev()}else if(e.which==s.ui.keyCode.TAB){e.preventDefault();n.grid.navigateNext()}};this.save=function(){n.commitChanges()};this.cancel=function(){r.val(o);n.cancelChanges()};this.hide=function(){t.hide()};this.show=function(){t.show()};this.position=function(e){p(e,t);t.css("top",e.top).css("left",e.left)};this.destroy=function(){t.remove()};this.focus=function(){r.trigger("focus")};this.loadValue=function(e){var t=o=e[n.column.field];if(n.column.column_type_internal==="jsonb"&&!Array.isArray(t)){t=d.stringify(d.parse(t),null,4)}else if(Array.isArray(t)){var i=[];s.each(t,function(e,t){if(_(t)==="object"){i.push(d.stringify(t,null,4))}else{i.push(t)}});t="["+i.join()+"]"}r.val(t);r.trigger("select")};this.serializeValue=function(){if(r.val()===""){return null}return r.val()};this.applyValue=function(e,t){if(n.column.column_type_internal==="jsonb"){h(n,e,t,"jsonb")}else{h(n,e,t,"text")}};this.isValueChanged=function(){if(r.val()==""&&g.isUndefined(o)){return false}else{return!(r.val()==""&&g.isNull(o))&&r.val()!=o}};this.validate=function(){if(n.column.column_type_internal==="jsonb"||n.column.column_type_internal==="json"){try{JSON.parse(r.val())}catch(e){r.addClass("pg-text-invalid");return{valid:false}}}r.removeClass("pg-text-invalid");return{valid:true,msg:null}};this.init()}function i(i){var t,n,r;var o;var a=this;this.init=function(){var e=s("body");n=l().appendTo(e);t=c().appendTo(n);r=u(false).appendTo(n);r.find("button:first").on("click",this.cancel);t.on("keydown",this.handleKeyDown);a.position(i.position);t.trigger("focus").trigger("select")};this.handleKeyDown=function(e){if(e.which==s.ui.keyCode.ENTER&&e.ctrlKey){a.cancel()}else if(e.which==s.ui.keyCode.ESCAPE){e.preventDefault();a.cancel()}else if(e.which==s.ui.keyCode.TAB&&e.shiftKey){a.cancel();e.preventDefault();i.grid.navigatePrev()}else if(e.which==s.ui.keyCode.TAB){a.cancel();e.preventDefault();i.grid.navigateNext()}};this.cancel=function(){t.val(o);i.cancelChanges()};this.hide=function(){n.hide()};this.show=function(){n.show()};this.position=function(e){p(e,n);n.css("top",e.top).css("left",e.left)};this.destroy=function(){n.remove()};this.focus=function(){t.trigger("focus")};this.loadValue=function(e){t.val(o=e[i.column.field]);t.trigger("select")};this.serializeValue=function(){return t.val()};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(t.val()==""&&o==null)&&t.val()!=o};this.validate=function(){if(i.column.validator){var e=i.column.validator(t.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}function n(n){var r,t,i;var o;var a=this;this.init=function(){var e=s("body");t=l().appendTo(e);r=c().appendTo(t);i=u(false).appendTo(t);i.find("button:first").on("click",this.cancel);r.on("keydown",this.handleKeyDown);a.position(n.position);r.trigger("focus").trigger("select")};this.handleKeyDown=function(e){if(e.which==s.ui.keyCode.ENTER&&e.ctrlKey){a.cancel()}else if(e.which==s.ui.keyCode.ESCAPE){e.preventDefault();a.cancel()}else if(e.which==s.ui.keyCode.TAB&&e.shiftKey){a.cancel();e.preventDefault();n.grid.navigatePrev()}else if(e.which==s.ui.keyCode.TAB){a.cancel();e.preventDefault();n.grid.navigateNext()}};this.cancel=function(){r.val(o);n.cancelChanges()};this.hide=function(){t.hide()};this.show=function(){t.show()};this.position=function(e){p(e,t);t.css("top",e.top).css("left",e.left)};this.destroy=function(){t.remove()};this.focus=function(){r.trigger("focus")};this.loadValue=function(e){var t=o=e[n.column.field];if(n.column.column_type_internal==="jsonb"&&!Array.isArray(t)){t=d.stringify(d.parse(t),null,4)}else if(Array.isArray(t)){var i=[];s.each(t,function(e,t){if(_(t)==="object"){i.push(d.stringify(t,null,4))}else{i.push(t)}});t="["+i.join()+"]"}r.val(t);r.trigger("select")};this.serializeValue=function(){return r.val()};this.applyValue=function(e,t){e[n.column.field]=t};this.isValueChanged=function(){return!(r.val()==""&&o==null)&&r.val()!=o};this.validate=function(){if(n.column.validator){var e=n.column.validator(r.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}function r(i){var n;var r;this.init=function(){n=s("<input type=text class='editor-text' readonly/>").appendTo(i.container).on("keydown.nav",function(e){if(e.keyCode===s.ui.keyCode.LEFT||e.keyCode===s.ui.keyCode.RIGHT){e.stopImmediatePropagation()}}).trigger("focus").trigger("select")};this.destroy=function(){n.remove()};this.focus=function(){n.trigger("focus")};this.getValue=function(){return n.val()};this.loadValue=function(e){var t=e[i.column.field];if(t===undefined&&typeof t==="undefined"){t=""}r=t;n.val(r);n[0].defaultValue=r;n.trigger("select")};this.serializeValue=function(){return n.val()};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){return!(n.val()==""&&r==null)&&n.val()!=r};this.validate=function(){if(i.column.validator){var e=i.column.validator(n.val());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}function o(i){var t;var n;this.init=function(){t=s("<input type=checkbox value='true' class='editor-checkbox' hideFocus disabled>");t.appendTo(i.container);t.trigger("focus")};this.destroy=function(){t.remove()};this.focus=function(){t.trigger("focus")};this.loadValue=function(e){n=e[i.column.pos];if(g.isNull(n)||g.isUndefined(n)){t.prop("indeterminate",true);t.data("checked",2)}else{n=!!e[i.column.pos];if(n){t.prop("checked",true);t.data("checked",0)}else{t.prop("checked",false);t.data("checked",1)}}};this.serializeValue=function(){if(t.prop("indeterminate")){return null}return t.prop("checked")};this.applyValue=function(e,t){e[i.column.pos]=t};this.isValueChanged=function(){var e=t.data("checked");return!(e===2&&(n==null||n==undefined))&&e!==n};this.validate=function(){return{valid:true,msg:null}};this.init()}function a(o){var a;var t;this.init=function(){a=s("<input type=text class='editor-text' />");a.on("keydown.nav",function(e){if(e.keyCode===s.ui.keyCode.LEFT||e.keyCode===s.ui.keyCode.RIGHT){e.stopImmediatePropagation()}});a.appendTo(o.container);a.trigger("focus").trigger("select")};this.destroy=function(){a.remove()};this.focus=function(){a.trigger("focus")};this.loadValue=function(e){t=e[o.column.field];if(Array.isArray(t)&&!g.isNull(t)&&!g.isUndefined(t)){a.val("{"+t.join()+"}")}else{a.val(t)}a[0].defaultValue=t;a.trigger("select")};this.serializeValue=function(){var e=a.val();if(e===""){return null}return e};this.applyValue=function(e,t){h(o,e,t,"number")};this.isValueChanged=function(){if(a.val()==""&&g.isUndefined(t)){return false}else if(a.val()==""&&t==""){return true}else{return!(a.val()==""&&g.isNull(t))&&a.val()!=t}};this.validate=function(){var e=a.val();if(!o.column.is_array&&isNaN(e)){return{valid:false,msg:(0,v.default)("Please enter a valid number")}}if(o.column.validator){var t=o.column.validator(e);if(!t.valid){return t}}if(o.column.is_array){if(!f(e)){return{valid:false,msg:(0,v.default)('Arrays must start with "{" and end with "}"')}}var i=e.trim().slice(1,-1),n;if(i==""){n=[]}else{n=i.split(",")}for(var r in n){if(isNaN(n[r])){return{valid:false,msg:(0,v.default)("Please enter a valid number")}}}}return{valid:true,msg:null}};this.init()}function m(i){var n;var t,r;this.init=function(){var t=this;n=s("<div class='multi-checkbox' tabindex=\"0\"><span class='check' hideFocus></span></div>");n.appendTo(i.container);n.trigger("focus");n.on("click",this.changeValue);n.on("keydown",function(e){if(e.which==s.ui.keyCode.SPACE){e.preventDefault();t.changeValue(e)}})};this.changeValue=function(){var e=["unchecked","partial","checked"];var t=n.find(".check").data("state")||0;t++;n.find(".check").removeClass("unchecked partial checked").addClass(e[t%e.length]).data("state",t%e.length)};this.destroy=function(){n.remove()};this.focus=function(){n.trigger("focus")};this.loadValue=function(e){t=e[i.column.field];r=1;if(g.isNull(t)||g.isUndefined(t)){n.find(".check").data("state",1).addClass("partial")}else{t=!!e[i.column.field];if(t){n.find(".check").data("state",2).addClass("checked");r=2}else{n.find(".check").data("state",0).addClass("unchecked");r=0}}};this.serializeValue=function(){if(n.find(".check").data("state")==1){return null}return n.find(".check").data("state")==2?true:false};this.applyValue=function(e,t){e[i.column.field]=t};this.isValueChanged=function(){var e=n.find(".check").data("state");return e!==r};this.validate=function(){if(i.column.validator){var e=i.column.validator(this.serializeValue());if(!e.valid){return e}}return{valid:true,msg:null}};this.init()}})(e,t.default)}).call(this,n(0),n(1))},function(i,e,n){!function(e,t){true?i.exports=t(n(377)):undefined}(window,function(i){return function(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=i},function(e,t,i){"use strict";i.r(t),i.d(t,"stringify",function(){return c}),i.d(t,"parse",function(){return k});var u,f,n,h,r,o,a=i(0),p=i.n(a),s=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function l(e){return e<10?"0"+e:e}function d(){return this.valueOf()}function m(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function c(e,t,i){var n;if(u="",f="","number"==typeof i)for(n=0;n<i;n+=1)f+=" ";else"string"==typeof i&&(f=i);if(h=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,i){var n,r,o,a,s,l=u,d=i[t],c=null!=d&&(d instanceof p.a||p.a.isBigNumber(d));switch(c&&!d.isFinite()&&(d=null),d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),"function"==typeof h&&(d=h.call(i,t,d)),typeof d){case"string":return c?d:m(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(u+=f,s=[],"[object Array]"===Object.prototype.toString.apply(d)){for(a=d.length,n=0;n<a;n+=1)s[n]=e(n,d)||"null";return o=0===s.length?"[]":u?"[\n"+u+s.join(",\n"+u)+"\n"+l+"]":"["+s.join(",")+"]",u=l,o}if(h&&"object"==typeof h)for(a=h.length,n=0;n<a;n+=1)"string"==typeof h[n]&&(o=e(r=h[n],d))&&s.push(m(r)+(u?": ":":")+o);else for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(o=e(r,d))&&s.push(m(r)+(u?": ":":")+o);return o=0===s.length?"{}":u?"{\n"+u+s.join(",\n"+u)+"\n"+l+"}":"{"+s.join(",")+"}",u=l,o}}("",{"":e})}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=d,Number.prototype.toJSON=d,String.prototype.toJSON=d),n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var g,v,_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},b=function(e){throw{name:"SyntaxError",message:e,at:r,text:g}},y=function(e){return e&&e!==o&&b("Expected '"+e+"' instead of '"+o+"'"),o=g.charAt(r),r+=1,o},w=function(){var e,t="";for("-"===o&&(t="-",y("-"));o>="0"&&o<="9";)t+=o,y();if("."===o)for(t+=".";y()&&o>="0"&&o<="9";)t+=o;if("e"===o||"E"===o)for(t+=o,y(),"-"!==o&&"+"!==o||(t+=o,y());o>="0"&&o<="9";)t+=o,y();if((e=new p.a(t)).isFinite())return e;b("Bad number")},x=function(){var e,t,i,n="";if('"'===o)for(;y();){if('"'===o)return y(),n;if("\\"===o)if(y(),"u"===o){for(i=0,t=0;t<4&&(e=parseInt(y(),16),isFinite(e));t+=1)i=16*i+e;n+=String.fromCharCode(i)}else{if("string"!=typeof _[o])break;n+=_[o]}else n+=o}b("Bad string")},C=function(){for(;o&&o<=" ";)y()};function k(e,a){var t;return g=e,r=0,o=" ",t=v(),C(),o&&b("Syntax error"),"function"==typeof a?function e(t,i){var n,r,o=t[i];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(r=e(o,n))?o[n]=r:delete o[n]);return a.call(t,i,o)}({"":t},""):t}v=function(){switch(C(),o){case"{":return function(){var e,t={};if("{"===o){if(y("{"),C(),"}"===o)return y("}"),t;for(;o;){if(e=x(),C(),y(":"),Object.hasOwnProperty.call(t,e)&&b("Duplicate key '"+e+"'"),t[e]=v(),C(),"}"===o)return y("}"),t;y(","),C()}}b("Bad object")}();case"[":return function(){var e=[];if("["===o){if(y("["),C(),"]"===o)return y("]"),e;for(;o;){if(e.push(v()),C(),"]"===o)return y("]"),e;y(","),C()}}b("Bad array")}();case'"':return x();case"-":return w();default:return o>="0"&&o<="9"?w():function(){switch(o){case"t":return y("t"),y("r"),y("u"),y("e"),!0;case"f":return y("f"),y("a"),y("l"),y("s"),y("e"),!1;case"n":return y("n"),y("u"),y("l"),y("l"),null}b("Unexpected '"+o+"'")}()}},t.default={parse:k,stringify:c}}])})},function(i,n,o){var a;(function(e){"use strict";var t,v=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,k=Math.ceil,E=Math.floor,S="[BigNumber Error] ",T=S+"Number primitive has more than 15 significant digits: ",M=1e14,I=14,N=9007199254740991,O=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],A=1e7,R=1e9;function r(e){var _,u,f,t=D.prototype={constructor:D,toString:null,valueOf:null},m=new D(1),b=20,y=4,d=-7,o=21,h=-1e7,g=1e7,c=false,a=1,w=0,p={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0},x="0123456789abcdefghijklmnopqrstuvwxyz";function D(e,t){var i,n,r,o,a,s,l,d,c=this;if(!(c instanceof D)){return new D(e,t)}if(t==null){if(e instanceof D){c.s=e.s;c.e=e.e;c.c=(e=e.c)?e.slice():e;return}s=typeof e=="number";if(s&&e*0==0){c.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(o=0,a=e;a>=10;a/=10,o++);c.e=o;c.c=[e];return}d=e+""}else{if(!v.test(d=e+""))return f(c,d,s);c.s=d.charCodeAt(0)==45?(d=d.slice(1),-1):1}if((o=d.indexOf("."))>-1)d=d.replace(".","");if((a=d.search(/e/i))>0){if(o<0)o=a;o+=+d.slice(a+1);d=d.substring(0,a)}else if(o<0){o=d.length}}else{j(t,2,x.length,"Base");d=e+"";if(t==10){c=new D(e instanceof D?e:d);return P(c,b+c.e+1,y)}s=typeof e=="number";if(s){if(e*0!=0)return f(c,d,s,t);c.s=1/e<0?(d=d.slice(1),-1):1;if(D.DEBUG&&d.replace(/^0\.0*|\./,"").length>15){throw Error(T+e)}s=false}else{c.s=d.charCodeAt(0)===45?(d=d.slice(1),-1):1}i=x.slice(0,t);o=a=0;for(l=d.length;a<l;a++){if(i.indexOf(n=d.charAt(a))<0){if(n=="."){if(a>o){o=l;continue}}else if(!r){if(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase())){r=true;a=-1;o=0;continue}}return f(c,e+"",s,t)}}d=u(d,t,10,c.s);if((o=d.indexOf("."))>-1)d=d.replace(".","");else o=d.length}for(a=0;d.charCodeAt(a)===48;a++);for(l=d.length;d.charCodeAt(--l)===48;);d=d.slice(a,++l);if(d){l-=a;if(s&&D.DEBUG&&l>15&&(e>N||e!==E(e))){throw Error(T+c.s*e)}o=o-a-1;if(o>g){c.c=c.e=null}else if(o<h){c.c=[c.e=0]}else{c.e=o;c.c=[];a=(o+1)%I;if(o<0)a+=I;if(a<l){if(a)c.c.push(+d.slice(0,a));for(l-=I;a<l;){c.c.push(+d.slice(a,a+=I))}d=d.slice(a);a=I-d.length}else{a-=l}for(;a--;d+="0");c.c.push(+d)}}else{c.c=[c.e=0]}}D.clone=r;D.ROUND_UP=0;D.ROUND_DOWN=1;D.ROUND_CEIL=2;D.ROUND_FLOOR=3;D.ROUND_HALF_UP=4;D.ROUND_HALF_DOWN=5;D.ROUND_HALF_EVEN=6;D.ROUND_HALF_CEIL=7;D.ROUND_HALF_FLOOR=8;D.EUCLID=9;D.config=D.set=function(e){var t,i;if(e!=null){if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")){i=e[t];j(i,0,R,t);b=i}if(e.hasOwnProperty(t="ROUNDING_MODE")){i=e[t];j(i,0,8,t);y=i}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){i=e[t];if(l(i)){j(i[0],-R,0,t);j(i[1],0,R,t);d=i[0];o=i[1]}else{j(i,-R,R,t);d=-(o=i<0?-i:i)}}if(e.hasOwnProperty(t="RANGE")){i=e[t];if(l(i)){j(i[0],-R,-1,t);j(i[1],1,R,t);h=i[0];g=i[1]}else{j(i,-R,R,t);if(i){h=-(g=i<0?-i:i)}else{throw Error(S+t+" cannot be zero: "+i)}}}if(e.hasOwnProperty(t="CRYPTO")){i=e[t];if(i===!!i){if(i){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){c=i}else{c=!i;throw Error(S+"crypto unavailable")}}else{c=i}}else{throw Error(S+t+" not true or false: "+i)}}if(e.hasOwnProperty(t="MODULO_MODE")){i=e[t];j(i,0,9,t);a=i}if(e.hasOwnProperty(t="POW_PRECISION")){i=e[t];j(i,0,R,t);w=i}if(e.hasOwnProperty(t="FORMAT")){i=e[t];if(typeof i=="object")p=i;else throw Error(S+t+" not an object: "+i)}if(e.hasOwnProperty(t="ALPHABET")){i=e[t];if(typeof i=="string"&&!/^.$|\.|(.).*\1/.test(i)){x=i}else{throw Error(S+t+" invalid: "+i)}}}else{throw Error(S+"Object expected: "+e)}}return{DECIMAL_PLACES:b,ROUNDING_MODE:y,EXPONENTIAL_AT:[d,o],RANGE:[h,g],CRYPTO:c,MODULO_MODE:a,POW_PRECISION:w,FORMAT:p,ALPHABET:x}};D.isBigNumber=function(e){return e instanceof D||e&&e._isBigNumber===true||false};D.maximum=D.max=function(){return n(arguments,t.lt)};D.minimum=D.min=function(){return n(arguments,t.gt)};D.random=function(){var e=9007199254740992;var d=Math.random()*e&2097151?function(){return E(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(e){var t,i,n,r,o,a=0,s=[],l=new D(m);if(e==null)e=b;else j(e,0,R);r=k(e/I);if(c){if(crypto.getRandomValues){t=crypto.getRandomValues(new Uint32Array(r*=2));for(;a<r;){o=t[a]*131072+(t[a+1]>>>11);if(o>=9e15){i=crypto.getRandomValues(new Uint32Array(2));t[a]=i[0];t[a+1]=i[1]}else{s.push(o%1e14);a+=2}}a=r/2}else if(crypto.randomBytes){t=crypto.randomBytes(r*=7);for(;a<r;){o=(t[a]&31)*281474976710656+t[a+1]*1099511627776+t[a+2]*4294967296+t[a+3]*16777216+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6];if(o>=9e15){crypto.randomBytes(7).copy(t,a)}else{s.push(o%1e14);a+=7}}a=r/7}else{c=false;throw Error(S+"crypto unavailable")}}if(!c){for(;a<r;){o=d();if(o<9e15)s[a++]=o%1e14}}r=s[--a];e%=I;if(r&&e){o=O[I-e];s[a]=E(r/o)*o}for(;s[a]===0;s.pop(),a--);if(a<0){s=[n=0]}else{for(n=-1;s[0]===0;s.splice(0,1),n-=I);for(a=1,o=s[0];o>=10;o/=10,a++);if(a<I)n-=I-a}l.e=n;l.c=s;return l}}();u=function(){var g="0123456789";function v(e,t,i,n){var r,o=[0],a,s=0,l=e.length;for(;s<l;){for(a=o.length;a--;o[a]*=t);o[0]+=n.indexOf(e.charAt(s++));for(r=0;r<o.length;r++){if(o[r]>i-1){if(o[r+1]==null)o[r+1]=0;o[r+1]+=o[r]/i|0;o[r]%=i}}}return o.reverse()}return function(e,t,i,n,r){var o,a,s,l,d,c,u,f,h=e.indexOf("."),p=b,m=y;if(h>=0){l=w;w=0;e=e.replace(".","");f=new D(t);c=f.pow(e.length-h);w=l;f.c=v(F(z(c.c),c.e,"0"),10,i,g);f.e=f.c.length}u=v(e,t,i,r?(o=x,g):(o=g,x));s=l=u.length;for(;u[--l]==0;u.pop());if(!u[0])return o.charAt(0);if(h<0){--s}else{c.c=u;c.e=s;c.s=n;c=_(c,f,p,m,i);u=c.c;d=c.r;s=c.e}a=s+p+1;h=u[a];l=i/2;d=d||a<0||u[a+1]!=null;d=m<4?(h!=null||d)&&(m==0||m==(c.s<0?3:2)):h>l||h==l&&(m==4||d||m==6&&u[a-1]&1||m==(c.s<0?8:7));if(a<1||!u[0]){e=d?F(o.charAt(1),-p,o.charAt(0)):o.charAt(0)}else{u.length=a;if(d){for(--i;++u[--a]>i;){u[a]=0;if(!a){++s;u=[1].concat(u)}}}for(l=u.length;!u[--l];);for(h=0,e="";h<=l;e+=o.charAt(u[h++]));e=F(e,s,o.charAt(0))}return e}}();_=function(){function S(e,t,i){var n,r,o,a,s=0,l=e.length,d=t%A,c=t/A|0;for(e=e.slice();l--;){o=e[l]%A;a=e[l]/A|0;n=c*o+a*d;r=d*o+n%A*A+s;s=(r/i|0)+(n/A|0)+c*a;e[l]=r%i}if(s)e=[s].concat(e);return e}function T(e,t,i,n){var r,o;if(i!=n){o=i>n?1:-1}else{for(r=o=0;r<i;r++){if(e[r]!=t[r]){o=e[r]>t[r]?1:-1;break}}}return o}function N(e,t,i,n){var r=0;for(;i--;){e[i]-=r;r=e[i]<t[i]?1:0;e[i]=r*n+e[i]-t[i]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,i,n,r){var o,a,s,l,d,c,u,f,h,p,m,g,v,_,b,y,w,x=e.s==t.s?1:-1,C=e.c,k=t.c;if(!C||!C[0]||!k||!k[0]){return new D(!e.s||!t.s||(C?k&&C[0]==k[0]:!k)?NaN:C&&C[0]==0||!k?x*0:x/0)}f=new D(x);h=f.c=[];a=e.e-t.e;x=i+a+1;if(!r){r=M;a=L(e.e/I)-L(t.e/I);x=x/I|0}for(s=0;k[s]==(C[s]||0);s++);if(k[s]>(C[s]||0))a--;if(x<0){h.push(1);l=true}else{_=C.length;y=k.length;s=0;x+=2;d=E(r/(k[0]+1));if(d>1){k=S(k,d,r);C=S(C,d,r);y=k.length;_=C.length}v=y;p=C.slice(0,y);m=p.length;for(;m<y;p[m++]=0);w=k.slice();w=[0].concat(w);b=k[0];if(k[1]>=r/2)b++;do{d=0;o=T(k,p,y,m);if(o<0){g=p[0];if(y!=m)g=g*r+(p[1]||0);d=E(g/b);if(d>1){if(d>=r)d=r-1;c=S(k,d,r);u=c.length;m=p.length;while(T(c,p,u,m)==1){d--;N(c,y<u?w:k,u,r);u=c.length;o=1}}else{if(d==0){o=d=1}c=k.slice();u=c.length}if(u<m)c=[0].concat(c);N(p,c,m,r);m=p.length;if(o==-1){while(T(k,p,y,m)<1){d++;N(p,y<m?w:k,m,r);m=p.length}}}else if(o===0){d++;p=[0]}h[s++]=d;if(p[0]){p[m++]=C[v]||0}else{p=[C[v]];m=1}}while((v++<_||p[0]!=null)&&x--);l=p[0]!=null;if(!h[0])h.splice(0,1)}if(r==M){for(s=1,x=h[0];x>=10;x/=10,s++);P(f,i+(f.e=s+a*I-1)+1,n,l)}else{f.e=a;f.r=+l}return f}}();function i(e,t,i,n){var r,o,a,s,l;if(i==null)i=y;else j(i,0,8);if(!e.c)return e.toString();r=e.c[0];a=e.e;if(t==null){l=z(e.c);l=n==1||n==2&&a<=d?q(l,a):F(l,a,"0")}else{e=P(new D(e),t,i);o=e.e;l=z(e.c);s=l.length;if(n==1||n==2&&(t<=o||o<=d)){for(;s<t;l+="0",s++);l=q(l,o)}else{t-=a;l=F(l,o,"0");if(o+1>s){if(--t>0)for(l+=".";t--;l+="0");}else{t+=o-s;if(t>0){if(o+1==s)l+=".";for(;t--;l+="0");}}}}return e.s<0&&r?"-"+l:l}function n(e,t){var i,n,r=0;if(l(e[0]))e=e[0];i=new D(e[0]);for(;++r<e.length;){n=new D(e[r]);if(!n.s){i=n;break}else if(t.call(i,n)){i=n}}return i}function C(e,t,i){var n=1,r=t.length;for(;!t[--r];t.pop());for(r=t[0];r>=10;r/=10,n++);if((i=n+i*I-1)>g){e.c=e.e=null}else if(i<h){e.c=[e.e=0]}else{e.e=i;e.c=t}return e}f=function(){var a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,l=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,c=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(e,t,i,n){var r,o=i?t:t.replace(c,"");if(d.test(o)){e.s=isNaN(o)?null:o<0?-1:1;e.c=e.e=null}else{if(!i){o=o.replace(a,function(e,t,i){r=(i=i.toLowerCase())=="x"?16:i=="b"?2:8;return!n||n==r?t:e});if(n){r=n;o=o.replace(s,"$1").replace(l,"0.$1")}if(t!=o)return new D(o,r)}if(D.DEBUG){throw Error(S+"Not a"+(n?" base "+n:"")+" number: "+t)}e.c=e.e=e.s=null}}}();function P(e,t,i,n){var r,o,a,s,l,d,c,u=e.c,f=O;if(u){e:{for(r=1,s=u[0];s>=10;s/=10,r++);o=t-r;if(o<0){o+=I;a=t;l=u[d=0];c=l/f[r-a-1]%10|0}else{d=k((o+1)/I);if(d>=u.length){if(n){for(;u.length<=d;u.push(0));l=c=0;r=1;o%=I;a=o-I+1}else{break e}}else{l=s=u[d];for(r=1;s>=10;s/=10,r++);o%=I;a=o-I+r;c=a<0?0:l/f[r-a-1]%10|0}}n=n||t<0||u[d+1]!=null||(a<0?l:l%f[r-a-1]);n=i<4?(c||n)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||n||i==6&&(o>0?a>0?l/f[r-a]:0:u[d-1])%10&1||i==(e.s<0?8:7));if(t<1||!u[0]){u.length=0;if(n){t-=e.e+1;u[0]=f[(I-t%I)%I];e.e=-t||0}else{u[0]=e.e=0}return e}if(o==0){u.length=d;s=1;d--}else{u.length=d+1;s=f[I-o];u[d]=a>0?E(l/f[r-a]%f[a])*s:0}if(n){for(;;){if(d==0){for(o=1,a=u[0];a>=10;a/=10,o++);a=u[0]+=s;for(s=1;a>=10;a/=10,s++);if(o!=s){e.e++;if(u[0]==M)u[0]=1}break}else{u[d]+=s;if(u[d]!=M)break;u[d--]=0;s=1}}}for(o=u.length;u[--o]===0;u.pop());}if(e.e>g){e.c=e.e=null}else if(e.e<h){e.c=[e.e=0]}}return e}t.absoluteValue=t.abs=function(){var e=new D(this);if(e.s<0)e.s=1;return e};t.comparedTo=function(e,t){return s(this,new D(e,t))};t.decimalPlaces=t.dp=function(e,t){var i,n,r,o=this;if(e!=null){j(e,0,R);if(t==null)t=y;else j(t,0,8);return P(new D(o),e+o.e+1,t)}if(!(i=o.c))return null;n=((r=i.length-1)-L(this.e/I))*I;if(r=i[r])for(;r%10==0;r/=10,n--);if(n<0)n=0;return n};t.dividedBy=t.div=function(e,t){return _(this,new D(e,t),b,y)};t.dividedToIntegerBy=t.idiv=function(e,t){return _(this,new D(e,t),0,1)};t.exponentiatedBy=t.pow=function(e,t){var i,n,r,o,a,s,l,d,c=this;e=new D(e);if(e.c&&!e.isInteger()){throw Error(S+"Exponent not an integer: "+e)}if(t!=null)t=new D(t);a=e.e>14;if(!c.c||!c.c[0]||c.c[0]==1&&!c.e&&c.c.length==1||!e.c||!e.c[0]){d=new D(Math.pow(+c.valueOf(),a?2-B(e):+e));return t?d.mod(t):d}s=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new D(NaN);n=!s&&c.isInteger()&&t.isInteger();if(n)c=c.mod(t)}else if(e.e>9&&(c.e>0||c.e<-1||(c.e==0?c.c[0]>1||a&&c.c[1]>=24e7:c.c[0]<8e13||a&&c.c[0]<=9999975e7))){r=c.s<0&&B(e)?-0:0;if(c.e>-1)r=1/r;return new D(s?1/r:r)}else if(w){r=k(w/I+2)}if(a){i=new D(.5);l=B(e)}else{l=e%2}if(s)e.s=1;d=new D(m);for(;;){if(l){d=d.times(c);if(!d.c)break;if(r){if(d.c.length>r)d.c.length=r}else if(n){d=d.mod(t)}}if(a){e=e.times(i);P(e,e.e+1,1);if(!e.c[0])break;a=e.e>14;l=B(e)}else{e=E(e/2);if(!e)break;l=e%2}c=c.times(c);if(r){if(c.c&&c.c.length>r)c.c.length=r}else if(n){c=c.mod(t)}}if(n)return d;if(s)d=m.div(d);return t?d.mod(t):r?P(d,w,y,o):d};t.integerValue=function(e){var t=new D(this);if(e==null)e=y;else j(e,0,8);return P(t,t.e+1,e)};t.isEqualTo=t.eq=function(e,t){return s(this,new D(e,t))===0};t.isFinite=function(){return!!this.c};t.isGreaterThan=t.gt=function(e,t){return s(this,new D(e,t))>0};t.isGreaterThanOrEqualTo=t.gte=function(e,t){return(t=s(this,new D(e,t)))===1||t===0};t.isInteger=function(){return!!this.c&&L(this.e/I)>this.c.length-2};t.isLessThan=t.lt=function(e,t){return s(this,new D(e,t))<0};t.isLessThanOrEqualTo=t.lte=function(e,t){return(t=s(this,new D(e,t)))===-1||t===0};t.isNaN=function(){return!this.s};t.isNegative=function(){return this.s<0};t.isPositive=function(){return this.s>0};t.isZero=function(){return!!this.c&&this.c[0]==0};t.minus=function(e,t){var i,n,r,o,a=this,s=a.s;e=new D(e,t);t=e.s;if(!s||!t)return new D(NaN);if(s!=t){e.s=-t;return a.plus(e)}var l=a.e/I,d=e.e/I,c=a.c,u=e.c;if(!l||!d){if(!c||!u)return c?(e.s=-t,e):new D(u?a:NaN);if(!c[0]||!u[0]){return u[0]?(e.s=-t,e):new D(c[0]?a:y==3?-0:0)}}l=L(l);d=L(d);c=c.slice();if(s=l-d){if(o=s<0){s=-s;r=c}else{d=l;r=u}r.reverse();for(t=s;t--;r.push(0));r.reverse()}else{n=(o=(s=c.length)<(t=u.length))?s:t;for(s=t=0;t<n;t++){if(c[t]!=u[t]){o=c[t]<u[t];break}}}if(o)r=c,c=u,u=r,e.s=-e.s;t=(n=u.length)-(i=c.length);if(t>0)for(;t--;c[i++]=0);t=M-1;for(;n>s;){if(c[--n]<u[n]){for(i=n;i&&!c[--i];c[i]=t);--c[i];c[n]+=M}c[n]-=u[n]}for(;c[0]==0;c.splice(0,1),--d);if(!c[0]){e.s=y==3?-1:1;e.c=[e.e=0];return e}return C(e,c,d)};t.modulo=t.mod=function(e,t){var i,n,r=this;e=new D(e,t);if(!r.c||!e.s||e.c&&!e.c[0]){return new D(NaN)}else if(!e.c||r.c&&!r.c[0]){return new D(r)}if(a==9){n=e.s;e.s=1;i=_(r,e,0,3);e.s=n;i.s*=n}else{i=_(r,e,0,a)}e=r.minus(i.times(e));if(!e.c[0]&&a==1)e.s=r.s;return e};t.multipliedBy=t.times=function(e,t){var i,n,r,o,a,s,l,d,c,u,f,h,p,m,g,v=this,_=v.c,b=(e=new D(e,t)).c;if(!_||!b||!_[0]||!b[0]){if(!v.s||!e.s||_&&!_[0]&&!b||b&&!b[0]&&!_){e.c=e.e=e.s=null}else{e.s*=v.s;if(!_||!b){e.c=e.e=null}else{e.c=[0];e.e=0}}return e}n=L(v.e/I)+L(e.e/I);e.s*=v.s;l=_.length;u=b.length;if(l<u)p=_,_=b,b=p,r=l,l=u,u=r;for(r=l+u,p=[];r--;p.push(0));m=M;g=A;for(r=u;--r>=0;){i=0;f=b[r]%g;h=b[r]/g|0;for(a=l,o=r+a;o>r;){d=_[--a]%g;c=_[a]/g|0;s=h*d+c*f;d=f*d+s%g*g+p[o]+i;i=(d/m|0)+(s/g|0)+h*c;p[o--]=d%m}p[o]=i}if(i){++n}else{p.splice(0,1)}return C(e,p,n)};t.negated=function(){var e=new D(this);e.s=-e.s||null;return e};t.plus=function(e,t){var i,n=this,r=n.s;e=new D(e,t);t=e.s;if(!r||!t)return new D(NaN);if(r!=t){e.s=-t;return n.minus(e)}var o=n.e/I,a=e.e/I,s=n.c,l=e.c;if(!o||!a){if(!s||!l)return new D(r/0);if(!s[0]||!l[0])return l[0]?e:new D(s[0]?n:r*0)}o=L(o);a=L(a);s=s.slice();if(r=o-a){if(r>0){a=o;i=l}else{r=-r;i=s}i.reverse();for(;r--;i.push(0));i.reverse()}r=s.length;t=l.length;if(r-t<0)i=l,l=s,s=i,t=r;for(r=0;t;){r=(s[--t]=s[t]+l[t]+r)/M|0;s[t]=M===s[t]?0:s[t]%M}if(r){s=[r].concat(s);++a}return C(e,s,a)};t.precision=t.sd=function(e,t){var i,n,r,o=this;if(e!=null&&e!==!!e){j(e,1,R);if(t==null)t=y;else j(t,0,8);return P(new D(o),e,t)}if(!(i=o.c))return null;r=i.length-1;n=r*I+1;if(r=i[r]){for(;r%10==0;r/=10,n--);for(r=i[0];r>=10;r/=10,n++);}if(e&&o.e+1>n)n=o.e+1;return n};t.shiftedBy=function(e){j(e,-N,N);return this.times("1e"+e)};t.squareRoot=t.sqrt=function(){var e,t,i,n,r,o=this,a=o.c,s=o.s,l=o.e,d=b+4,c=new D("0.5");if(s!==1||!a||!a[0]){return new D(!s||s<0&&(!a||a[0])?NaN:a?o:1/0)}s=Math.sqrt(+o);if(s==0||s==1/0){t=z(a);if((t.length+l)%2==0)t+="0";s=Math.sqrt(t);l=L((l+1)/2)-(l<0||l%2);if(s==1/0){t="1e"+l}else{t=s.toExponential();t=t.slice(0,t.indexOf("e")+1)+l}i=new D(t)}else{i=new D(s+"")}if(i.c[0]){l=i.e;s=l+d;if(s<3)s=0;for(;;){r=i;i=c.times(r.plus(_(o,r,d,1)));if(z(r.c).slice(0,s)===(t=z(i.c)).slice(0,s)){if(i.e<l)--s;t=t.slice(s-3,s+1);if(t=="9999"||!n&&t=="4999"){if(!n){P(r,r.e+b+2,0);if(r.times(r).eq(o)){i=r;break}}d+=4;s+=4;n=1}else{if(!+t||!+t.slice(1)&&t.charAt(0)=="5"){P(i,i.e+b+2,1);e=!i.times(i).eq(o)}break}}}}return P(i,i.e+b+1,y,e)};t.toExponential=function(e,t){if(e!=null){j(e,0,R);e++}return i(this,e,t,1)};t.toFixed=function(e,t){if(e!=null){j(e,0,R);e=e+this.e+1}return i(this,e,t)};t.toFormat=function(e,t){var i=this.toFixed(e,t);if(this.c){var n,r=i.split("."),o=+p.groupSize,a=+p.secondaryGroupSize,s=p.groupSeparator,l=r[0],d=r[1],c=this.s<0,u=c?l.slice(1):l,f=u.length;if(a)n=o,o=a,a=n,f-=n;if(o>0&&f>0){n=f%o||o;l=u.substr(0,n);for(;n<f;n+=o){l+=s+u.substr(n,o)}if(a>0)l+=s+u.slice(n);if(c)l="-"+l}i=d?l+p.decimalSeparator+((a=+p.fractionGroupSize)?d.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+p.fractionGroupSeparator):d):l}return i};t.toFraction=function(e){var t,i,n,r,o,a,s,l,d,c,u,f,h=this,p=h.c;if(e!=null){l=new D(e);if(!l.isInteger()&&(l.c||l.s!==1)||l.lt(m)){throw Error(S+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+e)}}if(!p)return h.toString();i=new D(m);c=n=new D(m);r=d=new D(m);f=z(p);a=i.e=f.length-h.e-1;i.c[0]=O[(s=a%I)<0?I+s:s];e=!e||l.comparedTo(i)>0?a>0?i:c:l;s=g;g=1/0;l=new D(f);d.c[0]=0;for(;;){u=_(l,i,0,1);o=n.plus(u.times(r));if(o.comparedTo(e)==1)break;n=r;r=o;c=d.plus(u.times(o=c));d=o;i=l.minus(u.times(o=i));l=o}o=_(e.minus(n),r,0,1);d=d.plus(o.times(c));n=n.plus(o.times(r));d.s=c.s=h.s;a*=2;t=_(c,r,a,y).minus(h).abs().comparedTo(_(d,n,a,y).minus(h).abs())<1?[c.toString(),r.toString()]:[d.toString(),n.toString()];g=s;return t};t.toNumber=function(){return+this};t.toPrecision=function(e,t){if(e!=null)j(e,1,R);return i(this,e,t,2)};t.toString=function(e){var t,i=this,n=i.s,r=i.e;if(r===null){if(n){t="Infinity";if(n<0)t="-"+t}else{t="NaN"}}else{t=z(i.c);if(e==null){t=r<=d||r>=o?q(t,r):F(t,r,"0")}else{j(e,2,x.length,"Base");t=u(F(t,r,"0"),10,e,n,true)}if(n<0&&i.c[0])t="-"+t}return t};t.valueOf=t.toJSON=function(){var e,t=this,i=t.e;if(i===null)return t.toString();e=z(t.c);e=i<=d||i>=o?q(e,i):F(e,i,"0");return t.s<0?"-"+e:e};t._isBigNumber=true;if(e!=null)D.set(e);return D}function L(e){var t=e|0;return e>0||e===t?t:t-1}function z(e){var t,i,n=1,r=e.length,o=e[0]+"";for(;n<r;){t=e[n++]+"";i=I-t.length;for(;i--;t="0"+t);o+=t}for(r=o.length;o.charCodeAt(--r)===48;);return o.slice(0,r+1||1)}function s(e,t){var i,n,r=e.c,o=t.c,a=e.s,s=t.s,l=e.e,d=t.e;if(!a||!s)return null;i=r&&!r[0];n=o&&!o[0];if(i||n)return i?n?0:-s:a;if(a!=s)return a;i=a<0;n=l==d;if(!r||!o)return n?0:!r^i?1:-1;if(!n)return l>d^i?1:-1;s=(l=r.length)<(d=o.length)?l:d;for(a=0;a<s;a++)if(r[a]!=o[a])return r[a]>o[a]^i?1:-1;return l==d?0:l>d^i?1:-1}function j(e,t,i,n){if(e<t||e>i||e!==(e<0?k(e):E(e))){throw Error(S+(n||"Argument")+(typeof e=="number"?e<t||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}}function l(e){return Object.prototype.toString.call(e)=="[object Array]"}function B(e){var t=e.c.length-1;return L(e.e/I)==t&&e.c[t]%2!=0}function q(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function F(e,t,i){var n,r;if(t<0){for(r=i+".";++t;r+=i);e=r+e}else{n=e.length;if(++t>n){for(r=i,t-=n;--t;r+=i);e+=r}else if(t<n){e=e.slice(0,t)+"."+e.slice(t)}}return e}t=r();t["default"]=t.BigNumber=t;if(true){!(a=function(){return t}.call(n,o,n,i),a!==undefined&&(i.exports=a))}else{}})(this)},function(e,t,i){"use strict";(function(e){(function(v){v.extend(true,window,{Slick:{AutoColumnSize:e}});function e(l){var d,i,n,t={A:65};function e(e){d=e;l=l||200;i=v(d.getContainerNode());i.on("dblclick.autosize",".slick-resizable-handle",s);i.keydown(o);n=document.createElement("canvas").getContext("2d")}function r(){i.off()}function o(e){if(e.ctrlKey&&e.shiftKey&&e.keyCode===t.A){a()}}function a(){var e=i.find(".slick-header-column");var s=d.getColumns();e.each(function(e,t){var i=v(t).data("column");var n=m(t);var r=d.getColumnIndex(i.id);var o=s[r];var a=Math.max(n,c(i,r))+1;a=Math.min(l,a);o.width=a});d.setColumns(s);d.onColumnsResized.notify()}function s(e){var t=v(e.currentTarget).closest(".slick-header-column");var i=t.data("column");if(!i||!i.resizable){return}e.preventDefault();e.stopPropagation();var n=m(t[0]);var r=d.getColumnIndex(i.id);var o=d.getColumns();var a=o[r];var s=Math.max(n,c(i,r))+1;if(s!==a.width){a.width=s;d.setColumns(o);d.onColumnsResized.notify()}}function c(e,t){var i=[];var n=h();var r=d.getData();if(window.Slick.Data&&r instanceof window.Slick.Data.DataView){r=r.getItems()}for(var o=0;o<r.length;o++){i.push(r[o][e.field])}var a=f(i,e,t,r,n);var s=u(n,a);p(n);return s}function u(e,t){var i=v(e.find(".slick-cell"));i.append(t);v(i).find("*").css("position","relative");return i.outerWidth()+1}function f(e,r,o,a,s){var l=0,d=null;var c=r.formatter;v(e).each(function(e,t){var i;if(c){i=v("<span>"+c(e,o,t,r,a[e])+"</span>");t=i.text()||t}var n=t?g(s,t):0;if(n>l){l=n;d=i||t}});return d}function h(){var e=v('<div class="slick-row"><div class="slick-cell"></div></div>');e.find(".slick-cell").css({visibility:"hidden","text-overflow":"initial","white-space":"nowrap"});var t=i.find(".grid-canvas");v(t).append(e);return e}function p(e){v(e).remove()}function m(e){var t,i=e.cloneNode(true);i.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;";e.parentNode.insertBefore(i,e);t=i.offsetWidth;i.parentNode.removeChild(i);return t}function g(e,t){n.font=e.css("font-size")+" "+e.css("font-family");var i=n.measureText(t);return i.width}return{init:e,destroy:r}}})(e)}).call(this,i(0))}])["default"]});